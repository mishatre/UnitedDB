<ПравилаОбмена><ВерсияФормата>2.01</ВерсияФормата><Ид>96d49e1e-4460-4e86-a8af-7494c5918fea    </Ид><Наименование>Управление торговлей --&gt; Учет и отчетность предпринимателя</Наименование><ДатаВремяСоздания>2009-06-29T12:06:31</ДатаВремяСоздания><Источник ВерсияПлатформы="8.0">УправлениеТорговлей</Источник><Приемник ВерсияПлатформы="7.7">Учет и отчетность предпринимателя, ред. 1.2</Приемник><Обработки/><ПравилаКонвертацииОбъектов><Группа><Код>Вспомогательные</Код><Наименование>Вспомогательные</Наименование><Порядок>2200</Порядок><Правило><Код>БезНП</Код><Наименование> --&gt; СправочникСсылка.СтавкиНП</Наименование><Порядок>900</Порядок><НеЗамещать>true</НеЗамещать><Приемник>СправочникСсылка.СтавкиНП</Приемник><Свойства><Свойство Поиск="true"><Код>1</Код><Наименование> --&gt; Ставка</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Ставка" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 0;</ПередВыгрузкой></Свойство><Свойство><Код>2</Код><Наименование> --&gt; Наименование</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = "Без НП";</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>ВспомогательнаяГруппаКонтрагентов</Код><Наименование> --&gt; СправочникСсылка.Контрагенты</Наименование><Порядок>700</Порядок><НеЗамещать>true</НеЗамещать><Приемник>СправочникСсылка.Контрагенты</Приемник><Свойства><Свойство Поиск="true"><Код>2</Код><Наименование> --&gt; Наименование</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = "Управление торговлей";</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование> --&gt; ЭтоГруппа</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Число"/><ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>ВспомогательнаяГруппаНоменклатуры</Код><Наименование> --&gt; СправочникСсылка.Номенклатура</Наименование><Порядок>200</Порядок><НеЗамещать>true</НеЗамещать><Приемник>СправочникСсылка.Номенклатура</Приемник><Свойства><Свойство Поиск="true"><Код>1</Код><Наименование> --&gt; ЭтоГруппа</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>2</Код><Наименование> --&gt; Наименование</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = "Управление торговлей";</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>ДоговорККМ</Код><Наименование> --&gt; СправочникСсылка.Договоры</Наименование><Порядок>800</Порядок><НеЗамещать>true</НеЗамещать><Приемник>СправочникСсылка.Договоры</Приемник><Свойства><Свойство><Код>3</Код><Наименование> --&gt; Авто</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Авто" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>2</Код><Наименование> --&gt; Родитель</Наименование><Порядок>200</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>КассыККМ                                          </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование> --&gt; Наименование</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = "Розничная выручка"</ПередВыгрузкой></Свойство><Свойство><Код>4</Код><Наименование> --&gt; Валюта</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации><ПередВыгрузкой>Значение = Константы.ВалютаРегламентированногоУчета.Получить();</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>ДоговорНТТ</Код><Наименование> --&gt; СправочникСсылка.Договоры</Наименование><Порядок>1100</Порядок><НеЗамещать>true</НеЗамещать><Приемник>СправочникСсылка.Договоры</Приемник><Свойства><Свойство><Код>4</Код><Наименование> --&gt; Авто</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Авто" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>3</Код><Наименование> --&gt; Валюта</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации><ПередВыгрузкой>Значение = Константы.ВалютаРегламентированногоУчета.Получить();</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>2</Код><Наименование> --&gt; Владелец</Наименование><Порядок>200</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>СкладНТТ                                          </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование> --&gt; Наименование</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = "Розничная выручка"</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>ЕдиницыИзмеренийКлассификатор</Код><Наименование>СправочникСсылка.КлассификаторЕдиницИзмерения --&gt; СправочникСсылка.ЕдиницыИзмерений</Наименование><Порядок>500</Порядок><ПриВыгрузке>КлючВыгружаемыхДанных = Источник.Код;</ПриВыгрузке><НеЗамещать>true</НеЗамещать><Источник>СправочникСсылка.КлассификаторЕдиницИзмерения</Источник><Приемник>СправочникСсылка.ЕдиницыИзмерений</Приемник><Свойства><Свойство Поиск="true"><Код>1</Код><Наименование>Код --&gt; Код</Наименование><Порядок>100</Порядок><Источник Имя="Код" Вид="Свойство" Тип="Строка"/><Приемник Имя="Код" Вид="Свойство" Тип="Строка"/></Свойство><Свойство><Код>2</Код><Наименование>Наименование --&gt; Наименование</Наименование><Порядок>200</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство><Свойство><Код>3</Код><Наименование>НаименованиеПолное --&gt; ПолнНаименование</Наименование><Порядок>300</Порядок><Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/><Приемник Имя="ПолнНаименование" Вид="Реквизит" Тип="Строка"/></Свойство></Свойства><Значения/></Правило><Правило><Код>КассыККМ</Код><Наименование>СправочникСсылка.КассыККМ --&gt; СправочникСсылка.Контрагенты</Наименование><Порядок>600</Порядок><НеЗамещать>true</НеЗамещать><Источник>СправочникСсылка.КассыККМ</Источник><Приемник>СправочникСсылка.Контрагенты</Приемник><Свойства><Свойство Поиск="true"><Код>2</Код><Наименование>Наименование --&gt; Наименование</Наименование><Порядок>200</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>3</Код><Наименование> --&gt; Родитель</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>ВспомогательнаяГруппаКонтрагентов                 </КодПравилаКонвертации><ПередВыгрузкой>Значение = "Создать новую группу";</ПередВыгрузкой></Свойство><Свойство><Код>4</Код><Наименование> --&gt; ВидКонтрагента</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="ВидКонтрагента" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыКонтрагентов"/><ПередВыгрузкой>Значение = "Организация";</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>КомиссионноеВознаграждение</Код><Наименование> --&gt; СправочникСсылка.Номенклатура</Наименование><Порядок>300</Порядок><НеЗамещать>true</НеЗамещать><Приемник>СправочникСсылка.Номенклатура</Приемник><Свойства><Свойство Поиск="true"><Код>1</Код><Наименование> --&gt; Наименование</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = "Комиссионное вознаграждение";</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>2</Код><Наименование> --&gt; Родитель</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>ВспомогательнаяГруппаНоменклатуры                 </КодПравилаКонвертации><ПередВыгрузкой>Значение = "Создать новую группу";</ПередВыгрузкой></Свойство><Свойство><Код>3</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "ИныеМатериальныеРасходы";</ПередВыгрузкой></Свойство><Свойство><Код>4</Код><Наименование> --&gt; ТипНоменклатуры</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="ТипНоменклатуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНоменклатуры"/><ПередВыгрузкой>Значение = "Услуга";</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>НоменклатураДопРасходов</Код><Наименование> --&gt; СправочникСсылка.Номенклатура</Наименование><Порядок>300</Порядок><НеЗамещать>true</НеЗамещать><Приемник>СправочникСсылка.Номенклатура</Приемник><Свойства><Свойство><Код>5</Код><Наименование> --&gt; ТипНоменклатуры</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="ТипНоменклатуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНоменклатуры"/><ПередВыгрузкой>Значение = "Услуга";</ПередВыгрузкой></Свойство><Свойство><Код>4</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "ИныеМатериальныеРасходы";</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>2</Код><Наименование> --&gt; Родитель</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>ВспомогательнаяГруппаНоменклатуры                 </КодПравилаКонвертации><ПередВыгрузкой>Значение = "Создать новую группу";</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование> --&gt; Наименование</Наименование><Порядок>100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство></Свойства><Значения/></Правило><Правило><Код>СкладНТТ</Код><Наименование>СправочникСсылка.Склады --&gt; СправочникСсылка.Контрагенты</Наименование><Порядок>1000</Порядок><НеЗамещать>true</НеЗамещать><Источник>СправочникСсылка.Склады</Источник><Приемник>СправочникСсылка.Контрагенты</Приемник><Свойства><Свойство><Код>4</Код><Наименование> --&gt; ВидКонтрагента</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="ВидКонтрагента" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыКонтрагентов"/><ПередВыгрузкой>Значение = "Организация";</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>3</Код><Наименование>Родитель --&gt; Родитель</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>ВспомогательнаяГруппаКонтрагентов                 </КодПравилаКонвертации><ПередВыгрузкой>Значение = "Создать новую группу";</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>2</Код><Наименование>Наименование --&gt; Наименование</Наименование><Порядок>200</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство></Свойства><Значения/></Правило><Правило><Код>ТоварыОгруженные</Код><Наименование> --&gt; СправочникСсылка.МестаХранения</Наименование><Порядок>400</Порядок><НеЗамещать>true</НеЗамещать><Приемник>СправочникСсылка.МестаХранения</Приемник><Свойства><Свойство Поиск="true"><Код>1</Код><Наименование> --&gt; Наименование</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = "Товары отгруженные";</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>УслугаСтороннейОрганизации</Код><Наименование> --&gt; СправочникСсылка.Номенклатура</Наименование><Порядок>100</Порядок><НеЗамещать>true</НеЗамещать><Источник>СправочникСсылка.СтатьиЗатрат</Источник><Приемник>СправочникСсылка.Номенклатура</Приемник><Свойства><Свойство Поиск="true"><Код>2</Код><Наименование> --&gt; Наименование</Наименование><Порядок>200</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>3</Код><Наименование> --&gt; Родитель</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>ВспомогательнаяГруппаНоменклатуры                 </КодПравилаКонвертации><ПередВыгрузкой>Значение = "Создать новую группу";</ПередВыгрузкой></Свойство><Свойство><Код>6</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "ИныеМатериальныеРасходы";</ПередВыгрузкой></Свойство><Свойство><Код>7</Код><Наименование> --&gt; ТипНоменклатуры</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="ТипНоменклатуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНоменклатуры"/><ПередВыгрузкой>Значение = "Услуга";</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило></Группа><Группа><Код>Документы</Код><Наименование>Документы</Наименование><Порядок>2100</Порядок><Группа><Код>Возвраты</Код><Наименование>Возвраты</Наименование><Порядок>300</Порядок><Правило><Код>ВозвратОтПокупателя</Код><Наименование>ДокументСсылка.ВозвратТоваровОтПокупателя --&gt; ДокументСсылка.ВозвратОтПокупателя</Наименование><Порядок>200</Порядок><Источник>ДокументСсылка.ВозвратТоваровОтПокупателя</Источник><Приемник>ДокументСсылка.ВозвратОтПокупателя</Приемник><Свойства><Свойство><Код>37</Код><Наименование>ОтразитьВКнигеПокупок --&gt; ВариантОтраженияВозврата</Наименование><Порядок>1800</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ВариантОтраженияВозврата" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>36</Код><Наименование>ПокупателемВыставляетсяСчетФактураНаВозврат --&gt; ПокупателемВыставляетсяСчетФактураНаВозврат</Наименование><Порядок>1700</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ПокупателемВыставляетсяСчетФактураНаВозврат" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>34</Код><Наименование>СкладКомпании --&gt; Склад</Наименование><Порядок>1600</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Свойство><Код>33</Код><Наименование>СкладКомпании --&gt; Договор</Наименование><Порядок>1500</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/></Свойство><Свойство><Код>31</Код><Наименование>СуммаВключаетНДС --&gt; СуммаВклНДС</Наименование><Порядок>1300</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="СуммаВклНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>30</Код><Наименование> --&gt; Курс</Наименование><Порядок>1200</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>29</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>1100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>28</Код><Наименование> --&gt; ДокументОтгрузки</Наименование><Порядок>1000</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДокументОтгрузки" Вид="Реквизит"/><ПриВыгрузке>ВидДок = ВходящиеДанные.ДокументОтгрузки.Метаданные().Имя;
Если ВидДок = "РеализацияТоваровУслуг" Тогда
	ИмяПКО = "ПродажаТоваров";
	
ИначеЕсли ВидДок = "ОтчетКомиссионераОПродажах" Тогда
	ИмяПКО = "РеализацияОтчетКомиссионераОПродажах";
	
ИначеЕсли ВидДок = "ОтчетКомитентуОПродажах" Тогда
	ИмяПКО = "ОтчетКомитенту";
	
ИначеЕсли ВидДок = "ОтчетОРозничныхПродажах" Тогда
	//ИмяПКО = "ОтчетККМ";
	Отказ = Истина;
	
Иначе
	Отказ = Истина;
КонецЕсли;</ПриВыгрузке></Свойство><Свойство><Код>20</Код><Наименование>ТипЦен --&gt; ТипЦен</Наименование><Порядок>200</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/><КодПравилаКонвертации>ТипыЦен                                           </КодПравилаКонвертации></Свойство><Свойство><Код>21</Код><Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование><Порядок>300</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>23</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>500</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>24</Код><Наименование>Комментарий --&gt; Комментарий</Наименование><Порядок>600</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>27</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>900</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>25</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>700</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Группа><Код>1</Код><Наименование>Товары --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><Свойство><Код>2</Код><Наименование>Номенклатура --&gt; Номенклатура</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации></Свойство><Свойство><Код>3</Код><Наименование> --&gt; Количество</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>6</Код><Наименование>Цена --&gt; Цена</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>8</Код><Наименование>Сумма --&gt; Сумма</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>9</Код><Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>10</Код><Наименование>СуммаНДС --&gt; СуммаНДС</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>17</Код><Наименование>ГТД --&gt; ГТД</Наименование><Порядок>1600</Порядок><Источник/><Приемник Имя="ГТД" Вид="Реквизит" Тип="СправочникСсылка.ГТД"/><КодПравилаКонвертации>ГТД                                               </КодПравилаКонвертации><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("СтранаПроисхождения");
ИсходящиеДанные.СтранаПроисхождения = ОбъектКоллекции.СтранаПроисхождения;</ПередВыгрузкой></Свойство><Свойство><Код>18</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>1700</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/></Свойство><Свойство><Код>19</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>1800</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ОбъектКоллекции.ВидДеятельности;</ПередВыгрузкой></Свойство><Свойство><Код>35</Код><Наименование> --&gt; ДокументПоступления</Наименование><Порядок>1900</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><ПриВыгрузке>ИсходящиеДанные = Новый Структура("ДокументПоступления");
ИсходящиеДанные.ДокументПоступления = ОбъектКоллекции.ДокументПоступления;
Выполнить(Алгоритмы.НайтиПКОДляДокументаПоступления);</ПриВыгрузке></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>ВозвратПоставщику</Код><Наименование>ДокументСсылка.ВозвратТоваровПоставщику --&gt; ДокументСсылка.ВозвратПоставщику</Наименование><Порядок>100</Порядок><ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("Договор", Источник.ДоговорКонтрагента);
ИсходящиеДанные.Вставить("СкладКомпании", Источник.Склад);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Источник>ДокументСсылка.ВозвратТоваровПоставщику</Источник><Приемник>ДокументСсылка.ВозвратПоставщику</Приемник><Свойства><Свойство><Код>29</Код><Наименование>ПоставщикуВыставляетсяСчетФактураНаВозврат --&gt; ПоставщикуВыставляетсяСчетФактураНаВозврат</Наименование><Порядок>1800</Порядок><Источник Имя="ПоставщикуВыставляетсяСчетФактураНаВозврат" Вид="Реквизит" Тип="Булево"/><Приемник Имя="ПоставщикуВыставляетсяСчетФактураНаВозврат" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>28</Код><Наименование>СкладКомпании --&gt; Склад</Наименование><Порядок>1700</Порядок><Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/><Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Свойство><Код>27</Код><Наименование> --&gt; ОблагаетсяНДС</Наименование><Порядок>1600</Порядок><Источник/><Приемник Имя="ОблагаетсяНДС" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности.ОблагаетсяНДС;</ПередВыгрузкой></Свойство><Свойство><Код>26</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>1500</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство><Свойство><Код>25</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>1400</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>24</Код><Наименование> --&gt; Курс</Наименование><Порядок>1300</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.КурсВзаиморасчетов/?(Источник.КратностьВзаиморасчетов=0,1,Источник.КратностьВзаиморасчетов);</ПередВыгрузкой></Свойство><Свойство><Код>23</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>1200</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>21</Код><Наименование>СуммаВключаетНДС --&gt; СуммаВклНДС</Наименование><Порядок>1000</Порядок><Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/><Приемник Имя="СуммаВклНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>13</Код><Наименование>Комментарий --&gt; Комментарий</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>14</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>300</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>15</Код><Наименование>ТипЦен --&gt; ТипЦен</Наименование><Порядок>400</Порядок><Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатурыКонтрагентов"/><Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/><КодПравилаКонвертации>ТипыЦен                                           </КодПравилаКонвертации></Свойство><Свойство><Код>20</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>900</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>19</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 9);
Значение = ДобавитьКПрефиксу(Значение, "В", 10, "Справа");</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>18</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>700</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>16</Код><Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование><Порядок>500</Порядок><Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/><Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Число"/></Свойство><Группа><Код>1</Код><Наименование>Товары --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>АвтоподборПартий = Параметры.АвтоподборПартий;
Параметры.АвтоподборПартий = Истина;

ИсходящиеДанные = Новый Структура("Док,ТабличнаяЧасть,ИмяНоменклатуры,ИмяТЧ");
ИсходящиеДанные.Док 			= Источник;
ИсходящиеДанные.ТабличнаяЧасть	= Источник.Товары;
ИсходящиеДанные.ИмяТЧ			= "Товары";
Выполнить(Алгоритмы.ДобавитьДокументыПоступленияВТабличнуюЧасть);

Параметры.АвтоподборПартий = АвтоподборПартий;

КоллекцияОбъектов.Колонки.Добавить("Услуга");
КоллекцияОбъектов.Колонки.Добавить("ГТД");
КоллекцияОбъектов.Колонки.Добавить("СтранаПроисхождения");
Для каждого Товар из КоллекцияОбъектов Цикл
	Товар.Услуга = Ложь;
	Товар.СтранаПроисхождения = Товар.СерияНоменклатуры.СтранаПроисхождения;
	Товар.ГТД = Товар.СерияНоменклатуры.НомерГТД;
КонецЦикла;</ПередОбработкойВыгрузки><Свойство><Код>2</Код><Наименование>Номенклатура --&gt; Номенклатура</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации></Свойство><Свойство><Код>3</Код><Наименование>Количество --&gt; Количество</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>4</Код><Наименование>Цена --&gt; Цена</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ОбъектКоллекции.Сумма / ?(ОбъектКоллекции.Количество = 0, 1, ОбъектКоллекции.Количество);</ПередВыгрузкой></Свойство><Свойство><Код>5</Код><Наименование>Сумма --&gt; Сумма</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>6</Код><Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>7</Код><Наименование>СуммаНДС --&gt; СуммаНДС</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>10</Код><Наименование>ДокументПоступления --&gt; ДокументПоступления</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><ПриВыгрузке>ИсходящиеДанные = Новый Структура("ДокументПоступления");
ИсходящиеДанные.ДокументПоступления = ОбъектКоллекции.ДокументПоступления;
Выполнить(Алгоритмы.НайтиПКОДляДокументаПоступления);</ПриВыгрузке></Свойство><Свойство><Код>11</Код><Наименование>ГТД --&gt; ГТД</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="ГТД" Вид="Реквизит" Тип="СправочникСсылка.ГТД"/><КодПравилаКонвертации>ГТД                                               </КодПравилаКонвертации><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("СтранаПроисхождения");
ИсходящиеДанные.СтранаПроисхождения = ОбъектКоллекции.СтранаПроисхождения;</ПередВыгрузкой></Свойство><Свойство><Код>12</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>1100</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = ?(ОбъектКоллекции.Номенклатура.Услуга, "Услуга", "Товар");</ПередВыгрузкой></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>ВозвратПоставщикуИзНТТ</Код><Наименование>ДокументСсылка.ВозвратТоваровПоставщику --&gt; ДокументСсылка.ВозвратПоставщику</Наименование><Порядок>100</Порядок><ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("Договор", Источник.ДоговорКонтрагента);
ИсходящиеДанные.Вставить("СкладКомпании", Источник.Склад);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Источник>ДокументСсылка.ВозвратТоваровПоставщикуИзНТТ</Источник><Приемник>ДокументСсылка.ВозвратПоставщику</Приемник><Свойства><Свойство><Код>1</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>1500</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство><Свойство><Код>2</Код><Наименование> --&gt; Курс</Наименование><Порядок>1300</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.КурсВзаиморасчетов/?(Источник.КратностьВзаиморасчетов=0,1,Источник.КратностьВзаиморасчетов);</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>3</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 9);
Значение = ДобавитьКПрефиксу(Значение, "Н", 10, "Справа");</ПередВыгрузкой></Свойство><Свойство><Код>4</Код><Наименование> --&gt; ОблагаетсяНДС</Наименование><Порядок>1600</Порядок><Источник/><Приемник Имя="ОблагаетсяНДС" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности.ОблагаетсяНДС;</ПередВыгрузкой></Свойство><Свойство><Код>5</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>1200</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>6</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>700</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>7</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>1400</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>8</Код><Наименование>Комментарий --&gt; Комментарий</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>9</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>300</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>10</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>900</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>11</Код><Наименование>СкладКомпании --&gt; Склад</Наименование><Порядок>1700</Порядок><Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/><Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Свойство><Код>12</Код><Наименование>СуммаВключаетНДС --&gt; СуммаВклНДС</Наименование><Порядок>1000</Порядок><Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/><Приемник Имя="СуммаВклНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>13</Код><Наименование>ТипЦен --&gt; ТипЦен</Наименование><Порядок>400</Порядок><Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатурыКонтрагентов"/><Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/><КодПравилаКонвертации>ТипыЦен                                           </КодПравилаКонвертации></Свойство><Свойство><Код>24</Код><Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование><Порядок>500</Порядок><Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/><Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Число"/></Свойство><Группа><Код>14</Код><Наименование>Товары --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>АвтоподборПартий = Параметры.АвтоподборПартий;
Параметры.АвтоподборПартий = Истина;

ИсходящиеДанные = Новый Структура("Док,ТабличнаяЧасть,ИмяНоменклатуры,ИмяТЧ");
ИсходящиеДанные.Док 			= Источник;
ИсходящиеДанные.ТабличнаяЧасть	= Источник.Товары;
ИсходящиеДанные.ИмяТЧ			= "Товары";
Выполнить(Алгоритмы.ДобавитьДокументыПоступленияВТабличнуюЧасть);

Параметры.АвтоподборПартий = АвтоподборПартий;

КоллекцияОбъектов.Колонки.Добавить("Услуга");
КоллекцияОбъектов.Колонки.Добавить("ГТД");
КоллекцияОбъектов.Колонки.Добавить("СтранаПроисхождения");
Для каждого Товар из КоллекцияОбъектов Цикл
	Товар.Услуга = Ложь;
	Товар.СтранаПроисхождения = Товар.СерияНоменклатуры.СтранаПроисхождения;
	Товар.ГТД = Товар.СерияНоменклатуры.НомерГТД;
КонецЦикла;</ПередОбработкойВыгрузки><Свойство><Код>15</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>1100</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = ?(ОбъектКоллекции.Номенклатура.Услуга, "Услуга", "Товар");</ПередВыгрузкой></Свойство><Свойство><Код>16</Код><Наименование>ГТД --&gt; ГТД</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="ГТД" Вид="Реквизит" Тип="СправочникСсылка.ГТД"/><КодПравилаКонвертации>ГТД                                               </КодПравилаКонвертации><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("СтранаПроисхождения");
ИсходящиеДанные.СтранаПроисхождения = ОбъектКоллекции.СтранаПроисхождения;</ПередВыгрузкой></Свойство><Свойство><Код>17</Код><Наименование>ДокументПоступления --&gt; ДокументПоступления</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><ПриВыгрузке>ИсходящиеДанные = Новый Структура("ДокументПоступления");
ИсходящиеДанные.ДокументПоступления = ОбъектКоллекции.ДокументПоступления;
Выполнить(Алгоритмы.НайтиПКОДляДокументаПоступления);</ПриВыгрузке></Свойство><Свойство><Код>18</Код><Наименование>Количество --&gt; Количество</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>19</Код><Наименование>Номенклатура --&gt; Номенклатура</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации></Свойство><Свойство><Код>20</Код><Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>21</Код><Наименование>Сумма --&gt; Сумма</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>22</Код><Наименование>СуммаНДС --&gt; СуммаНДС</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>23</Код><Наименование>Цена --&gt; Цена</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ОбъектКоллекции.Сумма / ?(ОбъектКоллекции.Количество = 0, 1, ОбъектКоллекции.Количество);</ПередВыгрузкой></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>ВозвратТоваровКомиссионером</Код><Наименование>ДокументСсылка.ВозвратТоваровОтПокупателя --&gt; ДокументСсылка.ПеремещениеМатериальныхРесурсов</Наименование><Порядок>300</Порядок><Источник>ДокументСсылка.ВозвратТоваровОтПокупателя</Источник><Приемник>ДокументСсылка.ПеремещениеМатериальныхРесурсов</Приемник><Свойства><Свойство><Код>15</Код><Наименование>СкладКомпании --&gt; Склад</Наименование><Порядок>1100</Порядок><Источник/><Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>ТоварыОгруженные                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = "Товары отгруженные";</ПередВыгрузкой></Свойство><Свойство><Код>14</Код><Наименование> --&gt; СкладПолучатель</Наименование><Порядок>1000</Порядок><Источник Имя="СкладОрдер" Вид="Реквизит"/><Приемник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Свойство><Код>9</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>7</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>300</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство Поиск="true"><Код>6</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Группа><Код>1</Код><Наименование>Товары --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник Имя="Товары" Вид="ТабличнаяЧасть"/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><Свойство><Код>2</Код><Наименование>Номенклатура --&gt; Номенклатура</Наименование><Порядок>100</Порядок><Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><Приемник Имя="Номенклатура" Вид="Реквизит"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации></Свойство><Свойство><Код>3</Код><Наименование> --&gt; Количество</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ОбъектКоллекции.Количество * ОбъектКоллекции.Коэффициент;</ПередВыгрузкой></Свойство><Свойство><Код>4</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "Товар";</ПередВыгрузкой></Свойство></Группа></Свойства><Значения/></Правило></Группа><Группа><Код>Денежные средства</Код><Наименование>Денежные средства</Наименование><Порядок>200</Порядок><Группа><Код>КассовыеДокументы</Код><Наименование>Кассовые документы</Наименование><Порядок>800</Порядок><Правило><Код>ПриходныйОрдер</Код><Наименование>ДокументСсылка.ПриходныйКассовыйОрдер --&gt; ДокументСсылка.ПриходныйОрдер</Наименование><Порядок>200</Порядок><ПередВыгрузкой>ТекстЗапроса =
"ВЫБРАТЬ
|	ПлДокТаблЧ.КурсВзаиморасчетовПлан КАК Курс,
|	ПлДокТаблЧ.КратностьВзаиморасчетов КАК Кратность,
|	ПлДокТаблЧ.СуммаНДС
|ИЗ
|	Документ.ПриходныйКассовыйОрдер.РасшифровкаПлатежа КАК ПлДокТаблЧ
|
|ГДЕ
|	ПлДокТаблЧ.Ссылка = &amp;Ссылка";

Запрос = Новый Запрос;
Запрос.Текст = ТекстЗапроса;
Запрос.УстановитьПараметр("Ссылка", Источник);
Результат = Запрос.Выполнить();
Если Результат.Пустой() Тогда
	СуммаНДС = 0;
	Курс = 1;

Иначе
	ТаблицаСтрокЗапроса = Результат.Выгрузить();
	СуммаНДС = ТаблицаСтрокЗапроса.Итог("СуммаНДС");
	
	СтрокаЗапроса = Результат.Выбрать();
	СтрокаЗапроса.Следующий();
	Курс = СтрокаЗапроса.Курс / ?(СтрокаЗапроса.Кратность = 0, 1, СтрокаЗапроса.Кратность);
	
	Если Курс = 0 Тогда
		Курс = РегистрыСведений.КурсыВалют.ПолучитьПоследнее(Источник.Дата, Новый Структура("Валюта", Источник.ВалютаДокумента)).Курс;
		Кратность = РегистрыСведений.КурсыВалют.ПолучитьПоследнее(Источник.Дата, Новый Структура("Валюта", Источник.ВалютаДокумента)).Кратность;
		Курс = Курс / ?(Кратность = 0, 1, Кратность);
	КонецЕсли;
КонецЕсли;

ВходящиеДанные = Новый Структура("НДС, Курс");
ВходящиеДанные.НДС = СуммаНДС;
ВходящиеДанные.Курс = Курс;</ПередВыгрузкой><Источник>ДокументСсылка.ПриходныйКассовыйОрдер</Источник><Приемник>ДокументСсылка.ПриходныйОрдер</Приемник><Свойства><Свойство><Код>1</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>17</Код><Наименование> --&gt; НДС</Наименование><Порядок>1700</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="НДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>16</Код><Наименование>Плательщик --&gt; ФизЛицо</Наименование><Порядок>1600</Порядок><Источник Имя="Контрагент" Вид="Реквизит"/><Приемник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.Работники"/><КодПравилаКонвертации>Работники                                         </КодПравилаКонвертации><ПередВыгрузкой>Если Источник.ВидОперации &lt;&gt; Перечисления.ВидыОперацийПКО.ВозвратДенежныхСредствПодотчетником Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>15</Код><Наименование> --&gt; Курс</Наименование><Порядок>1500</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>14</Код><Наименование>ВидОперации --&gt; ВидВзаиморасчетов</Наименование><Порядок>1400</Порядок><Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПКО"/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><КодПравилаКонвертации>ВидыВзаиморасчетовПКО                             </КодПравилаКонвертации></Свойство><Свойство><Код>13</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>1300</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации><ПриВыгрузке>Если НЕ ЗначениеЗаполнено(Источник.Контрагент) Тогда
	Отказ = Истина;

ИначеЕсли Источник.Контрагент.Метаданные().Имя = "КассыККМ" Тогда
	ИмяПКО = "ДоговорККМ";
	ИсходящиеДанные = Новый Структура("Владелец");
	ИсходящиеДанные.Владелец = Источник.Контрагент;
	
ИначеЕсли Источник.Контрагент.Метаданные().Имя = "Склады" Тогда
	ИмяПКО = "ДоговорНТТ";
	ИсходящиеДанные = Новый Структура("Владелец");
	ИсходящиеДанные.Владелец = Источник.Контрагент;
	
Иначе
	ИмяПКО = "Договоры";
КонецЕсли;</ПриВыгрузке></Свойство><Свойство><Код>12</Код><Наименование>Плательщик --&gt; Контрагент</Наименование><Порядок>1200</Порядок><Источник Имя="Контрагент" Вид="Реквизит"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации><ПередВыгрузкой>Если (Источник.ВидОперации &lt;&gt; Перечисления.ВидыОперацийПКО.ОплатаПокупателя) и
	 (Источник.ВидОперации &lt;&gt; Перечисления.ВидыОперацийПКО.ПриходДенежныхСредствРозничнаяВыручка) и
	 (Источник.ВидОперации &lt;&gt; Перечисления.ВидыОперацийПКО.ВозвратДенежныхСредствПоставщиком) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><ПриВыгрузке>Если Источник.Контрагент.Метаданные().Имя = "КассыККМ" Тогда
	ИмяПКО = "КассыККМ";
	
ИначеЕсли Источник.Контрагент.Метаданные().Имя = "Склады" Тогда
	ИмяПКО = "СкладНТТ";
	
Иначе
	ИмяПКО = "Контрагенты";
КонецЕсли;</ПриВыгрузке></Свойство><Свойство><Код>11</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>1100</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>10</Код><Наименование>СуммаДокумента --&gt; Сумма</Наименование><Порядок>1000</Порядок><Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>9</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>900</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>8</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 10);</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>7</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>700</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>6</Код><Наименование>Приложение --&gt; Приложение</Наименование><Порядок>600</Порядок><Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>5</Код><Наименование>Основание --&gt; Основание</Наименование><Порядок>500</Порядок><Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>4</Код><Наименование>ПринятоОт --&gt; ПринятоОт</Наименование><Порядок>400</Порядок><Источник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/><Приемник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>2</Код><Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование><Порядок>200</Порядок><Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство></Свойства><Значения/></Правило><Правило><Код>РасходныйОрдер</Код><Наименование>ДокументСсылка.РасходныйКассовыйОрдер --&gt; ДокументСсылка.РасходныйОрдер</Наименование><Порядок>100</Порядок><Источник>ДокументСсылка.РасходныйКассовыйОрдер</Источник><Приемник>ДокументСсылка.РасходныйОрдер</Приемник><Свойства><Свойство><Код>1</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>2</Код><Наименование>Выдать --&gt; Выдать</Наименование><Порядок>200</Порядок><Источник Имя="Выдать" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Выдать" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>3</Код><Наименование>Основание --&gt; Основание</Наименование><Порядок>300</Порядок><Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>4</Код><Наименование>Приложение --&gt; Приложение</Наименование><Порядок>400</Порядок><Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>5</Код><Наименование>ПоДокументу --&gt; ПоДокументу</Наименование><Порядок>500</Порядок><Источник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/><Приемник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>6</Код><Наименование>Проведен --&gt; ДатаДок</Наименование><Порядок>600</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство Поиск="true"><Код>7</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 10);</ПередВыгрузкой></Свойство><Свойство><Код>8</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>800</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>9</Код><Наименование>СуммаДокумента --&gt; Сумма</Наименование><Порядок>900</Порядок><Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>10</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>1000</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>11</Код><Наименование>Получатель --&gt; Контрагент</Наименование><Порядок>1100</Порядок><Источник Имя="Контрагент" Вид="Реквизит"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации><ПередВыгрузкой>Если (Источник.ВидОперации &lt;&gt; Перечисления.ВидыОперацийРКО.ОплатаПоставщику) и
	 (Источник.ВидОперации &lt;&gt; Перечисления.ВидыОперацийРКО.ВозвратДенежныхСредствПокупателю) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>12</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>1200</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>13</Код><Наименование>ВидОперации --&gt; ВидВзаиморасчетов</Наименование><Порядок>1300</Порядок><Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРКО"/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><КодПравилаКонвертации>ВидыВзаиморасчетовРКО                             </КодПравилаКонвертации></Свойство><Свойство><Код>14</Код><Наименование> --&gt; Курс</Наименование><Порядок>1400</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("ИмяДокумента", Источник.Метаданные().Имя);
Выполнить(Алгоритмы.ПолучитьКурсПлатежногоДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>15</Код><Наименование> --&gt; ФизЛицо</Наименование><Порядок>1500</Порядок><Источник Имя="Контрагент" Вид="Реквизит"/><Приемник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.Работники"/><КодПравилаКонвертации>Работники                                         </КодПравилаКонвертации><ПередВыгрузкой>Если Источник.ВидОперации &lt;&gt; Перечисления.ВидыОперацийРКО.ВыдачаДенежныхСредствПодотчетнику Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>16</Код><Наименование> --&gt; ЗаПериод</Наименование><Порядок>1600</Порядок><Источник/><Приемник Имя="ЗаПериод" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 2;</ПередВыгрузкой></Свойство><Свойство><Код>17</Код><Наименование> --&gt; ДатаПериода</Наименование><Порядок>1700</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаПериода" Вид="Реквизит" Тип="Дата"/></Свойство></Свойства><Значения/></Правило></Группа><Группа><Код>ПоступлениеБезналичныхДенежныхСредств</Код><Наименование>Поступление безналичных денежных средств</Наименование><Порядок>1000</Порядок><Правило><Код>АккредитивПолученный</Код><Наименование>ДокументСсылка.АккредитивПолученный --&gt; ДокументСсылка.СтрокаВыпискиПриход</Наименование><Порядок>400</Порядок><ПередВыгрузкой>Если не Источник.Оплачено Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.АккредитивПолученный</Источник><Приемник>ДокументСсылка.СтрокаВыпискиПриход</Приемник><Свойства><Свойство><Код>12</Код><Наименование> --&gt; Курс</Наименование><Порядок>1200</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("ИмяДокумента", Источник.Метаданные().Имя);
Выполнить(Алгоритмы.ПолучитьКурсПлатежногоДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>11</Код><Наименование>СуммаДокумента --&gt; Сумма</Наименование><Порядок>1100</Порядок><Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>10</Код><Наименование>ВидОперации --&gt; ВидВзаиморасчетов</Наименование><Порядок>1000</Порядок><Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеБезналичныхДенежныхСредств"/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><КодПравилаКонвертации>ВидыВзаиморасчетовВыпискаПриход                   </КодПравилаКонвертации></Свойство><Свойство><Код>1</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>2</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>200</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>3</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 9);
Значение = ДобавитьКПрефиксу(Значение, "А", 10, "Справа");</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование>ДатаОплаты --&gt; ДатаДок</Наименование><Порядок>400</Порядок><Источник Имя="ДатаОплаты" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>5</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>6</Код><Наименование>ДоговорКонтрагента --&gt; Договор</Наименование><Порядок>600</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>7</Код><Наименование>СчетОрганизации --&gt; БанковскийСчет</Наименование><Порядок>700</Порядок><Источник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><Приемник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации></Свойство><Свойство><Код>8</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>800</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>9</Код><Наименование> --&gt; ДокументПодтверждающийФактОплаты</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="ДокументПодтверждающийФактОплаты" Вид="Реквизит"/><ПередВыгрузкой>ТипПриемника = "Строка"; Значение = СокрЛП(Источник.НомерВходящегоДокумента) + " (" + Формат(Источник.ДатаВходящегоДокумента, "ДФ=dd.MM.yyyy") + ")";</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>ИнкассовоеПоручениеПереданное</Код><Наименование>ДокументСсылка.ИнкассовоеПоручениеПереданное --&gt; ДокументСсылка.СтрокаВыпискиПриход</Наименование><Порядок>500</Порядок><ПередВыгрузкой>Если не Источник.Оплачено Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.ИнкассовоеПоручениеПереданное</Источник><Приемник>ДокументСсылка.СтрокаВыпискиПриход</Приемник><Свойства><Свойство><Код>12</Код><Наименование>СуммаДокумента --&gt; Сумма</Наименование><Порядок>1200</Порядок><Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>11</Код><Наименование>ВидОперации --&gt; ВидВзаиморасчетов</Наименование><Порядок>1100</Порядок><Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеБезналичныхДенежныхСредств"/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><КодПравилаКонвертации>ВидыВзаиморасчетовВыпискаПриход                   </КодПравилаКонвертации></Свойство><Свойство><Код>10</Код><Наименование> --&gt; ДокументПодтверждающийФактОплаты</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="ДокументПодтверждающийФактОплаты" Вид="Реквизит"/><ПередВыгрузкой>ТипПриемника = "Строка"; Значение = ОбщегоНазначения.ПолучитьНомерНаПечать(Источник) + " (" + Формат(Источник.Дата, "ДФ=dd.MM.yyyy") + ")";</ПередВыгрузкой></Свойство><Свойство><Код>13</Код><Наименование>НазначениеПлатежа --&gt; Содержание</Наименование><Порядок>1300</Порядок><Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>14</Код><Наименование> --&gt; Курс</Наименование><Порядок>1400</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("ИмяДокумента", Источник.Метаданные().Имя);
Выполнить(Алгоритмы.ПолучитьКурсПлатежногоДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>1</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>100</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>2</Код><Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование><Порядок>200</Порядок><Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/><Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>3</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 9);
Значение = ДобавитьКПрефиксу(Значение, "И", 10, "Справа");</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>5</Код><Наименование>ДатаОплаты --&gt; ДатаДок</Наименование><Порядок>500</Порядок><Источник Имя="ДатаОплаты" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>6</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>600</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>7</Код><Наименование>ДоговорКонтрагента --&gt; Договор</Наименование><Порядок>700</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>8</Код><Наименование>СчетОрганизации --&gt; БанковскийСчет</Наименование><Порядок>800</Порядок><Источник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><Приемник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации></Свойство><Свойство><Код>9</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>900</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство></Свойства><Значения/></Правило><Правило><Код>ОбъявлениеНаВзносНаличными</Код><Наименование>ДокументСсылка.ОбъявлениеНаВзносНаличными --&gt; ДокументСсылка.СтрокаВыпискиПриход</Наименование><Порядок>600</Порядок><ПередВыгрузкой>Если не Источник.Оплачено Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.ОбъявлениеНаВзносНаличными</Источник><Приемник>ДокументСсылка.СтрокаВыпискиПриход</Приемник><Свойства><Свойство><Код>10</Код><Наименование> --&gt; Курс</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>9</Код><Наименование>СуммаДокумента --&gt; Сумма</Наименование><Порядок>900</Порядок><Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>8</Код><Наименование> --&gt; ВидВзаиморасчетов</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><ПередВыгрузкой>Значение = "БезЗадолженности";</ПередВыгрузкой></Свойство><Свойство><Код>7</Код><Наименование> --&gt; ДокументПодтверждающийФактОплаты</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="ДокументПодтверждающийФактОплаты" Вид="Реквизит"/><ПередВыгрузкой>ТипПриемника = "Строка"; Значение = ОбщегоНазначения.ПолучитьНомерНаПечать(Источник) + " (" + Формат(Источник.Дата, "ДФ=dd.MM.yyyy") + ")";</ПередВыгрузкой></Свойство><Свойство><Код>6</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>600</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>5</Код><Наименование>СчетОрганизации --&gt; БанковскийСчет</Наименование><Порядок>500</Порядок><Источник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><Приемник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации></Свойство><Свойство><Код>4</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>3</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>300</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>2</Код><Наименование> --&gt; ДатаДок</Наименование><Порядок>200</Порядок><Источник Имя="ДатаОплаты" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 9);
Значение = ДобавитьКПрефиксу(Значение, "В", 10, "Справа");</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>ПлатежноеПоручениеВходящее</Код><Наименование>ДокументСсылка.СтрокаВыпискиПриход --&gt; ДокументСсылка.СтрокаВыпискиПриход</Наименование><Порядок>300</Порядок><ПередВыгрузкой>Если не Источник.Оплачено Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.ПлатежноеПоручениеВходящее</Источник><Приемник>ДокументСсылка.СтрокаВыпискиПриход</Приемник><Свойства><Свойство><Код>16</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>1200</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>15</Код><Наименование>ВидОперации --&gt; ВидВзаиморасчетов</Наименование><Порядок>1100</Порядок><Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеБезналичныхДенежныхСредств"/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><КодПравилаКонвертации>ВидыВзаиморасчетовВыпискаПриход                   </КодПравилаКонвертации></Свойство><Свойство><Код>13</Код><Наименование> --&gt; Курс</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("ИмяДокумента", Источник.Метаданные().Имя);
Выполнить(Алгоритмы.ПолучитьКурсПлатежногоДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>11</Код><Наименование>СуммаДокумента --&gt; Сумма</Наименование><Порядок>900</Порядок><Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>1</Код><Наименование>БанковскийСчет --&gt; БанковскийСчет</Наименование><Порядок>100</Порядок><Источник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><Приемник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации></Свойство><Свойство><Код>17</Код><Наименование> --&gt; ДокументПодтверждающийФактОплаты</Наименование><Порядок>1300</Порядок><Источник/><Приемник Имя="ДокументПодтверждающийФактОплаты" Вид="Реквизит"/><ПередВыгрузкой>ТипПриемника = "Строка"; Значение = СокрЛП(Источник.НомерВходящегоДокумента) + " (" + Формат(Источник.ДатаВходящегоДокумента, "ДФ=dd.MM.yyyy") + ")";</ПередВыгрузкой></Свойство><Свойство><Код>2</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>600</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>300</Порядок><Источник Имя="ДатаОплаты" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство Поиск="true"><Код>5</Код><Наименование>Номер --&gt; НомерДок</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 9);
Значение = ДобавитьКПрефиксу(Значение, "П", 10, "Справа");</ПередВыгрузкой></Свойство><Свойство><Код>6</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>7</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>700</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>8</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>800</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство></Свойства><Значения/></Правило><Правило><Код>ПлатежноеТребованиеВыставленное</Код><Наименование>ДокументСсылка.ПлатежноеТребованиеВыставленное --&gt; ДокументСсылка.СтрокаВыпискиПриход</Наименование><Порядок>700</Порядок><ПередВыгрузкой>Если не Источник.Оплачено Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.ПлатежноеТребованиеВыставленное</Источник><Приемник>ДокументСсылка.СтрокаВыпискиПриход</Приемник><Свойства><Свойство><Код>6</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>600</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>5</Код><Наименование>ДатаОплаты --&gt; ДатаДок</Наименование><Порядок>500</Порядок><Источник Имя="ДатаОплаты" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 9);
Значение = ДобавитьКПрефиксу(Значение, "Т", 10, "Справа");</ПередВыгрузкой></Свойство><Свойство><Код>3</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>2</Код><Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование><Порядок>200</Порядок><Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/><Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>1</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>100</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>7</Код><Наименование>ДоговорКонтрагента --&gt; Договор</Наименование><Порядок>700</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>8</Код><Наименование>СчетОрганизации --&gt; БанковскийСчет</Наименование><Порядок>800</Порядок><Источник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><Приемник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации></Свойство><Свойство><Код>9</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>900</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>10</Код><Наименование> --&gt; ДокументПодтверждающийФактОплаты</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="ДокументПодтверждающийФактОплаты" Вид="Реквизит"/><ПередВыгрузкой>ТипПриемника = "Строка"; Значение = ОбщегоНазначения.ПолучитьНомерНаПечать(Источник) + " (" + Формат(Источник.Дата, "ДФ=dd.MM.yyyy") + ")";</ПередВыгрузкой></Свойство><Свойство><Код>14</Код><Наименование> --&gt; Курс</Наименование><Порядок>1400</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("ИмяДокумента", Источник.Метаданные().Имя);
Выполнить(Алгоритмы.ПолучитьКурсПлатежногоДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>13</Код><Наименование>НазначениеПлатежа --&gt; Содержание</Наименование><Порядок>1300</Порядок><Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>12</Код><Наименование>СуммаДокумента --&gt; Сумма</Наименование><Порядок>1200</Порядок><Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>11</Код><Наименование>ВидОперации --&gt; ВидВзаиморасчетов</Наименование><Порядок>1100</Порядок><Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеБезналичныхДенежныхСредств"/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><КодПравилаКонвертации>ВидыВзаиморасчетовВыпискаПриход                   </КодПравилаКонвертации></Свойство></Свойства><Значения/></Правило><Правило><Код>ПлатежныйОрдерПоступлениеДенежныхСредств</Код><Наименование>ДокументСсылка.ПлатежныйОрдерПоступлениеДенежныхСредств --&gt; ДокументСсылка.СтрокаВыпискиПриход</Наименование><Порядок>800</Порядок><Источник>ДокументСсылка.ПлатежныйОрдерПоступлениеДенежныхСредств</Источник><Приемник>ДокументСсылка.СтрокаВыпискиПриход</Приемник><Свойства><Свойство><Код>14</Код><Наименование> --&gt; Содержание</Наименование><Порядок>1400</Порядок><Источник/><Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Значение = "";
Если ЗначениеЗаполнено(Источник.РасчетныйДокумент) тогда
	Если ОбщегоНазначения.ЕстьРеквизитДокумента("НазначениеПлатежа", Источник.РасчетныйДокумент.Метаданные()) Тогда
		Значение = Источник.РасчетныйДокумент.НазначениеПлатежа;
	КонецЕсли;
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>13</Код><Наименование> --&gt; НазначениеПлатежа</Наименование><Порядок>1300</Порядок><Источник/><Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Значение = "";
Если ЗначениеЗаполнено(Источник.РасчетныйДокумент) тогда
	Если ОбщегоНазначения.ЕстьРеквизитДокумента("НазначениеПлатежа", Источник.РасчетныйДокумент.Метаданные()) Тогда
		Значение = Источник.РасчетныйДокумент.НазначениеПлатежа;
	КонецЕсли;
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>12</Код><Наименование> --&gt; Курс</Наименование><Порядок>1200</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("ИмяДокумента", Источник.Метаданные().Имя);
Выполнить(Алгоритмы.ПолучитьКурсПлатежногоДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>11</Код><Наименование>СуммаДокумента --&gt; Сумма</Наименование><Порядок>1100</Порядок><Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>10</Код><Наименование>ВидОперации --&gt; ВидВзаиморасчетов</Наименование><Порядок>1000</Порядок><Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеБезналичныхДенежныхСредств"/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><КодПравилаКонвертации>ВидыВзаиморасчетовВыпискаПриход                   </КодПравилаКонвертации></Свойство><Свойство><Код>9</Код><Наименование> --&gt; ДокументПодтверждающийФактОплаты</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="ДокументПодтверждающийФактОплаты" Вид="Реквизит"/><ПередВыгрузкой>Док = Источник.РасчетныйДокумент;

Если НЕ ЗначениеЗаполнено(Док) Тогда
	Отказ = Истина;
	
ИначеЕсли (Док.Метаданные().Имя = "ПлатежноеПоручениеВходящее") или
		  (Док.Метаданные().Имя = "АккредитивПолученный") Тогда
	ТипПриемника = "Строка";
	Значение = СокрЛП(Док.НомерВходящегоДокумента) + " (" + Формат(Док.ДатаВходящегоДокумента, "ДФ=dd.MM.yyyy") + ")";
	
Иначе
	ТипПриемника = "Строка";
	Значение = ОбщегоНазначения.ПолучитьНомерНаПечать(Док) + " (" + Формат(Док.Дата, "ДФ=dd.MM.yyyy") + ")";
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>8</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>800</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>7</Код><Наименование>СчетОрганизации --&gt; БанковскийСчет</Наименование><Порядок>700</Порядок><Источник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><Приемник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации></Свойство><Свойство><Код>6</Код><Наименование>ДоговорКонтрагента --&gt; Договор</Наименование><Порядок>600</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>5</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>400</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство Поиск="true"><Код>3</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 9);
Значение = ДобавитьКПрефиксу(Значение, "О", 10, "Справа");</ПередВыгрузкой></Свойство><Свойство><Код>2</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>1</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>100</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство></Свойства><Значения/></Правило></Группа><Группа><Код>СписаниеБезналичныхДенежныхСредств</Код><Наименование>Списание безналичных денежных средств</Наименование><Порядок>900</Порядок><Правило><Код>АккредитивПереданный</Код><Наименование>ДокументСсылка.АккредитивПереданный --&gt; ДокументСсылка.СтрокаВыпискиРасход</Наименование><Порядок>600</Порядок><ПередВыгрузкой>Если не Источник.Оплачено Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.АккредитивПереданный</Источник><Приемник>ДокументСсылка.СтрокаВыпискиРасход</Приемник><Свойства><Свойство><Код>2</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>200</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>1</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>13</Код><Наименование> --&gt; Курс</Наименование><Порядок>1300</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("ИмяДокумента", Источник.Метаданные().Имя);
Выполнить(Алгоритмы.ПолучитьКурсПлатежногоДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>14</Код><Наименование>ДатаОплаты --&gt; ДатаПериода</Наименование><Порядок>1400</Порядок><Источник Имя="ДатаОплаты" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаПериода" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>15</Код><Наименование> --&gt; ЗаПериод</Наименование><Порядок>1500</Порядок><Источник/><Приемник Имя="ЗаПериод" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 2;</ПередВыгрузкой></Свойство><Свойство><Код>16</Код><Наименование> --&gt; ДокументПодтверждающийФактОплаты</Наименование><Порядок>1600</Порядок><Источник/><Приемник Имя="ДокументПодтверждающийФактОплаты" Вид="Реквизит"/><ПередВыгрузкой>ТипПриемника = "Строка"; Значение = ОбщегоНазначения.ПолучитьНомерНаПечать(Источник) + " (" + Формат(Источник.Дата, "ДФ=dd.MM.yyyy") + ")";</ПередВыгрузкой></Свойство><Свойство><Код>3</Код><Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование><Порядок>300</Порядок><Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/><Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 9);
Значение = ДобавитьКПрефиксу(Значение, "А", 10, "Справа");</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>5</Код><Наименование>ДатаОплаты --&gt; ДатаДок</Наименование><Порядок>500</Порядок><Источник Имя="ДатаОплаты" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>6</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>600</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>7</Код><Наименование>ДоговорКонтрагента --&gt; Договор</Наименование><Порядок>700</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>8</Код><Наименование>СчетОрганизации --&gt; БанковскийСчет</Наименование><Порядок>800</Порядок><Источник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><Приемник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации></Свойство><Свойство><Код>9</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>900</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>10</Код><Наименование>СуммаДокумента --&gt; Сумма</Наименование><Порядок>1000</Порядок><Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>11</Код><Наименование>ВидОперации --&gt; ВидВзаиморасчетов</Наименование><Порядок>1100</Порядок><Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеБезналичныхДенежныхСредств"/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><КодПравилаКонвертации>ВидыВзаиморасчетовВыпискаРасход                   </КодПравилаКонвертации></Свойство><Свойство><Код>12</Код><Наименование>НазначениеПлатежа --&gt; Содержание</Наименование><Порядок>1200</Порядок><Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/></Свойство></Свойства><Значения/></Правило><Правило><Код>ИнкассовоеПоручениеПолученное</Код><Наименование>ДокументСсылка.ИнкассовоеПоручениеПолученное --&gt; ДокументСсылка.СтрокаВыпискиРасход</Наименование><Порядок>700</Порядок><ПередВыгрузкой>Если не Источник.Оплачено Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.ИнкассовоеПоручениеПолученное</Источник><Приемник>ДокументСсылка.СтрокаВыпискиРасход</Приемник><Свойства><Свойство><Код>3</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>2</Код><Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование><Порядок>200</Порядок><Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/><Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>1</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>100</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>16</Код><Наименование> --&gt; ЗаПериод</Наименование><Порядок>1600</Порядок><Источник/><Приемник Имя="ЗаПериод" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 2;</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 9);
Значение = ДобавитьКПрефиксу(Значение, "И", 10, "Справа");</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>5</Код><Наименование>ДатаОплаты --&gt; ДатаДок</Наименование><Порядок>500</Порядок><Источник Имя="ДатаОплаты" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>6</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>600</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>7</Код><Наименование>ДоговорКонтрагента --&gt; Договор</Наименование><Порядок>700</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>8</Код><Наименование>СчетОрганизации --&gt; БанковскийСчет</Наименование><Порядок>800</Порядок><Источник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><Приемник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации></Свойство><Свойство><Код>9</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>900</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>10</Код><Наименование>СуммаДокумента --&gt; Сумма</Наименование><Порядок>1000</Порядок><Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>11</Код><Наименование> --&gt; ДокументПодтверждающийФактОплаты</Наименование><Порядок>1100</Порядок><Источник/><Приемник Имя="ДокументПодтверждающийФактОплаты" Вид="Реквизит"/><ПередВыгрузкой>ТипПриемника = "Строка"; Значение = СокрЛП(Источник.НомерВходящегоДокумента) + " (" + Формат(Источник.ДатаВходящегоДокумента, "ДФ=dd.MM.yyyy") + ")";</ПередВыгрузкой></Свойство><Свойство><Код>12</Код><Наименование>ВидОперации --&gt; ВидВзаиморасчетов</Наименование><Порядок>1200</Порядок><Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеБезналичныхДенежныхСредств"/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><КодПравилаКонвертации>ВидыВзаиморасчетовВыпискаРасход                   </КодПравилаКонвертации></Свойство><Свойство><Код>13</Код><Наименование>НазначениеПлатежа --&gt; Содержание</Наименование><Порядок>1300</Порядок><Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>14</Код><Наименование> --&gt; Курс</Наименование><Порядок>1400</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("ИмяДокумента", Источник.Метаданные().Имя);
Выполнить(Алгоритмы.ПолучитьКурсПлатежногоДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>15</Код><Наименование>ДатаОплаты --&gt; ДатаПериода</Наименование><Порядок>1500</Порядок><Источник Имя="ДатаОплаты" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаПериода" Вид="Реквизит" Тип="Дата"/></Свойство></Свойства><Значения/></Правило><Правило><Код>ПлатежноеПоручениеИсходящее</Код><Наименование>ДокументСсылка.СтрокаВыпискиРасход --&gt; ДокументСсылка.СтрокаВыпискиРасход</Наименование><Порядок>500</Порядок><ПередВыгрузкой>Если не Источник.Оплачено Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.ПлатежноеПоручениеИсходящее</Источник><Приемник>ДокументСсылка.СтрокаВыпискиРасход</Приемник><Свойства><Свойство><Код>1</Код><Наименование>БанковскийСчет --&gt; БанковскийСчет</Наименование><Порядок>100</Порядок><Источник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><Приемник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации></Свойство><Свойство><Код>3</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>300</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>4</Код><Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование><Порядок>400</Порядок><Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/><Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>5</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>500</Порядок><Источник Имя="ДатаОплаты" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство Поиск="true"><Код>6</Код><Наименование>Номер --&gt; НомерДок</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 9);
Значение = ДобавитьКПрефиксу(Значение, "П", 10, "Справа");</ПередВыгрузкой></Свойство><Свойство><Код>7</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>700</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>8</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>800</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>9</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>900</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>10</Код><Наименование>СуммаДокумента --&gt; Сумма</Наименование><Порядок>1000</Порядок><Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>11</Код><Наименование>ВидОперации --&gt; ВидВзаиморасчетов</Наименование><Порядок>1100</Порядок><Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийППИсходящее"/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><КодПравилаКонвертации>ВидыОперацийППИ                                   </КодПравилаКонвертации></Свойство><Свойство><Код>13</Код><Наименование> --&gt; Курс</Наименование><Порядок>1300</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("ИмяДокумента", Источник.Метаданные().Имя);
Выполнить(Алгоритмы.ПолучитьКурсПлатежногоДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>14</Код><Наименование> --&gt; ДокументПодтверждающийФактОплаты</Наименование><Порядок>1400</Порядок><Источник/><Приемник Имя="ДокументПодтверждающийФактОплаты" Вид="Реквизит"/><КодПравилаКонвертации>ПлатежноеПоручение                                </КодПравилаКонвертации><ПередВыгрузкой>Значение = Источник;
ТипПриемника = "ДокументСсылка.ПлатежноеПоручение";</ПередВыгрузкой></Свойство><Свойство><Код>15</Код><Наименование> --&gt; ЗаПериод</Наименование><Порядок>1500</Порядок><Источник/><Приемник Имя="ЗаПериод" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 2;</ПередВыгрузкой></Свойство><Свойство><Код>16</Код><Наименование>ДатаОплаты --&gt; ДатаПериода</Наименование><Порядок>1600</Порядок><Источник Имя="ДатаОплаты" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаПериода" Вид="Реквизит" Тип="Дата"/></Свойство></Свойства><Значения/></Правило><Правило><Код>ПлатежноеТребованиеПолученное</Код><Наименование>ДокументСсылка.ПлатежноеТребованиеПолученное --&gt; ДокументСсылка.СтрокаВыпискиРасход</Наименование><Порядок>800</Порядок><ПередВыгрузкой>Если не Источник.Оплачено Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.ПлатежноеТребованиеПолученное</Источник><Приемник>ДокументСсылка.СтрокаВыпискиРасход</Приемник><Свойства><Свойство><Код>16</Код><Наименование> --&gt; ЗаПериод</Наименование><Порядок>1600</Порядок><Источник/><Приемник Имя="ЗаПериод" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 2;</ПередВыгрузкой></Свойство><Свойство><Код>15</Код><Наименование>ДатаОплаты --&gt; ДатаПериода</Наименование><Порядок>1500</Порядок><Источник Имя="ДатаОплаты" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаПериода" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>14</Код><Наименование> --&gt; Курс</Наименование><Порядок>1400</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("ИмяДокумента", Источник.Метаданные().Имя);
Выполнить(Алгоритмы.ПолучитьКурсПлатежногоДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>1</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>100</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>2</Код><Наименование>НазначениеПлатежа --&gt; НазначениеПлатежа</Наименование><Порядок>200</Порядок><Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/><Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>3</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>13</Код><Наименование>НазначениеПлатежа --&gt; Содержание</Наименование><Порядок>1300</Порядок><Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>12</Код><Наименование>ВидОперации --&gt; ВидВзаиморасчетов</Наименование><Порядок>1200</Порядок><Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеБезналичныхДенежныхСредств"/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><КодПравилаКонвертации>ВидыВзаиморасчетовВыпискаРасход                   </КодПравилаКонвертации></Свойство><Свойство><Код>11</Код><Наименование> --&gt; ДокументПодтверждающийФактОплаты</Наименование><Порядок>1100</Порядок><Источник/><Приемник Имя="ДокументПодтверждающийФактОплаты" Вид="Реквизит"/><ПередВыгрузкой>ТипПриемника = "Строка"; Значение = СокрЛП(Источник.НомерВходящегоДокумента) + " (" + Формат(Источник.ДатаВходящегоДокумента, "ДФ=dd.MM.yyyy") + ")";</ПередВыгрузкой></Свойство><Свойство><Код>10</Код><Наименование>СуммаДокумента --&gt; Сумма</Наименование><Порядок>1000</Порядок><Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>9</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>900</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>8</Код><Наименование>СчетОрганизации --&gt; БанковскийСчет</Наименование><Порядок>800</Порядок><Источник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><Приемник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации></Свойство><Свойство><Код>7</Код><Наименование>ДоговорКонтрагента --&gt; Договор</Наименование><Порядок>700</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>6</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>600</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>5</Код><Наименование>ДатаОплаты --&gt; ДатаДок</Наименование><Порядок>500</Порядок><Источник Имя="ДатаОплаты" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 9);
Значение = ДобавитьКПрефиксу(Значение, "Т", 10, "Справа");</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>ПлатежныйОрдерСписаниеДенежныхСредств</Код><Наименование>ДокументСсылка.ПлатежныйОрдерСписаниеДенежныхСредств --&gt; ДокументСсылка.СтрокаВыпискиРасход</Наименование><Порядок>900</Порядок><Источник>ДокументСсылка.ПлатежныйОрдерСписаниеДенежныхСредств</Источник><Приемник>ДокументСсылка.СтрокаВыпискиРасход</Приемник><Свойства><Свойство><Код>2</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>3</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 9);
Значение = ДобавитьКПрефиксу(Значение, "О", 10, "Справа");</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>400</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>5</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>6</Код><Наименование>ДоговорКонтрагента --&gt; Договор</Наименование><Порядок>600</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>7</Код><Наименование>СчетОрганизации --&gt; БанковскийСчет</Наименование><Порядок>700</Порядок><Источник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><Приемник Имя="БанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации></Свойство><Свойство><Код>8</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>800</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>9</Код><Наименование>СуммаДокумента --&gt; Сумма</Наименование><Порядок>900</Порядок><Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>10</Код><Наименование> --&gt; ДокументПодтверждающийФактОплаты</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="ДокументПодтверждающийФактОплаты" Вид="Реквизит"/><ПередВыгрузкой>Док = Источник.РасчетныйДокумент;

Если НЕ ЗначениеЗаполнено(Док) Тогда
	Отказ = Истина;
	
ИначеЕсли Док.Метаданные().Имя = "ПлатежноеПоручениеИсходящее" Тогда
	ТипПриемника = "ДокументСсылка.ПлатежноеПоручение";
	Значение = Док;
	
ИначеЕсли Док.Метаданные().Имя = "АккредитивПереданный" Тогда
	ТипПриемника = "Строка";
	Значение = ОбщегоНазначения.ПолучитьНомерНаПечать(Док) + " (" + Формат(Док.Дата, "ДФ=dd.MM.yyyy") + ")";
	
Иначе
	ТипПриемника = "Строка";
	Значение = СокрЛП(Док.НомерВходящегоДокумента) + " (" + Формат(Док.ДатаВходящегоДокумента, "ДФ=dd.MM.yyyy") + ")";
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>1</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>100</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>11</Код><Наименование>ВидОперации --&gt; ВидВзаиморасчетов</Наименование><Порядок>1100</Порядок><Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеБезналичныхДенежныхСредств"/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><КодПравилаКонвертации>ВидыВзаиморасчетовВыпискаРасход                   </КодПравилаКонвертации></Свойство><Свойство><Код>12</Код><Наименование> --&gt; Курс</Наименование><Порядок>1200</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("ИмяДокумента", Источник.Метаданные().Имя);
Выполнить(Алгоритмы.ПолучитьКурсПлатежногоДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>13</Код><Наименование>Дата --&gt; ДатаПериода</Наименование><Порядок>1300</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаПериода" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>14</Код><Наименование> --&gt; ЗаПериод</Наименование><Порядок>1400</Порядок><Источник/><Приемник Имя="ЗаПериод" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 2;</ПередВыгрузкой></Свойство><Свойство><Код>15</Код><Наименование> --&gt; НазначениеПлатежа</Наименование><Порядок>1500</Порядок><Источник/><Приемник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Значение = "";
Если ЗначениеЗаполнено(Источник.РасчетныйДокумент) тогда
	Если ОбщегоНазначения.ЕстьРеквизитДокумента("НазначениеПлатежа", Источник.РасчетныйДокумент.Метаданные()) Тогда
		Значение = Источник.РасчетныйДокумент.НазначениеПлатежа;
	КонецЕсли;
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>16</Код><Наименование> --&gt; Содержание</Наименование><Порядок>1600</Порядок><Источник/><Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Значение = "";
Если ЗначениеЗаполнено(Источник.РасчетныйДокумент) тогда
	Если ОбщегоНазначения.ЕстьРеквизитДокумента("НазначениеПлатежа", Источник.РасчетныйДокумент.Метаданные()) Тогда
		Значение = Источник.РасчетныйДокумент.НазначениеПлатежа;
	КонецЕсли;
КонецЕсли;</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило></Группа></Группа><Группа><Код>Поступление</Код><Наименование>Поступление</Наименование><Порядок>100</Порядок><Правило><Код>АвансовыйОтчетИМР</Код><Наименование> --&gt; ДокументСсылка.ИныеМатериальныеРасходы</Наименование><Порядок>1000</Порядок><Приемник>ДокументСсылка.ИныеМатериальныеРасходы</Приемник><Свойства><Свойство><Код>14</Код><Наименование> --&gt; Склад</Наименование><Порядок>800</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Свойство><Код>13</Код><Наименование> --&gt; УказатьСтоимость</Наименование><Порядок>700</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="УказатьСтоимость" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>12</Код><Наименование> --&gt; ВариантРаспределения</Наименование><Порядок>600</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ВариантРаспределения" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>11</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>500</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>10</Код><Наименование> --&gt; Автор</Наименование><Порядок>400</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>9</Код><Наименование> --&gt; ДатаДок</Наименование><Порядок>300</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Группа><Код>1</Код><Наименование> --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><Свойство><Код>2</Код><Наименование> --&gt; Номенклатура</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации></Свойство><Свойство><Код>3</Код><Наименование> --&gt; ДокументПоступления</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><КодПравилаКонвертации>АвансовыйОтчетТовары                              </КодПравилаКонвертации></Свойство><Свойство><Код>7</Код><Наименование> --&gt; ОблагаетсяНДС</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="ОблагаетсяНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>6</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/></Свойство><Свойство><Код>5</Код><Наименование> --&gt; Количество</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>4</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>АвансовыйОтчетОплата</Код><Наименование> --&gt; ДокументСсылка.СтрокаАвансовогоОтчета</Наименование><Порядок>1200</Порядок><Приемник>ДокументСсылка.СтрокаАвансовогоОтчета</Приемник><Свойства><Свойство Поиск="true"><Код>16</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>1600</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/></Свойство><Свойство><Код>15</Код><Наименование> --&gt; Основание</Наименование><Порядок>1500</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>14</Код><Наименование> --&gt; ФизЛицо</Наименование><Порядок>1400</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.Работники"/><КодПравилаКонвертации>Работники                                         </КодПравилаКонвертации></Свойство><Свойство><Код>13</Код><Наименование> --&gt; ВидДокВходящий</Наименование><Порядок>1300</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ВидДокВходящий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>12</Код><Наименование> --&gt; ДатаДокВходящий</Наименование><Порядок>1200</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДокВходящий" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>11</Код><Наименование> --&gt; НомерДокВходящий</Наименование><Порядок>1100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="НомерДокВходящий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>10</Код><Наименование> --&gt; Курс</Наименование><Порядок>1000</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>9</Код><Наименование> --&gt; ВидВзаиморасчетов</Наименование><Порядок>900</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/></Свойство><Свойство><Код>8</Код><Наименование> --&gt; Сумма</Наименование><Порядок>800</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>7</Код><Наименование> --&gt; Валюта</Наименование><Порядок>700</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>6</Код><Наименование> --&gt; Договор</Наименование><Порядок>600</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>5</Код><Наименование> --&gt; Контрагент</Наименование><Порядок>500</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>4</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>400</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>3</Код><Наименование> --&gt; Автор</Наименование><Порядок>300</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование> --&gt; ДатаДок</Наименование><Порядок>100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство></Свойства><Значения/></Правило><Правило><Код>АвансовыйОтчетПрочее</Код><Наименование> --&gt; ДокументСсылка.ПрочиеРасходыРасчеты</Наименование><Порядок>1100</Порядок><Приемник>ДокументСсылка.ПрочиеРасходыРасчеты</Приемник><Свойства><Группа><Код>1</Код><Наименование> --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><Свойство><Код>2</Код><Наименование> --&gt; Расход</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Расход" Вид="Реквизит" Тип="СправочникСсылка.ПрочиеРасходы"/><КодПравилаКонвертации>ПрочиеРасходы                                     </КодПравилаКонвертации></Свойство><Свойство><Код>3</Код><Наименование> --&gt; Сумма</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>22</Код><Наименование> --&gt; СтавкаНДС</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>23</Код><Наименование> --&gt; СуммаНДС</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство></Группа><Свойство><Код>12</Код><Наименование> --&gt; УчитыватьНДС</Наименование><Порядок>1000</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>11</Код><Наименование> --&gt; Курс</Наименование><Порядок>900</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>10</Код><Наименование> --&gt; Валюта</Наименование><Порядок>800</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>9</Код><Наименование> --&gt; ОблагаетсяНДС</Наименование><Порядок>700</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ОблагаетсяНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>8</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>600</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.ВидДеятельности;</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>7</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>500</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>6</Код><Наименование> --&gt; Автор</Наименование><Порядок>400</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование> --&gt; ДатаДок</Наименование><Порядок>200</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>13</Код><Наименование> --&gt; СуммаВклНДС</Наименование><Порядок>1100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="СуммаВклНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>16</Код><Наименование> --&gt; НомерДокВходящий</Наименование><Порядок>1400</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="НомерДокВходящий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>17</Код><Наименование> --&gt; ДатаДокВходящий</Наименование><Порядок>1500</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДокВходящий" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>18</Код><Наименование> --&gt; ФизЛицо</Наименование><Порядок>1600</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.Работники"/><КодПравилаКонвертации>Работники                                         </КодПравилаКонвертации></Свойство><Свойство><Код>19</Код><Наименование> --&gt; ВидДокВходящий</Наименование><Порядок>1700</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ВидДокВходящий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>20</Код><Наименование> --&gt; ВидВзаиморасчетов</Наименование><Порядок>1800</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/></Свойство><Свойство><Код>21</Код><Наименование> --&gt; ТипЦен</Наименование><Порядок>1900</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/><КодПравилаКонвертации>ТипыЦен                                           </КодПравилаКонвертации></Свойство><Свойство><Код>24</Код><Наименование> --&gt; Контрагент</Наименование><Порядок>2000</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>25</Код><Наименование> --&gt; Договор</Наименование><Порядок>2100</Порядок><Источник/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.Контрагент.ОсновнойДоговорКонтрагента;</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>АвансовыйОтчетТовары</Код><Наименование> --&gt; ДокументСсылка.ПоступлениеТМЦ</Наименование><Порядок>900</Порядок><Приемник>ДокументСсылка.ПоступлениеТМЦ</Приемник><Свойства><Группа><Код>1</Код><Наименование> --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><Свойство><Код>11</Код><Наименование> --&gt; ГТД</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="ГТД" Вид="Реквизит" Тип="СправочникСсылка.ГТД"/><КодПравилаКонвертации>ГТД                                               </КодПравилаКонвертации><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("СтранаПроисхождения");
ИсходящиеДанные.СтранаПроисхождения = ОбъектКоллекции.СтранаПроисхождения;</ПередВыгрузкой></Свойство><Свойство><Код>8</Код><Наименование> --&gt; СуммаНДС</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>7</Код><Наименование> --&gt; СтавкаНДС</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>6</Код><Наименование> --&gt; Сумма</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>5</Код><Наименование> --&gt; Цена</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>4</Код><Наименование> --&gt; Количество</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>3</Код><Наименование> --&gt; Номенклатура</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации></Свойство><Свойство><Код>2</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/></Свойство></Группа><Свойство><Код>32</Код><Наименование> --&gt; Договор</Наименование><Порядок>2200</Порядок><Источник/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.Контрагент.ОсновнойДоговорКонтрагента;</ПередВыгрузкой></Свойство><Свойство><Код>31</Код><Наименование> --&gt; Контрагент</Наименование><Порядок>2100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>30</Код><Наименование> --&gt; ТипЦен</Наименование><Порядок>2000</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/><КодПравилаКонвертации>ТипыЦен                                           </КодПравилаКонвертации></Свойство><Свойство><Код>29</Код><Наименование> --&gt; ФизЛицо</Наименование><Порядок>1900</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.Работники"/><КодПравилаКонвертации>Работники                                         </КодПравилаКонвертации></Свойство><Свойство><Код>28</Код><Наименование> --&gt; ВидВзаиморасчетов</Наименование><Порядок>1800</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/></Свойство><Свойство><Код>27</Код><Наименование> --&gt; ВидДокВходящий</Наименование><Порядок>1700</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ВидДокВходящий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>26</Код><Наименование> --&gt; ДатаДокВходящий</Наименование><Порядок>1600</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДокВходящий" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>25</Код><Наименование> --&gt; НомерДокВходящий</Наименование><Порядок>1500</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="НомерДокВходящий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>24</Код><Наименование> --&gt; Склад</Наименование><Порядок>1400</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Свойство><Код>21</Код><Наименование> --&gt; СуммаВклНДС</Наименование><Порядок>1100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="СуммаВклНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>20</Код><Наименование> --&gt; УчитыватьНДС</Наименование><Порядок>1000</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>19</Код><Наименование> --&gt; Курс</Наименование><Порядок>900</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>18</Код><Наименование> --&gt; Валюта</Наименование><Порядок>800</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>17</Код><Наименование> --&gt; ОблагаетсяНДС</Наименование><Порядок>700</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ОблагаетсяНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>16</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>600</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.ВидДеятельности;</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>15</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>500</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>14</Код><Наименование> --&gt; Автор</Наименование><Порядок>400</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>12</Код><Наименование> --&gt; ДатаДок</Наименование><Порядок>200</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство></Свойства><Значения/></Правило><Правило><Код>ИныеМатериальныеДопРасходы</Код><Наименование>ДокументСсылка.ПоступлениеДопРасходов --&gt; ДокументСсылка.ИныеМатериальныеРасходы</Наименование><Порядок>500</Порядок><Источник>ДокументСсылка.ПоступлениеДопРасходов</Источник><Приемник>ДокументСсылка.ИныеМатериальныеРасходы</Приемник><Свойства><Свойство Поиск="true"><Код>1</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>18</Код><Наименование> --&gt; УказатьСтоимость</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="УказатьСтоимость" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 2;</ПередВыгрузкой></Свойство><Свойство><Код>17</Код><Наименование> --&gt; ВариантРаспределения</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="ВариантРаспределения" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 2;</ПередВыгрузкой></Свойство><Свойство><Код>16</Код><Наименование> --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>14</Код><Наименование> --&gt; ДатаДок</Наименование><Порядок>300</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Группа><Код>2</Код><Наименование> --&gt; ТабличнаяЧасть</Наименование><Порядок>200</Порядок><Источник Имя="Товары" Вид="ТабличнаяЧасть"/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("ВидМатериальногоРесурса");
КоллекцияОбъектов.Колонки.Добавить("Номенклатура");
КоллекцияОбъектов.Колонки.Добавить("Поставка");
КоллекцияОбъектов.Колонки.Добавить("Сумма");
КоллекцияОбъектов.Колонки.Добавить("ДокументПоступления");

ТабЧасть = РегистрыНакопления.ПартииТоваровНаСкладах.ВыбратьПоРегистратору(Источник);
Пока ТабЧасть.Следующий() Цикл
	СтрокаКоллекции                     = КоллекцияОбъектов.Добавить();
	СтрокаКоллекции.ВидМатериальногоРесурса = "ИныеМатериальныеРасходы";
	СтрокаКоллекции.Сумма				= ТабЧасть.Стоимость;
	СтрокаКоллекции.Поставка			= ТабЧасть.ДокументОприходования;
	СтрокаКоллекции.Номенклатура		= Справочники.Номенклатура.ПустаяСсылка();
КонецЦикла;

КоллекцияОбъектов.Свернуть("ВидМатериальногоРесурса,Номенклатура,Поставка,ДокументПоступления", "Сумма");</ПередОбработкойВыгрузки><Свойство><Код>3</Код><Наименование> --&gt; Номенклатура</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>НоменклатураДопРасходов                           </КодПравилаКонвертации><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("Наименование");
ИсходящиеДанные.Наименование = Источник.Содержание;
Значение = Источник.Содержание;</ПередВыгрузкой></Свойство><Свойство><Код>8</Код><Наименование> --&gt; Сумма</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>9</Код><Наименование> --&gt; Поставка</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="Поставка" Вид="Реквизит"/><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("ДокументПоступления");
ИсходящиеДанные.ДокументПоступления = ОбъектКоллекции.Поставка;
Выполнить(Алгоритмы.НайтиПКОДляДокументаПоступления);</ПередВыгрузкой></Свойство><Свойство><Код>10</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "ИныеМатериальныеРасходы";</ПередВыгрузкой></Свойство><Свойство><Код>4</Код><Наименование> --&gt; ДокументПоступления</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><КодПравилаКонвертации>ПоступлениеТМЦдопРасходы                          </КодПравилаКонвертации><ПередВыгрузкой>Значение = Источник;</ПередВыгрузкой></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>ИныеМатериальныеРасходы</Код><Наименование>ДокументСсылка.ПоступлениеТоваров --&gt; ДокументСсылка.ИныеМатериальныеРасходы</Наименование><Порядок>200</Порядок><ПередВыгрузкой>ВходящиеДанные = Новый Структура;

ВидДок = Источник.Метаданные().Имя;
Если (ВидДок = "ПоступлениеТоваровУслуг") или (ВидДок = "ВозвратТоваровОтПокупателя") Тогда
	ВходящиеДанные.Вставить("Склад", Источник.СкладОрдер);
	
Иначе
	ВходящиеДанные.Вставить("Склад", Источник.Склад);
КонецЕсли;

КоличествоМатериальныхРасходовВУслугах = 0;
Для каждого СтрТЧ из Источник.Услуги Цикл
	Если СтрТЧ.СтатьяЗатрат.ВидЗатрат = Перечисления.ВидыЗатрат.Материальные Тогда
		КоличествоМатериальныхРасходовВУслугах = КоличествоМатериальныхРасходовВУслугах + 1;
		Прервать;
	КонецЕсли;
КонецЦикла;

Если КоличествоМатериальныхРасходовВУслугах = 0 Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.ПоступлениеТоваровУслуг</Источник><Приемник>ДокументСсылка.ИныеМатериальныеРасходы</Приемник><Свойства><Свойство><Код>14</Код><Наименование>СкладКомпании --&gt; Склад</Наименование><Порядок>800</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Свойство><Код>13</Код><Наименование> --&gt; УказатьСтоимость</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="УказатьСтоимость" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>12</Код><Наименование> --&gt; ВариантРаспределения</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="ВариантРаспределения" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>11</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>9</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>300</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство Поиск="true"><Код>8</Код><Наименование>Комментарий --&gt; Комментарий</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Группа><Код>1</Код><Наименование>Услуги --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник Имя="Услуги" Вид="ТабличнаяЧасть"/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("Договор", Источник.ДоговорКонтрагента);
ИсходящиеДанные.Вставить("СкладКомпании", Источник.СкладОрдер);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);

Если ОбъектКоллекции.СтатьяЗатрат.ВидЗатрат &lt;&gt; Перечисления.ВидыЗатрат.Материальные Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Свойство><Код>7</Код><Наименование> --&gt; ОблагаетсяНДС</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="ОблагаетсяНДС" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности.ОблагаетсяНДС;</ПередВыгрузкой></Свойство><Свойство><Код>6</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "ИныеМатериальныеРасходы";</ПередВыгрузкой></Свойство><Свойство><Код>5</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство><Свойство><Код>4</Код><Наименование> --&gt; ДокументПоступления</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><КодПравилаКонвертации>ПоступлениеТМЦ                                    </КодПравилаКонвертации><ПередВыгрузкой>Значение = Источник;</ПередВыгрузкой></Свойство><Свойство><Код>2</Код><Наименование>Количество --&gt; Количество</Наименование><Порядок>100</Порядок><Источник Имя="Количество" Вид="Реквизит" Тип="Число"/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>3</Код><Наименование>СтатьяЗатрат --&gt; Номенклатура</Наименование><Порядок>200</Порядок><Источник Имя="СтатьяЗатрат" Вид="Реквизит" Тип="СправочникСсылка.СтатьиЗатрат"/><Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>УслугаСтороннейОрганизации                        </КодПравилаКонвертации></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>ПоступлениеОтчетКомиссионера</Код><Наименование>ДокументСсылка.ОтчетКомиссионераОПродажах --&gt; ДокументСсылка.ПоступлениеТМЦ</Наименование><Порядок>1300</Порядок><ПередВыгрузкой>ВходящиеДанные = Новый Структура("ЕстьСчетФактура", "ДатаНомерСчетаФактуры", "ДатаСчетаФактуры");
Выполнить(Алгоритмы.ДобавитьСведенияОПолученномСчетеФактуре);

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ВидДок", Источник.Метаданные().Имя);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Источник>ДокументСсылка.ОтчетКомиссионераОПродажах</Источник><Приемник>ДокументСсылка.ПоступлениеТМЦ</Приемник><Свойства><Группа><Код>34</Код><Наименование> --&gt; ТабличнаяЧасть</Наименование><Порядок>3200</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("ВидМатериальногоРесурса");
КоллекцияОбъектов.Колонки.Добавить("Номенклатура");
КоллекцияОбъектов.Колонки.Добавить("Количество");
КоллекцияОбъектов.Колонки.Добавить("Цена");
КоллекцияОбъектов.Колонки.Добавить("Сумма");
КоллекцияОбъектов.Колонки.Добавить("СтавкаНДС");
КоллекцияОбъектов.Колонки.Добавить("СуммаНДС");

ОбъектКоллекции = КоллекцияОбъектов.Добавить();
ОбъектКоллекции.ВидМатериальногоРесурса = "ИныеМатериальныеРасходы";
ОбъектКоллекции.Номенклатура = "Комиссионное вознаграждение";
ОбъектКоллекции.Количество = 1;
ОбъектКоллекции.Цена = Источник.СуммаВознаграждения;
ОбъектКоллекции.Сумма = Источник.СуммаВознаграждения;
ОбъектКоллекции.СтавкаНДС = Источник.СтавкаНДСВознаграждения;
ОбъектКоллекции.СуммаНДС = УчетНДС.РассчитатьСуммуНДС(Источник.СуммаВознаграждения, Истина, Истина, УчетНДС.ПолучитьСтавкуНДС(Источник.СтавкаНДСВознаграждения));</ПередОбработкойВыгрузки><Свойство><Код>35</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "ИныеМатериальныеРасходы";</ПередВыгрузкой></Свойство><Свойство><Код>36</Код><Наименование> --&gt; Номенклатура</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>КомиссионноеВознаграждение                        </КодПравилаКонвертации><ПередВыгрузкой>Значение = "Комиссионное вознаграждение";</ПередВыгрузкой></Свойство><Свойство><Код>41</Код><Наименование> --&gt; СуммаНДС</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>40</Код><Наименование> --&gt; СтавкаНДС</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>39</Код><Наименование> --&gt; Сумма</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>38</Код><Наименование> --&gt; Цена</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>37</Код><Наименование> --&gt; Количество</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство></Группа><Свойство><Код>26</Код><Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование><Порядок>2400</Порядок><Источник/><Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>27</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>2500</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>28</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>2600</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>29</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>2700</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>30</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>2800</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>31</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>2900</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>32</Код><Наименование>НомерВходящегоДокумента --&gt; НомерДокВходящий</Наименование><Порядок>3000</Порядок><Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/><Приемник Имя="НомерДокВходящий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>33</Код><Наименование>ДатаВходящегоДокумента --&gt; ДатаДокВходящий</Наименование><Порядок>3100</Порядок><Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаДокВходящий" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>21</Код><Наименование> --&gt; ВидВзаиморасчетов</Наименование><Порядок>2100</Порядок><Источник/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><ПередВыгрузкой>Значение = "РасчетыСПоставщиками";</ПередВыгрузкой></Свойство><Свойство><Код>20</Код><Наименование> --&gt; ВидДокВходящий</Наименование><Порядок>2000</Порядок><Источник/><Приемник Имя="ВидДокВходящий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Значение = "Отчет комиссионера";</ПередВыгрузкой></Свойство><Свойство><Код>19</Код><Наименование> --&gt; ДатаСчетаФактуры</Наименование><Порядок>1900</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаСчетаФактуры" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>16</Код><Наименование> --&gt; АвтоКнигаПокупок</Наименование><Порядок>1600</Порядок><Источник/><Приемник Имя="АвтоКнигаПокупок" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ВходящиеДанные.ЕстьСчетФактура;</ПередВыгрузкой></Свойство><Свойство><Код>15</Код><Наименование> --&gt; ДатаНомерСчетаФактуры</Наименование><Порядок>1500</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаНомерСчетаФактуры" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>14</Код><Наименование> --&gt; ЕстьСчетФактура</Наименование><Порядок>1400</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ЕстьСчетФактура" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>13</Код><Наименование> --&gt; СуммаВклНДС</Наименование><Порядок>1300</Порядок><Источник/><Приемник Имя="СуммаВклНДС" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>12</Код><Наименование> --&gt; Курс</Наименование><Порядок>1200</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.КурсВзаиморасчетов/?(Источник.КратностьВзаиморасчетов=0,1,Источник.КратностьВзаиморасчетов);</ПередВыгрузкой></Свойство><Свойство><Код>9</Код><Наименование> --&gt; ОблагаетсяНДС</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="ОблагаетсяНДС" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности.ОблагаетсяНДС;</ПередВыгрузкой></Свойство><Свойство><Код>8</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>ПоступлениеОтчетКомиссионераРасход</Код><Наименование>ДокументСсылка.ОтчетКомиссионераОПродажах --&gt; ДокументСсылка.ИныеМатериальныеРасходы</Наименование><Порядок>1400</Порядок><Источник>ДокументСсылка.ОтчетКомиссионераОПродажах</Источник><Приемник>ДокументСсылка.ИныеМатериальныеРасходы</Приемник><Свойства><Свойство Поиск="true"><Код>13</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>300</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>15</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>16</Код><Наименование> --&gt; ВариантРаспределения</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="ВариантРаспределения" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 4;</ПередВыгрузкой></Свойство><Свойство><Код>17</Код><Наименование> --&gt; УказатьСтоимость</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="УказатьСтоимость" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 2;</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование>Комментарий --&gt; Комментарий</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Группа><Код>2</Код><Наименование>Товары --&gt; ТабличнаяЧасть</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>ИсходящиеДанные = Новый Структура("Док,ТабличнаяЧасть,ИмяНоменклатуры,ИмяТЧ");
ИсходящиеДанные.Док 			= Источник;
ИсходящиеДанные.ИмяНоменклатуры = "Номенклатура";
ИсходящиеДанные.ТабличнаяЧасть	= Источник.Товары;
ИсходящиеДанные.ИмяТЧ			= "Товары";
Выполнить(Алгоритмы.ДобавитьДокументыПоступленияВТабличнуюЧасть);</ПередОбработкойВыгрузки><ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ВидДок", Источник.Метаданные().Имя);
ИсходящиеДанные.Вставить("СтатусПартии", ОбъектКоллекции.СтатусПартии);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Свойство><Код>4</Код><Наименование>СуммаВознаграждения --&gt; Сумма</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ОбъектКоллекции.СуммаВознаграждения;
Если ВходящиеДанные.РеквизитыВидаДеятельности.ОблагаетсяНДС Тогда
	СуммаНДС = УчетНДС.РассчитатьСуммуНДС(Значение, Истина, Истина, УчетНДС.ПолучитьСтавкуНДС(Источник.СтавкаНДСВознаграждения));
	Значение = Значение - СуммаНДС;
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>5</Код><Наименование> --&gt; ДокументПоступления</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><КодПравилаКонвертации>ПоступлениеОтчетКомиссионера                      </КодПравилаКонвертации><ПередВыгрузкой>Значение = Источник;</ПередВыгрузкой></Свойство><Свойство><Код>6</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство><Свойство><Код>7</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "ИныеМатериальныеРасходы";</ПередВыгрузкой></Свойство><Свойство><Код>8</Код><Наименование>Номенклатура --&gt; Товар</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="Товар" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации><ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура;</ПередВыгрузкой></Свойство><Свойство><Код>9</Код><Наименование> --&gt; ВидПолученногоРесурса</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="ВидПолученногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "Товар";</ПередВыгрузкой></Свойство><Свойство><Код>10</Код><Наименование> --&gt; ОблагаетсяНДС</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="ОблагаетсяНДС" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности.ОблагаетсяНДС;</ПередВыгрузкой></Свойство><Свойство><Код>3</Код><Наименование> --&gt; Номенклатура</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>КомиссионноеВознаграждение                        </КодПравилаКонвертации><ПередВыгрузкой>Значение = "Комиссионное вознаграждение";</ПередВыгрузкой></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>ПоступлениеТМЦ</Код><Наименование>ДокументСсылка.ПоступлениеТоваров --&gt; ДокументСсылка.ПоступлениеТМЦ</Наименование><Порядок>100</Порядок><ПередВыгрузкой>ВходящиеДанные = Новый Структура("ЕстьСчетФактура", "ДатаНомерСчетаФактуры", "ДатаСчетаФактуры");
Выполнить(Алгоритмы.ДобавитьСведенияОПолученномСчетеФактуре);

ВидДок = Источник.Метаданные().Имя;
Если (ВидДок = "ПоступлениеТоваровУслуг") или (ВидДок = "ВозвратТоваровОтПокупателя") Тогда
	ВходящиеДанные.Вставить("Склад", Источник.СкладОрдер);
	
Иначе
	ВходящиеДанные.Вставить("Склад", Источник.Склад);
КонецЕсли;

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("Договор", Источник.ДоговорКонтрагента);
ИсходящиеДанные.Вставить("СкладКомпании", ВходящиеДанные.Склад);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Источник>ДокументСсылка.ПоступлениеТоваровУслуг</Источник><Приемник>ДокументСсылка.ПоступлениеТМЦ</Приемник><Свойства><Группа><Код>1</Код><Наименование>Товары --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("Номенклатура");
КоллекцияОбъектов.Колонки.Добавить("ИмяПКО");
КоллекцияОбъектов.Колонки.Добавить("Количество");
КоллекцияОбъектов.Колонки.Добавить("Цена");
КоллекцияОбъектов.Колонки.Добавить("Сумма");
КоллекцияОбъектов.Колонки.Добавить("СтавкаНДС");
КоллекцияОбъектов.Колонки.Добавить("СуммаНДС");
КоллекцияОбъектов.Колонки.Добавить("ГТД");
КоллекцияОбъектов.Колонки.Добавить("СтранаПроисхождения");
КоллекцияОбъектов.Колонки.Добавить("ВидМатериальногоРесурса");

Для каждого Товар из Источник.Товары Цикл
	Стр = КоллекцияОбъектов.Добавить();
	Стр.Номенклатура = Товар.Номенклатура;
	Стр.ИмяПКО = "Номенклатура";
	Стр.Количество = Товар.Количество * Товар.Коэффициент;
	Стр.Цена = Товар.Цена / ?(Товар.Коэффициент = 0, 1, Товар.Коэффициент);
	Стр.Сумма = Товар.Сумма;
	Стр.СтавкаНДС = Товар.СтавкаНДС;
	Стр.СуммаНДС = Товар.СуммаНДС;
	Стр.ГТД = Товар.СерияНоменклатуры.НомерГТД;
	Стр.ВидМатериальногоРесурса = "Товар";
	Стр.СтранаПроисхождения = Товар.СерияНоменклатуры.СтранаПроисхождения;
КонецЦикла;

ВидДок = Источник.Метаданные().Имя;
Если ВидДок = "ПоступлениеТоваровУслуг" Тогда
	Для каждого Товар из Источник.Услуги Цикл
		Если Товар.СтатьяЗатрат.ВидЗатрат &lt;&gt; Перечисления.ВидыЗатрат.Материальные Тогда
			Продолжить;
		КонецЕсли;

		Стр = КоллекцияОбъектов.Добавить();
		Стр.Номенклатура = Товар.СтатьяЗатрат;
		Стр.ИмяПКО = "УслугаСтороннейОрганизации";
		Стр.Количество = Товар.Количество;
		Стр.Цена = Товар.Цена;
		Стр.Сумма = Товар.Сумма;
		Стр.СтавкаНДС = Товар.СтавкаНДС;
		Стр.СуммаНДС = Товар.СуммаНДС;
		Стр.ГТД = Справочники.НомераГТД.ПустаяСсылка();
		Стр.ВидМатериальногоРесурса = "ИныеМатериальныеРасходы";
		Стр.СтранаПроисхождения = Справочники.КлассификаторСтранМира.ПустаяСсылка();
	КонецЦикла;
КонецЕсли;</ПередОбработкойВыгрузки><ПослеОбработкиВыгрузки>ВходящиеДанные.Вставить("УзелКоллекцииОбъектов", УзелКоллекцииОбъектов);</ПослеОбработкиВыгрузки><Свойство><Код>11</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/></Свойство><Свойство><Код>10</Код><Наименование> --&gt; ГТД</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="ГТД" Вид="Реквизит" Тип="СправочникСсылка.ГТД"/><КодПравилаКонвертации>ГТД                                               </КодПравилаКонвертации><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("СтранаПроисхождения");
ИсходящиеДанные.СтранаПроисхождения = ОбъектКоллекции.СтранаПроисхождения;</ПередВыгрузкой></Свойство><Свойство><Код>7</Код><Наименование>СуммаНДС --&gt; СуммаНДС</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>6</Код><Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>5</Код><Наименование>Сумма --&gt; Сумма</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>4</Код><Наименование>Цена --&gt; Цена</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>2</Код><Наименование>Номенклатура --&gt; Номенклатура</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации><ПриВыгрузке>ИмяПКО = ОбъектКоллекции.ИмяПКО;</ПриВыгрузке></Свойство><Свойство><Код>3</Код><Наименование> --&gt; Количество</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство></Группа><Свойство><Код>22</Код><Наименование>ТипЦен --&gt; ТипЦен</Наименование><Порядок>300</Порядок><Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатурыКонтрагентов"/><Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/><КодПравилаКонвертации>ТипыЦенКонтрагентов                               </КодПравилаКонвертации></Свойство><Свойство><Код>38</Код><Наименование> --&gt; ДатаНомерСчетаФактуры</Наименование><Порядок>1900</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаНомерСчетаФактуры" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>37</Код><Наименование> --&gt; ЕстьСчетФактура</Наименование><Порядок>1800</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ЕстьСчетФактура" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>35</Код><Наименование>СуммаВключаетНДС --&gt; СуммаВклНДС</Наименование><Порядок>1600</Порядок><Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/><Приемник Имя="СуммаВклНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство Поиск="true"><Код>23</Код><Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование><Порядок>400</Порядок><Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/><Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>25</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>600</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>26</Код><Наименование>Комментарий --&gt; Комментарий</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>27</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>800</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>29</Код><Наименование> --&gt; Автор</Наименование><Порядок>1000</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>34</Код><Наименование>КурсДокумента --&gt; Курс</Наименование><Порядок>1500</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.КурсВзаиморасчетов/?(Источник.КратностьВзаиморасчетов=0,1,Источник.КратностьВзаиморасчетов);</ПередВыгрузкой></Свойство><Свойство><Код>30</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>1100</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство><Свойство><Код>31</Код><Наименование> --&gt; ОблагаетсяНДС</Наименование><Порядок>1200</Порядок><Источник/><Приемник Имя="ОблагаетсяНДС" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности.ОблагаетсяНДС;</ПередВыгрузкой></Свойство><Свойство><Код>32</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>1300</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>33</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>1400</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>44</Код><Наименование> --&gt; ВидВзаиморасчетов</Наименование><Порядок>2500</Порядок><Источник/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><ПередВыгрузкой>Значение = "РасчетыСПоставщиками";</ПередВыгрузкой></Свойство><Свойство><Код>43</Код><Наименование> --&gt; ДатаСчетаФактуры</Наименование><Порядок>2400</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаСчетаФактуры" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>42</Код><Наименование>ДатаВходящегоДокумента --&gt; ДатаДокВходящий</Наименование><Порядок>2300</Порядок><Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаДокВходящий" Вид="Реквизит" Тип="Дата"/><ПередВыгрузкой>ВидДок = Источник.Метаданные().Имя;
Если ВидДок = "ПоступлениеТМЦ" Тогда
	Значение = Источник.ДатаВходящегоДокумента;
	
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>41</Код><Наименование>НомерВходящегоДокумента --&gt; НомерДокВходящий</Наименование><Порядок>2200</Порядок><Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/><Приемник Имя="НомерДокВходящий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>ВидДок = Источник.Метаданные().Имя;
Если ВидДок = "ПоступлениеТМЦ" Тогда
	Значение = Источник.НомерВходящегоДокумента;
	
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>40</Код><Наименование>СкладКомпании --&gt; Склад</Наименование><Порядок>2100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Свойство><Код>39</Код><Наименование> --&gt; АвтоКнигаПокупок</Наименование><Порядок>2000</Порядок><Источник/><Приемник Имя="АвтоКнигаПокупок" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ВходящиеДанные.ЕстьСчетФактура;</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>ПоступлениеТМЦдопРасходы</Код><Наименование>ДокументСсылка.ПоступлениеДопРасходов --&gt; ДокументСсылка.ПоступлениеТМЦ</Наименование><Порядок>400</Порядок><ПередВыгрузкой>ВходящиеДанные = Новый Структура("ЕстьСчетФактура", "ДатаНомерСчетаФактуры", "ДатаСчетаФактуры");
Выполнить(Алгоритмы.ДобавитьСведенияОПолученномСчетеФактуре);

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("Договор", Источник.ДоговорКонтрагента);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Источник>ДокументСсылка.ПоступлениеДопРасходов</Источник><Приемник>ДокументСсылка.ПоступлениеТМЦ</Приемник><Свойства><Группа><Код>4</Код><Наименование> --&gt; ТабличнаяЧасть</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("ВидМатериальногоРесурса");
КоллекцияОбъектов.Колонки.Добавить("Цена");
КоллекцияОбъектов.Колонки.Добавить("Номенклатура");
КоллекцияОбъектов.Колонки.Добавить("СтавкаНДС");
КоллекцияОбъектов.Колонки.Добавить("Сумма");
КоллекцияОбъектов.Колонки.Добавить("СуммаНДС");

СтрокаКоллекции                     = КоллекцияОбъектов.Добавить();
СтрокаКоллекции.ВидМатериальногоРесурса = "ИныеМатериальныеРасходы";
СтрокаКоллекции.Номенклатура		= Источник.Содержание;
СтрокаКоллекции.Сумма				= Источник.Сумма;
СтрокаКоллекции.Цена                = Источник.Сумма;
СтрокаКоллекции.СтавкаНДС           = Источник.СтавкаНДС;
СтрокаКоллекции.СуммаНДС            = Источник.СуммаНДС;</ПередОбработкойВыгрузки><Свойство><Код>5</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "ИныеМатериальныеРасходы";</ПередВыгрузкой></Свойство><Свойство><Код>6</Код><Наименование> --&gt; Номенклатура</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>НоменклатураДопРасходов                           </КодПравилаКонвертации><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("Наименование");
ИсходящиеДанные.Наименование = Источник.Содержание;
Значение = Источник.Содержание;</ПередВыгрузкой><ПриВыгрузке>ИсходящиеДанные = Новый Структура("Наименование, Родитель, ВидМатериальногоРесурса, ТипНоменклатуры");
ИсходящиеДанные.Наименование            = Источник.Содержание;
ИсходящиеДанные.Родитель                = "";
ИсходящиеДанные.ВидМатериальногоРесурса = "";
ИсходящиеДанные.ТипНоменклатуры         = "";
УзелСсылки = ВыгрузитьПоПравилу(,,ИсходящиеДанные,,ИмяПКО,,,ПКОСвойств);</ПриВыгрузке></Свойство><Свойство><Код>8</Код><Наименование> --&gt; Цена</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>9</Код><Наименование> --&gt; Сумма</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>10</Код><Наименование> --&gt; СтавкаНДС</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/></Свойство><Свойство><Код>11</Код><Наименование> --&gt; СуммаНДС</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство></Группа><Свойство Поиск="true"><Код>15</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>500</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>17</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>700</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>30</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>2000</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>29</Код><Наименование> --&gt; ВидВзаиморасчетов</Наименование><Порядок>1900</Порядок><Источник/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><ПередВыгрузкой>Значение = "РасчетыСПоставщиками";</ПередВыгрузкой></Свойство><Свойство><Код>28</Код><Наименование> --&gt; ДатаСчетаФактуры</Наименование><Порядок>1800</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаСчетаФактуры" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>27</Код><Наименование> --&gt; АвтоКнигаПокупок</Наименование><Порядок>1700</Порядок><Источник/><Приемник Имя="АвтоКнигаПокупок" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ВходящиеДанные.ЕстьСчетФактура;</ПередВыгрузкой></Свойство><Свойство><Код>26</Код><Наименование> --&gt; ДатаНомерСчетаФактуры</Наименование><Порядок>1600</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаНомерСчетаФактуры" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>25</Код><Наименование> --&gt; ЕстьСчетФактура</Наименование><Порядок>1500</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ЕстьСчетФактура" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>2</Код><Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование><Порядок>200</Порядок><Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/><Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>1</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>100</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>23</Код><Наименование>СуммаВключаетНДС --&gt; СуммаВклНДС</Наименование><Порядок>1300</Порядок><Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/><Приемник Имя="СуммаВклНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>22</Код><Наименование> --&gt; Курс</Наименование><Порядок>1200</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.КурсВзаиморасчетов/?(Источник.КурсВзаиморасчетов=0,1,Источник.КратностьВзаиморасчетов);</ПередВыгрузкой></Свойство><Свойство><Код>21</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>1100</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>20</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>1000</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>19</Код><Наименование> --&gt; ОблагаетсяНДС</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="ОблагаетсяНДС" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности.ОблагаетсяНДС;</ПередВыгрузкой></Свойство><Свойство><Код>18</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>ПрочиеРасходыРасчеты</Код><Наименование>ДокументСсылка.ПрочиеЗатраты --&gt; ДокументСсылка.ПрочиеРасходыРасчеты</Наименование><Порядок>300</Порядок><ПередВыгрузкой>ВходящиеДанные = Новый Структура("ЕстьСчетФактура", "ДатаНомерСчетаФактуры", "ДатаСчетаФактуры");
Выполнить(Алгоритмы.ДобавитьСведенияОПолученномСчетеФактуре);

ВидДок = Источник.Метаданные().Имя;
Если (ВидДок = "ПоступлениеТоваровУслуг") или (ВидДок = "ВозвратТоваровОтПокупателя") Тогда
	ВходящиеДанные.Вставить("Склад", Источник.СкладОрдер);
	
Иначе
	ВходящиеДанные.Вставить("Склад", Источник.Склад);
КонецЕсли;

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("Договор", Источник.ДоговорКонтрагента);
ИсходящиеДанные.Вставить("СкладКомпании", ВходящиеДанные.Склад);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);

КоличествоПрочихРасходовВУслугах = 0;
Для каждого СтрТЧ из Источник.Услуги Цикл
	Если СтрТЧ.СтатьяЗатрат.ВидЗатрат = Перечисления.ВидыЗатрат.Прочие Тогда
		КоличествоПрочихРасходовВУслугах = КоличествоПрочихРасходовВУслугах + 1;
		Прервать;
	КонецЕсли;
КонецЦикла;

Если КоличествоПрочихРасходовВУслугах = 0 Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.ПоступлениеТоваровУслуг</Источник><Приемник>ДокументСсылка.ПрочиеРасходыРасчеты</Приемник><Свойства><Группа><Код>1</Код><Наименование>Затраты --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник Имя="Услуги" Вид="ТабличнаяЧасть"/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередВыгрузкой>Если ОбъектКоллекции.СтатьяЗатрат.ВидЗатрат &lt;&gt; Перечисления.ВидыЗатрат.Прочие Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Свойство><Код>7</Код><Наименование>СуммаНДС --&gt; СуммаНДС</Наименование><Порядок>600</Порядок><Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>6</Код><Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование><Порядок>500</Порядок><Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>5</Код><Наименование>Сумма --&gt; Сумма</Наименование><Порядок>400</Порядок><Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>4</Код><Наименование>Цена --&gt; Цена</Наименование><Порядок>300</Порядок><Источник Имя="Цена" Вид="Реквизит" Тип="Число"/><Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>3</Код><Наименование>Количество --&gt; Количество</Наименование><Порядок>200</Порядок><Источник Имя="Количество" Вид="Реквизит" Тип="Число"/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>2</Код><Наименование>СтатьяЗатрат --&gt; Расход</Наименование><Порядок>100</Порядок><Источник Имя="СтатьяЗатрат" Вид="Реквизит" Тип="СправочникСсылка.СтатьиЗатрат"/><Приемник Имя="Расход" Вид="Реквизит" Тип="СправочникСсылка.ПрочиеРасходы"/><КодПравилаКонвертации>ПрочиеРасходы                                     </КодПравилаКонвертации></Свойство></Группа><Свойство><Код>27</Код><Наименование>НомерВходящегоДокумента --&gt; НомерДокВходящий</Наименование><Порядок>1900</Порядок><Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/><Приемник Имя="НомерДокВходящий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>26</Код><Наименование> --&gt; АвтоКнигаПокупок</Наименование><Порядок>1800</Порядок><Источник/><Приемник Имя="АвтоКнигаПокупок" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ВходящиеДанные.ЕстьСчетФактура;</ПередВыгрузкой></Свойство><Свойство><Код>25</Код><Наименование> --&gt; ДатаНомерСчетаФактуры</Наименование><Порядок>1700</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаНомерСчетаФактуры" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>24</Код><Наименование> --&gt; ЕстьСчетФактура</Наименование><Порядок>1600</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ЕстьСчетФактура" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>22</Код><Наименование>СуммаВключаетНДС --&gt; СуммаВклНДС</Наименование><Порядок>1400</Порядок><Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/><Приемник Имя="СуммаВклНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>21</Код><Наименование> --&gt; Курс</Наименование><Порядок>1300</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.КурсВзаиморасчетов/?(Источник.КратностьВзаиморасчетов=0,1,Источник.КратностьВзаиморасчетов);</ПередВыгрузкой></Свойство><Свойство><Код>20</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>1200</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>19</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>1100</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>18</Код><Наименование> --&gt; ОблагаетсяНДС</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="ОблагаетсяНДС" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности.ОблагаетсяНДС;</ПередВыгрузкой></Свойство><Свойство><Код>17</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство><Свойство><Код>16</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>800</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>14</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>600</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>12</Код><Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование><Порядок>400</Порядок><Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/><Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>11</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>300</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>10</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>30</Код><Наименование> --&gt; ВидВзаиморасчетов</Наименование><Порядок>2200</Порядок><Источник/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><ПередВыгрузкой>Значение = "РасчетыСПоставщиками";</ПередВыгрузкой></Свойство><Свойство><Код>29</Код><Наименование> --&gt; ДатаСчетаФактуры</Наименование><Порядок>2100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаСчетаФактуры" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>28</Код><Наименование>ДатаВходящегоДокумента --&gt; ДатаДокВходящий</Наименование><Порядок>2000</Порядок><Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаДокВходящий" Вид="Реквизит" Тип="Дата"/></Свойство></Свойства><Значения/></Правило></Группа><Группа><Код>Прочее</Код><Наименование>Прочее</Наименование><Порядок>500</Порядок><Правило><Код>АвансовыйОтчет</Код><Наименование>ДокументСсылка.АвансовыйОтчет --&gt; ДокументСсылка.АвансовыйОтчет</Наименование><Порядок>100</Порядок><Источник>ДокументСсылка.АвансовыйОтчет</Источник><Приемник>ДокументСсылка.АвансовыйОтчет</Приемник><Свойства><Свойство><Код>1</Код><Наименование>Комментарий --&gt; Комментарий</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>2</Код><Наименование>ФизЛицо --&gt; ФизЛицо</Наименование><Порядок>200</Порядок><Источник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/><Приемник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.Работники"/><КодПравилаКонвертации>Работники                                         </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>3</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>300</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 10);</ПередВыгрузкой></Свойство><Свойство><Код>5</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>6</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>600</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>7</Код><Наименование> --&gt; Курс</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.КурсДокумента/?(Источник.КратностьДокумента=0,1,Источник.КратностьДокумента);</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>Доверенность</Код><Наименование>ДокументСсылка.Доверенность --&gt; ДокументСсылка.Доверенность</Наименование><Порядок>200</Порядок><Источник>ДокументСсылка.Доверенность</Источник><Приемник>ДокументСсылка.Доверенность</Приемник><Свойства><Свойство><Код>13</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>800</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>7</Код><Наименование>ДатаДействия --&gt; ДатаДействия</Наименование><Порядок>200</Порядок><Источник Имя="ДатаДействия" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаДействия" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>8</Код><Наименование>НаПолучениеОт --&gt; НаПолучениеОт</Наименование><Порядок>300</Порядок><Источник Имя="НаПолучениеОт" Вид="Реквизит" Тип="Строка"/><Приемник Имя="НаПолучениеОт" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>9</Код><Наименование>ПоДокументу --&gt; ПоДокументу</Наименование><Порядок>400</Порядок><Источник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/><Приемник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>10</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>14</Код><Наименование> --&gt; ВариантОплаты</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="ВариантОплаты" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>16</Код><Наименование>ФизЛицо --&gt; Работник</Наименование><Порядок>1100</Порядок><Источник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/><Приемник Имя="Работник" Вид="Реквизит" Тип="СправочникСсылка.Работники"/><КодПравилаКонвертации>Работники                                         </КодПравилаКонвертации></Свойство><Свойство><Код>17</Код><Наименование>Контрагент --&gt; Поставщик</Наименование><Порядок>1200</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Поставщик" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>18</Код><Наименование>СтруктурнаяЕдиница --&gt; РасчетныйСчет</Наименование><Порядок>1300</Порядок><Источник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><Приемник Имя="РасчетныйСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>11</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>600</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство Поиск="true"><Код>12</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 10);</ПередВыгрузкой></Свойство><Группа><Код>1</Код><Наименование>Товары --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник Имя="Товары" Вид="ТабличнаяЧасть"/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><Свойство><Код>4</Код><Наименование>Количество --&gt; Количество</Наименование><Порядок>300</Порядок><Источник Имя="Количество" Вид="Реквизит" Тип="Число"/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>3</Код><Наименование>ЕдиницаПоКлассификатору --&gt;</Наименование><Порядок>200</Порядок><Источник Имя="ЕдиницаПоКлассификатору" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/><Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерений"/><КодПравилаКонвертации>ЕдиницыИзмеренийКлассификатор                     </КодПравилаКонвертации></Свойство><Свойство><Код>2</Код><Наименование>НаименованиеТовара --&gt;</Наименование><Порядок>100</Порядок><Источник Имя="НаименованиеТовара" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Товар" Вид="Реквизит" Тип="Строка"/></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>КорректировкаЗадолженности</Код><Наименование>ДокументСсылка.КорректировкаДолга --&gt; ДокументСсылка.КорректировкаЗадолженности</Наименование><Порядок>400</Порядок><Источник>ДокументСсылка.КорректировкаДолга</Источник><Приемник>ДокументСсылка.КорректировкаЗадолженности</Приемник><Свойства><Свойство><Код>14</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>13</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 10);</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>12</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>300</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>11</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Группа><Код>1</Код><Наименование>СуммыДолга --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник Имя="СуммыДолга" Вид="ТабличнаяЧасть"/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередВыгрузкой>ВходящиеДанные = Новый Структура("ВидКорректировки");
Если Источник.ВидОперации = Перечисления.ВидыОперацийКорректировкаДолга.ПроведениеВзаимозачета Тогда
	ВходящиеДанные.ВидКорректировки = "Уменьшение";
	
ИначеЕсли ОбъектКоллекции.ВидЗадолженности = Перечисления.ВидыЗадолженности.Кредиторская Тогда
	ВходящиеДанные.ВидКорректировки = "Увеличение";
	
Иначе
	ВходящиеДанные.ВидКорректировки = "Уменьшение";
КонецЕсли;</ПередВыгрузкой><Свойство><Код>2</Код><Наименование> --&gt; Сумма</Наименование><Порядок>100</Порядок><Источник Имя="СуммаРегл" Вид="Реквизит" Тип="Число"/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>4</Код><Наименование> --&gt; Контрагент</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><ПередВыгрузкой>Значение = ОбъектКоллекции.ДоговорКонтрагента.Владелец;</ПередВыгрузкой></Свойство><Свойство><Код>5</Код><Наименование> --&gt; Договор</Наименование><Порядок>400</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>6</Код><Наименование> --&gt; ВидВзаиморасчетов</Наименование><Порядок>500</Порядок><Источник Имя="ВидЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыЗадолженности"/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><КодПравилаКонвертации>ВидыВзаиморасчетов                                </КодПравилаКонвертации></Свойство><Свойство><Код>7</Код><Наименование> --&gt; ВидКорректировки</Наименование><Порядок>600</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ВидКорректировки" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыКорректировок"/></Свойство><Свойство><Код>8</Код><Наименование> --&gt; Валюта</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><ПередВыгрузкой>Значение = Константы.ВалютаРегламентированногоУчета.Получить();</ПередВыгрузкой></Свойство><Свойство><Код>9</Код><Наименование> --&gt; Курс</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>ПлатежноеПоручение</Код><Наименование>ДокументСсылка.ПлатежноеПоручение --&gt; ДокументСсылка.ПлатежноеПоручение</Наименование><Порядок>400</Порядок><Источник>ДокументСсылка.ПлатежноеПоручениеИсходящее</Источник><Приемник>ДокументСсылка.ПлатежноеПоручение</Приемник><Свойства><Свойство><Код>11</Код><Наименование>ПоказательПериода --&gt; ПоказательПериода</Наименование><Порядок>1100</Порядок><Источник Имя="ПоказательПериода" Вид="Реквизит" Тип="Строка"/><Приемник Имя="ПоказательПериода" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>10</Код><Наименование>ПоказательОснования --&gt; ПоказательОснования</Наименование><Порядок>1000</Порядок><Источник Имя="ПоказательОснования" Вид="Реквизит" Тип="Строка"/><Приемник Имя="ПоказательОснования" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>9</Код><Наименование>ПоказательНомера --&gt; ПоказательНомера</Наименование><Порядок>900</Порядок><Источник Имя="ПоказательНомера" Вид="Реквизит" Тип="Строка"/><Приемник Имя="ПоказательНомера" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>8</Код><Наименование>ПоказательДаты --&gt; ПоказательДаты</Наименование><Порядок>800</Порядок><Источник Имя="ПоказательДаты" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ПоказательДаты" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>7</Код><Наименование>КодОКАТО --&gt; КодОКАТО</Наименование><Порядок>700</Порядок><Источник Имя="КодОКАТО" Вид="Реквизит" Тип="Строка"/><Приемник Имя="КодОКАТО" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>6</Код><Наименование>КодБК --&gt; КодБК</Наименование><Порядок>600</Порядок><Источник Имя="КодБК" Вид="Реквизит" Тип="Строка"/><Приемник Имя="КодБК" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>5</Код><Наименование>ПеречислениеНалога --&gt; ПеречислениеНалога</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="ПеречислениеНалога" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ?(Источник.ВидОперации = Перечисления.ВидыОперацийППИсходящее.ПеречислениеНалога, 1, 0);</ПередВыгрузкой></Свойство><Свойство><Код>4</Код><Наименование>Комментарий --&gt; Комментарий</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>2</Код><Наименование>ВидПлатежа --&gt; ВидПлатежа</Наименование><Порядок>200</Порядок><Источник Имя="ВидПлатежа" Вид="Реквизит" Тип="Строка"/><Приемник Имя="ВидПлатежа" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыПлатежа"/></Свойство><Свойство><Код>1</Код><Наименование>СчетКонтрагента --&gt; СчетКонтрагента</Наименование><Порядок>100</Порядок><Источник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><Приемник Имя="СчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.РасчетныеСчета"/><КодПравилаКонвертации>РасчетныеСчета                                    </КодПравилаКонвертации></Свойство><Свойство><Код>12</Код><Наименование>ПоказательТипа --&gt; ПоказательТипа</Наименование><Порядок>1200</Порядок><Источник Имя="ПоказательТипа" Вид="Реквизит" Тип="Строка"/><Приемник Имя="ПоказательТипа" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>13</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>1300</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>14</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>1400</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство Поиск="true"><Код>15</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>1500</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 10);</ПередВыгрузкой></Свойство><Свойство><Код>16</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>1600</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>17</Код><Наименование>СчетОрганизации --&gt; РасчетныйСчет</Наименование><Порядок>1700</Порядок><Источник Имя="СчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><Приемник Имя="РасчетныйСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации></Свойство><Свойство><Код>18</Код><Наименование>СуммаДокумента --&gt; Сумма</Наименование><Порядок>1800</Порядок><Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>20</Код><Наименование>ОчередностьПлатежа --&gt; Очередность</Наименование><Порядок>2000</Порядок><Источник Имя="ОчередностьПлатежа" Вид="Реквизит" Тип="Число"/><Приемник Имя="Очередность" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>21</Код><Наименование> --&gt; АвтоПодстСуммыНДС</Наименование><Порядок>2100</Порядок><Источник/><Приемник Имя="АвтоПодстСуммыНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.ПодстановкаСуммыНДС"/><ПередВыгрузкой>Значение = "БезСуммыБезНДС";</ПередВыгрузкой></Свойство><Свойство><Код>22</Код><Наименование>НазначениеПлатежа --&gt; Содержание</Наименование><Порядок>2200</Порядок><Источник Имя="НазначениеПлатежа" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>23</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>2300</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>24</Код><Наименование>СтатусСоставителя --&gt; СтатусСоставителяПлДок</Наименование><Порядок>2400</Порядок><Источник Имя="СтатусСоставителя" Вид="Реквизит" Тип="Строка"/><Приемник Имя="СтатусСоставителяПлДок" Вид="Реквизит" Тип="Строка"/></Свойство></Свойства><Значения/></Правило><Правило><Код>Счет</Код><Наименование>ДокументСсылка.ЗаказПокупателя --&gt; ДокументСсылка.Счет</Наименование><Порядок>300</Порядок><Источник>ДокументСсылка.СчетНаОплатуПокупателю</Источник><Приемник>ДокументСсылка.Счет</Приемник><Свойства><Свойство><Код>23</Код><Наименование>СтруктурнаяЕдиница --&gt; РасчетныйСчет</Наименование><Порядок>1500</Порядок><Источник Имя="СтруктурнаяЕдиница" Вид="Реквизит"/><Приемник Имя="РасчетныйСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации><ПередВыгрузкой>Если Источник.СтруктурнаяЕдиница = Неопределено Тогда
	Отказ = Истина;
	
ИначеЕсли Источник.СтруктурнаяЕдиница.Метаданные().Имя &lt;&gt; "БанковскиеСчета" Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>21</Код><Наименование>СуммаВключаетНДС --&gt; СуммаВклНДС</Наименование><Порядок>1300</Порядок><Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/><Приемник Имя="СуммаВклНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>20</Код><Наименование> --&gt; Курс</Наименование><Порядок>1200</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.КурсВзаиморасчетов/?(Источник.КратностьВзаиморасчетов=0,1,Источник.КратностьВзаиморасчетов);</ПередВыгрузкой></Свойство><Свойство><Код>19</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>1100</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>18</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>1000</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>17</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>900</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>16</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 10);</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>15</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>700</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>14</Код><Наименование>ТипЦен --&gt; ТипЦен</Наименование><Порядок>600</Порядок><Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/><Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/><КодПравилаКонвертации>ТипыЦен                                           </КодПравилаКонвертации></Свойство><Свойство><Код>13</Код><Наименование>Комментарий --&gt; Комментарий</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>11</Код><Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование><Порядок>300</Порядок><Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/><Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>10</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>200</Порядок><Источник Имя="Контрагент" Вид="Реквизит"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации><ПередВыгрузкой>Если ТипЗнч(Источник.Контрагент) = Тип("Строка") Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой></Свойство><Группа><Код>1</Код><Наименование>Товары --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("Номенклатура");
КоллекцияОбъектов.Колонки.Добавить("Количество");
КоллекцияОбъектов.Колонки.Добавить("Цена");
КоллекцияОбъектов.Колонки.Добавить("Сумма");
КоллекцияОбъектов.Колонки.Добавить("СтавкаНДС");
КоллекцияОбъектов.Колонки.Добавить("СуммаНДС");

Для каждого Товар из Источник.Услуги Цикл
	Стр = КоллекцияОбъектов.Добавить();
	Стр.Номенклатура = Товар.Номенклатура;
	Стр.Количество = Товар.Количество;
	Стр.Цена = ?(Товар.Количество=0, 0, Товар.Сумма / Товар.Количество);
	Стр.Сумма = Товар.Сумма;
	Стр.СтавкаНДС = Товар.СтавкаНДС;
	Стр.СуммаНДС = Товар.СуммаНДС;
КонецЦикла;

Для каждого Товар из Источник.Товары Цикл
	Стр = КоллекцияОбъектов.Добавить();
	Стр.Номенклатура = Товар.Номенклатура;
	Стр.Количество = Товар.Количество * Товар.Коэффициент;
	Стр.Цена = ?(Стр.Количество=0, 0, Товар.Сумма / Стр.Количество);
	Стр.Сумма = Товар.Сумма;
	Стр.СтавкаНДС = Товар.СтавкаНДС;
	Стр.СуммаНДС = Товар.СуммаНДС;
КонецЦикла;</ПередОбработкойВыгрузки><Свойство><Код>2</Код><Наименование>Номенклатура --&gt; Номенклатура</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации></Свойство><Свойство><Код>3</Код><Наименование>Цена --&gt; Цена</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>4</Код><Наименование>Сумма --&gt; Сумма</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>5</Код><Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>6</Код><Наименование>СуммаНДС --&gt; СуммаНДС</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>9</Код><Наименование> --&gt; Количество</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство></Группа></Свойства><Значения/></Правило></Группа><Группа><Код>Реализация</Код><Наименование>Реализация</Наименование><Порядок>600</Порядок><Правило><Код>ОтчетККМ</Код><Наименование>ДокументСсылка.ОтчетККМОПродажах --&gt; ДокументСсылка.Реализация</Наименование><Порядок>400</Порядок><Приемник>ДокументСсылка.Реализация</Приемник><Свойства><Свойство Поиск="true"><Код>16</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>600</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>18</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>800</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>19</Код><Наименование>КассаККМ --&gt; Контрагент</Наименование><Порядок>900</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><ПередВыгрузкой>ИмяПКО = ?(ВходящиеДанные.ВидОперации = Перечисления.ВидыОперацийОтчетОРозничныхПродажах.ОтчетККМОПродажах, "КассыККМ", "СкладНТТ");</ПередВыгрузкой></Свойство><Свойство><Код>20</Код><Наименование> --&gt; Договор</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("Владелец");
ИсходящиеДанные.Владелец = ВходящиеДанные.Контрагент;
Значение = "Розничная торговля";
ИмяПКО = ?(ВходящиеДанные.ВидОперации = Перечисления.ВидыОперацийОтчетОРозничныхПродажах.ОтчетККМОПродажах, "ДоговорККМ", "ДоговорНТТ");</ПередВыгрузкой></Свойство><Свойство><Код>21</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>1100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>22</Код><Наименование> --&gt; Курс</Наименование><Порядок>1200</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>23</Код><Наименование>СуммаВключаетНДС --&gt; СуммаВклНДС</Наименование><Порядок>1300</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="СуммаВклНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>25</Код><Наименование>СкладКомпании --&gt; Склад</Наименование><Порядок>1500</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Свойство><Код>3</Код><Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование><Порядок>300</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>2</Код><Наименование>ТипЦен --&gt; ТипЦен</Наименование><Порядок>200</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/><КодПравилаКонвертации>ТипыЦен                                           </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/></Свойство><Группа><Код>5</Код><Наименование>Товары --&gt; ТабличнаяЧасть</Наименование><Порядок>500</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("СкладКомпании", ВходящиеДанные.Склад);
ИсходящиеДанные.Вставить("ДатаДокумента", ВходящиеДанные.ДатаДок);
ИсходящиеДанные.Вставить("СтатусПартии", ОбъектКоллекции.СтатусПартии);
ИсходящиеДанные.Вставить("Номенклатура", ОбъектКоллекции.Номенклатура);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Свойство><Код>6</Код><Наименование>Номенклатура --&gt; Номенклатура</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации></Свойство><Свойство><Код>7</Код><Наименование> --&gt; Количество</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>8</Код><Наименование>Цена --&gt; Цена</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ОбъектКоллекции.Сумма / ?(ОбъектКоллекции.Количество = 0, 1, ОбъектКоллекции.Количество);</ПередВыгрузкой></Свойство><Свойство><Код>9</Код><Наименование>Сумма --&gt; Сумма</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>10</Код><Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>12</Код><Наименование>СуммаНДС --&gt; СуммаНДС</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>14</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = ?(ОбъектКоллекции.Номенклатура.Услуга, "Услуга", "Товар");</ПередВыгрузкой></Свойство><Свойство><Код>15</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство><Свойство><Код>26</Код><Наименование> --&gt; ДокументПоступления</Наименование><Порядок>1100</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><ПриВыгрузке>ИсходящиеДанные = Новый Структура("ДокументПоступления");
ИсходящиеДанные.ДокументПоступления = ОбъектКоллекции.ДокументПоступления;
Выполнить(Алгоритмы.НайтиПКОДляДокументаПоступления);</ПриВыгрузке></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>ОтчетКомитенту</Код><Наименование>ДокументСсылка.ОтчетКомитентуОПродажах --&gt; ДокументСсылка.Реализация</Наименование><Порядок>300</Порядок><Источник>ДокументСсылка.ОтчетКомитентуОПродажах</Источник><Приемник>ДокументСсылка.Реализация</Приемник><Свойства><Свойство><Код>3</Код><Наименование>ТипЦен --&gt; ТипЦен</Наименование><Порядок>300</Порядок><Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатурыКонтрагентов"/><Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/><КодПравилаКонвертации>ТипыЦен                                           </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>2</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>1</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>100</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>15</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>700</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>13</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>500</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>16</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>800</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>17</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>900</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>18</Код><Наименование> --&gt; Курс</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.КурсВзаиморасчетов/?(Источник.КратностьВзаиморасчетов=0,1,Источник.КратностьВзаиморасчетов);</ПередВыгрузкой></Свойство><Свойство><Код>19</Код><Наименование> --&gt; УчитыватьНДС</Наименование><Порядок>1100</Порядок><Источник/><Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>20</Код><Наименование> --&gt; СуммаВклНДС</Наименование><Порядок>1200</Порядок><Источник/><Приемник Имя="СуммаВклНДС" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Группа><Код>4</Код><Наименование> --&gt; ТабличнаяЧасть</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("ВидМатериальногоРесурса");
КоллекцияОбъектов.Колонки.Добавить("Номенклатура");
КоллекцияОбъектов.Колонки.Добавить("ВидДеятельности");
КоллекцияОбъектов.Колонки.Добавить("Количество");
КоллекцияОбъектов.Колонки.Добавить("Цена");
КоллекцияОбъектов.Колонки.Добавить("Сумма");
КоллекцияОбъектов.Колонки.Добавить("СтавкаНДС");
КоллекцияОбъектов.Колонки.Добавить("СуммаНДС");

ОбъектКоллекции = КоллекцияОбъектов.Добавить();
ОбъектКоллекции.ВидМатериальногоРесурса = "Услуга";
ОбъектКоллекции.Номенклатура = "Комиссионное вознаграждение";
ОбъектКоллекции.Количество = 1;
ОбъектКоллекции.Цена = Источник.СуммаВознаграждения;
ОбъектКоллекции.Сумма = Источник.СуммаВознаграждения;
ОбъектКоллекции.СтавкаНДС = Источник.СтавкаНДСВознаграждения;
ОбъектКоллекции.СуммаНДС = УчетНДС.РассчитатьСуммуНДС(Источник.СуммаВознаграждения, Истина, Истина, УчетНДС.ПолучитьСтавкуНДС(Источник.СтавкаНДСВознаграждения));
ОбъектКоллекции.ВидДеятельности = "Посреднические услуги в торговле";</ПередОбработкойВыгрузки><ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("Услуга", Истина);
ИсходящиеДанные.Вставить("ВидДок", Источник.Метаданные().Имя);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Свойство><Код>5</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/></Свойство><Свойство><Код>6</Код><Наименование> --&gt; Номенклатура</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>КомиссионноеВознаграждение                        </КодПравилаКонвертации><ПередВыгрузкой>Значение = "Комиссионное вознаграждение";</ПередВыгрузкой></Свойство><Свойство><Код>7</Код><Наименование> --&gt; Количество</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>8</Код><Наименование> --&gt; Цена</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>9</Код><Наименование> --&gt; Сумма</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>10</Код><Наименование> --&gt; СтавкаНДС</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>11</Код><Наименование> --&gt; СуммаНДС</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>12</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>ПередачаНаКомиссию</Код><Наименование>ДокументСсылка.РеализацияТоваров --&gt; ДокументСсылка.ПеремещениеМатериальныхРесурсов</Наименование><Порядок>500</Порядок><Источник>ДокументСсылка.РеализацияТоваровУслуг</Источник><Приемник>ДокументСсылка.ПеремещениеМатериальныхРесурсов</Приемник><Свойства><Свойство Поиск="true"><Код>1</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>5</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>300</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>6</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>400</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>7</Код><Наименование> --&gt; СкладПолучатель</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>ТоварыОгруженные                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = "Товары отгруженные";</ПередВыгрузкой></Свойство><Свойство><Код>8</Код><Наименование>СкладКомпании --&gt; Склад</Наименование><Порядок>600</Порядок><Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/><Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Группа><Код>2</Код><Наименование>Товары --&gt; ТабличнаяЧасть</Наименование><Порядок>200</Порядок><Источник Имя="Товары" Вид="ТабличнаяЧасть"/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><Свойство><Код>3</Код><Наименование>Номенклатура --&gt; Номенклатура</Наименование><Порядок>100</Порядок><Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><Приемник Имя="Номенклатура" Вид="Реквизит"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации></Свойство><Свойство><Код>4</Код><Наименование>Количество --&gt; Количество</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ОбъектКоллекции.Коэффициент * ОбъектКоллекции.Количество;</ПередВыгрузкой></Свойство><Свойство><Код>9</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "Товар";</ПередВыгрузкой></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>ПродажаТоваров</Код><Наименование>ДокументСсылка.РеализацияТоваров --&gt; ДокументСсылка.Реализация</Наименование><Порядок>100</Порядок><Источник>ДокументСсылка.РеализацияТоваровУслуг</Источник><Приемник>ДокументСсылка.Реализация</Приемник><Свойства><Свойство><Код>29</Код><Наименование>БанковскийСчетОрганизации --&gt; РасчетныйСчет</Наименование><Порядок>1800</Порядок><Источник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/><Приемник Имя="РасчетныйСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/></Свойство><Свойство><Код>25</Код><Наименование>СкладКомпании --&gt; Склад</Наименование><Порядок>1500</Порядок><Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/><Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Свойство><Код>23</Код><Наименование>СуммаВключаетНДС --&gt; СуммаВклНДС</Наименование><Порядок>1300</Порядок><Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/><Приемник Имя="СуммаВклНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>22</Код><Наименование> --&gt; Курс</Наименование><Порядок>1200</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.КурсВзаиморасчетов/?(Источник.КратностьВзаиморасчетов=0,1,Источник.КратностьВзаиморасчетов);</ПередВыгрузкой></Свойство><Свойство><Код>21</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>1100</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>12</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>13</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>300</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>14</Код><Наименование>ТипЦен --&gt; ТипЦен</Наименование><Порядок>400</Порядок><Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/><Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/><КодПравилаКонвертации>ТипыЦен                                           </КодПравилаКонвертации></Свойство><Свойство><Код>15</Код><Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование><Порядок>500</Порядок><Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/><Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство Поиск="true"><Код>17</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>700</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>19</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>900</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>20</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>1000</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Группа><Код>1</Код><Наименование>Товары --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>ИсходящиеДанные = Новый Структура("Док,ТабличнаяЧасть,ИмяНоменклатуры,ИмяТЧ");
ИсходящиеДанные.Док 			= Источник;
ИсходящиеДанные.ТабличнаяЧасть	= Источник.Товары;
ИсходящиеДанные.ИмяТЧ			= "Товары";
Выполнить(Алгоритмы.ДобавитьДокументыПоступленияВТабличнуюЧасть);

КоллекцияОбъектов.Колонки.Добавить("Услуга");
КоллекцияОбъектов.Колонки.Добавить("ГТД");
КоллекцияОбъектов.Колонки.Добавить("СтранаПроисхождения");
Для каждого Товар из КоллекцияОбъектов Цикл
	Товар.Услуга = Ложь;
	Товар.СтранаПроисхождения = Товар.СерияНоменклатуры.СтранаПроисхождения;
	Товар.ГТД = Товар.СерияНоменклатуры.НомерГТД;
КонецЦикла;

ВидДок = Источник.Метаданные().Имя;
Если ВидДок = "РеализацияТоваровУслуг" Тогда
	КоллекцияОбъектов = ИсходящиеДанные.КоллекцияОбъектов;
	Для каждого Товар из Источник.Услуги Цикл
		Стр = КоллекцияОбъектов.Добавить();
		Стр.Номенклатура = Товар.Номенклатура;
		Стр.Услуга = Истина;
		Стр.Количество = Товар.Количество;
		Стр.Цена = ?(Товар.Количество=0, 0, Товар.Сумма / Товар.Количество);
		Стр.Сумма = Товар.Сумма;
		Стр.СтавкаНДС = Товар.СтавкаНДС;
		Стр.СуммаНДС = Товар.СуммаНДС;
		Стр.ГТД = Справочники.НомераГТД.ПустаяСсылка();
		Стр.СтранаПроисхождения = Справочники.КлассификаторСтранМира.ПустаяСсылка();
	КонецЦикла;
КонецЕсли;</ПередОбработкойВыгрузки><ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("СкладКомпании", Источник.Склад);
ИсходящиеДанные.Вставить("Услуга", ОбъектКоллекции.Услуга);
ИсходящиеДанные.Вставить("Номенклатура", ОбъектКоллекции.Номенклатура);
ИсходящиеДанные.Вставить("СтатусПартии", ОбъектКоллекции.СтатусПартии);
ИсходящиеДанные.Вставить("ДатаДокумента", Источник.Дата);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Свойство><Код>26</Код><Наименование> --&gt; ДокументПоступления</Наименование><Порядок>1100</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><ПриВыгрузке>ИсходящиеДанные = Новый Структура("ДокументПоступления");
ИсходящиеДанные.ДокументПоступления = ОбъектКоллекции.ДокументПоступления;
Выполнить(Алгоритмы.НайтиПКОДляДокументаПоступления);</ПриВыгрузке></Свойство><Свойство><Код>5</Код><Наименование>Сумма --&gt; Сумма</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>4</Код><Наименование>Цена --&gt; Цена</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ОбъектКоллекции.Сумма / ?(ОбъектКоллекции.Количество = 0, 1, ОбъектКоллекции.Количество);</ПередВыгрузкой></Свойство><Свойство><Код>3</Код><Наименование> --&gt; Количество</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>2</Код><Наименование>Номенклатура --&gt; Номенклатура</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации></Свойство><Свойство><Код>6</Код><Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>7</Код><Наименование>СуммаНДС --&gt; СуммаНДС</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>10</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = ?(ОбъектКоллекции.Номенклатура.Услуга, "Услуга", "Товар");</ПередВыгрузкой></Свойство><Свойство><Код>11</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>РеализацияОтчетКомиссионераОПродажах</Код><Наименование>ДокументСсылка.ОтчетКомиссионераОПродажах --&gt; ДокументСсылка.Реализация</Наименование><Порядок>200</Порядок><Источник>ДокументСсылка.ОтчетКомиссионераОПродажах</Источник><Приемник>ДокументСсылка.Реализация</Приемник><Свойства><Свойство><Код>14</Код><Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование><Порядок>300</Порядок><Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/><Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>13</Код><Наименование>ТипЦен --&gt; ТипЦен</Наименование><Порядок>200</Порядок><Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/><Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/><КодПравилаКонвертации>ТипыЦен                                           </КодПравилаКонвертации></Свойство><Свойство><Код>15</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>400</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>16</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>17</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>600</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>19</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>800</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>20</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>900</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>21</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>1000</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>22</Код><Наименование> --&gt; Курс</Наименование><Порядок>1100</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.КурсВзаиморасчетов/?(Источник.КратностьВзаиморасчетов=0,1,Источник.КратностьВзаиморасчетов);</ПередВыгрузкой></Свойство><Свойство><Код>24</Код><Наименование> --&gt; Склад</Наименование><Порядок>1300</Порядок><Источник/><Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>ТоварыОгруженные                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = "Товары отгруженные";</ПередВыгрузкой></Свойство><Группа><Код>1</Код><Наименование>Товары --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>ИсходящиеДанные = Новый Структура("Док,ТабличнаяЧасть,ИмяНоменклатуры,ИмяТЧ");
ИсходящиеДанные.Док 			= Источник;
ИсходящиеДанные.ИмяНоменклатуры = "Номенклатура";
ИсходящиеДанные.ТабличнаяЧасть	= Источник.Товары;
ИсходящиеДанные.ИмяТЧ			= "Товары";
Выполнить(Алгоритмы.ДобавитьДокументыПоступленияВТабличнуюЧасть);</ПередОбработкойВыгрузки><ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ВидДок", Источник.Метаданные().Имя);
ИсходящиеДанные.Вставить("СтатусПартии", ОбъектКоллекции.СтатусПартии);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Свойство><Код>12</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>1100</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство><Свойство><Код>8</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "Товар";</ПередВыгрузкой></Свойство><Свойство><Код>7</Код><Наименование>СуммаНДС --&gt; СуммаНДС</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>6</Код><Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>5</Код><Наименование>Сумма --&gt; Сумма</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>4</Код><Наименование>Цена --&gt; Цена</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ОбъектКоллекции.Сумма / ?(ОбъектКоллекции.Количество = 0, 1, ОбъектКоллекции.Количество);</ПередВыгрузкой></Свойство><Свойство><Код>25</Код><Наименование> --&gt; ДокументПоступления</Наименование><Порядок>1200</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><ПриВыгрузке>ИсходящиеДанные = Новый Структура("ДокументПоступления");
ИсходящиеДанные.ДокументПоступления = ОбъектКоллекции.ДокументПоступления;
Выполнить(Алгоритмы.НайтиПКОДляДокументаПоступления);</ПриВыгрузке></Свойство><Свойство><Код>3</Код><Наименование> --&gt; Количество</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>2</Код><Наименование>Номенклатура --&gt; Номенклатура</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации></Свойство></Группа></Свойства><Значения/></Правило></Группа><Группа><Код>СчетаФактурыВыданные</Код><Наименование>СчетаФактурыВыданные</Наименование><Порядок>800</Порядок><Правило><Код>СФвыданныйОтчетКомиссионераОПродажах</Код><Наименование>ДокументСсылка.ОтчетКомиссионераОПродажах --&gt; ДокументСсылка.СчетФактураВыданный</Наименование><Порядок>100</Порядок><ПередВыгрузкой>Если Не Источник.Проведен или Не Источник.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Источник.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Источник.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.ОтчетКомиссионераОПродажах</Источник><Приемник>ДокументСсылка.СчетФактураВыданный</Приемник><Свойства><Группа><Код>1</Код><Наименование>Товары --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>ИсходящиеДанные = Новый Структура("Док,ТабличнаяЧасть,ИмяНоменклатуры,ИмяТЧ");
ИсходящиеДанные.Док 			= Источник;
ИсходящиеДанные.ТабличнаяЧасть	= Источник.Товары;
ИсходящиеДанные.ИмяТЧ			= "Товары";
Выполнить(Алгоритмы.ДобавитьДокументыПоступленияВТабличнуюЧасть);

КоллекцияОбъектов.Колонки.Добавить("Услуга");
КоллекцияОбъектов.Колонки.Добавить("ГТД");
КоллекцияОбъектов.Колонки.Добавить("СтранаПроисхождения");
Для каждого Товар из КоллекцияОбъектов Цикл
	Товар.Услуга = Ложь;
	Товар.СтранаПроисхождения = Товар.СерияНоменклатуры.СтранаПроисхождения;
	Товар.ГТД = Товар.СерияНоменклатуры.НомерГТД;
КонецЦикла;</ПередОбработкойВыгрузки><ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ВидДок", Источник.Метаданные().Имя);
ИсходящиеДанные.Вставить("СтатусПартии", ОбъектКоллекции.СтатусПартии);
ИсходящиеДанные.Вставить("ДатаДокумента", Источник.Дата);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Свойство><Код>13</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>1200</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство><Свойство><Код>28</Код><Наименование> --&gt; ГТД</Наименование><Порядок>1300</Порядок><Источник/><Приемник Имя="ГТД" Вид="Реквизит" Тип="СправочникСсылка.ГТД"/><КодПравилаКонвертации>ГТД                                               </КодПравилаКонвертации><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("СтранаПроисхождения");
ИсходящиеДанные.СтранаПроисхождения = ОбъектКоллекции.СтранаПроисхождения;</ПередВыгрузкой></Свойство><Свойство><Код>12</Код><Наименование> --&gt; ДокОснование</Наименование><Порядок>1100</Порядок><Источник/><Приемник Имя="ДокОснование" Вид="Реквизит"/><КодПравилаКонвертации>РеализацияОтчетКомиссионераОПродажах              </КодПравилаКонвертации><ПередВыгрузкой>Значение = Источник;</ПередВыгрузкой></Свойство><Свойство><Код>11</Код><Наименование> --&gt; СуммаБезНДС</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="СуммаБезНДС" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ОбъектКоллекции.Сумма - ?(Источник.СуммаВключаетНДС, ОбъектКоллекции.СуммаНДС, 0);</ПередВыгрузкой></Свойство><Свойство><Код>10</Код><Наименование>ЕдиницаИзмерения --&gt; Единица</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="Единица" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерений"/><КодПравилаКонвертации>ЕдиницыИзмерений                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ОбъектКоллекции.ЕдиницаИзмерения;</ПередВыгрузкой></Свойство><Свойство><Код>9</Код><Наименование>Номенклатура --&gt; Наименование</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="Наименование" Вид="Реквизит"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации><ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура;</ПередВыгрузкой></Свойство><Свойство><Код>7</Код><Наименование>СуммаНДС --&gt; СуммаНДС</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>6</Код><Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>4</Код><Наименование> --&gt; Сумма</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ОбъектКоллекции.Сумма + ?(Источник.СуммаВключаетНДС, 0, ОбъектКоллекции.СуммаНДС);</ПередВыгрузкой></Свойство><Свойство><Код>3</Код><Наименование> --&gt; Цена</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Количество = ОбъектКоллекции.Количество; 
Сумма = ОбъектКоллекции.Сумма - ?(Источник.СуммаВключаетНДС, ОбъектКоллекции.СуммаНДС, 0);
Значение = Сумма / ?(Количество = 0, 1, Количество);</ПередВыгрузкой></Свойство><Свойство><Код>2</Код><Наименование> --&gt; Количество</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство></Группа><Свойство><Код>14</Код><Наименование>ТипЦен --&gt; ТипЦен</Наименование><Порядок>200</Порядок><Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/><Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/><КодПравилаКонвертации>ТипыЦен                                           </КодПравилаКонвертации></Свойство><Свойство><Код>15</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>300</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>16</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>17</Код><Наименование> --&gt; ДатаДок</Наименование><Порядок>500</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство Поиск="true"><Код>18</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>600</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/></Свойство><Свойство><Код>19</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>700</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>20</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>800</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>21</Код><Наименование> --&gt; АвтоКнигаПродаж</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="АвтоКнигаПродаж" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>22</Код><Наименование> --&gt; НомерПлатРасчДок</Наименование><Порядок>1000</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="НомерПлатРасчДок" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>31</Код><Наименование> --&gt; ВидОперации</Наименование><Порядок>1800</Порядок><Источник/><Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСчетаФактурыВыданного"/><ПередВыгрузкой>Значение = "Реализация";</ПередВыгрузкой></Свойство><Свойство><Код>30</Код><Наименование> --&gt; АвтоКнигаПокупок</Наименование><Порядок>1700</Порядок><Источник/><Приемник Имя="АвтоКнигаПокупок" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>29</Код><Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование><Порядок>1600</Порядок><Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>27</Код><Наименование>Контрагент --&gt; Грузополучатель</Наименование><Порядок>1500</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>26</Код><Наименование> --&gt; ВариантОтправки</Наименование><Порядок>1400</Порядок><Источник/><Приемник Имя="ВариантОтправки" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>25</Код><Наименование> --&gt; Курс</Наименование><Порядок>1300</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.КурсВзаиморасчетов/?(Источник.КратностьВзаиморасчетов=0,1,Источник.КратностьВзаиморасчетов);</ПередВыгрузкой></Свойство><Свойство><Код>24</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>1200</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>23</Код><Наименование> --&gt; ДатаПлатРасчДок</Наименование><Порядок>1100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаПлатРасчДок" Вид="Реквизит" Тип="Дата"/></Свойство></Свойства><Значения/></Правило><Правило><Код>СФвыданныйОтчетКомитентуОПродажах</Код><Наименование>ДокументСсылка.ОтчетКомитентуОПродажах --&gt; ДокументСсылка.СчетФактураВыданный</Наименование><Порядок>100</Порядок><ПередВыгрузкой>Если Не Источник.Проведен или Не Источник.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Источник.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Источник.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.ОтчетКомитентуОПродажах</Источник><Приемник>ДокументСсылка.СчетФактураВыданный</Приемник><Свойства><Свойство Поиск="true"><Код>15</Код><Наименование> --&gt; ДатаДок</Наименование><Порядок>500</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство Поиск="true"><Код>16</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>600</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/></Свойство><Свойство><Код>17</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>700</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>18</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>800</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>19</Код><Наименование> --&gt; АвтоКнигаПродаж</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="АвтоКнигаПродаж" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>20</Код><Наименование> --&gt; НомерПлатРасчДок</Наименование><Порядок>1000</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="НомерПлатРасчДок" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>21</Код><Наименование> --&gt; ДатаПлатРасчДок</Наименование><Порядок>1100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаПлатРасчДок" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>22</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>1200</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>23</Код><Наименование> --&gt; Курс</Наименование><Порядок>1300</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.КурсВзаиморасчетов/?(Источник.КратностьВзаиморасчетов=0,1,Источник.КратностьВзаиморасчетов);</ПередВыгрузкой></Свойство><Свойство><Код>24</Код><Наименование> --&gt; ВариантОтправки</Наименование><Порядок>1400</Порядок><Источник/><Приемник Имя="ВариантОтправки" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>26</Код><Наименование> --&gt; ВидОперации</Наименование><Порядок>1500</Порядок><Источник/><Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСчетаФактурыВыданного"/><ПередВыгрузкой>Значение = "Реализация";</ПередВыгрузкой></Свойство><Свойство><Код>1</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>300</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>2</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>3</Код><Наименование>ТипЦен --&gt; ТипЦен</Наименование><Порядок>200</Порядок><Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатурыКонтрагентов"/><Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/><КодПравилаКонвертации>ТипыЦен                                           </КодПравилаКонвертации></Свойство><Группа><Код>4</Код><Наименование> --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("Наименование");
КоллекцияОбъектов.Колонки.Добавить("Количество");
КоллекцияОбъектов.Колонки.Добавить("Единица");
КоллекцияОбъектов.Колонки.Добавить("Цена");
КоллекцияОбъектов.Колонки.Добавить("СуммаБезНДС");
КоллекцияОбъектов.Колонки.Добавить("Сумма");
КоллекцияОбъектов.Колонки.Добавить("СтавкаНДС");
КоллекцияОбъектов.Колонки.Добавить("СуммаНДС");
КоллекцияОбъектов.Колонки.Добавить("ДокОснование");
КоллекцияОбъектов.Колонки.Добавить("ВидДеятельности");

ОбъектКоллекции = КоллекцияОбъектов.Добавить();
ОбъектКоллекции.Наименование = "Комиссионное вознаграждение";
ОбъектКоллекции.Количество = 1;
ОбъектКоллекции.Единица = Справочники.КлассификаторЕдиницИзмерения.НайтиПоКоду("642");
ОбъектКоллекции.Цена = Источник.СуммаВознаграждения;
ОбъектКоллекции.СуммаБезНДС = Источник.СуммаВознаграждения;
ОбъектКоллекции.Сумма = Источник.СуммаВознаграждения;
ОбъектКоллекции.СтавкаНДС = Источник.СтавкаНДСВознаграждения;
ОбъектКоллекции.СуммаНДС = УчетНДС.РассчитатьСуммуНДС(Источник.СуммаВознаграждения, Истина, Истина, УчетНДС.ПолучитьСтавкуНДС(Источник.СтавкаНДСВознаграждения));
ОбъектКоллекции.ДокОснование = Источник;</ПередОбработкойВыгрузки><ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("Услуга", Истина);
ИсходящиеДанные.Вставить("ВидДок", Источник.Метаданные().Имя);
ИсходящиеДанные.Вставить("ДатаДокумента", Источник.Дата);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Свойство><Код>25</Код><Наименование> --&gt; Единица</Наименование><Порядок>1100</Порядок><Источник/><Приемник Имя="Единица" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерений"/><КодПравилаКонвертации>ЕдиницыИзмеренийКлассификатор                     </КодПравилаКонвертации></Свойство><Свойство><Код>5</Код><Наименование> --&gt; Наименование</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Наименование" Вид="Реквизит"/><КодПравилаКонвертации>КомиссионноеВознаграждение                        </КодПравилаКонвертации><ПередВыгрузкой>Значение = "Комиссионное вознаграждение";</ПередВыгрузкой></Свойство><Свойство><Код>6</Код><Наименование> --&gt; Количество</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>8</Код><Наименование> --&gt; Цена</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>9</Код><Наименование> --&gt; СуммаБезНДС</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="СуммаБезНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>10</Код><Наименование> --&gt; Сумма</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>11</Код><Наименование> --&gt; СтавкаНДС</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>12</Код><Наименование> --&gt; СуммаНДС</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>13</Код><Наименование> --&gt; ДокОснование</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="ДокОснование" Вид="Реквизит"/><КодПравилаКонвертации>ОтчетКомитенту                                    </КодПравилаКонвертации></Свойство><Свойство><Код>14</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>СФвыданныйПриходныйКассовыйОрдер</Код><Наименование>ДокументСсылка.ПриходныйКассовыйОрдер --&gt; ДокументСсылка.СчетФактураВыданный</Наименование><Порядок>100</Порядок><ПередВыгрузкой>Если Не Источник.Проведен или Не Источник.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Источник.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Источник.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.ПриходныйКассовыйОрдер</Источник><Приемник>ДокументСсылка.СчетФактураВыданный</Приемник><Свойства><Свойство><Код>14</Код><Наименование> --&gt; АвтоКнигаПокупок</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="АвтоКнигаПокупок" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>15</Код><Наименование> --&gt; СФНаАванс</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="СФНаАванс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>16</Код><Наименование> --&gt; НомерПлатРасчДок</Наименование><Порядок>1000</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="НомерПлатРасчДок" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>17</Код><Наименование> --&gt; ДатаПлатРасчДок</Наименование><Порядок>1100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаПлатРасчДок" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>18</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>1200</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>19</Код><Наименование> --&gt; Курс</Наименование><Порядок>1300</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("ИмяДокумента", Источник.Метаданные().Имя);
Выполнить(Алгоритмы.ПолучитьКурсПлатежногоДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>20</Код><Наименование> --&gt; ВариантОтправки</Наименование><Порядок>1400</Порядок><Источник/><Приемник Имя="ВариантОтправки" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>23</Код><Наименование> --&gt; ВидОперации</Наименование><Порядок>1500</Порядок><Источник/><Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСчетаФактурыВыданного"/><ПередВыгрузкой>Значение = "Аванс";</ПередВыгрузкой></Свойство><Свойство><Код>13</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>700</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>12</Код><Наименование>Плательщик --&gt; Контрагент</Наименование><Порядок>600</Порядок><Источник Имя="Контрагент" Вид="Реквизит"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>11</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>10</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>400</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>9</Код><Наименование> --&gt; ДатаДок</Наименование><Порядок>300</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>1</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Группа><Код>2</Код><Наименование> --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("Наименование");
КоллекцияОбъектов.Колонки.Добавить("Сумма");
КоллекцияОбъектов.Колонки.Добавить("СтавкаНДС");
КоллекцияОбъектов.Колонки.Добавить("СуммаНДС");
КоллекцияОбъектов.Колонки.Добавить("ВидДеятельности");

ОбъектКоллекции = КоллекцияОбъектов.Добавить();
ОбъектКоллекции.Наименование = "Аванс (предв. оплата)";
ОбъектКоллекции.Сумма = Источник.СуммаДокумента;
ОбъектКоллекции.СтавкаНДС = Источник.СтавкаНДС;
ОбъектКоллекции.СуммаНДС = УчетНДС.РассчитатьСуммуНДС(Источник.СуммаДокумента, Истина, Истина, УчетНДС.ПолучитьСтавкуНДС(Источник.СтавкаНДС));</ПередОбработкойВыгрузки><ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Свойство><Код>21</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство><Свойство><Код>22</Код><Наименование> --&gt; ДокОснование</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="ДокОснование" Вид="Реквизит"/><КодПравилаКонвертации>ПриходныйОрдер                                    </КодПравилаКонвертации><ПередВыгрузкой>Значение = Источник;</ПередВыгрузкой></Свойство><Свойство><Код>7</Код><Наименование> --&gt; СуммаНДС</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>3</Код><Наименование> --&gt; Наименование</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Наименование" Вид="Реквизит"/></Свойство><Свойство><Код>5</Код><Наименование> --&gt; Сумма</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>6</Код><Наименование> --&gt; СтавкаНДС</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>СФвыданныйРеализацияТоваров</Код><Наименование>ДокументСсылка.РеализацияТоваров --&gt; ДокументСсылка.СчетФактураВыданный</Наименование><Порядок>100</Порядок><ПередВыгрузкой>Если Не Источник.Проведен или Не Источник.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Источник.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокСкладов.НайтиПоЗначению(Источник.Склад) = Неопределено) и (Параметры.СписокСкладов.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Источник.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
ИначеЕсли ВходящиеДанные = Неопределено Тогда
	 Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.РеализацияТоваровУслуг</Источник><Приемник>ДокументСсылка.СчетФактураВыданный</Приемник><Свойства><Группа><Код>1</Код><Наименование>Товары --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>ИсходящиеДанные = Новый Структура("Док,ТабличнаяЧасть,ИмяНоменклатуры,ИмяТЧ");
ИсходящиеДанные.Док 			= Источник;
ИсходящиеДанные.ТабличнаяЧасть	= Источник.Товары;
ИсходящиеДанные.ИмяТЧ			= "Товары";
Выполнить(Алгоритмы.ДобавитьДокументыПоступленияВТабличнуюЧасть);

КоллекцияОбъектов.Колонки.Добавить("Услуга");
КоллекцияОбъектов.Колонки.Добавить("ГТД");
КоллекцияОбъектов.Колонки.Добавить("СтранаПроисхождения");
Для каждого Товар из КоллекцияОбъектов Цикл
	Товар.Услуга = Ложь;
	Товар.СтранаПроисхождения = Товар.СерияНоменклатуры.СтранаПроисхождения;
	Товар.ГТД = Товар.СерияНоменклатуры.НомерГТД;
КонецЦикла;

ВидДок = Источник.Метаданные().Имя;
Если ВидДок = "РеализацияТоваровУслуг" Тогда
	КоллекцияОбъектов = ИсходящиеДанные.КоллекцияОбъектов;
	Для каждого Товар из Источник.Услуги Цикл
		Стр = КоллекцияОбъектов.Добавить();
		Стр.Номенклатура = Товар.Номенклатура;
		Стр.Услуга = Истина;
		Стр.ЕдиницаИзмерения = Справочники.ЕдиницыИзмерения.ПустаяСсылка();
		Стр.Количество = Товар.Количество;
		Стр.Цена = ?(Товар.Количество=0, 0, Товар.Сумма / Товар.Количество);
		Стр.Сумма = Товар.Сумма;
		Стр.СтавкаНДС = Товар.СтавкаНДС;
		Стр.СуммаНДС = Товар.СуммаНДС;
		Стр.ГТД = Справочники.НомераГТД.ПустаяСсылка();
		Стр.СтранаПроисхождения = Справочники.КлассификаторСтранМира.ПустаяСсылка();
	КонецЦикла;
КонецЕсли;</ПередОбработкойВыгрузки><ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("СкладКомпании", Источник.Склад);
ИсходящиеДанные.Вставить("Услуга", ОбъектКоллекции.Услуга);
ИсходящиеДанные.Вставить("Номенклатура", ОбъектКоллекции.Номенклатура);
ИсходящиеДанные.Вставить("СтатусПартии", ОбъектКоллекции.СтатусПартии);
ИсходящиеДанные.Вставить("ДатаДокумента", Источник.Дата);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Свойство><Код>12</Код><Наименование> --&gt; ДокОснование</Наименование><Порядок>1100</Порядок><Источник/><Приемник Имя="ДокОснование" Вид="Реквизит"/><КодПравилаКонвертации>ПродажаТоваров                                    </КодПравилаКонвертации><ПередВыгрузкой>ВидДок = Источник.Метаданные().Имя;
Если ВидДок = "ВозвратТоваровПоставщику" Тогда
	ИмяПКО = "ВозвратПоставщику";
	ТипПриемника = "ДокументСсылка.ВозвратПоставщику";
	
ИначеЕсли ВидДок = "ВозвратТоваровПоставщикуИзНТТ" Тогда
	ИмяПКО = "ВозвратПоставщикуИзНТТ";
	ТипПриемника = "ДокументСсылка.ВозвратПоставщику";
КонецЕсли;

Значение = Источник;</ПередВыгрузкой></Свойство><Свойство><Код>11</Код><Наименование> --&gt; СуммаБезНДС</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="СуммаБезНДС" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ОбъектКоллекции.Сумма - ?(Источник.СуммаВключаетНДС, ОбъектКоллекции.СуммаНДС, 0);</ПередВыгрузкой></Свойство><Свойство><Код>10</Код><Наименование>ГТД --&gt; ГТД</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="ГТД" Вид="Реквизит" Тип="СправочникСсылка.ГТД"/><КодПравилаКонвертации>ГТД                                               </КодПравилаКонвертации><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("СтранаПроисхождения");
ИсходящиеДанные.СтранаПроисхождения = ОбъектКоллекции.СтранаПроисхождения;</ПередВыгрузкой></Свойство><Свойство><Код>8</Код><Наименование>СуммаНДС --&gt; СуммаНДС</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>7</Код><Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>6</Код><Наименование> --&gt; Сумма</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ОбъектКоллекции.Сумма + ?(Источник.СуммаВключаетНДС, 0, ОбъектКоллекции.СуммаНДС);</ПередВыгрузкой></Свойство><Свойство><Код>5</Код><Наименование> --&gt; Цена</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Количество = ОбъектКоллекции.Количество; 
Сумма = ОбъектКоллекции.Сумма - ?(Источник.СуммаВключаетНДС, ОбъектКоллекции.СуммаНДС, 0);
Значение = Сумма / ?(Количество = 0, 1, Количество);</ПередВыгрузкой></Свойство><Свойство><Код>4</Код><Наименование>ЕдиницаИзмерения --&gt; Единица</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Единица" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерений"/><КодПравилаКонвертации>ЕдиницыИзмерений                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ОбъектКоллекции.ЕдиницаИзмерения;</ПередВыгрузкой></Свойство><Свойство><Код>3</Код><Наименование> --&gt; Количество</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>2</Код><Наименование>Номенклатура --&gt; Наименование</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Наименование" Вид="Реквизит"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации><ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура;</ПередВыгрузкой></Свойство><Свойство><Код>13</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>1200</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство></Группа><Свойство><Код>29</Код><Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование><Порядок>1700</Порядок><Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации><ПередВыгрузкой>ВидДок = Источник.Метаданные().Имя;
Если ВидДок = "ВозвратТоваровПоставщику" Тогда
	Значение = Источник.Грузоотправитель;
	
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>28</Код><Наименование> --&gt; ВидОперации</Наименование><Порядок>1600</Порядок><Источник/><Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСчетаФактурыВыданного"/><ПередВыгрузкой>ВидДок = Источник.Метаданные().Имя;

Если ВидДок = "РеализацияТоваровУслуг" Тогда
	Значение = "Реализация";
	
Иначе
	Значение = "Возврат";
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>27</Код><Наименование>Контрагент --&gt; Грузополучатель</Наименование><Порядок>1500</Порядок><Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>26</Код><Наименование> --&gt; ВариантОтправки</Наименование><Порядок>1400</Порядок><Источник/><Приемник Имя="ВариантОтправки" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>25</Код><Наименование> --&gt; Курс</Наименование><Порядок>1300</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.КурсВзаиморасчетов/?(Источник.КратностьВзаиморасчетов=0,1,Источник.КратностьВзаиморасчетов);</ПередВыгрузкой></Свойство><Свойство><Код>24</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>1200</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>23</Код><Наименование> --&gt; ДатаПлатРасчДок</Наименование><Порядок>1100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаПлатРасчДок" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>22</Код><Наименование> --&gt; НомерПлатРасчДок</Наименование><Порядок>1000</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="НомерПлатРасчДок" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>14</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>15</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>300</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>16</Код><Наименование>ТипЦен --&gt; ТипЦен</Наименование><Порядок>400</Порядок><Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/><Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/><КодПравилаКонвертации>ТипыЦен                                           </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>17</Код><Наименование> --&gt; ДатаДок</Наименование><Порядок>500</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство Поиск="true"><Код>18</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>600</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/></Свойство><Свойство><Код>19</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>700</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>20</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>800</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>21</Код><Наименование> --&gt; АвтоКнигаПродаж</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="АвтоКнигаПродаж" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>СФвыданныйСтрокаВыпискиПриход</Код><Наименование>ДокументСсылка.СтрокаВыпискиПриход --&gt; ДокументСсылка.СчетФактураВыданный</Наименование><Порядок>100</Порядок><ПередВыгрузкой>Если Не Источник.Проведен или Не Источник.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Источник.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.ПлатежноеПоручениеВходящее</Источник><Приемник>ДокументСсылка.СчетФактураВыданный</Приемник><Свойства><Свойство><Код>1</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>2</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>300</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>17</Код><Наименование> --&gt; ДатаПлатРасчДок</Наименование><Порядок>1100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаПлатРасчДок" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>18</Код><Наименование> --&gt; Валюта</Наименование><Порядок>1200</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>19</Код><Наименование> --&gt; Курс</Наименование><Порядок>1300</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("ИмяДокумента", Источник.Метаданные().Имя);
Выполнить(Алгоритмы.ПолучитьКурсПлатежногоДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>20</Код><Наименование> --&gt; ВариантОтправки</Наименование><Порядок>1400</Порядок><Источник/><Приемник Имя="ВариантОтправки" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>22</Код><Наименование> --&gt; ВидОперации</Наименование><Порядок>1500</Порядок><Источник/><Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСчетаФактурыВыданного"/><ПередВыгрузкой>Значение = "Аванс";</ПередВыгрузкой></Свойство><Свойство><Код>16</Код><Наименование> --&gt; НомерПлатРасчДок</Наименование><Порядок>1000</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="НомерПлатРасчДок" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>15</Код><Наименование> --&gt; СФНаАванс</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="СФНаАванс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>14</Код><Наименование> --&gt; АвтоКнигаПокупок</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="АвтоКнигаПокупок" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>13</Код><Наименование> --&gt; Договор</Наименование><Порядок>700</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>12</Код><Наименование> --&gt; Автор</Наименование><Порядок>600</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>11</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>500</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>10</Код><Наименование> --&gt; ДатаДок</Наименование><Порядок>400</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Группа><Код>3</Код><Наименование> --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("Наименование");
КоллекцияОбъектов.Колонки.Добавить("Сумма");
КоллекцияОбъектов.Колонки.Добавить("СтавкаНДС");
КоллекцияОбъектов.Колонки.Добавить("СуммаНДС");
КоллекцияОбъектов.Колонки.Добавить("ВидДеятельности");

ОбъектКоллекции = КоллекцияОбъектов.Добавить();
ОбъектКоллекции.Наименование = "Аванс (предв. оплата)";
ОбъектКоллекции.Сумма = Источник.СуммаДокумента;
ОбъектКоллекции.СтавкаНДС = Перечисления.СтавкиНДС.НДС18_118;
ОбъектКоллекции.СуммаНДС = УчетНДС.РассчитатьСуммуНДС(Источник.СуммаДокумента, Истина, Истина, УчетНДС.ПолучитьСтавкуНДС(Перечисления.СтавкиНДС.НДС18_118));</ПередОбработкойВыгрузки><ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ВидОперации", Источник.ВидОперации);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Свойство><Код>4</Код><Наименование> --&gt; Наименование</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Наименование" Вид="Реквизит"/></Свойство><Свойство><Код>6</Код><Наименование> --&gt; Сумма</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>7</Код><Наименование> --&gt; СтавкаНДС</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>8</Код><Наименование> --&gt; СуммаНДС</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>9</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство><Свойство><Код>21</Код><Наименование> --&gt; ДокОснование</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="ДокОснование" Вид="Реквизит"/><КодПравилаКонвертации>ПлатежноеПоручениеВходящее                        </КодПравилаКонвертации><ПередВыгрузкой>Значение = Источник;</ПередВыгрузкой></Свойство></Группа></Свойства><Значения/></Правило></Группа><Группа><Код>СчетаФактурыПолученные</Код><Наименование>СчетаФактурыПолученные</Наименование><Порядок>700</Порядок><Правило><Код>СФАвансовыйОтчет</Код><Наименование>ДокументСсылка.АвансовыйОтчет --&gt; ДокументСсылка.СчетФактураПолученный</Наименование><Порядок>700</Порядок><Источник>ДокументСсылка.СчетФактураПолученный</Источник><Приемник>ДокументСсылка.СчетФактураПолученный</Приемник><Свойства><Свойство Поиск="true"><Код>9</Код><Наименование> --&gt; ДатаДок</Наименование><Порядок>300</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>17</Код><Наименование> --&gt; ДатаСчетаФактуры</Наименование><Порядок>1200</Порядок><Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаСчетаФактуры" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>16</Код><Наименование> --&gt; Курс</Наименование><Порядок>1100</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ВходящиеДанные.КурсДокумента/?(ВходящиеДанные.КратностьДокумента=0,1,ВходящиеДанные.КратностьДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>15</Код><Наименование> --&gt; Валюта</Наименование><Порядок>1000</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>14</Код><Наименование> --&gt; АвтоКнигаПокупок</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="АвтоКнигаПокупок" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>13</Код><Наименование> --&gt; ДатаНомерСчетаФактуры</Наименование><Порядок>800</Порядок><Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/><Приемник Имя="ДатаНомерСчетаФактуры" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>12</Код><Наименование> --&gt; Договор</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации><ПередВыгрузкой>Значение = Источник.Контрагент.ОсновнойДоговорКонтрагента;</ПередВыгрузкой></Свойство><Свойство><Код>11</Код><Наименование> --&gt; Контрагент</Наименование><Порядок>600</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>10</Код><Наименование> --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Группа><Код>2</Код><Наименование> --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><Свойство><Код>7</Код><Наименование> --&gt; СуммаБезНДС</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="СуммаБезНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>6</Код><Наименование> --&gt; СуммаНДС</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>5</Код><Наименование> --&gt; СтавкаНДС</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>4</Код><Наименование> --&gt; Сумма</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>3</Код><Наименование> --&gt; ДокументПоступления</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("ТабличнаяЧасть, ДатаДок, Автор, Комментарий, ВидДеятельности, ОблагаетсяНДС, Валюта, Курс, УчитыватьНДС, СуммаВклНДС, Склад, НомерДокВходящий, ДатаДокВходящий, ВидДокВходящий, ВидВзаиморасчетов, ФизЛицо, ТипЦен, Контрагент");
ИсходящиеДанные.ДатаДок           = ОбъектКоллекции.ДокументПоступленияДатаДок;
ИсходящиеДанные.Комментарий       = ОбъектКоллекции.ДокументПоступленияКомментарий;

УзелСвойства = СоздатьУзел("Свойство");
УстановитьАтрибут(УзелСвойства, "Имя", ПКС.Приемник);

ИмяПКО = ОбъектКоллекции.ИмяПКО;

ПКОСвойств = Правила[ИмяПКО];
УзелСсылки = ВыгрузитьПоПравилу(,, ИсходящиеДанные,, ИмяПКО,, Истина);
УстановитьАтрибут(УзелСвойства, "Тип", ПКОСвойств.Приемник);
ДобавитьПодчиненный(УзелСвойства, УзелСсылки);
ДобавитьПодчиненный(УзелКоллекцииСвойств, УзелСвойства);

Отказ = Истина;</ПередВыгрузкой></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>СФВозвратТоваровОтПокупателя</Код><Наименование>ДокументСсылка.ПоступлениеТоваров --&gt; ДокументСсылка.СчетФактураПолученный</Наименование><Порядок>100</Порядок><ПередВыгрузкой>Если Не Источник.Проведен или Не Источник.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Источник.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокСкладов.НайтиПоЗначению(Источник.СкладОрдер) = Неопределено) и (Параметры.СписокСкладов.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Источник.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.ВозвратТоваровОтПокупателя</Источник><Приемник>ДокументСсылка.СчетФактураПолученный</Приемник><Свойства><Свойство><Код>6</Код><Наименование> --&gt; Курс</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.КурсВзаиморасчетов/?(Источник.КратностьВзаиморасчетов=0,1,Источник.КратностьВзаиморасчетов);</ПередВыгрузкой></Свойство><Свойство><Код>14</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>900</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>15</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>600</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>16</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>200</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>17</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>18</Код><Наименование> --&gt; СчетФактураНаВозврат</Наименование><Порядок>1200</Порядок><Источник/><Приемник Имя="СчетФактураНаВозврат" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>5</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>4</Код><Наименование> --&gt; ДатаСчетаФактуры</Наименование><Порядок>1100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаСчетаФактуры" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>3</Код><Наименование> --&gt; ДатаНомерСчетаФактуры</Наименование><Порядок>700</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаНомерСчетаФактуры" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>2</Код><Наименование> --&gt; ДатаДок</Наименование><Порядок>400</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>1</Код><Наименование> --&gt; АвтоКнигаПокупок</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="АвтоКнигаПокупок" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Группа><Код>7</Код><Наименование> --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("ДокументПоступления");
КоллекцияОбъектов.Колонки.Добавить("СуммаБезНДС");
КоллекцияОбъектов.Колонки.Добавить("Сумма");
КоллекцияОбъектов.Колонки.Добавить("СтавкаНДС");
КоллекцияОбъектов.Колонки.Добавить("СуммаНДС");
КоллекцияОбъектов.Колонки.Добавить("ГТД");
КоллекцияОбъектов.Колонки.Добавить("СтранаПроисхождения");

Для каждого стр из Источник.Товары Цикл
	ОбъектКоллекции = КоллекцияОбъектов.Добавить();
	ОбъектКоллекции.ДокументПоступления = Источник;
	ОбъектКоллекции.СтранаПроисхождения = Стр.СерияНоменклатуры.СтранаПроисхождения;
	ОбъектКоллекции.ГТД = Стр.СерияНоменклатуры.НомерГТД;
	ОбъектКоллекции.СуммаБезНДС = Стр.Сумма - ?(Источник.СуммаВключаетНДС, Стр.СуммаНДС, 0);
	ОбъектКоллекции.Сумма = ОбъектКоллекции.СуммаБезНДС + Стр.СуммаНДС;
	ОбъектКоллекции.СтавкаНДС = Стр.СтавкаНДС;
	ОбъектКоллекции.СуммаНДС = Стр.СуммаНДС;
КонецЦикла;

КоллекцияОбъектов.Свернуть("ДокументПоступления,СтавкаНДС,ГТД,СтранаПроисхождения", "Сумма,СуммаБезНДС,СуммаНДС");</ПередОбработкойВыгрузки><Свойство><Код>8</Код><Наименование> --&gt; ГТД</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="ГТД" Вид="Реквизит" Тип="СправочникСсылка.ГТД"/><КодПравилаКонвертации>ГТД                                               </КодПравилаКонвертации><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("СтранаПроисхождения");
ИсходящиеДанные.СтранаПроисхождения = ОбъектКоллекции.СтранаПроисхождения;</ПередВыгрузкой></Свойство><Свойство><Код>9</Код><Наименование> --&gt; ДокументПоступления</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><КодПравилаКонвертации>ПоступлениеТМЦ                                    </КодПравилаКонвертации></Свойство><Свойство><Код>10</Код><Наименование> --&gt; СтавкаНДС</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>11</Код><Наименование> --&gt; Сумма</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>12</Код><Наименование> --&gt; СуммаБезНДС</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="СуммаБезНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>13</Код><Наименование> --&gt; СуммаНДС</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>СФОтчетКомиссионераОПродажах</Код><Наименование>ДокументСсылка.ОтчетКомиссионераОПродажах --&gt; ДокументСсылка.СчетФактураПолученный</Наименование><Порядок>300</Порядок><ПередВыгрузкой>Если Не Источник.Проведен или Не Источник.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Источник.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Источник.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.ОтчетКомиссионераОПродажах</Источник><Приемник>ДокументСсылка.СчетФактураПолученный</Приемник><Свойства><Свойство><Код>1</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>200</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>2</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>9</Код><Наименование> --&gt; ДатаДок</Наименование><Порядок>400</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>10</Код><Наименование> --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>11</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>600</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>12</Код><Наименование> --&gt; ДатаНомерСчетаФактуры</Наименование><Порядок>700</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаНомерСчетаФактуры" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>13</Код><Наименование> --&gt; АвтоКнигаПокупок</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="АвтоКнигаПокупок" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>14</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>900</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>15</Код><Наименование> --&gt; Курс</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.КурсВзаиморасчетов/?(Источник.КратностьВзаиморасчетов=0,1,Источник.КратностьВзаиморасчетов);</ПередВыгрузкой></Свойство><Свойство><Код>16</Код><Наименование> --&gt; ДатаСчетаФактуры</Наименование><Порядок>1100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаСчетаФактуры" Вид="Реквизит" Тип="Дата"/></Свойство><Группа><Код>3</Код><Наименование> --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("ДокументПоступления");
КоллекцияОбъектов.Колонки.Добавить("СуммаБезНДС");
КоллекцияОбъектов.Колонки.Добавить("Сумма");
КоллекцияОбъектов.Колонки.Добавить("СтавкаНДС");
КоллекцияОбъектов.Колонки.Добавить("СуммаНДС");

ОбъектКоллекции = КоллекцияОбъектов.Добавить();
ОбъектКоллекции.ДокументПоступления = Источник;
ОбъектКоллекции.СуммаБезНДС = Источник.СуммаВознаграждения;
ОбъектКоллекции.Сумма = Источник.СуммаВознаграждения;
ОбъектКоллекции.СтавкаНДС = Источник.СтавкаНДСВознаграждения;
ОбъектКоллекции.СуммаНДС = УчетНДС.РассчитатьСуммуНДС(Источник.СуммаВознаграждения, Истина, Истина, УчетНДС.ПолучитьСтавкуНДС(Источник.СтавкаНДСВознаграждения));</ПередОбработкойВыгрузки><Свойство><Код>4</Код><Наименование> --&gt; ДокументПоступления</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><КодПравилаКонвертации>ПоступлениеОтчетКомиссионера                      </КодПравилаКонвертации></Свойство><Свойство><Код>5</Код><Наименование> --&gt; Сумма</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>6</Код><Наименование> --&gt; СтавкаНДС</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>7</Код><Наименование> --&gt; СуммаНДС</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>8</Код><Наименование> --&gt; СуммаБезНДС</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="СуммаБезНДС" Вид="Реквизит" Тип="Число"/></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>СФПоступлениеДопРасходов</Код><Наименование>ДокументСсылка.ПоступлениеДопРасходов --&gt; ДокументСсылка.СчетФактураПолученный</Наименование><Порядок>200</Порядок><ПередВыгрузкой>Если Не Источник.Проведен или Не Источник.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Источник.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Источник.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.ПоступлениеДопРасходов</Источник><Приемник>ДокументСсылка.СчетФактураПолученный</Приемник><Свойства><Свойство><Код>14</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>900</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>13</Код><Наименование> --&gt; АвтоКнигаПокупок</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="АвтоКнигаПокупок" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>12</Код><Наименование> --&gt; ДатаНомерСчетаФактуры</Наименование><Порядок>700</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаНомерСчетаФактуры" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>11</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>600</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>10</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>9</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>400</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>8</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>200</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>7</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>15</Код><Наименование> --&gt; Курс</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.КурсВзаиморасчетов/?(Источник.КратностьВзаиморасчетов=0,1,Источник.КратностьВзаиморасчетов);</ПередВыгрузкой></Свойство><Свойство><Код>16</Код><Наименование> --&gt; ДатаСчетаФактуры</Наименование><Порядок>1100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаСчетаФактуры" Вид="Реквизит" Тип="Дата"/></Свойство><Группа><Код>1</Код><Наименование> --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("ДокументПоступления");
КоллекцияОбъектов.Колонки.Добавить("СуммаБезНДС");
КоллекцияОбъектов.Колонки.Добавить("Сумма");
КоллекцияОбъектов.Колонки.Добавить("СтавкаНДС");
КоллекцияОбъектов.Колонки.Добавить("СуммаНДС");

ОбъектКоллекции = КоллекцияОбъектов.Добавить();
ОбъектКоллекции.ДокументПоступления = Источник;
ОбъектКоллекции.СуммаБезНДС = Источник.Сумма - ?(Источник.СуммаВключаетНДС, Источник.СуммаНДС, 0);
ОбъектКоллекции.Сумма = ОбъектКоллекции.СуммаБезНДС + Источник.СуммаНДС;
ОбъектКоллекции.СтавкаНДС = Источник.СтавкаНДС;
ОбъектКоллекции.СуммаНДС = Источник.СуммаНДС;</ПередОбработкойВыгрузки><Свойство><Код>2</Код><Наименование> --&gt; ДокументПоступления</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><КодПравилаКонвертации>ПоступлениеТМЦдопРасходы                          </КодПравилаКонвертации></Свойство><Свойство><Код>3</Код><Наименование> --&gt; Сумма</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>4</Код><Наименование> --&gt; СтавкаНДС</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>5</Код><Наименование> --&gt; СуммаНДС</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>6</Код><Наименование> --&gt; СуммаБезНДС</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="СуммаБезНДС" Вид="Реквизит" Тип="Число"/></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>СФПоступлениеТоваров</Код><Наименование>ДокументСсылка.ПоступлениеТоваров --&gt; ДокументСсылка.СчетФактураПолученный</Наименование><Порядок>100</Порядок><ПередВыгрузкой>Если Не Источник.Проведен или Не Источник.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Источник.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокСкладов.НайтиПоЗначению(Источник.СкладОрдер) = Неопределено) и (Параметры.СписокСкладов.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Источник.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>ДокументСсылка.ПоступлениеТоваровУслуг</Источник><Приемник>ДокументСсылка.СчетФактураПолученный</Приемник><Свойства><Свойство><Код>18</Код><Наименование> --&gt; ДатаСчетаФактуры</Наименование><Порядок>1100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаСчетаФактуры" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>17</Код><Наименование> --&gt; Курс</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.КурсВзаиморасчетов/?(Источник.КратностьВзаиморасчетов=0,1,Источник.КратностьВзаиморасчетов);</ПередВыгрузкой></Свойство><Свойство><Код>16</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>900</Порядок><Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>15</Код><Наименование> --&gt; АвтоКнигаПокупок</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="АвтоКнигаПокупок" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>14</Код><Наименование> --&gt; ДатаНомерСчетаФактуры</Наименование><Порядок>700</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаНомерСчетаФактуры" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>13</Код><Наименование>ДоговорВзаиморасчетов --&gt; Договор</Наименование><Порядок>600</Порядок><Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>12</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>11</Код><Наименование> --&gt; ДатаДок</Наименование><Порядок>400</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство Поиск="true"><Код>3</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>2</Код><Наименование>Контрагент --&gt; Контрагент</Наименование><Порядок>200</Порядок><Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Группа><Код>4</Код><Наименование> --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("ДокументПоступления");
КоллекцияОбъектов.Колонки.Добавить("СуммаБезНДС");
КоллекцияОбъектов.Колонки.Добавить("Сумма");
КоллекцияОбъектов.Колонки.Добавить("СтавкаНДС");
КоллекцияОбъектов.Колонки.Добавить("СуммаНДС");
КоллекцияОбъектов.Колонки.Добавить("ГТД");
КоллекцияОбъектов.Колонки.Добавить("СтранаПроисхождения");

Для каждого стр из Источник.Товары Цикл
	ОбъектКоллекции = КоллекцияОбъектов.Добавить();
	ОбъектКоллекции.ДокументПоступления = Источник;
	ОбъектКоллекции.СтранаПроисхождения = Стр.СерияНоменклатуры.СтранаПроисхождения;
	ОбъектКоллекции.ГТД = Стр.СерияНоменклатуры.НомерГТД;
	ОбъектКоллекции.СуммаБезНДС = Стр.Сумма - ?(Источник.СуммаВключаетНДС, Стр.СуммаНДС, 0);
	ОбъектКоллекции.Сумма = ОбъектКоллекции.СуммаБезНДС + Стр.СуммаНДС;
	ОбъектКоллекции.СтавкаНДС = Стр.СтавкаНДС;
	ОбъектКоллекции.СуммаНДС = Стр.СуммаНДС;
КонецЦикла;

Для каждого стр из Источник.Услуги Цикл
	ОбъектКоллекции = КоллекцияОбъектов.Добавить();
	ОбъектКоллекции.ДокументПоступления = Источник;
	ОбъектКоллекции.СтранаПроисхождения = Справочники.КлассификаторСтранМира.ПустаяСсылка();
	ОбъектКоллекции.ГТД = Справочники.НомераГТД.ПустаяСсылка();
	ОбъектКоллекции.СуммаБезНДС = Стр.Сумма - ?(Источник.СуммаВключаетНДС, Стр.СуммаНДС, 0);
	ОбъектКоллекции.Сумма = ОбъектКоллекции.СуммаБезНДС + Стр.СуммаНДС;
	ОбъектКоллекции.СтавкаНДС = Стр.СтавкаНДС;
	ОбъектКоллекции.СуммаНДС = Стр.СуммаНДС;
КонецЦикла;

КоллекцияОбъектов.Свернуть("ДокументПоступления,СтавкаНДС,ГТД,СтранаПроисхождения", "Сумма,СуммаБезНДС,СуммаНДС");</ПередОбработкойВыгрузки><Свойство><Код>10</Код><Наименование> --&gt; ГТД</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="ГТД" Вид="Реквизит" Тип="СправочникСсылка.ГТД"/><КодПравилаКонвертации>ГТД                                               </КодПравилаКонвертации><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("СтранаПроисхождения");
ИсходящиеДанные.СтранаПроисхождения = ОбъектКоллекции.СтранаПроисхождения;</ПередВыгрузкой></Свойство><Свойство><Код>9</Код><Наименование> --&gt; СуммаБезНДС</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="СуммаБезНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>8</Код><Наименование> --&gt; СуммаНДС</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>7</Код><Наименование> --&gt; СтавкаНДС</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>6</Код><Наименование> --&gt; Сумма</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>5</Код><Наименование> --&gt; ДокументПоступления</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><КодПравилаКонвертации>ПоступлениеТМЦ                                    </КодПравилаКонвертации></Свойство></Группа></Свойства><Значения/></Правило></Группа><Группа><Код>ТМЦ</Код><Наименование>ТМЦ</Наименование><Порядок>400</Порядок><Правило><Код>Комплектация</Код><Наименование>ДокументСсылка.КомплектацияНоменклатуры --&gt; ДокументСсылка.РасходМатериальныхРесурсов</Наименование><Порядок>400</Порядок><ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("СкладКомпании", Источник.Склад);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Источник>ДокументСсылка.КомплектацияНоменклатуры</Источник><Приемник>ДокументСсылка.РасходМатериальныхРесурсов</Приемник><Свойства><Свойство><Код>5</Код><Наименование>Комментарий --&gt; Комментарий</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>6</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>300</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство Поиск="true"><Код>7</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 10);</ПередВыгрузкой></Свойство><Свойство><Код>12</Код><Наименование>Номенклатура --&gt; ПолученныйРесурс</Наименование><Порядок>900</Порядок><Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><Приемник Имя="ПолученныйРесурс" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации></Свойство><Свойство><Код>11</Код><Наименование> --&gt; ВидПолученногоРесурса</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="ВидПолученногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "Товар";</ПередВыгрузкой></Свойство><Свойство><Код>10</Код><Наименование> --&gt; ОблагаетсяНДС</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="ОблагаетсяНДС" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности.ОблагаетсяНДС;</ПередВыгрузкой></Свойство><Свойство><Код>9</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство><Свойство><Код>8</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>15</Код><Наименование>СкладКомпании --&gt; Склад</Наименование><Порядок>1200</Порядок><Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/><Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Свойство><Код>14</Код><Наименование>СкладКомпании --&gt; СкладПолучатель</Наименование><Порядок>1100</Порядок><Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/><Приемник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Свойство><Код>13</Код><Наименование>КоличествоНоменклатуры --&gt; КоличествоПолучено</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="КоличествоПолучено" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.Коэффициент * Источник.Количество;</ПередВыгрузкой></Свойство><Группа><Код>1</Код><Наименование>Комплектующие --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>ИсходящиеДанные = Новый Структура("Док,ТабличнаяЧасть,ИмяНоменклатуры,ИмяТЧ");
ИсходящиеДанные.Док 			= Источник;
ИсходящиеДанные.ТабличнаяЧасть	= Источник.Комплектующие;
ИсходящиеДанные.ИмяТЧ			= "Комплектующие";
Выполнить(Алгоритмы.ДобавитьДокументыПоступленияВТабличнуюЧасть);</ПередОбработкойВыгрузки><Свойство><Код>3</Код><Наименование> --&gt; ВидИзрасходованногоРесурса</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="ВидИзрасходованногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "Товар";</ПередВыгрузкой></Свойство><Свойство><Код>4</Код><Наименование> --&gt; ИзрасходованныйРесурс</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="ИзрасходованныйРесурс" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации><ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура;</ПередВыгрузкой></Свойство><Свойство><Код>2</Код><Наименование> --&gt; КоличествоИзрасходовано</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="КоличествоИзрасходовано" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ОбъектКоллекции.Количество;</ПередВыгрузкой></Свойство><Свойство><Код>16</Код><Наименование> --&gt; ДокументПоступления</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><ПриВыгрузке>ИсходящиеДанные = Новый Структура("ДокументПоступления");
ИсходящиеДанные.ДокументПоступления = ОбъектКоллекции.ДокументПоступления;
Выполнить(Алгоритмы.НайтиПКОДляДокументаПоступления);</ПриВыгрузке></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>ОприходованиеТоваров</Код><Наименование>ДокументСсылка.ОприходованиеТоваров --&gt; ДокументСсылка.ПоступлениеТМЦ</Наименование><Порядок>200</Порядок><ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("СкладКомпании", Источник.Склад);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Источник>ДокументСсылка.ОприходованиеТоваров</Источник><Приемник>ДокументСсылка.ПоступлениеТМЦ</Приемник><Свойства><Свойство><Код>17</Код><Наименование>СкладКомпании --&gt; Склад</Наименование><Порядок>1100</Порядок><Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/><Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Свойство><Код>16</Код><Наименование> --&gt; Курс</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>15</Код><Наименование>ВалютаДокумента --&gt; Валюта</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации><ПередВыгрузкой>Значение = Константы.ВалютаРегламентированногоУчета.Получить();</ПередВыгрузкой></Свойство><Свойство><Код>14</Код><Наименование> --&gt; ОблагаетсяНДС</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="ОблагаетсяНДС" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности.ОблагаетсяНДС;</ПередВыгрузкой></Свойство><Свойство><Код>13</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство><Свойство><Код>12</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>600</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>10</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>400</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство Поиск="true"><Код>9</Код><Наименование>Комментарий --&gt; Комментарий</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>8</Код><Наименование>ТипЦен --&gt; ТипЦен</Наименование><Порядок>200</Порядок><Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/><Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/><КодПравилаКонвертации>ТипыЦен                                           </КодПравилаКонвертации></Свойство><Свойство><Код>18</Код><Наименование> --&gt; ВидВзаиморасчетов</Наименование><Порядок>1200</Порядок><Источник/><Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыВзаиморасчетов"/><ПередВыгрузкой>Значение = "БезЗадолженности";</ПередВыгрузкой></Свойство><Группа><Код>1</Код><Наименование>Товары --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник Имя="Товары" Вид="ТабличнаяЧасть"/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><Свойство><Код>7</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "Товар";</ПередВыгрузкой></Свойство><Свойство><Код>6</Код><Наименование>ГТД --&gt; ГТД</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="ГТД" Вид="Реквизит" Тип="СправочникСсылка.ГТД"/><КодПравилаКонвертации>ГТД                                               </КодПравилаКонвертации><ПередВыгрузкой>ИсходящиеДанные = Новый Структура("СтранаПроисхождения");
ИсходящиеДанные.СтранаПроисхождения = ОбъектКоллекции.СерияНоменклатуры.СтранаПроисхождения;
Значение = ОбъектКоллекции.СерияНоменклатуры.НомерГТД;</ПередВыгрузкой></Свойство><Свойство><Код>5</Код><Наименование>Сумма --&gt; Сумма</Наименование><Порядок>400</Порядок><Источник Имя="СуммаРегл" Вид="Реквизит" Тип="Число"/><Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>4</Код><Наименование>Цена --&gt; Цена</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ОбъектКоллекции.Цена / ?(ОбъектКоллекции.Коэффициент = 0, 1, ОбъектКоллекции.Коэффициент);</ПередВыгрузкой></Свойство><Свойство><Код>3</Код><Наименование>Количество --&gt; Количество</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ОбъектКоллекции.Количество * ОбъектКоллекции.Коэффициент;</ПередВыгрузкой></Свойство><Свойство><Код>2</Код><Наименование>Номенклатура --&gt; Номенклатура</Наименование><Порядок>100</Порядок><Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>ПеремещениеМатериальныхРесурсов</Код><Наименование>ДокументСсылка.ПеремещениеТоваров --&gt; ДокументСсылка.ПеремещениеМатериальныхРесурсов</Наименование><Порядок>100</Порядок><Источник>ДокументСсылка.ПеремещениеТоваров</Источник><Приемник>ДокументСсылка.ПеремещениеМатериальныхРесурсов</Приемник><Свойства><Свойство><Код>15</Код><Наименование> --&gt; ОблагаетсяНДС</Наименование><Порядок>1000</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ОблагаетсяНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>14</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>900</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.ВидДеятельности;</ПередВыгрузкой></Свойство><Свойство><Код>13</Код><Наименование> --&gt; ОблагаетсяНДСКон</Наименование><Порядок>800</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ОблагаетсяНДСКон" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>12</Код><Наименование> --&gt; ВидДеятельностиКон</Наименование><Порядок>700</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ВидДеятельностиКон" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.ВидДеятельностиКон;</ПередВыгрузкой></Свойство><Свойство><Код>11</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>600</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>9</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>400</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>2</Код><Наименование>СкладПолучатель --&gt; СкладПолучатель</Наименование><Порядок>200</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование>Комментарий --&gt; Комментарий</Наименование><Порядок>100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>16</Код><Наименование>СкладОтправитель --&gt; Склад</Наименование><Порядок>1100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Группа><Код>3</Код><Наименование>ПартииТоваровКомпании --&gt; ТабличнаяЧасть</Наименование><Порядок>300</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><Свойство><Код>6</Код><Наименование> --&gt; Номенклатура</Наименование><Порядок>300</Порядок><Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><Приемник Имя="Номенклатура" Вид="Реквизит"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации></Свойство><Свойство><Код>5</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "Товар";</ПередВыгрузкой></Свойство><Свойство><Код>4</Код><Наименование> --&gt; Количество</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>17</Код><Наименование> --&gt; ДокументПоступления</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><ПриВыгрузке>ИсходящиеДанные = Новый Структура("ДокументПоступления");
ИсходящиеДанные.ДокументПоступления = ОбъектКоллекции.ДокументПоступления;
Выполнить(Алгоритмы.НайтиПКОДляДокументаПоступления);</ПриВыгрузке></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>Разукомплектация</Код><Наименование>ДокументСсылка.КомплектацияНоменклатуры --&gt; ДокументСсылка.РасходМатериальныхРесурсовРазделка</Наименование><Порядок>500</Порядок><ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("СкладКомпании", Источник.Склад);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Источник>ДокументСсылка.КомплектацияНоменклатуры</Источник><Приемник>ДокументСсылка.РасходМатериальныхРесурсовРазделка</Приемник><Свойства><Свойство Поиск="true"><Код>8</Код><Наименование> --&gt; НомерДок</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="НомерДок" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Номер, 10);</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>7</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>300</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>6</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство><Код>9</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>17</Код><Наименование> --&gt; ДокументПоступления</Наименование><Порядок>1300</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><ПередВыгрузкой>Если Не Параметры.АвтоподборПартий Тогда
	Отказ = Истина;
	
Иначе

	ТекстЗапроса = 
	"ВЫБРАТЬ
	|	ПартииТоваровКомпании.Номенклатура КАК Номенклатура,
	|	ПартииТоваровКомпании.СтатусПартии КАК СтатусПартии,
	|	ПартииТоваровКомпании.ДокументОприходования КАК ДокументПоставки,
	|	ПартииТоваровКомпании.Склад КАК СкладКомпании,
	|	ПартииТоваровКомпании.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	|	ПартииТоваровКомпании.СерияНоменклатуры КАК СерияНоменклатуры,
	|	СУММА(ПартииТоваровКомпании.Количество) КАК Количество,
	|	ПартииТоваровКомпании.Регистратор
	|ИЗ
	|	РегистрНакопления.ПартииТоваровНаСкладах КАК ПартииТоваровКомпании
	|ГДЕ
	|	ПартииТоваровКомпании.Регистратор = &amp;Регистратор И
	|	ПартииТоваровКомпании.Номенклатура = &amp;Номенклатура И
	|	ПартииТоваровКомпании.ХарактеристикаНоменклатуры = &amp;ХарактеристикаНоменклатуры И
	|	ПартииТоваровКомпании.СерияНоменклатуры = &amp;СерияНоменклатуры И
	|	ПартииТоваровКомпании.ВидДвижения = &amp;Расход
	|
	|СГРУППИРОВАТЬ ПО
	|	ПартииТоваровКомпании.ДокументОприходования,
	|	ПартииТоваровКомпании.Номенклатура,
	|	ПартииТоваровКомпании.СтатусПартии,
	|	ПартииТоваровКомпании.Склад,
	|	ПартииТоваровКомпании.ХарактеристикаНоменклатуры,
	|	ПартииТоваровКомпании.СерияНоменклатуры,
	|	ПартииТоваровКомпании.Регистратор";

	Партии = Новый Запрос;
	Партии.Текст = ТекстЗапроса;
	Партии.УстановитьПараметр("Номенклатура", Источник.Номенклатура);
	Партии.УстановитьПараметр("ХарактеристикаНоменклатуры", Источник.ХарактеристикаНоменклатуры);
	Партии.УстановитьПараметр("СерияНоменклатуры", Источник.СерияНоменклатуры);
	Партии.УстановитьПараметр("Регистратор", Источник);
	Партии.УстановитьПараметр("Расход", ВидДвиженияНакопления.Расход);
	
	Рег = Партии.Выполнить().Выбрать();
	Если Рег.Количество() &gt; 1 Тогда
		Сообщить ("Документ """ + Источник + """ отражает списание нескольких партий комплектов. Сведения о партии не выгружаются.");
		Отказ = Истина;
		
	Иначе
		Пока Рег.Следующий() Цикл
			Значение = Рег.ДокументПоставки;
			Если ЗначениеЗаполнено(Значение) Тогда
				Прервать;
			КонецЕсли;
		КонецЦикла;
		
		Если НЕ ЗначениеЗаполнено(Значение) Тогда
			Отказ = Истина;
		КонецЕсли;
	КонецЕсли;
КонецЕсли;</ПередВыгрузкой><ПриВыгрузке>ИсходящиеДанные = Новый Структура("ДокументПоступления");
ИсходящиеДанные.ДокументПоступления = Значение;
Выполнить(Алгоритмы.НайтиПКОДляДокументаПоступления);</ПриВыгрузке></Свойство><Свойство><Код>16</Код><Наименование>СкладКомпании --&gt; Склад</Наименование><Порядок>1200</Порядок><Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/><Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Свойство><Код>15</Код><Наименование>СкладКомпании --&gt; СкладПолучатель</Наименование><Порядок>1100</Порядок><Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/><Приемник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Свойство><Код>14</Код><Наименование>Номенклатура --&gt; ИзрасходованныйРесурс</Наименование><Порядок>1000</Порядок><Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><Приемник Имя="ИзрасходованныйРесурс" Вид="Реквизит"/></Свойство><Свойство><Код>13</Код><Наименование> --&gt; ВидИзрасходованногоРесурса</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="ВидИзрасходованногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "Товар";</ПередВыгрузкой></Свойство><Свойство><Код>12</Код><Наименование>КоличествоНоменклатуры --&gt; КоличествоИзрасходовано</Наименование><Порядок>800</Порядок><Источник/><Приемник Имя="КоличествоИзрасходовано" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.Коэффициент * Источник.Количество;</ПередВыгрузкой></Свойство><Свойство><Код>11</Код><Наименование> --&gt; ОблагаетсяНДС</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="ОблагаетсяНДС" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности.ОблагаетсяНДС;</ПередВыгрузкой></Свойство><Свойство><Код>10</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство><Группа><Код>1</Код><Наименование>Комплектующие --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("ПолученныйРесурс");
КоллекцияОбъектов.Колонки.Добавить("КоличествоПолучено");
КоллекцияОбъектов.Колонки.Добавить("ПроцентОтОбщейСтоимости");

ВсегоДолей = Источник.Комплектующие.Итог("ДоляСтоимости");
РаспределеноДолей = 0;

Для каждого Комплектующая из Источник.Комплектующие Цикл
	ОбъектКоллекции = КоллекцияОбъектов.Добавить();
	ОбъектКоллекции.ПолученныйРесурс = Комплектующая.Номенклатура;
	ОбъектКоллекции.КоличествоПолучено = Комплектующая.Количество * Комплектующая.Коэффициент;
	ОбъектКоллекции.ПроцентОтОбщейСтоимости = Окр(Комплектующая.ДоляСтоимости / ВсегоДолей * 100, 3, 1);
	РаспределеноДолей = РаспределеноДолей + ОбъектКоллекции.ПроцентОтОбщейСтоимости;
КонецЦикла;

Если ОбъектКоллекции &lt;&gt; Неопределено Тогда
	ОбъектКоллекции.ПроцентОтОбщейСтоимости = ОбъектКоллекции.ПроцентОтОбщейСтоимости + 100 - РаспределеноДолей;
КонецЕсли;</ПередОбработкойВыгрузки><Свойство><Код>5</Код><Наименование> --&gt; ВидПолученногоРесурса</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="ВидПолученногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "Товар";</ПередВыгрузкой></Свойство><Свойство><Код>4</Код><Наименование> --&gt; ПроцентОтОбщейСтоимости</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="ПроцентОтОбщейСтоимости" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>3</Код><Наименование> --&gt; КоличествоПолучено</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="КоличествоПолучено" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>2</Код><Наименование>Комплектующая --&gt; ПолученныйРесурс</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ПолученныйРесурс" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>СписаниеТоваров</Код><Наименование>ДокументСсылка.СписаниеТоваров --&gt; ДокументСсылка.ИныеМатериальныеРасходы</Наименование><Порядок>300</Порядок><Источник>ДокументСсылка.СписаниеТоваров</Источник><Приемник>ДокументСсылка.ИныеМатериальныеРасходы</Приемник><Свойства><Свойство Поиск="true"><Код>9</Код><Наименование> --&gt; Комментарий</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Выполнить(Алгоритмы.ПредставлениеДокумента);</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>10</Код><Наименование>Дата --&gt; ДатаДок</Наименование><Порядок>300</Порядок><Источник Имя="Дата" Вид="Свойство" Тип="Дата"/><Приемник Имя="ДатаДок" Вид="Свойство" Тип="Дата"/></Свойство><Свойство><Код>12</Код><Наименование>Ответственный --&gt; Автор</Наименование><Порядок>500</Порядок><Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><Приемник Имя="Автор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/><КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации></Свойство><Свойство><Код>13</Код><Наименование> --&gt; ВариантРаспределения</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="ВариантРаспределения" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 3;</ПередВыгрузкой></Свойство><Свойство><Код>14</Код><Наименование> --&gt; УказатьСтоимость</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="УказатьСтоимость" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>15</Код><Наименование>СкладКомпании --&gt; Склад</Наименование><Порядок>800</Порядок><Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/><Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации></Свойство><Группа><Код>1</Код><Наименование>Товары --&gt; ТабличнаяЧасть</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="ТабличнаяЧасть" Вид="ТабличнаяЧасть"/><ПередОбработкойВыгрузки>ИсходящиеДанные = Новый Структура("Док,ТабличнаяЧасть,ИмяНоменклатуры,ИмяТЧ");
ИсходящиеДанные.Док 			= Источник;
ИсходящиеДанные.ИмяНоменклатуры = "Номенклатура";
ИсходящиеДанные.ТабличнаяЧасть	= Источник.Товары;
ИсходящиеДанные.ИмяТЧ			= "Товары";
Выполнить(Алгоритмы.ДобавитьДокументыПоступленияВТабличнуюЧасть);</ПередОбработкойВыгрузки><ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("СкладКомпании", Источник.Склад);
ИсходящиеДанные.Вставить("СтатусПартии", ОбъектКоллекции.СтатусПартии);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);</ПередВыгрузкой><Свойство><Код>7</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Значение = "Товар";</ПередВыгрузкой></Свойство><Свойство><Код>8</Код><Наименование> --&gt; ОблагаетсяНДС</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="ОблагаетсяНДС" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности.ОблагаетсяНДС;</ПередВыгрузкой></Свойство><Свойство><Код>16</Код><Наименование> --&gt; ДокументПоступления</Наименование><Порядок>600</Порядок><Источник/><Приемник Имя="ДокументПоступления" Вид="Реквизит"/><ПриВыгрузке>ИсходящиеДанные = Новый Структура("ДокументПоступления");
ИсходящиеДанные.ДокументПоступления = ОбъектКоллекции.ДокументПоступления;
Выполнить(Алгоритмы.НайтиПКОДляДокументаПоступления);</ПриВыгрузке></Свойство><Свойство><Код>6</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство><Свойство><Код>3</Код><Наименование>Количество --&gt; Количество</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>2</Код><Наименование>Номенклатура --&gt; Номенклатура</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации></Свойство></Группа></Свойства><Значения/></Правило></Группа></Группа><Группа><Код>Перечисления</Код><Наименование>Перечисления</Наименование><Порядок>2000</Порядок><Правило><Код>ВидыВзаиморасчетов</Код><Наименование>ПеречислениеСсылка.ВидыЗадолженности --&gt; ПеречислениеСсылка.ВидыВзаиморасчетов</Наименование><Порядок>2300</Порядок><Источник>ПеречислениеСсылка.ВидыЗадолженности</Источник><Приемник>ПеречислениеСсылка.ВидыВзаиморасчетов</Приемник><Свойства/><Значения><Значение><Код>1</Код><Наименование>Дебиторская --&gt; РасчетыСПокупателями</Наименование><Порядок>100</Порядок><Источник>Дебиторская</Источник><Приемник>РасчетыСПокупателями</Приемник></Значение><Значение><Код>2</Код><Наименование>Кредиторская --&gt; РасчетыСПоставщиками</Наименование><Порядок>200</Порядок><Источник>Кредиторская</Источник><Приемник>РасчетыСПоставщиками</Приемник></Значение></Значения></Правило><Правило><Код>ВидыВзаиморасчетовВыпискаПриход</Код><Наименование>ПеречислениеСсылка.ВидыОперацийСтрокаВыпискиПриход --&gt; ПеречислениеСсылка.ВидыВзаиморасчетов</Наименование><Порядок>1800</Порядок><Источник>ПеречислениеСсылка.ВидыОперацийПоступлениеБезналичныхДенежныхСредств</Источник><Приемник>ПеречислениеСсылка.ВидыВзаиморасчетов</Приемник><Свойства/><Значения><Значение><Код>1</Код><Наименование>ОплатаПокупателя --&gt; РасчетыСПокупателями</Наименование><Порядок>100</Порядок><Источник>ОплатаПокупателя</Источник><Приемник>РасчетыСПокупателями</Приемник></Значение><Значение><Код>2</Код><Наименование>ПриходДенежныхСредствПрочее --&gt; БезЗадолженности</Наименование><Порядок>200</Порядок><Источник>ПрочееПоступлениеБезналичныхДенежныхСредств</Источник><Приемник>БезЗадолженности</Приемник></Значение><Значение><Код>3</Код><Наименование>ВозвратДенежныхСредствПоставщиком --&gt; РасчетыСПост</Наименование><Порядок>300</Порядок><Источник>ВозвратДенежныхСредствПоставщиком</Источник><Приемник>РасчетыСПоставщиками</Приемник></Значение><Значение><Код>4</Код><Наименование>РасчетыПоКредитамИЗаймам --&gt; БезЗадолженности</Наименование><Порядок>400</Порядок><Источник>РасчетыПоКредитамИЗаймам</Источник><Приемник>БезЗадолженности</Приемник></Значение><Значение><Код>5</Код><Наименование>ПрочиеРасчетыСКонтрагентами --&gt; БезЗадолженности</Наименование><Порядок>500</Порядок><Источник>ПрочиеРасчетыСКонтрагентами</Источник><Приемник>БезЗадолженности</Приемник></Значение><Значение><Код>6</Код><Наименование>ПоступлениеОплатыПоБанковскимКредитам --&gt; РасчетыС</Наименование><Порядок>600</Порядок><Источник>ПоступлениеОплатыПоБанковскимКредитам</Источник><Приемник>РасчетыСПокупателями</Приемник></Значение><Значение><Код>7</Код><Наименование>ПоступлениеОплатыПоПлатежнымКартам --&gt; РасчетыСПок</Наименование><Порядок>700</Порядок><Источник>ПоступлениеОплатыПоПлатежнымКартам</Источник><Приемник>РасчетыСПокупателями</Приемник></Значение><Значение><Код>8</Код><Наименование>ПоступленияОтПродажиИностраннойВалюты --&gt; БезЗадол</Наименование><Порядок>800</Порядок><Источник>ПоступленияОтПродажиИностраннойВалюты</Источник><Приемник>БезЗадолженности</Приемник></Значение><Значение><Код>9</Код><Наименование>ПриобретениеИностраннойВалюты --&gt; БезЗадолженности</Наименование><Порядок>900</Порядок><Источник>ПриобретениеИностраннойВалюты</Источник><Приемник>БезЗадолженности</Приемник></Значение></Значения></Правило><Правило><Код>ВидыВзаиморасчетовВыпискаРасход</Код><Наименование>ПеречислениеСсылка.ВидыОперацийСписаниеБезналичныхДенежныхСредств --&gt; ПеречислениеСсылка.ВидыВзаимор</Наименование><Порядок>2000</Порядок><Источник>ПеречислениеСсылка.ВидыОперацийСписаниеБезналичныхДенежныхСредств</Источник><Приемник>ПеречислениеСсылка.ВидыВзаиморасчетов</Приемник><Свойства/><Значения><Значение><Код>1</Код><Наименование>ОплатаПоставщику --&gt; РасчетыСПоставщиками</Наименование><Порядок>100</Порядок><Источник>ОплатаПоставщику</Источник><Приемник>РасчетыСПоставщиками</Приемник></Значение><Значение><Код>2</Код><Наименование>ВозвратДенежныхСредствПокупателю --&gt; РасчетыСПокуп</Наименование><Порядок>200</Порядок><Источник>ВозвратДенежныхСредствПокупателю</Источник><Приемник>РасчетыСПокупателями</Приемник></Значение><Значение><Код>4</Код><Наименование>ПеречислениеНалога --&gt; РасчетыСБюджетом</Наименование><Порядок>400</Порядок><Источник>ПеречислениеНалога</Источник><Приемник>РасчетыСБюджетом</Приемник></Значение><Значение><Код>5</Код><Наименование>РасчетыПоКредитамИЗаймам --&gt; БезЗадолженности</Наименование><Порядок>500</Порядок><Источник>РасчетыПоКредитамИЗаймам</Источник><Приемник>БезЗадолженности</Приемник></Значение><Значение><Код>6</Код><Наименование>ПрочееСписаниеБезналичныхДенежныхСредств --&gt; БезЗа</Наименование><Порядок>600</Порядок><Источник>ПрочееСписаниеБезналичныхДенежныхСредств</Источник><Приемник>БезЗадолженности</Приемник></Значение><Значение><Код>7</Код><Наименование>ПрочиеРасчетыСКонтрагентами --&gt; БезЗадолженности</Наименование><Порядок>700</Порядок><Источник>ПрочиеРасчетыСКонтрагентами</Источник><Приемник>БезЗадолженности</Приемник></Значение><Значение><Код>8</Код><Наименование>ПереводНаДругойСчет --&gt; БезЗадолженности</Наименование><Порядок>800</Порядок><Источник>ПереводНаДругойСчет</Источник><Приемник>БезЗадолженности</Приемник></Значение></Значения></Правило><Правило><Код>ВидыВзаиморасчетовПКО</Код><Наименование>ПеречислениеСсылка.ВидыОперацийПКО --&gt; ПеречислениеСсылка.ВидыВзаиморасчетов</Наименование><Порядок>1900</Порядок><Источник>ПеречислениеСсылка.ВидыОперацийПКО</Источник><Приемник>ПеречислениеСсылка.ВидыВзаиморасчетов</Приемник><Свойства/><Значения><Значение><Код>1</Код><Наименование>ОплатаПокупателя --&gt; РасчетыСПокупателями</Наименование><Порядок>100</Порядок><Источник>ОплатаПокупателя</Источник><Приемник>РасчетыСПокупателями</Приемник></Значение><Значение><Код>2</Код><Наименование>ПриходДенежныхСредствРозничнаяВыручка --&gt; Розница</Наименование><Порядок>200</Порядок><Источник>ПриходДенежныхСредствРозничнаяВыручка</Источник><Приемник>РасчетыСПокупателями</Приемник></Значение><Значение><Код>3</Код><Наименование>ВозвратДенежныхСредствПодотчетником --&gt; РасчетыСПо</Наименование><Порядок>300</Порядок><Источник>ВозвратДенежныхСредствПодотчетником</Источник><Приемник>РасчетыСПодотчетнымиЛицами</Приемник></Значение><Значение><Код>4</Код><Наименование>ВозвратДенежныхСредствПоставщиком --&gt; РасчетыСПост</Наименование><Порядок>400</Порядок><Источник>ВозвратДенежныхСредствПоставщиком</Источник><Приемник>РасчетыСПоставщиками</Приемник></Значение><Значение><Код>5</Код><Наименование>ПриходДенежныхСредствПрочее --&gt; БезЗадолженности</Наименование><Порядок>500</Порядок><Источник>ПриходДенежныхСредствПрочее</Источник><Приемник>БезЗадолженности</Приемник></Значение><Значение><Код>6</Код><Наименование>ПолучениеНаличныхДенежныхСредствВБанке --&gt; БезЗадо</Наименование><Порядок>600</Порядок><Источник>ПолучениеНаличныхДенежныхСредствВБанке</Источник><Приемник>БезЗадолженности</Приемник></Значение><Значение><Код>7</Код><Наименование>РасчетыПоКредитамИЗаймамСКонтрагентами --&gt; БезЗадо</Наименование><Порядок>700</Порядок><Источник>РасчетыПоКредитамИЗаймамСКонтрагентами</Источник><Приемник>БезЗадолженности</Приемник></Значение><Значение><Код>8</Код><Наименование>ПрочиеРасчетыСКонтрагентами --&gt; БезЗадолженности</Наименование><Порядок>800</Порядок><Источник>ПрочиеРасчетыСКонтрагентами</Источник><Приемник>БезЗадолженности</Приемник></Значение></Значения></Правило><Правило><Код>ВидыВзаиморасчетовРКО</Код><Наименование>ПеречислениеСсылка.ВидыОперацийРКО --&gt; ПеречислениеСсылка.ВидыВзаиморасчетов</Наименование><Порядок>2100</Порядок><Источник>ПеречислениеСсылка.ВидыОперацийРКО</Источник><Приемник>ПеречислениеСсылка.ВидыВзаиморасчетов</Приемник><Свойства/><Значения><Значение><Код>1</Код><Наименование>ОплатаПоставщику --&gt; РасчетыСПоставщиками</Наименование><Порядок>100</Порядок><Источник>ОплатаПоставщику</Источник><Приемник>РасчетыСПоставщиками</Приемник></Значение><Значение><Код>2</Код><Наименование>ВозвратДенежныхСредствПокупателю --&gt; РасчетыСПокуп</Наименование><Порядок>200</Порядок><Источник>ВозвратДенежныхСредствПокупателю</Источник><Приемник>РасчетыСПокупателями</Приемник></Значение><Значение><Код>3</Код><Наименование>ВыдачаДенежныхСредствПодотчетнику --&gt; РасчетыСПодо</Наименование><Порядок>300</Порядок><Источник>ВыдачаДенежныхСредствПодотчетнику</Источник><Приемник>РасчетыСПодотчетнымиЛицами</Приемник></Значение><Значение><Код>4</Код><Наименование>РасходДенежныхСредствПрочее --&gt; БезЗадолженности</Наименование><Порядок>400</Порядок><Источник>РасходДенежныхСредствПрочее</Источник><Приемник>БезЗадолженности</Приемник></Значение><Значение><Код>5</Код><Наименование>ВыдачаДенежныхСредствКассеККМ --&gt; БезЗадолженности</Наименование><Порядок>500</Порядок><Источник>ВыдачаДенежныхСредствКассеККМ</Источник><Приемник>БезЗадолженности</Приемник></Значение><Значение><Код>6</Код><Наименование>ВзносНаличнымиВБанк --&gt; БезЗадолженности</Наименование><Порядок>600</Порядок><Источник>ВзносНаличнымиВБанк</Источник><Приемник>БезЗадолженности</Приемник></Значение><Значение><Код>7</Код><Наименование>РасчетыПоКредитамИЗаймамСКонтрагентами --&gt; БезЗадо</Наименование><Порядок>700</Порядок><Источник>РасчетыПоКредитамИЗаймамСКонтрагентами</Источник><Приемник>БезЗадолженности</Приемник></Значение><Значение><Код>8</Код><Наименование>ПрочиеРасчетыСКонтрагентами --&gt; БезЗадолженности</Наименование><Порядок>800</Порядок><Источник>ПрочиеРасчетыСКонтрагентами</Источник><Приемник>БезЗадолженности</Приемник></Значение></Значения></Правило><Правило><Код>ВидыОперацийППИ</Код><Наименование>ПеречислениеСсылка.ВидыОперацийППИсходящее --&gt; ПеречислениеСсылка.ВидыВзаиморасчетов</Наименование><Порядок>2200</Порядок><Источник>ПеречислениеСсылка.ВидыОперацийППИсходящее</Источник><Приемник>ПеречислениеСсылка.ВидыВзаиморасчетов</Приемник><Свойства/><Значения><Значение><Код>1</Код><Наименование>ОплатаПоставщику --&gt; РасчетыСПоставщиками</Наименование><Порядок>100</Порядок><Источник>ОплатаПоставщику</Источник><Приемник>РасчетыСПоставщиками</Приемник></Значение><Значение><Код>2</Код><Наименование>ВозвратДенежныхСредствПокупателю --&gt; РасчетыСПокуп</Наименование><Порядок>200</Порядок><Источник>ВозвратДенежныхСредствПокупателю</Источник><Приемник>РасчетыСПокупателями</Приемник></Значение><Значение><Код>3</Код><Наименование>ПеречислениеНалога --&gt; РасчетыСБюджетом</Наименование><Порядок>300</Порядок><Источник>ПеречислениеНалога</Источник><Приемник>РасчетыСБюджетом</Приемник></Значение><Значение><Код>4</Код><Наименование>РасчетыПоКредитамИЗаймамСКонтрагентами --&gt; БезЗадо</Наименование><Порядок>400</Порядок><Источник>РасчетыПоКредитамИЗаймамСКонтрагентами</Источник><Приемник>БезЗадолженности</Приемник></Значение><Значение><Код>5</Код><Наименование>ПрочееСписаниеБезналичныхДенежныхСредств --&gt; БезЗа</Наименование><Порядок>500</Порядок><Источник>ПрочееСписаниеБезналичныхДенежныхСредств</Источник><Приемник>БезЗадолженности</Приемник></Значение><Значение><Код>6</Код><Наименование>ПрочиеРасчетыСКонтрагентами --&gt; БезЗадолженности</Наименование><Порядок>600</Порядок><Источник>ПрочиеРасчетыСКонтрагентами</Источник><Приемник>БезЗадолженности</Приемник></Значение><Значение><Код>7</Код><Наименование>ПереводНаДругойСчет --&gt; БезЗадолженности</Наименование><Порядок>700</Порядок><Источник>ПереводНаДругойСчет</Источник><Приемник>БезЗадолженности</Приемник></Значение><Значение><Код>8</Код><Наименование>ПеречислениеДенежныхСредствПодотчетнику --&gt; Расчет</Наименование><Порядок>800</Порядок><Источник>ПеречислениеДенежныхСредствПодотчетнику</Источник><Приемник>РасчетыСПодотчетнымиЛицами</Приемник></Значение></Значения></Правило><Правило><Код>СтавкиНДС</Код><Наименование>ПеречислениеСсылка.СтавкиНДС --&gt; ПеречислениеСсылка.СтавкиНДС</Наименование><Порядок>1700</Порядок><Источник>ПеречислениеСсылка.СтавкиНДС</Источник><Приемник>ПеречислениеСсылка.СтавкиНДС</Приемник><Свойства/><Значения><Значение><Код>1</Код><Наименование>БезНДС --&gt; БезНДС</Наименование><Порядок>100</Порядок><Источник>БезНДС</Источник><Приемник>БезНДС</Приемник></Значение><Значение><Код>2</Код><Наименование>НДС20 --&gt; НДС20</Наименование><Порядок>200</Порядок><Источник>НДС20</Источник><Приемник>НДС20</Приемник></Значение><Значение><Код>3</Код><Наименование>НДС20_120 --&gt; НДС20_120</Наименование><Порядок>300</Порядок><Источник>НДС20_120</Источник><Приемник>НДС20_120</Приемник></Значение><Значение><Код>4</Код><Наименование>НДС10 --&gt; НДС10</Наименование><Порядок>400</Порядок><Источник>НДС10</Источник><Приемник>НДС10</Приемник></Значение><Значение><Код>5</Код><Наименование>НДС10_110 --&gt; НДС10_110</Наименование><Порядок>500</Порядок><Источник>НДС10_110</Источник><Приемник>НДС10_110</Приемник></Значение><Значение><Код>6</Код><Наименование>НДС18 --&gt; НДС18</Наименование><Порядок>600</Порядок><Источник>НДС18</Источник><Приемник>НДС18</Приемник></Значение><Значение><Код>7</Код><Наименование>НДС18_118 --&gt; НДС18_118</Наименование><Порядок>700</Порядок><Источник>НДС18_118</Источник><Приемник>НДС18_118</Приемник></Значение><Значение><Код>8</Код><Наименование>НДС0 --&gt; НДС0</Наименование><Порядок>800</Порядок><Источник>НДС0</Источник><Приемник>НДС0</Приемник></Значение></Значения></Правило></Группа><Группа><Код>Справочники</Код><Наименование>Справочники</Наименование><Порядок>1800</Порядок><Правило><Код>Банки</Код><Наименование>СправочникСсылка.Банки --&gt; СправочникСсылка.Банки</Наименование><Порядок>100</Порядок><ПередВыгрузкой>Если Источник.ЭтоГруппа И Источник.Уровень() &gt;= 1 Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>СправочникСсылка.Банки</Источник><Приемник>СправочникСсылка.Банки</Приемник><Свойства><Свойство><Код>3</Код><Наименование>Наименование --&gt; Наименование</Наименование><Порядок>300</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование>Родитель --&gt; Родитель</Наименование><Порядок>400</Порядок><Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Банки"/><Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Банки"/><КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации><ПередВыгрузкой>Значение = Источник.Родитель;
Если ЗначениеЗаполнено(Значение) = 1 Тогда 
	Пока Значение.Уровень() &gt;= 1 Цикл
		Значение = Значение.Родитель;
	КонецЦикла;
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>2</Код><Наименование>Код --&gt; Код</Наименование><Порядок>200</Порядок><Источник Имя="Код" Вид="Свойство" Тип="Строка"/><Приемник Имя="Код" Вид="Свойство" Тип="Строка"/></Свойство><Свойство><Код>10</Код><Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование><Порядок>1000</Порядок><Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/><Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Число"/></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование><Порядок>100</Порядок><Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/><Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Число"/></Свойство><Группа><Код>9</Код><Наименование> --&gt;</Наименование><Порядок>900</Порядок><Источник/><Приемник/><ПередОбработкойВыгрузки>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки><Свойство><Код>8</Код><Наименование>Телефоны --&gt; Телефоны</Наименование><Порядок>800</Порядок><Источник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>7</Код><Наименование>Адрес --&gt; Адрес</Наименование><Порядок>700</Порядок><Источник Имя="Адрес" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Адрес" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>6</Код><Наименование>КоррСчет --&gt; КоррСчет</Наименование><Порядок>600</Порядок><Источник Имя="КоррСчет" Вид="Реквизит" Тип="Строка"/><Приемник Имя="КоррСчет" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>5</Код><Наименование>Город --&gt; Местонахождение</Наименование><Порядок>500</Порядок><Источник Имя="Город" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Местонахождение" Вид="Реквизит" Тип="Строка"/></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>БанковскиеСчета</Код><Наименование>СправочникСсылка.БанковскиеСчета --&gt; СправочникСсылка.БанковскиеСчета</Наименование><Порядок>200</Порядок><ПередВыгрузкой>Если ТипЗнч(Источник.Владелец) &lt;&gt; Тип("СправочникСсылка.Организации") Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><НеЗамещать>true</НеЗамещать><Источник>СправочникСсылка.БанковскиеСчета</Источник><Приемник>СправочникСсылка.БанковскиеСчета</Приемник><Свойства><Свойство><Код>17</Код><Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование><Порядок>1600</Порядок><Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/><Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Число"/></Свойство><Свойство><Код>16</Код><Наименование> --&gt; КорреспондентИНН</Наименование><Порядок>1500</Порядок><Источник/><Приемник Имя="КорреспондентКПП" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Значение = Источник.Владелец.КПП;</ПередВыгрузкой></Свойство><Свойство><Код>15</Код><Наименование> --&gt; КорреспондентИНН</Наименование><Порядок>1500</Порядок><Источник/><Приемник Имя="КорреспондентИНН" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Значение = Источник.Владелец.ИНН;</ПередВыгрузкой></Свойство><Свойство><Код>2</Код><Наименование>Наименование --&gt; Наименование</Наименование><Порядок>200</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство><Свойство><Код>3</Код><Наименование>БанкДляРасчетов --&gt; БанкДляРасчетов</Наименование><Порядок>300</Порядок><Источник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/><Приемник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/><КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации></Свойство><Свойство><Код>4</Код><Наименование>ВидСчета --&gt; ВидСчета</Наименование><Порядок>400</Порядок><Источник Имя="ВидСчета" Вид="Реквизит" Тип="Строка"/><Приемник Имя="ВидСчета" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>5</Код><Наименование>НомерИДатаРазрешения --&gt; НомерИДатаРазрешения</Наименование><Порядок>500</Порядок><Источник Имя="НомерИДатаРазрешения" Вид="Реквизит" Тип="Строка"/><Приемник Имя="НомерИДатаРазрешения" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>6</Код><Наименование>МесяцПрописью --&gt; МесяцПрописью</Наименование><Порядок>600</Порядок><Источник Имя="МесяцПрописью" Вид="Реквизит" Тип="Булево"/><Приемник Имя="МесяцПрописью" Вид="Реквизит" Тип="Число"/></Свойство><Свойство Поиск="true"><Код>7</Код><Наименование>НомерСчета --&gt; Номер</Наименование><Порядок>700</Порядок><Источник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Номер" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>8</Код><Наименование>Банк --&gt; БанкОрганизации</Наименование><Порядок>800</Порядок><Источник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.Банки"/><Приемник Имя="БанкОрганизации" Вид="Реквизит" Тип="СправочникСсылка.Банки"/><КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации></Свойство><Свойство><Код>9</Код><Наименование>ТекстКорреспондента --&gt; Корреспондент</Наименование><Порядок>900</Порядок><Источник Имя="ТекстКорреспондента" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Корреспондент" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>10</Код><Наименование>СуммаБезКопеек --&gt; СуммаБез00Копеек</Наименование><Порядок>1000</Порядок><Источник Имя="СуммаБезКопеек" Вид="Реквизит" Тип="Булево"/><Приемник Имя="СуммаБез00Копеек" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>11</Код><Наименование> --&gt; ТипСчета</Наименование><Порядок>1100</Порядок><Источник/><Приемник Имя="ТипСчета" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыБанковскихСчетов"/><ПередВыгрузкой>Если Источник.ВалютаДенежныхСредств = Константы.ВалютаРегламентированногоУчета.Получить() Тогда
	Значение = "Рублевый";
	
Иначе
	Значение = "Валютный";
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>12</Код><Наименование>ДатаОткрытия --&gt; ДатаОткрытияСчета</Наименование><Порядок>1200</Порядок><Источник Имя="ДатаОткрытия" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаОткрытияСчета" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>13</Код><Наименование>ДатаЗакрытия --&gt; ДатаЗакрытияСчета</Наименование><Порядок>1300</Порядок><Источник Имя="ДатаЗакрытия" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаЗакрытияСчета" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>14</Код><Наименование>ВалютаДенежныхСредств --&gt; Валюта</Наименование><Порядок>1400</Порядок><Источник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство></Свойства><Значения/></Правило><Правило><Код>Валюты</Код><Наименование>СправочникСсылка.Валюты --&gt; СправочникСсылка.Валюты</Наименование><Порядок>300</Порядок><Источник>СправочникСсылка.Валюты</Источник><Приемник>СправочникСсылка.Валюты</Приемник><Свойства><Свойство Поиск="true"><Код>1</Код><Наименование>Код --&gt; Код</Наименование><Порядок>100</Порядок><Источник Имя="Код" Вид="Свойство" Тип="Строка"/><Приемник Имя="Код" Вид="Свойство" Тип="Строка"/></Свойство><Свойство><Код>2</Код><Наименование>Наименование --&gt; Наименование</Наименование><Порядок>200</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство><Свойство><Код>3</Код><Наименование>НаименованиеПолное --&gt; ПолнНаименование</Наименование><Порядок>300</Порядок><Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/><Приемник Имя="ПолнНаименование" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>4</Код><Наименование> --&gt; Курс</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="Курс" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = РегистрыСведений.КурсыВалют.ПолучитьПоследнее(РабочаяДата, Новый Структура("Валюта", Источник)).Курс;</ПередВыгрузкой></Свойство><Свойство><Код>5</Код><Наименование> --&gt; Кратность</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="Кратность" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = РегистрыСведений.КурсыВалют.ПолучитьПоследнее(РабочаяДата, Новый Структура("Валюта", Источник)).Кратность;</ПередВыгрузкой></Свойство><Свойство><Код>6</Код><Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование><Порядок>600</Порядок><Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/><Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Число"/></Свойство></Свойства><Значения/></Правило><Правило><Код>ВидыДеятельности</Код><Наименование> --&gt; СправочникСсылка.ВидыДеятельности</Наименование><Порядок>1600</Порядок><Приемник>СправочникСсылка.ВидыДеятельности</Приемник><Свойства><Свойство Поиск="true"><Код>2</Код><Наименование> --&gt; Наименование</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = Источник.Наименование;</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>3</Код><Наименование> --&gt; ОблагаетсяЕНВД</Наименование><Порядок>300</Порядок><Источник/><Приемник Имя="ОблагаетсяЕНВД" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.ОблагаетсяЕНВД;</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование> --&gt; БазаРаспределенияИМР</Наименование><Порядок>400</Порядок><Источник/><Приемник Имя="БазаРаспределенияИМР" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.БазаРаспределенияИМР;</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>5</Код><Наименование> --&gt; Служебный</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="Служебный" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = Источник.Служебный;</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>ГТД</Код><Наименование>СправочникСсылка.ГТД --&gt; СправочникСсылка.ГТД</Наименование><Порядок>400</Порядок><Источник>СправочникСсылка.НомераГТД</Источник><Приемник>СправочникСсылка.ГТД</Приемник><Свойства><Свойство Поиск="true"><Код>2</Код><Наименование>Код --&gt; Наименование</Наименование><Порядок>200</Порядок><Источник Имя="Код" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>3</Код><Наименование> --&gt; СтранаПроисхождения</Наименование><Порядок>300</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.ОКСМ"/></Свойство><Свойство><Код>4</Код><Наименование>Комментарий --&gt; Комментарий</Наименование><Порядок>400</Порядок><Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>5</Код><Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование><Порядок>500</Порядок><Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/><Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Число"/></Свойство></Свойства><Значения/></Правило><Правило><Код>Договоры</Код><Наименование>СправочникСсылка.ДоговорыКонтрагентов --&gt; СправочникСсылка.Договоры</Наименование><Порядок>1100</Порядок><Источник>СправочникСсылка.ДоговорыКонтрагентов</Источник><Приемник>СправочникСсылка.Договоры</Приемник><Свойства><Свойство><Код>9</Код><Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование><Порядок>900</Порядок><Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/><Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Число"/></Свойство><Свойство Поиск="true"><Код>5</Код><Наименование>Владелец --&gt; Владелец</Наименование><Порядок>500</Порядок><Источник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование>Родитель --&gt; Родитель</Наименование><Порядок>400</Порядок><Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство><Свойство><Код>3</Код><Наименование>Наименование --&gt; Наименование</Наименование><Порядок>300</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>2</Код><Наименование>Код --&gt; Код</Наименование><Порядок>200</Порядок><Источник Имя="Код" Вид="Свойство" Тип="Строка"/><Приемник Имя="Код" Вид="Свойство" Тип="Число"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Код, 8);</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование><Порядок>100</Порядок><Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/><Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Число"/></Свойство><Группа><Код>8</Код><Наименование> --&gt;</Наименование><Порядок>800</Порядок><Источник/><Приемник/><ПередОбработкойВыгрузки>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки><Свойство><Код>7</Код><Наименование> --&gt; Авто</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="Авто" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Значение = 1;</ПередВыгрузкой></Свойство><Свойство><Код>6</Код><Наименование>ВалютаВзаиморасчетов --&gt; Валюта</Наименование><Порядок>600</Порядок><Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>ДокументыУдостоверяющиеЛичность</Код><Наименование>СправочникСсылка.ДокументыУдостоверяющиеЛичность --&gt; СправочникСсылка.ДокументыУдостоверяющиеЛичност</Наименование><Порядок>500</Порядок><НеЗамещать>true</НеЗамещать><Источник>СправочникСсылка.ДокументыУдостоверяющиеЛичность</Источник><Приемник>СправочникСсылка.ДокументыУдостоверяющиеЛичность</Приемник><Свойства><Свойство><Код>4</Код><Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование><Порядок>400</Порядок><Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/><Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Число"/></Свойство><Свойство Поиск="true"><Код>3</Код><Наименование>КодПФР --&gt; КодСЗВ</Наименование><Порядок>300</Порядок><Источник Имя="КодПФР" Вид="Реквизит" Тип="Строка"/><Приемник Имя="КодСЗВ" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>2</Код><Наименование>КодИМНС --&gt; КодНДФЛ</Наименование><Порядок>200</Порядок><Источник Имя="КодИМНС" Вид="Реквизит" Тип="Строка"/><Приемник Имя="КодНДФЛ" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование>Наименование --&gt; Наименование</Наименование><Порядок>100</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство></Свойства><Значения/></Правило><Правило><Код>ЕдиницыИзмерений</Код><Наименование>СправочникСсылка.ЕдиницыИзмерения --&gt; СправочникСсылка.ЕдиницыИзмерений</Наименование><Порядок>1200</Порядок><ПередВыгрузкой>Если Источник.ЕдиницаПоКлассификатору.Пустая() Тогда
	Отказ = Истина;

Иначе
	Единица = Источник.ЕдиницаПоКлассификатору;
	ВходящиеДанные = Новый Структура;
	ВходящиеДанные.Вставить("Код", Единица.Код);
	ВходящиеДанные.Вставить("Наименование", Единица.Наименование);
	ВходящиеДанные.Вставить("ПолнНаименование", Единица.НаименованиеПолное);
КонецЕсли;</ПередВыгрузкой><ПриВыгрузке>КлючВыгружаемыхДанных = Источник.ЕдиницаПоКлассификатору.Код;</ПриВыгрузке><Источник>СправочникСсылка.ЕдиницыИзмерения</Источник><Приемник>СправочникСсылка.ЕдиницыИзмерений</Приемник><Свойства><Свойство><Код>3</Код><Наименование> --&gt; ПолнНаименование</Наименование><Порядок>300</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ПолнНаименование" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>2</Код><Наименование> --&gt; Наименование</Наименование><Порядок>200</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование> --&gt; Код</Наименование><Порядок>100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Код" Вид="Свойство" Тип="Строка"/></Свойство></Свойства><Значения/></Правило><Правило><Код>Контрагенты</Код><Наименование>СправочникСсылка.Контрагенты --&gt; СправочникСсылка.Контрагенты</Наименование><Порядок>600</Порядок><ПередВыгрузкой>Если Источник.ЭтоГруппа И Источник.Уровень() &gt;= 4 Тогда
	Отказ = Истина;
КонецЕсли;

ВходящиеДанные = Новый Структура;
ВидЮрФизЛица = Источник.ЮрФизЛицо;

ЮридическийАдрес = УправлениеКонтактнойИнформацией.ПолучитьАдресИзКонтактнойИнформации(Источник, "Юридический");
ПочтовыйАдрес = УправлениеКонтактнойИнформацией.ПолучитьАдресИзКонтактнойИнформации(Источник, "Фактический");
	
ВходящиеДанные.Вставить("Телефоны", УправлениеКонтактнойИнформацией.ПолучитьТелефонИзКонтактнойИнформации(Источник));
ВходящиеДанные.Вставить("ЮридическийАдрес", ЮридическийАдрес);
ВходящиеДанные.Вставить("ПочтовыйАдрес", ПочтовыйАдрес);
ВходящиеДанные.Вставить("ПолнНаименование", Источник.НаименованиеПолное);

Если ВидЮрФизЛица = Перечисления.ЮрФизЛицо.ЮрЛицо Тогда
	ВходящиеДанные.Вставить("ВидКонтрагента", "Организация");
	ВходящиеДанные.Вставить("ИНН", Источник.ИНН + ?(ПустаяСтрока(Источник.КПП), "", "/") + Источник.КПП);
	ВходящиеДанные.Вставить("ДокументУдЛичность", "");

Иначе // Если ВидЮрФизЛица = Перечисления.ЮрФизЛицо.ФизЛицо Тогда
	ВходящиеДанные.Вставить("ВидКонтрагента", "ЧастноеЛицо");
	ВходящиеДанные.Вставить("ИНН", Источник.ИНН);
	ВходящиеДанные.Вставить("ДокументУдЛичность", Источник.ДокументУдостоверяющийЛичность);
КонецЕсли;</ПередВыгрузкой><Источник>СправочникСсылка.Контрагенты</Источник><Приемник>СправочникСсылка.Контрагенты</Приемник><Свойства><Свойство><Код>18</Код><Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование><Порядок>700</Порядок><Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/><Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Число"/></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование><Порядок>100</Порядок><Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/><Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Число"/></Свойство><Свойство Поиск="true"><Код>2</Код><Наименование>Код --&gt; Код</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Код" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Код, 8);</ПередВыгрузкой></Свойство><Свойство><Код>3</Код><Наименование>Наименование --&gt; Наименование</Наименование><Порядок>300</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование>Родитель --&gt; Родитель</Наименование><Порядок>400</Порядок><Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/><Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации><ПередВыгрузкой>Значение = Источник.Родитель;
Если ЗначениеЗаполнено(Значение) = 1 Тогда 
	Пока Значение.Уровень() &gt;= 4 Цикл
		Значение = Значение.Родитель;
	КонецЦикла;
КонецЕсли;</ПередВыгрузкой></Свойство><Группа><Код>14</Код><Наименование> --&gt;</Наименование><Порядок>600</Порядок><Источник/><Приемник/><ПередОбработкойВыгрузки>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки><Свойство><Код>17</Код><Наименование>ДокументУдостоверяющийЛичность --&gt; ДокументУдЛичность</Наименование><Порядок>1300</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ДокументУдЛичность" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>5</Код><Наименование>Комментарий --&gt; Комментарий</Наименование><Порядок>500</Порядок><Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>6</Код><Наименование> --&gt; ВидКонтрагента</Наименование><Порядок>700</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ВидКонтрагента" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыКонтрагентов"/></Свойство><Свойство><Код>7</Код><Наименование> --&gt; ПолнНаименование</Наименование><Порядок>800</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ПолнНаименование" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>8</Код><Наименование> --&gt; ЮридическийАдрес</Наименование><Порядок>900</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ЮридическийАдрес" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>9</Код><Наименование> --&gt; ПочтовыйАдрес</Наименование><Порядок>1000</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ПочтовыйАдрес" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>10</Код><Наименование> --&gt; Телефоны</Наименование><Порядок>1100</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>11</Код><Наименование> --&gt; ИНН</Наименование><Порядок>1200</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>16</Код><Наименование>ОсновнойДоговорВзаиморасчетов --&gt; ОсновнойДоговор</Наименование><Порядок>500</Порядок><Источник Имя="ОсновнойДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/><Приемник Имя="ОсновнойДоговор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>МестаХранения</Код><Наименование>СправочникСсылка.СкладыКомпании --&gt; СправочникСсылка.МестаХранения</Наименование><Порядок>1300</Порядок><ПередВыгрузкой>Если ТипЗнч(Источник) &lt;&gt; Тип("СправочникСсылка.Склады") Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>СправочникСсылка.Склады</Источник><Приемник>СправочникСсылка.МестаХранения</Приемник><Свойства><Свойство><Код>4</Код><Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование><Порядок>400</Порядок><Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/><Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Число"/></Свойство><Свойство><Код>3</Код><Наименование>ТипЦенРозничнойТорговли --&gt; ТипЦен</Наименование><Порядок>300</Порядок><Источник Имя="ТипЦенРозничнойТорговли" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/><Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/><КодПравилаКонвертации>ТипыЦен                                           </КодПравилаКонвертации></Свойство><Свойство><Код>2</Код><Наименование>Наименование --&gt; Наименование</Наименование><Порядок>200</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование>Код --&gt; Код</Наименование><Порядок>100</Порядок><Источник Имя="Код" Вид="Свойство" Тип="Строка"/><Приемник Имя="Код" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Код, 5);</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>Номенклатура</Код><Наименование>СправочникСсылка.Номенклатура --&gt; СправочникСсылка.Номенклатура</Наименование><Порядок>700</Порядок><ПередВыгрузкой>Если Источник.ЭтоГруппа И Источник.Уровень() &gt;= 4 Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>СправочникСсылка.Номенклатура</Источник><Приемник>СправочникСсылка.Номенклатура</Приемник><Свойства><Свойство><Код>15</Код><Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование><Порядок>1500</Порядок><Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/><Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Число"/></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование>Родитель --&gt; Родитель</Наименование><Порядок>400</Порядок><Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/><Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации><ПередВыгрузкой>Значение = Источник.Родитель;
Если ЗначениеЗаполнено(Значение) = 1 Тогда 
	Пока Значение.Уровень() &gt;= 4 Цикл
		Значение = Значение.Родитель;
	КонецЦикла;
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>3</Код><Наименование>Наименование --&gt; Наименование</Наименование><Порядок>300</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование><Порядок>100</Порядок><Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/><Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Число"/></Свойство><Свойство Поиск="true"><Код>2</Код><Наименование>Код --&gt; Код</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Код" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Код, 8);</ПередВыгрузкой></Свойство><Группа><Код>14</Код><Наименование> --&gt;</Наименование><Порядок>1400</Порядок><Источник/><Приемник/><ПередОбработкойВыгрузки>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки><Свойство><Код>13</Код><Наименование> --&gt; ТипНоменклатуры</Наименование><Порядок>1300</Порядок><Источник/><Приемник Имя="ТипНоменклатуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНоменклатуры"/><ПередВыгрузкой>Если Источник.Услуга Тогда // это услуга
	Значение = "Услуга";
	
Иначе
	Значение = "ТМЦ";
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>12</Код><Наименование> --&gt; ВидМатериальногоРесурса</Наименование><Порядок>1200</Порядок><Источник/><Приемник Имя="ВидМатериальногоРесурса" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМатериальныхРесурсов"/><ПередВыгрузкой>Если Источник.Услуга Тогда // это услуга
	Значение = "Услуга";
	
Иначе
	Значение = "Товар";
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>9</Код><Наименование>НаименованиеПолное --&gt; ПолнНаименование</Наименование><Порядок>900</Порядок><Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/><Приемник Имя="ПолнНаименование" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>10</Код><Наименование> --&gt; ВидДеятельности</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="ВидДеятельности" Вид="Реквизит" Тип="СправочникСсылка.ВидыДеятельности"/><КодПравилаКонвертации>ВидыДеятельности                                  </КодПравилаКонвертации><ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("Услуга", Источник.Услуга);
Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);

Значение = ВходящиеДанные.РеквизитыВидаДеятельности;</ПередВыгрузкой></Свойство><Свойство><Код>11</Код><Наименование>ЕдиницаХраненияОстатков --&gt; ЕдиницаИзмерения</Наименование><Порядок>1100</Порядок><Источник Имя="БазоваяЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/><Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерений"/><КодПравилаКонвертации>ЕдиницыИзмеренийКлассификатор                     </КодПравилаКонвертации></Свойство><Свойство><Код>8</Код><Наименование>Комментарий --&gt; Комментарий</Наименование><Порядок>800</Порядок><Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>6</Код><Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование><Порядок>600</Порядок><Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/><КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации></Свойство><Свойство><Код>5</Код><Наименование>СтранаПроисхождения --&gt; СтранаПроисхождения</Наименование><Порядок>500</Порядок><Источник/><Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="Число"/><ПередВыгрузкой>Если НЕ ЗначениеЗаполнено(Источник.СтранаПроисхождения) Тогда	
	Значение = 1;
	
ИначеЕсли Источник.СтранаПроисхождения.Код = "643" Тогда
	Значение = 1;
	
ИначеЕсли СокрЛП(Источник.СтранаПроисхождения.Наименование) = "Россия" Тогда
	Значение = 1;
	
Иначе
	Значение = 0;
КонецЕсли;</ПередВыгрузкой></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>ОКСМ</Код><Наименование>СправочникСсылка.КлассификаторСтранМира --&gt; СправочникСсылка.ОКСМ</Наименование><Порядок>1500</Порядок><Источник>СправочникСсылка.КлассификаторСтранМира</Источник><Приемник>СправочникСсылка.ОКСМ</Приемник><Свойства><Свойство Поиск="true"><Код>1</Код><Наименование>Код --&gt; Код</Наименование><Порядок>100</Порядок><Источник Имя="Код" Вид="Свойство" Тип="Строка"/><Приемник Имя="Код" Вид="Свойство" Тип="Строка"/></Свойство><Свойство><Код>2</Код><Наименование>Наименование --&gt; Наименование</Наименование><Порядок>200</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство></Свойства><Значения/></Правило><Правило><Код>Пользователи</Код><Наименование>СправочникСсылка.Пользователи --&gt; СправочникСсылка.Пользователи</Наименование><Порядок>800</Порядок><Источник>СправочникСсылка.Пользователи</Источник><Приемник>СправочникСсылка.Пользователи</Приемник><Свойства><Свойство Поиск="true"><Код>1</Код><Наименование>Код --&gt; Код</Наименование><Порядок>100</Порядок><Источник/><Приемник Имя="Код" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>ПозицияПервогоПробела = Найти(Источник.Код, " ");
Значение = СокрЛП(Лев(Источник.Код, ПозицияПервогоПробела - 1));</ПередВыгрузкой></Свойство><Свойство><Код>2</Код><Наименование>Наименование --&gt; Наименование</Наименование><Порядок>200</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство><Свойство><Код>3</Код><Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование><Порядок>300</Порядок><Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/><Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Число"/></Свойство></Свойства><Значения/></Правило><Правило><Код>ПрочиеРасходы</Код><Наименование>СправочникСсылка.СтатьиЗатрат --&gt; СправочникСсылка.ПрочиеРасходы</Наименование><Порядок>1900</Порядок><Источник>СправочникСсылка.СтатьиЗатрат</Источник><Приемник>СправочникСсылка.ПрочиеРасходы</Приемник><Свойства><Свойство><Код>2</Код><Наименование>Наименование --&gt; Наименование</Наименование><Порядок>200</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование>Код --&gt; Код</Наименование><Порядок>100</Порядок><Источник Имя="Код" Вид="Свойство" Тип="Строка"/><Приемник Имя="Код" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Код, 8);</ПередВыгрузкой></Свойство></Свойства><Значения/></Правило><Правило><Код>Работники</Код><Наименование>СправочникСсылка.ФизическиеЛица --&gt; СправочникСсылка.Работники</Наименование><Порядок>1700</Порядок><ПередВыгрузкой>Если Источник.ЭтоГруппа И Источник.Уровень() &gt;= 3 Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><Источник>СправочникСсылка.ФизическиеЛица</Источник><Приемник>СправочникСсылка.Работники</Приемник><Свойства><Свойство Поиск="true"><Код>1</Код><Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование><Порядок>100</Порядок><Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/><Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Число"/></Свойство><Свойство Поиск="true"><Код>2</Код><Наименование>Код --&gt; Код</Наименование><Порядок>200</Порядок><Источник/><Приемник Имя="Код" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Код, 8);</ПередВыгрузкой></Свойство><Свойство><НеЗамещать>true</НеЗамещать><Код>3</Код><Наименование>Наименование --&gt; Наименование</Наименование><Порядок>300</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/><ПередВыгрузкой>Если Источник.ЭтоГруппа Тогда
	Значение = Источник.Наименование
Иначе
	ФИОСрез = РегистрыСведений.ФИОФизЛиц.ПолучитьПоследнее(,Новый Структура("ФизЛицо",Источник));
	Значение = СокрЛП(ФИОСрез.Фамилия) + " " + СокрЛП(ФИОСрез.Имя) + " " + СокрЛП(ФИОСрез.Отчество);
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование>Родитель --&gt; Родитель</Наименование><Порядок>400</Порядок><Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ФизическиеЛица"/><Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Работники"/><КодПравилаКонвертации>Работники                                         </КодПравилаКонвертации><ПередВыгрузкой>Значение = Источник.Родитель;
Если ЗначениеЗаполнено(Значение) = 1 Тогда 
	Пока Значение.Уровень() &gt;= 3 Цикл
		Значение = Значение.Родитель;
	КонецЦикла;
КонецЕсли;</ПередВыгрузкой></Свойство><Свойство><Код>14</Код><Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование><Порядок>800</Порядок><Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/><Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Число"/></Свойство><Группа><Код>7</Код><Наименование> --&gt;</Наименование><Порядок>700</Порядок><Источник/><Приемник/><ПередОбработкойВыгрузки>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
	
Иначе
	НаборКонтактнойИнформации = "";
	УправлениеКонтактнойИнформацией.ПрочитатьКонтактнуюИнформацию(НаборКонтактнойИнформации, Источник);
	КонтактнаяИнформация = НаборКонтактнойИнформации.Выгрузить();
	
	Если ТипЗнч(ВходящиеДанные) &lt;&gt; Тип("Структура") Тогда
		ВходящиеДанные = Новый Структура;
	КонецЕсли;

	ВходящиеДанные.Вставить("КонтактнаяИнформация", КонтактнаяИнформация);
КонецЕсли;</ПередОбработкойВыгрузки><Свойство><Код>6</Код><Наименование>ДатаРождения --&gt; ДатаРождения</Наименование><Порядок>600</Порядок><Источник Имя="ДатаРождения" Вид="Реквизит" Тип="Дата"/><Приемник Имя="ДатаРождения" Вид="Реквизит" Тип="Дата"/></Свойство><Свойство><Код>8</Код><Наименование> --&gt; Телефон</Наименование><Порядок>700</Порядок><Источник/><Приемник Имя="Телефон" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>КонтактнаяИнформация = ВходящиеДанные.КонтактнаяИнформация;
Значение = КонтактнаяИнформация.Найти(Справочники.ВидыКонтактнойИнформации.ТелефонФизЛицаДомашний).Представление;</ПередВыгрузкой></Свойство><Свойство><Код>10</Код><Наименование> --&gt; ДокументУдЛичность</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="ДокументУдЛичность" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Паспорт = РегистрыСведений.ПаспортныеДанныеФизЛиц.ПолучитьПоследнее(,Новый Структура("ФизЛицо", Источник));

КемВыдан = Паспорт.ДокументКемВыдан;
ДатаВыдачи = Паспорт.ДокументДатаВыдачи;
Номер = Паспорт.ДокументНомер;
Серия = Паспорт.ДокументСерия;
Вид = Паспорт.ДокументВид;

Документ = СокрП(КемВыдан);
Документ = ?(НЕ ЗначениеЗаполнено(ДатаВыдачи),"",Формат(ДатаВыдачи,"ДДДММГГГГ"))+?(ЗначениеЗаполнено(Документ),","+Документ,"");
Документ = СокрП(Номер)+?(ЗначениеЗаполнено(Документ),","+Документ,"");
Документ = СокрП(Серия)+?(ЗначениеЗаполнено(Документ),","+Документ,"");
Значение = ""+Вид+?(ЗначениеЗаполнено(Документ),","+Документ,"");</ПередВыгрузкой></Свойство><Свойство><Код>12</Код><Наименование> --&gt; Адрес</Наименование><Порядок>1100</Порядок><Источник/><Приемник Имя="Адрес" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>КонтактнаяИнформация = ВходящиеДанные.КонтактнаяИнформация;
Значение = КонтактнаяИнформация.Найти(Справочники.ВидыКонтактнойИнформации.ЮрАдресФизЛица).Представление;</ПередВыгрузкой></Свойство><Свойство><Код>13</Код><Наименование> --&gt; АдресФакт</Наименование><Порядок>1200</Порядок><Источник/><Приемник Имя="АдресФакт" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>КонтактнаяИнформация = ВходящиеДанные.КонтактнаяИнформация;
Значение = КонтактнаяИнформация.Найти(Справочники.ВидыКонтактнойИнформации.ФактАдресФизЛица).Представление;</ПередВыгрузкой></Свойство></Группа></Свойства><Значения/></Правило><Правило><Код>РасчетныеСчета</Код><Наименование>СправочникСсылка.БанковскиеСчета --&gt; СправочникСсылка.РасчетныеСчета</Наименование><Порядок>1800</Порядок><ПередВыгрузкой>Если ТипЗнч(Источник.Владелец) = Тип("СправочникСсылка.Контрагенты") Тогда
	ВходящиеДанные = Новый Структура;
	ВходящиеДанные.Вставить("Владелец", Источник.Владелец);
	
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой><НеЗамещать>true</НеЗамещать><Источник>СправочникСсылка.БанковскиеСчета</Источник><Приемник>СправочникСсылка.РасчетныеСчета</Приемник><Свойства><Свойство Поиск="true"><Код>6</Код><Наименование>Банк --&gt; БанкОрганизации</Наименование><Порядок>600</Порядок><Источник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.Банки"/><Приемник Имя="БанкОрганизации" Вид="Реквизит" Тип="СправочникСсылка.Банки"/><КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации></Свойство><Свойство><Код>11</Код><Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование><Порядок>1100</Порядок><Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/><Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Число"/></Свойство><Свойство><Код>10</Код><Наименование> --&gt; КорреспондентКПП</Наименование><Порядок>1000</Порядок><Источник/><Приемник Имя="КорреспондентКПП" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Значение = Источник.Владелец.КПП;</ПередВыгрузкой></Свойство><Свойство><Код>9</Код><Наименование> --&gt; КорреспондентИНН</Наименование><Порядок>900</Порядок><Источник/><Приемник Имя="КорреспондентИНН" Вид="Реквизит" Тип="Строка"/><ПередВыгрузкой>Значение = Источник.Владелец.ИНН;</ПередВыгрузкой></Свойство><Свойство><Код>8</Код><Наименование>ТекстНазначения --&gt; Назначение</Наименование><Порядок>800</Порядок><Источник Имя="ТекстНазначения" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Назначение" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>7</Код><Наименование>ТекстКорреспондента --&gt; Корреспондент</Наименование><Порядок>700</Порядок><Источник Имя="ТекстКорреспондента" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Корреспондент" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>5</Код><Наименование>НомерСчета --&gt; Номер</Наименование><Порядок>500</Порядок><Источник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Номер" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>4</Код><Наименование>БанкДляРасчетов --&gt; БанкДляРасчетов</Наименование><Порядок>400</Порядок><Источник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/><Приемник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/><КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации></Свойство><Свойство Поиск="true"><Код>3</Код><Наименование>Владелец --&gt; Владелец</Наименование><Порядок>300</Порядок><ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных><Источник/><Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации></Свойство><Свойство><Код>2</Код><Наименование>Наименование --&gt; Наименование</Наименование><Порядок>200</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство></Свойства><Значения/></Правило><Правило><Код>ТипыЦен</Код><Наименование>СправочникСсылка.ТипыЦен --&gt; СправочникСсылка.ТипыЦен</Наименование><Порядок>900</Порядок><Источник>СправочникСсылка.ТипыЦенНоменклатуры</Источник><Приемник>СправочникСсылка.ТипыЦен</Приемник><Свойства><Свойство Поиск="true"><Код>2</Код><Наименование>Наименование --&gt; Наименование</Наименование><Порядок>200</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование>ЦенаВключаетНДС --&gt; ЦенаВклНДС</Наименование><Порядок>400</Порядок><Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/><Приемник Имя="ЦенаВклНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство><Код>5</Код><Наименование>Комментарий --&gt; Комментарий</Наименование><Порядок>500</Порядок><Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство><Код>6</Код><Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование><Порядок>600</Порядок><Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/><Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Число"/></Свойство></Свойства><Значения/></Правило><Правило><Код>ТипыЦенКонтрагентов</Код><Наименование>СправочникСсылка.ТипыЦенНоменклатурыКонтрагентов --&gt; СправочникСсылка.ТипыЦен</Наименование><Порядок>1000</Порядок><Источник>СправочникСсылка.ТипыЦенНоменклатурыКонтрагентов</Источник><Приемник>СправочникСсылка.ТипыЦен</Приемник><Свойства><Свойство><Код>4</Код><Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование><Порядок>400</Порядок><Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/><Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Число"/></Свойство><Свойство><Код>3</Код><Наименование>Комментарий --&gt; Комментарий</Наименование><Порядок>300</Порядок><Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/><Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/></Свойство><Свойство Поиск="true"><Код>2</Код><Наименование>ЦенаВключаетНДС --&gt; ЦенаВклНДС</Наименование><Порядок>200</Порядок><Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/><Приемник Имя="ЦенаВклНДС" Вид="Реквизит" Тип="Число"/></Свойство><Свойство Поиск="true"><Код>1</Код><Наименование>Наименование --&gt; Наименование</Наименование><Порядок>100</Порядок><Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/><Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/></Свойство></Свойства><Значения/></Правило><Правило><Код>Цены</Код><Наименование>РегистрСведенийЗапись.ЦеныКомпании --&gt; СправочникСсылка.Цены</Наименование><Порядок>1400</Порядок><Источник>РегистрСведенийЗапись.ЦеныНоменклатуры</Источник><Приемник>СправочникСсылка.Цены</Приемник><Свойства><Свойство Поиск="true"><Код>1</Код><Наименование>ТипЦен --&gt; ТипЦен</Наименование><Порядок>100</Порядок><Источник Имя="ТипЦен" Вид="Измерение" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/><Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/><КодПравилаКонвертации>ТипыЦен                                           </КодПравилаКонвертации></Свойство><Свойство><Код>2</Код><Наименование>Валюта --&gt; Валюта</Наименование><Порядок>200</Порядок><Источник Имя="Валюта" Вид="Ресурс" Тип="СправочникСсылка.Валюты"/><Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/><КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации></Свойство><Свойство><Код>3</Код><Наименование>Цена --&gt; Цена</Наименование><Порядок>300</Порядок><Источник Имя="Цена" Вид="Ресурс" Тип="Число"/><Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/></Свойство><Свойство Поиск="true"><Код>4</Код><Наименование>Номенклатура --&gt; Владелец</Наименование><Порядок>400</Порядок><Источник Имя="Номенклатура" Вид="Измерение" Тип="СправочникСсылка.Номенклатура"/><Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации></Свойство></Свойства><Значения/></Правило></Группа></ПравилаКонвертацииОбъектов><ПравилаВыгрузкиДанных><Группа Отключить="true"><Код>Справочники</Код><Наименование>Справочники</Наименование><Порядок>200</Порядок><Правило Отключить="true"><Код>Номенклатура</Код><Наименование>Номенклатура</Наименование><Порядок>100</Порядок><КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>СправочникСсылка.Номенклатура</ОбъектВыборки></Правило><Правило Отключить="true"><Код>БанковскиеСчетаПредприятия</Код><Наименование>Банковские счета</Наименование><Порядок>200</Порядок><КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>СправочникСсылка.БанковскиеСчета</ОбъектВыборки><ПередВыгрузкойОбъекта>Отказ = ?(Объект.Владелец = Параметры.ЮридическоеЛицо, Ложь, Истина);</ПередВыгрузкойОбъекта></Правило><Правило Отключить="true"><Код>Контрагенты</Код><Наименование>Контрагенты</Наименование><Порядок>300</Порядок><КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>СправочникСсылка.Контрагенты</ОбъектВыборки></Правило><Правило Отключить="true"><Код>ДоговорыВзаиморасчетов</Код><Наименование>Договоры взаиморасчетов</Наименование><Порядок>400</Порядок><КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>СправочникСсылка.ДоговорыКонтрагентов</ОбъектВыборки></Правило><Правило Отключить="true"><Код>СкладыКомпании</Код><Наименование>Склады (места хранения) компании</Наименование><Порядок>500</Порядок><КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>СправочникСсылка.Склады</ОбъектВыборки></Правило><Правило Отключить="true"><Код>ЦеныКомпании</Код><Наименование>Цены компании</Наименование><Порядок>600</Порядок><КодПравилаКонвертации>Цены                                              </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>РегистрСведенийЗапись.ЦеныНоменклатуры</ОбъектВыборки></Правило><Правило Отключить="true"><Код>БанковскиеСчетаКонтрагентов</Код><Наименование>Расчетные счета контрагентов</Наименование><Порядок>700</Порядок><КодПравилаКонвертации>РасчетныеСчета                                    </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>СправочникСсылка.БанковскиеСчета</ОбъектВыборки></Правило><Правило Отключить="true"><Код>СтатьиЗатрат</Код><Наименование>Статьи затрат</Наименование><Порядок>800</Порядок><КодПравилаКонвертации>ПрочиеРасходы                                     </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>СправочникСсылка.СтатьиЗатрат</ОбъектВыборки></Правило></Группа><Группа><Код>Документы</Код><Наименование>Документы</Наименование><Порядок>300</Порядок><Правило><Код>ПоступлениеТоваров</Код><Наименование>Поступление товаров</Наименование><Порядок>100</Порядок><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ПоступлениеТоваровУслуг</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокСкладов.НайтиПоЗначению(Объект.СкладОрдер) = Неопределено) и (Параметры.СписокСкладов.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Объект.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
Иначе
	ВыгрузитьПоПравилу(Объект,,,, "ПоступлениеТМЦ");
	ВыгрузитьПоПравилу(Объект,,,, "ИныеМатериальныеРасходы");
	ВыгрузитьПоПравилу(Объект,,,, "ПрочиеРасходыРасчеты");
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ПоступлениеТоваровУслугВНТТ</Код><Наименование>Поступление товаров и услуг в НТТ</Наименование><Порядок>200</Порядок><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ПоступлениеТоваровУслугВНТТ</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокСкладов.НайтиПоЗначению(Объект.Склад) = Неопределено) и (Параметры.СписокСкладов.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Объект.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
Иначе
	ВыгрузитьПоПравилу(Объект,,,, "ПоступлениеТМЦ");
	ВыгрузитьПоПравилу(Объект,,,, "ИныеМатериальныеРасходы");
	ВыгрузитьПоПравилу(Объект,,,, "ПрочиеРасходыРасчеты");
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ПоступлениеДопРасходов</Код><Наименование>Поступление доп. расходов</Наименование><Порядок>300</Порядок><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ПоступлениеДопРасходов</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Объект.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
ИначеЕсли Объект.ВидОперации = Перечисления.ВидыОперацийПоступлениеДопРасходов.ВнутреннийРасход Тогда
	Отказ = Истина;
	
Иначе
	ВыгрузитьПоПравилу(Объект,,,, "ПоступлениеТМЦдопРасходы");
	ВыгрузитьПоПравилу(Объект,,,, "ИныеМатериальныеДопРасходы");
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>АвансовыйОтчет</Код><Наименование>Авансовый отчет</Наименование><Порядок>400</Порядок><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.АвансовыйОтчет</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Объект.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
Иначе
	
	ИсходящиеДанные = Новый Структура;
	ИсходящиеДанные.Вставить("АвансовыйОтчет", Объект);
	Выполнить(Алгоритмы.ВыгрузитьАвансовыйОтчет);
	
	ВыгрузитьПоПравилу(Объект,,,, "АвансовыйОтчет");
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ПриходныйКассовыйОрдер</Код><Наименование>Приходный кассовый ордер</Наименование><Порядок>500</Порядок><КодПравилаКонвертации>ПриходныйОрдер                                    </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ПриходныйКассовыйОрдер</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Объект.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;	
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>РасходныйКассовыйОрдер</Код><Наименование>Расходный кассовый ордер</Наименование><Порядок>600</Порядок><КодПравилаКонвертации>РасходныйОрдер                                    </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.РасходныйКассовыйОрдер</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ПлатежноеПоручениеВходящее</Код><Наименование>Платежное поручение входящее</Наименование><Порядок>700</Порядок><КодПравилаКонвертации>ПлатежноеПоручениеВходящее                        </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ПлатежноеПоручениеВходящее</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>АккредитивПолученный</Код><Наименование>Аккредитив полученный</Наименование><Порядок>800</Порядок><КодПравилаКонвертации>АккредитивПолученный                              </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.АккредитивПолученный</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ИнкассовоеПоручениеПереданное</Код><Наименование>Инкассовое поручение переданное</Наименование><Порядок>900</Порядок><КодПравилаКонвертации>ИнкассовоеПоручениеПереданное                     </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ИнкассовоеПоручениеПереданное</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ОбъявлениеНаВзносНаличными</Код><Наименование>Объявление на взнос наличными</Наименование><Порядок>1000</Порядок><КодПравилаКонвертации>ОбъявлениеНаВзносНаличными                        </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ОбъявлениеНаВзносНаличными</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен  Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ПлатежноеТребованиеВыставленное</Код><Наименование>Платежное требование выставленное</Наименование><Порядок>1100</Порядок><КодПравилаКонвертации>ПлатежноеТребованиеВыставленное                   </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ПлатежноеТребованиеВыставленное</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ПлатежныйОрдерПоступлениеДенежныхСредств</Код><Наименование>Платежный ордер: поступление денежных средств</Наименование><Порядок>1200</Порядок><КодПравилаКонвертации>ПлатежныйОрдерПоступлениеДенежныхСредств          </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ПлатежныйОрдерПоступлениеДенежныхСредств</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ПлатежноеПоручениеИсходящее</Код><Наименование>Платежное поручение исходящее</Наименование><Порядок>1300</Порядок><КодПравилаКонвертации>ПлатежноеПоручениеИсходящее                       </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ПлатежноеПоручениеИсходящее</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>АккредитивПереданный</Код><Наименование>Аккредитив переданный</Наименование><Порядок>1400</Порядок><КодПравилаКонвертации>АккредитивПереданный                              </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.АккредитивПереданный</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ИнкассовоеПоручениеПолученное</Код><Наименование>Инкассовое поручение полученное</Наименование><Порядок>1500</Порядок><КодПравилаКонвертации>ИнкассовоеПоручениеПолученное                     </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ИнкассовоеПоручениеПолученное</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ПлатежноеТребованиеПолученное</Код><Наименование>Платежное требование полученное</Наименование><Порядок>1600</Порядок><КодПравилаКонвертации>ПлатежноеТребованиеПолученное                     </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ПлатежноеТребованиеПолученное</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ПлатежныйОрдерСписаниеДенежныхСредств</Код><Наименование>Платежный ордер: списание денежных средств</Наименование><Порядок>1700</Порядок><КодПравилаКонвертации>ПлатежныйОрдерСписаниеДенежныхСредств             </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ПлатежныйОрдерСписаниеДенежныхСредств</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ВозвратТоваровПоставщику</Код><Наименование>Возврат товаров поставщику</Наименование><Порядок>1800</Порядок><КодПравилаКонвертации>ВозвратПоставщику                                 </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ВозвратТоваровПоставщику</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

ИначеЕсли (Параметры.СписокСкладов.НайтиПоЗначению(Объект.Склад) = Неопределено) и (Параметры.СписокСкладов.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Объект.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ВозвратТоваровПоставщикуИзНТТ</Код><Наименование>Возврат товаров поставщику из НТТ</Наименование><Порядок>1900</Порядок><КодПравилаКонвертации>ВозвратПоставщикуИзНТТ                            </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ВозвратТоваровПоставщикуИзНТТ</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

ИначеЕсли (Параметры.СписокСкладов.НайтиПоЗначению(Объект.Склад) = Неопределено) и (Параметры.СписокСкладов.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Объект.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ВозвратТоваровОтПокупателя</Код><Наименование>Возврат товаров от покупателя</Наименование><Порядок>2000</Порядок><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ВозвратТоваровОтПокупателя</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокСкладов.НайтиПоЗначению(Объект.СкладОрдер) = Неопределено) и (Параметры.СписокСкладов.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Объект.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
ИначеЕсли Объект.ДоговорКонтрагента.ВидДоговора &lt;&gt; Перечисления.ВидыДоговоровКонтрагентов.СКомиссионером Тогда
	// Сгруппируем табличную часть по документам реализации.
	// Для каждого документа реализации создадим отдельных возврат.
	
	РасходныеНакладные = Новый ТаблицаЗначений;
	РасходныеНакладные.Колонки.Добавить("Ключ");
	РасходныеНакладные.Колонки.Добавить("РеквизитыДокумента");
	
	ИсходящиеДанные = Новый Структура("Док,ТабличнаяЧасть,ИмяНоменклатуры,ИмяТЧ");
	ИсходящиеДанные.Док 			= Объект;
	ИсходящиеДанные.ТабличнаяЧасть	= Объект.Товары;
	ИсходящиеДанные.ИмяТЧ			= "Товары";
	Выполнить(Алгоритмы.ДобавитьДокументыПоступленияВТабличнуюЧасть);
	
	// Теперь в "Исходящие данные" добавлена табличная часть,
	// содержащая ссылки на документы поступления.
	
	Для каждого Товар из ИсходящиеДанные.КоллекцияОбъектов Цикл
		
		Ключ = Товар.ДокументПартии;
		Если НЕ ЗначениеЗаполнено(Ключ) Тогда
			Ключ = Документы.РеализацияТоваровУслуг.ПустаяСсылка();
			
		ИначеЕсли (Ключ.Метаданные().Имя &lt;&gt; "РеализацияТоваровУслуг") и (Ключ.Метаданные().Имя &lt;&gt; "ОтчетОРозничныхПродажах") Тогда
			Ключ = Документы.РеализацияТоваровУслуг.ПустаяСсылка();
		КонецЕсли;
		
		РасходнаяНакладная = РасходныеНакладные.Найти(Ключ, "Ключ");
		Если РасходнаяНакладная = Неопределено Тогда
			РеквизитыДокумента = Новый Структура("ТабличнаяЧасть, ТипЦен, УчитыватьНДС, УчитыватьНП, Контрагент, Комментарий, ДатаДок, НомерДок, Автор, ДокументОтгрузки, Валюта, Курс, СуммаВклНДС, СуммаВклНП, Договор, Склад, ПокупателемВыставляетсяСчетФактураНаВозврат, ВариантОтраженияВозврата");
			РеквизитыДокумента.ТабличнаяЧасть          = Новый ТаблицаЗначений;
			РеквизитыДокумента.ТабличнаяЧасть  .Колонки.Добавить("Номенклатура");
			РеквизитыДокумента.ТабличнаяЧасть  .Колонки.Добавить("Количество");
			РеквизитыДокумента.ТабличнаяЧасть  .Колонки.Добавить("Цена");
			РеквизитыДокумента.ТабличнаяЧасть  .Колонки.Добавить("Сумма");
			РеквизитыДокумента.ТабличнаяЧасть  .Колонки.Добавить("СтавкаНДС");
			РеквизитыДокумента.ТабличнаяЧасть  .Колонки.Добавить("СуммаНДС");
			РеквизитыДокумента.ТабличнаяЧасть  .Колонки.Добавить("ДокументПоступления");
			РеквизитыДокумента.ТабличнаяЧасть  .Колонки.Добавить("ГТД");
			РеквизитыДокумента.ТабличнаяЧасть  .Колонки.Добавить("СтранаПроисхождения");
			РеквизитыДокумента.ТабличнаяЧасть  .Колонки.Добавить("ВидМатериальногоРесурса");
			РеквизитыДокумента.ТабличнаяЧасть  .Колонки.Добавить("ВидДеятельности");
			РеквизитыДокумента.ТабличнаяЧасть  .Колонки.Добавить("ИсходящиеДанные");
			
			РасходнаяНакладная = РасходныеНакладные.Добавить();
			РасходнаяНакладная.Ключ = Ключ;
			РасходнаяНакладная.РеквизитыДокумента = РеквизитыДокумента;
			
			РеквизитыДокумента.ТипЦен           = Объект.ТипЦен;
			РеквизитыДокумента.УчитыватьНДС     = Объект.УчитыватьНДС;
			РеквизитыДокумента.Контрагент       = Объект.Контрагент;
			РеквизитыДокумента.Комментарий      = ОбщегоНазначения.СформироватьЗаголовокДокумента(Объект, Объект.Метаданные().Синоним) + " #" + РасходныеНакладные.Индекс(РасходнаяНакладная);
			РеквизитыДокумента.ДатаДок          = Объект.Дата;
			РеквизитыДокумента.НомерДок         = ДобавитьКПрефиксу(Объект.Номер, "", 10, "Справа");
			РеквизитыДокумента.Автор            = Объект.Ответственный;
			РеквизитыДокумента.ДокументОтгрузки = Ключ;
			РеквизитыДокумента.Валюта           = Объект.ВалютаДокумента;
			РеквизитыДокумента.Курс             = Объект.КурсВзаиморасчетов/?(Объект.КратностьВзаиморасчетов=0,1,Объект.КратностьВзаиморасчетов);
			РеквизитыДокумента.СуммаВклНДС      = Объект.СуммаВключаетНДС;
			РеквизитыДокумента.Договор          = Объект.ДоговорКонтрагента;
			РеквизитыДокумента.Склад            = Объект.СкладОрдер;
			РеквизитыДокумента.ПокупателемВыставляетсяСчетФактураНаВозврат = Объект.ПокупателемВыставляетсяСчетФактураНаВозврат;
			РеквизитыДокумента.ВариантОтраженияВозврата = Объект.ОтразитьВКнигеПокупок;
		КонецЕсли;
		
		СтрокаТЧ = РасходнаяНакладная.РеквизитыДокумента.ТабличнаяЧасть.Добавить();
		СтрокаТЧ.ВидМатериальногоРесурса = ?(Товар.Номенклатура.Услуга, "Услуга", "Товар");
		СтрокаТЧ.Номенклатура            = Товар.Номенклатура;
		СтрокаТЧ.Количество              = -Товар.Количество;
		СтрокаТЧ.Цена                    = Товар.Сумма / ?(Товар.Количество = 0, 1, Товар.Количество);
		СтрокаТЧ.Сумма                   = -Товар.Сумма;
		СтрокаТЧ.СтавкаНДС               = Товар.СтавкаНДС;
		СтрокаТЧ.СуммаНДС                = -Товар.СуммаНДС;
		СтрокаТЧ.ГТД                     = Товар.СерияНоменклатуры.НомерГТД;
		СтрокаТЧ.СтранаПроисхождения     = Товар.СерияНоменклатуры.СтранаПроисхождения;
		СтрокаТЧ.ДокументПоступления	 = Товар.ДокументПоступления;
		
		ИсходящиеДанные = Новый Структура;
		ИсходящиеДанные.Вставить("СкладКомпании", Объект.СкладОрдер);
		ИсходящиеДанные.Вставить("Услуга", Товар.Номенклатура.Услуга);
		ИсходящиеДанные.Вставить("Номенклатура", Товар.Номенклатура);
		ИсходящиеДанные.Вставить("ДатаДокумента", ?(Ключ.Пустая(), Объект.Дата, Ключ.Дата));
		ИсходящиеДанные.Вставить("СтатусПартии", Товар.СтатусПартии);
		ИсходящиеДанные.Вставить("СтранаПроисхождения", Товар.СерияНоменклатуры.СтранаПроисхождения);
		
		Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);
		СтрокаТЧ.ВидДеятельности = ВходящиеДанные.РеквизитыВидаДеятельности;
	КонецЦикла;
	
	Для каждого РасходнаяНакладная из РасходныеНакладные Цикл
		ВыгрузитьПоПравилу(,, РасходнаяНакладная.РеквизитыДокумента,, "ВозвратОтПокупателя");
	КонецЦикла;
	
	Отказ = Истина;
	
Иначе // возврат товара комиссионером
	ВыгрузитьПоПравилу(Объект,,,, "ВозвратТоваровКомиссионером");
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ПеремещениеТоваров</Код><Наименование>Перемещение товаров</Наименование><Порядок>2100</Порядок><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ПеремещениеТоваров</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

ИначеЕсли (Параметры.СписокСкладов.НайтиПоЗначению(Объект.СкладОтправитель) = Неопределено) и (Параметры.СписокСкладов.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Объект.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
Иначе 
	
	ИсходящиеДанные = Новый Структура("Док,ТабличнаяЧасть,ИмяНоменклатуры,ИмяТЧ");
	ИсходящиеДанные.Док 			= Объект;
	ИсходящиеДанные.ТабличнаяЧасть	= Объект.Товары;
	ИсходящиеДанные.ИмяТЧ			= "Товары";
	Выполнить(Алгоритмы.ДобавитьДокументыПоступленияВТабличнуюЧасть);
	ТабличнаяЧасть = ИсходящиеДанные.КоллекцияОбъектов; 
	
	// Сгруппируем табличную часть по документам реализации.
	// Для каждого документа реализации создадим отдельных возврат.
	
	Доки = Новый ТаблицаЗначений;
	Доки.Колонки.Добавить("Ключ");
	Доки.Колонки.Добавить("РеквизитыДокумента");
	
	Для каждого Товар из ТабличнаяЧасть Цикл
		Если Товар.СтатусПартии = Перечисления.СтатусыПартийТоваров.НаКомиссию Тогда
			Ключ = "Комиссионный";
			
		Иначе
			Ключ = "Собственный";
		КонецЕсли;
		
		Док = Доки.Найти(Ключ, "Ключ");
		Если Док = Неопределено Тогда
			РеквизитыДокумента = Новый Структура("ИсходящиеДанные, ИсходящиеДанныеКон, Комментарий, СкладПолучатель, ТабличнаяЧасть, ДатаДок, Автор, ВидДеятельностиКон, ОблагаетсяНДСКон, ВидДеятельности, ОблагаетсяНДС, Склад");
			РеквизитыДокумента.ТабличнаяЧасть     = Новый ТаблицаЗначений;
			РеквизитыДокумента.ТабличнаяЧасть    .Колонки.Добавить("Количество");
			РеквизитыДокумента.ТабличнаяЧасть    .Колонки.Добавить("ВидМатериальногоРесурса");
			РеквизитыДокумента.ТабличнаяЧасть    .Колонки.Добавить("Номенклатура");
			РеквизитыДокумента.ТабличнаяЧасть    .Колонки.Добавить("ДокументПоступления");
			
			РеквизитыДокумента.Комментарий        = ОбщегоНазначения.СформироватьЗаголовокДокумента(Объект, Объект.Метаданные().Синоним) + " #" + Ключ;
			РеквизитыДокумента.СкладПолучатель    = Объект.СкладПолучатель;
			РеквизитыДокумента.ДатаДок            = Объект.Дата;
			РеквизитыДокумента.Автор              = Объект.Ответственный;
			РеквизитыДокумента.Склад              = Объект.СкладОтправитель;
			
			ИсходящиеДанные = Новый Структура;
			ИсходящиеДанные.Вставить("СкладКомпании", Объект.СкладПолучатель);
			ИсходящиеДанные.Вставить("СтатусПартии", Товар.СтатусПартии);
			Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);
			РеквизитыДокумента.ВидДеятельностиКон = ВходящиеДанные.РеквизитыВидаДеятельности;
			РеквизитыДокумента.ОблагаетсяНДСКон   = ВходящиеДанные.РеквизитыВидаДеятельности.ОблагаетсяНДС;
			
			ИсходящиеДанные = Новый Структура;
			ИсходящиеДанные.Вставить("СкладКомпании", Объект.СкладОтправитель);
			ИсходящиеДанные.Вставить("СтатусПартии", Товар.СтатусПартии);
			Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);
			РеквизитыДокумента.ВидДеятельности    = ВходящиеДанные.РеквизитыВидаДеятельности;
			РеквизитыДокумента.ОблагаетсяНДС      = ВходящиеДанные.РеквизитыВидаДеятельности.ОблагаетсяНДС;
			
			Док = Доки.Добавить();
			Док.Ключ = Ключ;
			Док.РеквизитыДокумента = РеквизитыДокумента;
		КонецЕсли;
		
		СтрокаТЧ = Док.РеквизитыДокумента.ТабличнаяЧасть.Добавить();
		СтрокаТЧ.ВидМатериальногоРесурса = "Товар";
		СтрокаТЧ.Номенклатура            = Товар.Номенклатура;
		СтрокаТЧ.Количество              = Товар.Количество;
		СтрокаТЧ.ДокументПоступления	 = Товар.ДокументПоступления;
	КонецЦикла;
	
	Для каждого Док из Доки Цикл
		ВыгрузитьПоПравилу(,, Док.РеквизитыДокумента,, "ПеремещениеМатериальныхРесурсов");
	КонецЦикла;
	
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ОприходованиеТоваров</Код><Наименование>Оприходование товаров</Наименование><Порядок>2200</Порядок><КодПравилаКонвертации>ОприходованиеТоваров                              </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ОприходованиеТоваров</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

ИначеЕсли (Параметры.СписокСкладов.НайтиПоЗначению(Объект.Склад) = Неопределено) и (Параметры.СписокСкладов.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Объект.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>СписаниеТоваров</Код><Наименование>Списание товаров</Наименование><Порядок>2300</Порядок><КодПравилаКонвертации>СписаниеТоваров                                   </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.СписаниеТоваров</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

ИначеЕсли (Параметры.СписокСкладов.НайтиПоЗначению(Объект.Склад) = Неопределено) и (Параметры.СписокСкладов.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Объект.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>КомплектацияНоменклатуры</Код><Наименование>Комплектация номенклатуры</Наименование><Порядок>2400</Порядок><КодПравилаКонвертации>Комплектация                                      </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.КомплектацияНоменклатуры</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

ИначеЕсли (Параметры.СписокСкладов.НайтиПоЗначению(Объект.Склад) = Неопределено) и (Параметры.СписокСкладов.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
ИначеЕсли Объект.ВидОперации &lt;&gt; Перечисления.ВидыОперацийКомплектацияНоменклатуры.Комплектация Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>РазукомплектацияНоменклатуры</Код><Наименование>Разукомплектация номенклатуры</Наименование><Порядок>2500</Порядок><КодПравилаКонвертации>Разукомплектация                                  </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.КомплектацияНоменклатуры</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

ИначеЕсли (Параметры.СписокСкладов.НайтиПоЗначению(Объект.Склад) = Неопределено) и (Параметры.СписокСкладов.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
ИначеЕсли Объект.ВидОперации = Перечисления.ВидыОперацийКомплектацияНоменклатуры.Комплектация Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>Доверенность</Код><Наименование>Доверенность</Наименование><Порядок>2600</Порядок><КодПравилаКонвертации>Доверенность                                      </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.Доверенность</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Объект.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>СчетНаОплатуПокупателю</Код><Наименование>Счет на оплату покупателю</Наименование><Порядок>2700</Порядок><КодПравилаКонвертации>Счет                                              </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.СчетНаОплатуПокупателю</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

ИначеЕсли (Параметры.СписокСкладов.НайтиПоЗначению(Объект.Склад) = Неопределено) и (Параметры.СписокСкладов.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Объект.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>КорректировкаДолга</Код><Наименование>Корректировка долга</Наименование><Порядок>2800</Порядок><КодПравилаКонвертации>КорректировкаЗадолженности                        </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.КорректировкаДолга</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Объект.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ПлатежноеПоручение</Код><Наименование>Платежное поручение</Наименование><Порядок>2900</Порядок><КодПравилаКонвертации>ПлатежноеПоручение                                </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ПлатежноеПоручениеИсходящее</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>РеализацияТоваров</Код><Наименование>Реализация товаров</Наименование><Порядок>3000</Порядок><КодПравилаКонвертации>ПродажаТоваров                                    </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.РеализацияТоваровУслуг</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

ИначеЕсли (Параметры.СписокСкладов.НайтиПоЗначению(Объект.Склад) = Неопределено) и (Параметры.СписокСкладов.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Объект.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
Иначе
	Если Объект.ДоговорКонтрагента.ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.СКомиссионером Тогда
		ВыгрузитьПоПравилу(Объект,,,, "ПередачаНаКомиссию");
		
	Иначе
		ВыгрузитьПоПравилу(Объект,,,, "ПродажаТоваров");
	КонецЕсли;
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ОтчетКомиссионераОПродажах</Код><Наименование>Отчет комиссионера о продажах</Наименование><Порядок>3100</Порядок><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ОтчетКомиссионераОПродажах</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Объект.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
Иначе
	ВыгрузитьПоПравилу(Объект,,,, "РеализацияОтчетКомиссионераОПродажах");
	Если Объект.СуммаВознаграждения &lt;&gt; 0 Тогда
		ВыгрузитьПоПравилу(Объект,,,, "ПоступлениеОтчетКомиссионера");
		ВыгрузитьПоПравилу(Объект,,,, "ПоступлениеОтчетКомиссионераРасход");
	КонецЕсли;
	
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ОтчетКомитентуОПродажах</Код><Наименование>Отчет комитенту о продажах товаров</Наименование><Порядок>3200</Порядок><КодПравилаКонвертации>ОтчетКомитенту                                    </КодПравилаКонвертации><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ОтчетКомитентуОПродажах</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Объект.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>ОтчетОРозничныхПродажах</Код><Наименование>Отчет о розничных продажах</Наименование><Порядок>3300</Порядок><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.ОтчетОРозничныхПродажах</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Не Объект.Проведен или Не Объект.ОтражатьВБухгалтерскомУчете Тогда
	Отказ = Истина;

ИначеЕсли Объект.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
	Отказ = Истина;

//ИначеЕсли (Параметры.СписокСкладов.НайтиПоЗначению(Объект.Склад) = Неопределено) и (Параметры.СписокСкладов.Количество() &gt; 0) Тогда
//	Отказ = Истина;
	
ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(Объект.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
	Отказ = Истина;
	
Иначе
	ИсходящиеДанные = Новый Структура("Док,ТабличнаяЧасть,ИмяНоменклатуры,ИмяТЧ");
	ИсходящиеДанные.Док 			= Объект;
	ИсходящиеДанные.ТабличнаяЧасть	= Объект.Товары;
	ИсходящиеДанные.ИмяТЧ			= "Товары";
	Выполнить(Алгоритмы.ДобавитьДокументыПоступленияВТабличнуюЧасть);
	ТабличнаяЧасть = ИсходящиеДанные.КоллекцияОбъектов; 
	
	// Сгруппируем табличную часть по документам реализации.
	// Для каждого документа реализации создадим отдельных возврат.
	
	Доки = Новый ТаблицаЗначений;
	Доки.Колонки.Добавить("Ключ");
	Доки.Колонки.Добавить("РеквизитыДокумента");
	
	Для каждого Товар из ТабличнаяЧасть Цикл
		Ключ = Товар.Склад;
		Если (Параметры.СписокСкладов.НайтиПоЗначению(Ключ) = Неопределено) и (Параметры.СписокСкладов.Количество() &gt; 0) Тогда
			Продолжить;
		КонецЕсли;
		
		Док = Доки.Найти(Ключ, "Ключ");
		Если Док = Неопределено Тогда
			РеквизитыДокумента = Новый Структура("Комментарий, Склад, ТабличнаяЧасть, ТипЦен, УчитыватьНДС, ДатаДок, Автор, Контрагент, Валюта, СуммаВклНДС, Курс, ВидОперации");
			РеквизитыДокумента.ТабличнаяЧасть     = Новый ТаблицаЗначений;
			РеквизитыДокумента.ТабличнаяЧасть    .Колонки.Добавить("Количество");
			РеквизитыДокумента.ТабличнаяЧасть    .Колонки.Добавить("ВидМатериальногоРесурса");
			РеквизитыДокумента.ТабличнаяЧасть    .Колонки.Добавить("Номенклатура");
			РеквизитыДокумента.ТабличнаяЧасть    .Колонки.Добавить("ДокументПоступления");
			РеквизитыДокумента.ТабличнаяЧасть    .Колонки.Добавить("СтатусПартии");
			РеквизитыДокумента.ТабличнаяЧасть    .Колонки.Добавить("Сумма");
			РеквизитыДокумента.ТабличнаяЧасть    .Колонки.Добавить("СтавкаНДС");
			РеквизитыДокумента.ТабличнаяЧасть    .Колонки.Добавить("СуммаНДС");
			
			РеквизитыДокумента.Комментарий        = ОбщегоНазначения.СформироватьЗаголовокДокумента(Объект, Объект.Метаданные().Синоним) + " #" + Ключ;
			РеквизитыДокумента.Склад              = Объект.Склад;
			РеквизитыДокумента.ТипЦен             = Объект.ТипЦен;
			РеквизитыДокумента.УчитыватьНДС       = Объект.УчитыватьНДС;
			РеквизитыДокумента.ДатаДок            = Объект.Дата;
			РеквизитыДокумента.Автор              = Объект.Ответственный;
			РеквизитыДокумента.Контрагент         = ?(Объект.ВидОперации = Перечисления.ВидыОперацийОтчетОРозничныхПродажах.ОтчетККМОПродажах, Объект.КассаККМ, Объект.Склад);
			РеквизитыДокумента.Валюта             = Константы.ВалютаУправленческогоУчета.Получить();
			РеквизитыДокумента.СуммаВклНДС        = Объект.СуммаВключаетНДС;
			РеквизитыДокумента.Курс				  = 1;
			РеквизитыДокумента.ВидОперации        = Объект.ВидОперации;
			
			Док = Доки.Добавить();
			Док.Ключ = Ключ;
			Док.РеквизитыДокумента = РеквизитыДокумента;
		КонецЕсли;
		
		СтрокаТЧ = Док.РеквизитыДокумента.ТабличнаяЧасть.Добавить();
		СтрокаТЧ.ВидМатериальногоРесурса = "Товар";
		СтрокаТЧ.Номенклатура            = Товар.Номенклатура;
		СтрокаТЧ.Количество              = Товар.Количество;
		СтрокаТЧ.ДокументПоступления	 = Товар.ДокументПоступления;
		СтрокаТЧ.СтатусПартии			 = Товар.СтатусПартии;
		СтрокаТЧ.Сумма	 = Товар.Сумма;
		СтрокаТЧ.СтавкаНДС	 = Товар.СтавкаНДС;
		СтрокаТЧ.СуммаНДС	 = Товар.СуммаНДС;
	КонецЦикла;
	
	Для каждого Док из Доки Цикл
		ВыгрузитьПоПравилу(,, Док.РеквизитыДокумента,, "ОтчетККМ");
	КонецЦикла;
	
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта></Правило><Правило><Код>СчетФактураПолученный</Код><Наименование>Счет фактура полученный</Наименование><Порядок>3400</Порядок><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.СчетФактураПолученный</ОбъектВыборки><ПередВыгрузкойОбъекта>Если Объект.ДокументыОснования.Количество() &gt; 0 Тогда
	ДокОсн = Объект.ДокументыОснования[0].ДокументОснование;
КонецЕсли;

Если ДокОсн &lt;&gt; Неопределено И Формат(Объект.Дата, "ДФ=dd.MM.yyyy") &lt;&gt; Формат(ДокОсн, "ДФ=dd.MM.yyyy") Тогда
	ВидДок = ДокОсн.Метаданные().Имя;
	РеквизитыДокумента = Новый Структура("ДатаДок, ДатаНомерСчетаФактуры, ДатаСчетаФактуры");
	РеквизитыДокумента.ДатаДок = Объект.Дата;
	РеквизитыДокумента.ДатаНомерСчетаФактуры = Объект.НомерВходящегоДокумента;
	РеквизитыДокумента.ДатаСчетаФактуры = Объект.ДатаВходящегоДокумента;

	Если ВидДок = "ОтчетКомиссионераОПродажах" Тогда
		ВыгрузитьПоПравилу(ДокОсн,, РеквизитыДокумента,, "СФОтчетКомиссионераОПродажах");
		
	ИначеЕсли ВидДок = "ПоступлениеДопРасходов" Тогда
		ВыгрузитьПоПравилу(ДокОсн,, РеквизитыДокумента,, "СФПоступлениеДопРасходов");
		
	ИначеЕсли ВидДок = "ПоступлениеТоваровУслуг" Тогда
		ВыгрузитьПоПравилу(ДокОсн,, РеквизитыДокумента,, "СФПоступлениеТоваров");
		
	ИначеЕсли ВидДок = "ПрочиеЗатраты" Тогда
		ВыгрузитьПоПравилу(ДокОсн,, РеквизитыДокумента,, "СФПрочиеЗатраты");
		
	ИначеЕсли ВидДок = "ВозвратТоваровОтПокупателя" Тогда
		ВыгрузитьПоПравилу(ДокОсн,, РеквизитыДокумента,, "СФВозвратТоваровОтПокупателя");
		
	ИначеЕсли ВидДок = "АвансовыйОтчет" Тогда
		Если Не ДокОсн.Проведен или Не ДокОсн.ОтражатьВБухгалтерскомУчете Тогда
			Отказ = Истина;

		ИначеЕсли ДокОсн.Организация &lt;&gt; Параметры.ЮридическоеЛицо Тогда
			Отказ = Истина;
			
		ИначеЕсли (Параметры.СписокПодразделений.НайтиПоЗначению(ДокОсн.Подразделение) = Неопределено)  и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
			Отказ = Истина;
		КонецЕсли;
		
		ИсходящиеДанные = Новый Структура;
		ИсходящиеДанные.Вставить("АвансовыйОтчет", ДокОсн);
		Выполнить(Алгоритмы.ВыгрузитьАвансовыйОтчет);
		
	КонецЕсли;
КонецЕсли;

Отказ = Истина;</ПередВыгрузкойОбъекта></Правило><Правило><Код>СчетФактураВыданный</Код><Наименование>Счет фактура выданный</Наименование><Порядок>3500</Порядок><СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных><ОбъектВыборки>ДокументСсылка.СчетФактураВыданный</ОбъектВыборки><ПередВыгрузкойОбъекта>Если НЕ ЗначениеЗаполнено(Объект.ДокументОснование) Тогда
	Отказ = Истина;
Иначе
	
	ВидОснования = Объект.ДокументОснование.Метаданные().Имя;
	
	Если (ВидОснования = "АккредитивПолученный") или
		(ВидОснования = "ИнкассовоеПоручениеПереданное") или
		(ВидОснования = "ОтчетКомиссионераОПродажах") или
		(ВидОснования = "ОтчетКомитентуОПродажах") или
		(ВидОснования = "ПлатежноеПоручениеВходящее") или
		(ВидОснования = "ПлатежноеТребованиеВыставленное") или
		(ВидОснования = "ПлатежныйОрдерПоступлениеДенежныхСредств") или
		(ВидОснования = "ПриходныйКассовыйОрдер") или
		(ВидОснования = "ВозвратТоваровПоставщику") или
		(ВидОснования = "ВозвратТоваровПоставщикуИзНТТ") или
		(ВидОснования = "РеализацияТоваровУслуг") Тогда
		
		ИсходящиеДанные = Новый Структура("ВидДок");
		ИсходящиеДанные.ВидДок = ВидОснования;
		Выполнить(Алгоритмы.ПолучитьИмяПКОдляСФвыданного);
		
		РеквизитыДокумента = Новый Структура("ДатаДок,НомерДок,НомерПлатРасчДок,ДатаПлатРасчДок");
		РеквизитыДокумента.ДатаДок = Объект.Дата;
		РеквизитыДокумента.НомерДок = ДобавитьКПрефиксу(Объект.Номер, "", 10, "Справа");
		РеквизитыДокумента.НомерПлатРасчДок = Объект.НомерПлатежноРасчетногоДокумента;
		РеквизитыДокумента.ДатаПлатРасчДок = Объект.ДатаПлатежноРасчетногоДокумента;
		
		ВыгрузитьПоПравилу(Объект.ДокументОснование,, РеквизитыДокумента,, ИмяПКО);
	КонецЕсли;
КонецЕсли;
Отказ = Истина;</ПередВыгрузкойОбъекта></Правило></Группа></ПравилаВыгрузкиДанных><ПравилаОчисткиДанных/><Алгоритмы><Алгоритм Имя="ВыгрузитьАвансовыйОтчет"><Текст>АвансовыйОтчет = ИсходящиеДанные.АвансовыйОтчет;

СчетаФактуры = Новый ДеревоЗначений;
СчетаФактуры.Колонки.Добавить("СчетФактура");
СчетаФактуры.Колонки.Добавить("КурсДокумента");
СчетаФактуры.Колонки.Добавить("КратностьДокумента");
СчетаФактуры.Колонки.Добавить("Сумма");
СчетаФактуры.Колонки.Добавить("СтавкаНДС");
СчетаФактуры.Колонки.Добавить("СуммаНДС");
СчетаФактуры.Колонки.Добавить("СуммаБезНДС");
СчетаФактуры.Колонки.Добавить("ДокументПоступленияДатаДок");
СчетаФактуры.Колонки.Добавить("ДокументПоступленияКомментарий");
СчетаФактуры.Колонки.Добавить("ИмяПКО");

Если АвансовыйОтчет.Товары.Количество() &gt; 0 Тогда
	ВходящиеДокументы = Новый ТаблицаЗначений;
	ВходящиеДокументы.Колонки.Добавить("Ключ");
	ВходящиеДокументы.Колонки.Добавить("РеквизитыДокумента");
	
	Для каждого Товар из АвансовыйОтчет.Товары Цикл
		Ключ = Товар.НомерВходящегоДокумента + Товар.ДатаВходящегоДокумента + Товар.ВидДокВходящий;
		ВходящийДокумент = ВходящиеДокументы.Найти(Ключ, "Ключ");
		Если ВходящийДокумент = Неопределено Тогда
			РеквизитыДокумента = Новый Структура("ТабличнаяЧасть, ДатаДок, НомерДок, Автор, Комментарий, ВидДеятельности, ОблагаетсяНДС, ИсходящиеДанные, Валюта, Курс, УчитыватьНДС, СуммаВклНДС, Склад, НомерДокВходящий, ДатаДокВходящий, ВидДокВходящий, ВидВзаиморасчетов, ФизЛицо, ТипЦен, Контрагент");
			РеквизитыДокумента.ТабличнаяЧасть          = Новый ТаблицаЗначений;
			РеквизитыДокумента.ТабличнаяЧасть         .Колонки.Добавить("ВидМатериальногоРесурса");
			РеквизитыДокумента.ТабличнаяЧасть         .Колонки.Добавить("Номенклатура");
			РеквизитыДокумента.ТабличнаяЧасть         .Колонки.Добавить("Количество");
			РеквизитыДокумента.ТабличнаяЧасть         .Колонки.Добавить("Цена");
			РеквизитыДокумента.ТабличнаяЧасть         .Колонки.Добавить("Сумма");
			РеквизитыДокумента.ТабличнаяЧасть         .Колонки.Добавить("СтавкаНДС");
			РеквизитыДокумента.ТабличнаяЧасть         .Колонки.Добавить("СуммаНДС");
			РеквизитыДокумента.ТабличнаяЧасть         .Колонки.Добавить("ГТД");
			РеквизитыДокумента.ТабличнаяЧасть         .Колонки.Добавить("СтранаПроисхождения");
			
			ВходящийДокумент = ВходящиеДокументы.Добавить();
			ВходящийДокумент.Ключ = Ключ;
			ВходящийДокумент.РеквизитыДокумента = РеквизитыДокумента;
			
			РеквизитыДокумента.ДатаДок                 = АвансовыйОтчет.Дата;
			РеквизитыДокумента.НомерДок                = ДобавитьКПрефиксу(ПривестиНомерКДлине(АвансовыйОтчет.Номер, 9), "А", 10, "Справа");
			РеквизитыДокумента.Автор                   = АвансовыйОтчет.Ответственный;
			РеквизитыДокумента.Комментарий             = ОбщегоНазначения.СформироватьЗаголовокДокумента(АвансовыйОтчет, АвансовыйОтчет.Метаданные().Синоним) + " #" + ВходящиеДокументы.Индекс(ВходящийДокумент);
			
			ИсходящиеДанные = Новый Структура;
			ИсходящиеДанные.Вставить("СкладКомпании", АвансовыйОтчет.СкладОрдер);
			Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);
			РеквизитыДокумента.ВидДеятельности         = ВходящиеДанные.РеквизитыВидаДеятельности;
			РеквизитыДокумента.ОблагаетсяНДС           = ВходящиеДанные.РеквизитыВидаДеятельности.ОблагаетсяНДС;
			
			РеквизитыДокумента.Валюта                  = АвансовыйОтчет.ВалютаДокумента;
			РеквизитыДокумента.Курс                    = АвансовыйОтчет.КурсДокумента/?(АвансовыйОтчет.КратностьДокумента=0,1,АвансовыйОтчет.КратностьДокумента);
			РеквизитыДокумента.УчитыватьНДС            = АвансовыйОтчет.УчитыватьНДС;
			РеквизитыДокумента.СуммаВклНДС             = АвансовыйОтчет.СуммаВключаетНДС;
			РеквизитыДокумента.Склад                   = АвансовыйОтчет.СкладОрдер;
			РеквизитыДокумента.ВидВзаиморасчетов       = "РасчетыСПодотчетнымиЛицами";
			РеквизитыДокумента.ФизЛицо                 = АвансовыйОтчет.ФизЛицо;
			РеквизитыДокумента.ТипЦен                  = АвансовыйОтчет.ТипЦен;
			
			РеквизитыДокумента.НомерДокВходящий        = Товар.НомерВходящегоДокумента;
			РеквизитыДокумента.ДатаДокВходящий         = Товар.ДатаВходящегоДокумента;
			РеквизитыДокумента.ВидДокВходящий          = Товар.ВидДокВходящий;
			РеквизитыДокумента.Контрагент			   = Товар.Поставщик;
		КонецЕсли;
		
		СтрокаТЧ = ВходящийДокумент.РеквизитыДокумента.ТабличнаяЧасть.Добавить();
		СтрокаТЧ.ВидМатериальногоРесурса = "Товар";
		СтрокаТЧ.Номенклатура            = Товар.Номенклатура;
		СтрокаТЧ.Количество              = Товар.Количество * Товар.Коэффициент;
		СтрокаТЧ.Цена                    = Товар.Цена / ?(Товар.Коэффициент = 0, 1, Товар.Коэффициент);
		СтрокаТЧ.Сумма                   = Товар.Сумма;
		СтрокаТЧ.СтавкаНДС               = Товар.СтавкаНДС;
		СтрокаТЧ.СуммаНДС                = Товар.СуммаНДС;
		СтрокаТЧ.ГТД                     = Товар.СерияНоменклатуры.НомерГТД;
		СтрокаТЧ.СтранаПроисхождения	 = Товар.СерияНоменклатуры.СтранаПроисхождения;
		
		Если ЗначениеЗаполнено(Товар.СчетФактура) Тогда

            СчетФактура = СчетаФактуры.Строки.Найти(Товар.СчетФактура, "СчетФактура");
			Если СчетФактура = Неопределено Тогда
				СчетФактура = СчетаФактуры.Строки.Добавить();
				СчетФактура.СчетФактура = Товар.СчетФактура;
				СчетФактура.КурсДокумента = АвансовыйОтчет.КурсДокумента;
				СчетФактура.КратностьДокумента = АвансовыйОтчет.КратностьДокумента;
			КонецЕсли;
			
			СтрокаСФ = СчетФактура.Строки.Добавить();
			СтрокаСФ.Сумма = Товар.Сумма;
			СтрокаСФ.СтавкаНДС = Товар.СтавкаНДС;
			СтрокаСФ.СуммаНДС = Товар.СуммаНДС;
			СтрокаСФ.СуммаБезНДС = Товар.Сумма - Товар.СуммаНДС;
			СтрокаСФ.ДокументПоступленияДатаДок = РеквизитыДокумента.ДатаДок;
			СтрокаСФ.ДокументПоступленияКомментарий = РеквизитыДокумента.Комментарий;
			СтрокаСФ.ИмяПКО = "АвансовыйОтчетТовары";
			
		КонецЕсли;
	КонецЦикла;
	
	Для каждого ВходящийДокумент из ВходящиеДокументы Цикл
		ВыгрузитьПоПравилу(,, ВходящийДокумент.РеквизитыДокумента,, "АвансовыйОтчетТовары");
	КонецЦикла;
КонецЕсли;

//-----------------------------------------------------------

Если АвансовыйОтчет.Прочее.Количество() &gt; 0 Тогда
	
	ВходящиеДокументы = Новый ТаблицаЗначений;
	ВходящиеДокументы.Колонки.Добавить("Ключ");
	ВходящиеДокументы.Колонки.Добавить("РеквизитыДокумента");
	
	Для каждого Товар из АвансовыйОтчет.Прочее Цикл
		Если (Параметры.СписокПодразделений.НайтиПоЗначению(Товар.Подразделение) = Неопределено) и (Параметры.СписокПодразделений.Количество() &gt; 0) Тогда
			Продолжить;
		КонецЕсли;
		
		Ключ = Товар.НомерВходящегоДокумента + Товар.ДатаВходящегоДокумента + Товар.ВидДокВходящий;
		ВходящийДокумент = ВходящиеДокументы.Найти(Ключ, "Ключ");
		Если ВходящийДокумент = Неопределено Тогда
			РеквизитыДокумента = Новый Структура("ТабличнаяЧасть, ДатаДок, НомерДок, Автор, Комментарий, ВидДеятельности, ОблагаетсяНДС, ИсходящиеДанные, Валюта, Курс, УчитыватьНДС, СуммаВклНДС, Склад, НомерДокВходящий, ДатаДокВходящий, ВидДокВходящий, ВидВзаиморасчетов, ФизЛицо, ТипЦен, Контрагент");
			РеквизитыДокумента.ТабличнаяЧасть          = Новый ТаблицаЗначений;
			РеквизитыДокумента.ТабличнаяЧасть         .Колонки.Добавить("Сумма");
			РеквизитыДокумента.ТабличнаяЧасть         .Колонки.Добавить("СуммаНДС");
			РеквизитыДокумента.ТабличнаяЧасть         .Колонки.Добавить("СтавкаНДС");
			РеквизитыДокумента.ТабличнаяЧасть         .Колонки.Добавить("Расход");
			
			ВходящийДокумент = ВходящиеДокументы.Добавить();
			ВходящийДокумент.Ключ = Ключ;
			ВходящийДокумент.РеквизитыДокумента = РеквизитыДокумента;
			
			РеквизитыДокумента.ДатаДок                 = АвансовыйОтчет.Дата;
			РеквизитыДокумента.НомерДок                = ДобавитьКПрефиксу(ПривестиНомерКДлине(АвансовыйОтчет.Номер, 9), "А", 10, "Справа");
			РеквизитыДокумента.Автор                   = АвансовыйОтчет.Ответственный;
			РеквизитыДокумента.Комментарий             = ОбщегоНазначения.СформироватьЗаголовокДокумента(АвансовыйОтчет, АвансовыйОтчет.Метаданные().Синоним) + " #" + ВходящиеДокументы.Индекс(ВходящийДокумент);
			
			ИсходящиеДанные = Новый Структура;
			ИсходящиеДанные.Вставить("СкладКомпании", АвансовыйОтчет.СкладОрдер);
			Выполнить(Алгоритмы.ПолучитьНаименованиеВидаДеятельности);
			РеквизитыДокумента.ВидДеятельности         = ВходящиеДанные.РеквизитыВидаДеятельности;
			РеквизитыДокумента.ОблагаетсяНДС           = ВходящиеДанные.РеквизитыВидаДеятельности.ОблагаетсяНДС;
			
			РеквизитыДокумента.Валюта                  = АвансовыйОтчет.ВалютаДокумента;
			РеквизитыДокумента.Курс                    = АвансовыйОтчет.КурсДокумента/?(АвансовыйОтчет.КратностьДокумента=0,1,АвансовыйОтчет.КратностьДокумента);
			РеквизитыДокумента.УчитыватьНДС            = АвансовыйОтчет.УчитыватьНДС;
			РеквизитыДокумента.СуммаВклНДС             = АвансовыйОтчет.СуммаВключаетНДС;
			РеквизитыДокумента.Склад                   = АвансовыйОтчет.СкладОрдер;
			РеквизитыДокумента.ВидВзаиморасчетов       = "РасчетыСПодотчетнымиЛицами";
			РеквизитыДокумента.ФизЛицо                 = АвансовыйОтчет.ФизЛицо;
			РеквизитыДокумента.ТипЦен                  = АвансовыйОтчет.ТипЦен;
			
			РеквизитыДокумента.НомерДокВходящий        = Товар.НомерВходящегоДокумента;
			РеквизитыДокумента.ДатаДокВходящий         = Товар.ДатаВходящегоДокумента;
			РеквизитыДокумента.ВидДокВходящий          = Товар.ВидДокВходящий;
			РеквизитыДокумента.Контрагент			   = Товар.Поставщик;
		КонецЕсли;
		
		СтрокаТЧ = ВходящийДокумент.РеквизитыДокумента.ТабличнаяЧасть.Добавить();
		СтрокаТЧ.Расход            = Товар.СтатьяЗатрат;
		СтрокаТЧ.Сумма             = Товар.Сумма;
		СтрокаТЧ.СуммаНДС          = Товар.СуммаНДС;
		СтрокаТЧ.СтавкаНДС          = Товар.СтавкаНДС;
		
		Если ЗначениеЗаполнено(Товар.СчетФактура) Тогда

            СчетФактура = СчетаФактуры.Строки.Найти(Товар.СчетФактура, "СчетФактура");
			Если СчетФактура = Неопределено Тогда
				СчетФактура = СчетаФактуры.Строки.Добавить();
				СчетФактура.СчетФактура = Товар.СчетФактура;
				СчетФактура.КурсДокумента = АвансовыйОтчет.КурсДокумента;
				СчетФактура.КратностьДокумента = АвансовыйОтчет.КратностьДокумента;
			КонецЕсли;
			
			СтрокаСФ = СчетФактура.Строки.Добавить();
			СтрокаСФ.Сумма = Товар.Сумма;
			СтрокаСФ.СтавкаНДС = Товар.СтавкаНДС;
			СтрокаСФ.СуммаНДС = Товар.СуммаНДС;
			СтрокаСФ.СуммаБезНДС = Товар.Сумма - Товар.СуммаНДС;
			СтрокаСФ.ДокументПоступленияДатаДок = РеквизитыДокумента.ДатаДок;
			СтрокаСФ.ДокументПоступленияКомментарий = РеквизитыДокумента.Комментарий;
			СтрокаСФ.ИмяПКО = "АвансовыйОтчетПрочее";
			
		КонецЕсли;
		
	КонецЦикла;
	
	Для каждого ВходящийДокумент из ВходящиеДокументы Цикл
		ВыгрузитьПоПравилу(,, ВходящийДокумент.РеквизитыДокумента,, "АвансовыйОтчетПрочее");
	КонецЦикла;
КонецЕсли;

//-----------------------------------------------------------

Если АвансовыйОтчет.ОплатаПоставщикам.Количество() &gt; 0 Тогда
	Для каждого ВходящийДокумент из АвансовыйОтчет.ОплатаПоставщикам Цикл
		РеквизитыДокумента = Новый Структура("ДатаДок, НомерДок, Автор, Комментарий, Валюта, Курс, НомерДокВходящий, ДатаДокВходящий, ВидДокВходящий, ВидВзаиморасчетов, ФизЛицо, Контрагент, Договор, Сумма, Основание");
		
		РеквизитыДокумента.ДатаДок                 = АвансовыйОтчет.Дата;
		РеквизитыДокумента.НомерДок                = ПривестиНомерКДлине(АвансовыйОтчет.Номер, 10);
		РеквизитыДокумента.Автор                   = АвансовыйОтчет.Ответственный;
		РеквизитыДокумента.Комментарий             = ОбщегоНазначения.СформироватьЗаголовокДокумента(АвансовыйОтчет, АвансовыйОтчет.Метаданные().Синоним) + " #" + АвансовыйОтчет.ОплатаПоставщикам.Индекс(ВходящийДокумент);
		
		РеквизитыДокумента.Валюта                  = АвансовыйОтчет.ВалютаДокумента;
		РеквизитыДокумента.Курс                    = АвансовыйОтчет.КурсДокумента/?(АвансовыйОтчет.КратностьДокумента=0,1,АвансовыйОтчет.КратностьДокумента);
		РеквизитыДокумента.ВидВзаиморасчетов       = "РасчетыСПоставщиками";
		РеквизитыДокумента.ФизЛицо                 = АвансовыйОтчет.ФизЛицо;
		
		РеквизитыДокумента.НомерДокВходящий        = ВходящийДокумент.НомерВходящегоДокумента;
		РеквизитыДокумента.ДатаДокВходящий         = ВходящийДокумент.ДатаВходящегоДокумента;
		РеквизитыДокумента.ВидДокВходящий          = ВходящийДокумент.ВидДокВходящий;
		РеквизитыДокумента.Контрагент	           = ВходящийДокумент.Контрагент;
		РеквизитыДокумента.Договор		           = ВходящийДокумент.ДоговорКонтрагента;
		РеквизитыДокумента.Сумма				   = ВходящийДокумент.Сумма;
		РеквизитыДокумента.Основание			   = ВходящийДокумент.Содержание;
		
		ВыгрузитьПоПравилу(,, РеквизитыДокумента,, "АвансовыйОтчетОплата");
	КонецЦикла;
КонецЕсли;

// Выгрузка счетов-фактур
Для Каждого СчетФактура Из СчетаФактуры.Строки Цикл
	
	ИсходящиеДанные = Новый Структура("КурсДокумента, КратностьДокумента, ТабличнаяЧасть", СчетФактура.КурсДокумента, СчетФактура.КратностьДокумента, СчетФактура.Строки);
    ВыгрузитьПоПравилу(СчетФактура.СчетФактура,, ИсходящиеДанные,, "СФАвансовыйОтчет");
	
КонецЦикла;</Текст></Алгоритм><Алгоритм Имя="ДобавитьДокументыПоступленияВТабличнуюЧасть"><Текст>// Параметры алгоритма:
Док				= ИсходящиеДанные.Док; // документ - источник
ТабличнаяЧасть	= ИсходящиеДанные.ТабличнаяЧасть; // например: Источник.Товары
ИмяТЧ			= ИсходящиеДанные.ИмяТЧ; // например: Источник.Товары

// Пример вызова алгоритма:
//ИсходящиеДанные = Новый Структура("Док,ТабличнаяЧасть,ИмяТЧ");
//ИсходящиеДанные.Док 			= Источник;
//ИсходящиеДанные.ТабличнаяЧасть	= Источник.Товары;
//ИсходящиеДанные.ИмяТЧ			= "Товары";
//Выполнить(Алгоритмы.ДобавитьДокументыПоступленияВТабличнуюЧасть);

ВозможныеИменаКлючейСтруктурыОтбора = Новый СписокЗначений;
ВозможныеИменаКлючейСтруктурыОтбора.Добавить("Номенклатура");
ВозможныеИменаКлючейСтруктурыОтбора.Добавить("Склад");
//ВозможныеИменаКлючейСтруктурыОтбора.Добавить("ЗаказПокупателя");
ВозможныеИменаКлючейСтруктурыОтбора.Добавить("Качество");
ВозможныеИменаКлючейСтруктурыОтбора.Добавить("ХарактеристикаНоменклатуры");
ВозможныеИменаКлючейСтруктурыОтбора.Добавить("СерияНоменклатуры");
ВозможныеИменаКлючейСтруктурыОтбора.Добавить("ДокументОприходования");
ВозможныеИменаКлючейСтруктурыОтбора.Добавить("ДокументПоступления");
ВозможныеИменаКлючейСтруктурыОтбора.Добавить("СтатусПартии");

ЭтоВозврат = ?(Док.Метаданные().Имя = "ВозвратТоваровОтПокупателя", Истина, Ложь);

ИменаКлючейСтруктурыОтбора = Новый СписокЗначений;
ПрочиеКолонки = Новый СписокЗначений;

Товары 			  = Новый ТаблицаЗначений;
КоллекцияОбъектов = Новый ТаблицаЗначений;

Товары			 .Колонки.Добавить("Количество");
КоллекцияОбъектов.Колонки.Добавить("Количество");
КоллекцияОбъектов.Колонки.Добавить("ДокументПоступления");
КоллекцияОбъектов.Колонки.Добавить("СтатусПартии");

CписокСтатусовПартий = Новый СписокЗначений;
CписокСтатусовПартий.Добавить(Перечисления.СтатусыПартийТоваров.Купленный);
CписокСтатусовПартий.Добавить(Перечисления.СтатусыПартийТоваров.НаКомиссию);

РеквизитыТабличнойЧасти = Док.Метаданные().ТабличныеЧасти[ИмяТЧ].Реквизиты;
Для каждого Реквизит из РеквизитыТабличнойЧасти Цикл
	ИмяРеквизита = Реквизит.Имя;
	Если ИмяРеквизита &lt;&gt; "Количество" Тогда
		Товары.Колонки.Добавить(ИмяРеквизита);
		Если (ИмяРеквизита &lt;&gt; "СтатусПартии") и (ИмяРеквизита &lt;&gt; "ДокументОприходования")  и (ИмяРеквизита &lt;&gt; "ДокументПоступления")Тогда
			КоллекцияОбъектов.Колонки.Добавить(ИмяРеквизита);
		КонецЕсли;
	КонецЕсли;
	
	Если ВозможныеИменаКлючейСтруктурыОтбора.НайтиПоЗначению(ИмяРеквизита) = Неопределено Тогда
		ПрочиеКолонки.Добавить(ИмяРеквизита);
		
	Иначе
		ИменаКлючейСтруктурыОтбора.Добавить(ИмяРеквизита);
	КонецЕсли;
КонецЦикла;

Для каждого Товар из ТабличнаяЧасть Цикл
	ОбъектКоллекции = Товары.Добавить();
	ОбъектКоллекции.Количество = 0;
	Для каждого Реквизит из РеквизитыТабличнойЧасти Цикл
		ИмяРеквизита = Реквизит.Имя;
		
		Если ИмяРеквизита = "Количество" Тогда
			ОбъектКоллекции.Количество = Товар.Количество * Товар.Коэффициент;
			
		Иначе
			ОбъектКоллекции[ИмяРеквизита] = Товар[ИмяРеквизита];
		КонецЕсли
	КонецЦикла;
КонецЦикла;

Стр1 = "";
Для каждого Реквизит Из ИменаКлючейСтруктурыОтбора Цикл
	Стр1 = Стр1 + Реквизит.Значение + ",";
КонецЦикла;

Стр2 = "";
Для каждого Реквизит Из ПрочиеКолонки Цикл
	Если (Реквизит.Значение = "СтавкаНДС") или (Реквизит.Значение = "ЕдиницаИзмерения") или (Реквизит.Значение = "ДокументПартии") Тогда
		Стр1 = Стр1 + Реквизит.Значение + ",";
		
	Иначе
		Стр2 = Стр2 + Реквизит.Значение + ",";
	КонецЕсли;
КонецЦикла;

Стр1 = Лев(Стр1, СтрДлина(Стр1) - 1);
Стр2 = Лев(Стр2, СтрДлина(Стр2) - 1);
Товары.Свернуть(Стр1, Стр2);
Отбор = Новый Структура(Стр1);

Если Док.Метаданные().Имя = "ОтчетКомиссионераОПродажах" Тогда
	ОсновнойТесктЗапроса = 
	"ВЫБРАТЬ
	|	ПартииТоваровПереданные.Номенклатура КАК Номенклатура,
	|	ПартииТоваровПереданные.СтатусПартии КАК СтатусПартии,
	|	ПартииТоваровПереданные.ДокументОприходования КАК ДокументПоступления,
	|	ПартииТоваровПереданные.ДокументПередачи КАК ДокументПередачи,
	|	ПартииТоваровПереданные.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	|	ПартииТоваровПереданные.Количество КАК Количество,
	|	ПартииТоваровПереданные.Регистратор
	|ИЗ
	|	РегистрНакопления.ПартииТоваровПереданные КАК ПартииТоваровПереданные
	|
	|ГДЕ
	|	Регистратор = &amp;Регистратор И
	|	СтатусПартии В (&amp;CписокСтатусовПартий) И
	|	ПартииТоваровПереданные.ВидДвижения = &amp;Расход И
	|	ПартииТоваровПереданные.СтатусПередачи = &amp;НаКомиссию";
	
Иначе
	ОсновнойТесктЗапроса = 
	"ВЫБРАТЬ
	|	ПартииТоваровКомпании.Номенклатура КАК Номенклатура,
	|	ПартииТоваровКомпании.СтатусПартии КАК СтатусПартии,
	|	ПартииТоваровКомпании.ДокументОприходования КАК ДокументПоступления,
	|	ПартииТоваровКомпании.Заказ КАК ЗаказПокупателя,
	|	ПартииТоваровКомпании.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	|	ПартииТоваровКомпании.СерияНоменклатуры КАК СерияНоменклатуры,
	|	ПартииТоваровКомпании.Количество КАК Количество,
	|	ПартииТоваровКомпании.Регистратор
	|ИЗ
	|	РегистрНакопления.ПартииТоваровНаСкладах КАК ПартииТоваровКомпании
	|
	|ГДЕ
	|	Регистратор = &amp;Регистратор И
	|	СтатусПартии В (&amp;CписокСтатусовПартий) И
	|	ПартииТоваровКомпании.ВидДвижения = &amp;Расход";
КонецЕсли;

Партии = Новый Запрос;

Для каждого Товар из Товары Цикл
	ТекстЗапроса = ОсновнойТесктЗапроса;
	Если (Товар.Количество = 0) или Товар.Номенклатура.Услуга Тогда
		ОбъектКоллекции = КоллекцияОбъектов.Добавить();
		ОбъектКоллекции.Количество = 0;
		Для каждого Колонка из Товары.Колонки Цикл
			ИмяРеквизита = Колонка.Имя;
			ОбъектКоллекции[ИмяРеквизита] = Товар[ИмяРеквизита];
		КонецЦикла;
		
	Иначе
		Распределено = Новый Структура;
		Для каждого Колонка из Товары.Колонки Цикл
			ИмяРеквизита = Колонка.Имя;
			Если ИменаКлючейСтруктурыОтбора.НайтиПоЗначению(ИмяРеквизита) &lt;&gt; Неопределено Тогда
				Если (ИмяРеквизита = "СерияНоменклатуры") и (Док.Метаданные().Имя = "ОтчетКомиссионераОПродажах") Тогда
					Продолжить;
					
				ИначеЕсли (ИмяРеквизита = "ДокументОприходования") и НЕ ЗначениеЗаполнено(Товар[ИмяРеквизита]) Тогда
					Продолжить;
					
				ИначеЕсли (ИмяРеквизита = "ДокументПоступления") и НЕ ЗначениеЗаполнено(Товар[ИмяРеквизита]) Тогда
					Продолжить;
				КонецЕсли;
				
				Партии.УстановитьПараметр(ИмяРеквизита, Товар[ИмяРеквизита]);
				Если Найти(ИмяРеквизита, "ДокументПоступления") &gt; 0 Тогда
					ПолеЗапроса = "ДокументОприходования";
					
				ИначеЕсли Найти(ИмяРеквизита, "ЗаказПокупателя") &gt; 0 Тогда
					ПолеЗапроса = "Заказ";
					
				Иначе
					ПолеЗапроса = ИмяРеквизита;
				КонецЕсли;
				
				ТекстЗапроса = ТекстЗапроса  + " И " + ПолеЗапроса + " = &amp;" + ИмяРеквизита;
			КонецЕсли;
			
			Если ТипЗнч(Товар[ИмяРеквизита]) = Тип("Число") Тогда
				Распределено.Вставить(ИмяРеквизита, 0);
			КонецЕсли;
			
		КонецЦикла;
		
		Партии.Текст = ТекстЗапроса;
		Партии.УстановитьПараметр("Регистратор", Док);
		Партии.УстановитьПараметр("CписокСтатусовПартий", CписокСтатусовПартий);
		Партии.УстановитьПараметр("Расход", ВидДвиженияНакопления.Расход);
		Партии.УстановитьПараметр("НаКомиссию", Перечисления.СтатусыПолученияПередачиТоваров.НаКомиссию);
		Рег = Партии.Выполнить().Выбрать();
		Пока Рег.Следующий() Цикл
			Если Рег.Количество = 0 Тогда
				Продолжить;
			КонецЕсли; 
			КоэффициентХраненияОстатков = Рег.Номенклатура.ЕдиницаХраненияОстатков.Коэффициент;
			КоэффициентХраненияОстатков = ?(КоэффициентХраненияОстатков = 0, 1, КоэффициентХраненияОстатков);
			
			К = Рег.Количество * КоэффициентХраненияОстатков / Товар.Количество;
			ОбъектКоллекции = КоллекцияОбъектов.Добавить();
			ОбъектКоллекции.Количество = 0;
			Для каждого Колонка из Товары.Колонки Цикл
				ИмяРеквизита = Колонка.Имя;
				РеквизитТовара = Товар[ИмяРеквизита];
				Если ТипЗнч(РеквизитТовара) = Тип("Число") Тогда
					РеквизитТовара = К * РеквизитТовара;
					Распределено[ИмяРеквизита] = Распределено[ИмяРеквизита] + РеквизитТовара;
				КонецЕсли;
				
				ОбъектКоллекции[ИмяРеквизита] = РеквизитТовара;
			КонецЦикла;
			
			ОбъектКоллекции.Количество = Рег.Количество * КоэффициентХраненияОстатков;
			ОбъектКоллекции.СтатусПартии = Рег.СтатусПартии;
			Если Параметры.АвтоподборПартий Тогда
				ОбъектКоллекции.ДокументПоступления = Рег.ДокументПоступления;
			КонецЕсли;
		КонецЦикла;
		
		Для каждого Реквизит из Распределено Цикл
			ИмяРеквизита = Реквизит.Ключ;
			РаспределяемаяСумма = Товар[ИмяРеквизита];
			РаспределеннаяСумма = Реквизит.Значение;
			
			Если (РаспределеннаяСумма &lt;&gt; РаспределяемаяСумма) и (РаспределеннаяСумма &lt;&gt; 0) Тогда
				ОбъектКоллекции[ИмяРеквизита] = ОбъектКоллекции[ИмяРеквизита] + РаспределеннаяСумма - РаспределяемаяСумма;
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;
КонецЦикла;
	
Стр1 = Стр1 + ",СтатусПартии,ДокументПоступления";
КоллекцияОбъектов.Свернуть(Стр1, Стр2);
ИсходящиеДанные.Вставить("КоллекцияОбъектов", КоллекцияОбъектов);</Текст></Алгоритм><Алгоритм Имя="ДобавитьСведенияОПолученномСчетеФактуре"><Текст>ВходящиеДанные.Вставить("ЕстьСчетФактура", "");
ВходящиеДанные.Вставить("ДатаНомерСчетаФактуры", "");
ВходящиеДанные.Вставить("ДатаСчетаФактуры", "");

СФ = УчетНДС.НайтиПодчиненныйДокумент(Источник.Ссылка, "СчетФактураПолученный");
Если ЗначениеЗаполнено(СФ) Тогда
	Если Формат(СФ.Дата, "ДФ=dd.MM.yyyy") = Формат(Источник.Дата, "ДФ=dd.MM.yyyy") Тогда
		ВходящиеДанные.Вставить("ЕстьСчетФактура", 1);
		ВходящиеДанные.Вставить("ДатаНомерСчетаФактуры", СФ.НомерВходящегоДокумента);
		ВходящиеДанные.Вставить("ДатаСчетаФактуры", СФ.ДатаВходящегоДокумента);
	КонецЕсли;
КонецЕсли;</Текст></Алгоритм><Алгоритм Имя="НайтиПКОДляДокументаПоступления"><Текст>// Пример выполнения алгоритма:
//
//ИсходящиеДанные = Новый Структура("ДокументПоступления");
//ИсходящиеДанные.ДокументПоступления = ОбъектКоллекции.Поставка;
//Выполнить(Алгоритмы.НайтиПКОДляДокументаПоступления);

ИмяПКО = "";
ДокументПоступления = ИсходящиеДанные.ДокументПоступления;

Если ЗначениеЗаполнено(ДокументПоступления) Тогда
	Если ДокументПоступления.Метаданные().Имя = "АвансовыйОтчет" Тогда
		ИмяПКО = "";
		
	ИначеЕсли ДокументПоступления.Метаданные().Имя = "ВозвратТоваровОтПокупателя" Тогда
		ИмяПКО = "";
		
	ИначеЕсли ДокументПоступления.Метаданные().Имя = "ПриходныйОрдерНаТовары" Тогда
		ИмяПКО = "";
		
	ИначеЕсли ДокументПоступления.Метаданные().Имя = "КомплектацияНоменклатуры" Тогда
		Если ДокументПоступления.ВидОперации = Перечисления.ВидыОперацийКомплектацияНоменклатуры.Комплектация Тогда
			ИмяПКО = "Комплектация";
			
		Иначе
			ИмяПКО = "Разукомплектация";
		КонецЕсли;
		
	ИначеЕсли ДокументПоступления.Метаданные().Имя = "ОприходованиеТоваров" Тогда
		ИмяПКО = "ОприходованиеТоваров";
		
	ИначеЕсли ДокументПоступления.Метаданные().Имя = "ПоступлениеТоваровУслуг" Тогда
		ИмяПКО = "ПоступлениеТМЦ";
		
	ИначеЕсли ДокументПоступления.Метаданные().Имя = "ПоступлениеТоваровУслугВНТТ" Тогда
		ИмяПКО = "ПоступлениеТМЦ";
	КонецЕсли;
КонецЕсли;

Если ИмяПКО = "" Тогда
	Отказ = Истина;
КонецЕсли;</Текст></Алгоритм><Алгоритм Имя="ПолучитьИмяПКОдляСФвыданного"><Текст>ВидДок = ИсходящиеДанные.ВидДок;

Если ВидДок = "ОтчетКомиссионераОПродажах" Тогда
	ИмяПКО = "СФвыданныйОтчетКомиссионераОПродажах";
	
ИначеЕсли ВидДок = "ОтчетКомитентуОПродажах" Тогда
	ИмяПКО = "СФвыданныйОтчетКомитентуОПродажах";
	
ИначеЕсли ВидДок = "ПриходныйКассовыйОрдер" Тогда
	ИмяПКО = "СФвыданныйПриходныйКассовыйОрдер";
	
ИначеЕсли ВидДок = "ПлатежноеПоручениеВходящее" Тогда
	ИмяПКО = "СФвыданныйСтрокаВыпискиПриход";
	
ИначеЕсли (ВидДок = "РеализацияТоваровУслуг") ИЛИ (ВидДок = "ВозвратТоваровПоставщику") ИЛИ (ВидДок = "ВозвратТоваровПоставщикуИзНТТ") Тогда
	ИмяПКО = "СФвыданныйРеализацияТоваров";
	
Иначе
	Отказ = Истина;	
КонецЕсли;</Текст></Алгоритм><Алгоритм Имя="ПолучитьКурсПлатежногоДокумента"><Текст>ТекстЗапроса =
"ВЫБРАТЬ
|	ПлДокТаблЧ.КурсВзаиморасчетовПлан КАК Курс,
|	ПлДокТаблЧ.КратностьВзаиморасчетов КАК Кратность
|ИЗ
|	Документ."+ИсходящиеДанные.ИмяДокумента+".РасшифровкаПлатежа КАК ПлДокТаблЧ
|
|ГДЕ
|	ПлДокТаблЧ.Ссылка = &amp;Ссылка";

Запрос = Новый Запрос;
Запрос.Текст = ТекстЗапроса;
Запрос.УстановитьПараметр("Ссылка", Источник);
Результат = Запрос.Выполнить();
Если Результат.Пустой() Тогда
	Значение = 1;

Иначе
	СтрокаЗапроса = Результат.Выбрать();
	СтрокаЗапроса.Следующий();
	Значение = СтрокаЗапроса.Курс / ?(СтрокаЗапроса.Кратность = 0, 1, СтрокаЗапроса.Кратность);
	
	Если Значение = 0 Тогда
		Курс = РегистрыСведений.КурсыВалют.ПолучитьПоследнее(Источник.Дата, Новый Структура("Валюта", Источник.ВалютаДокумента)).Курс;
		Кратность = РегистрыСведений.КурсыВалют.ПолучитьПоследнее(Источник.Дата, Новый Структура("Валюта", Источник.ВалютаДокумента)).Кратность;
		Значение = Курс / ?(Кратность = 0, 1, Кратность);
	КонецЕсли;
КонецЕсли;</Текст></Алгоритм><Алгоритм Имя="ПолучитьНаименованиеВидаДеятельности"><Текст>РеквизитыВидаДеятельности = Новый Структура;

// По умолчанию:
РеквизитыВидаДеятельности.Вставить("Наименование", "Оптовая торговля");
РеквизитыВидаДеятельности.Вставить("БазаРаспределенияИМР", 1);
РеквизитыВидаДеятельности.Вставить("Служебный", 0);
РеквизитыВидаДеятельности.Вставить("ОблагаетсяЕНВД", 0);
РеквизитыВидаДеятельности.Вставить("ОблагаетсяНДС", Ложь);

КомиссионнаяТорговля = Ложь;
Если ИсходящиеДанные.Свойство("СтатусПартии") Тогда
	Если ИсходящиеДанные.СтатусПартии = Перечисления.СтатусыПартийТоваров.НаКомиссию Тогда
		КомиссионнаяТорговля = Истина;
	КонецЕсли;
КонецЕсли;

Если ИсходящиеДанные.Свойство("Договор") Тогда
	Если ИсходящиеДанные.Договор.ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.СКомитентом Тогда
		КомиссионнаяТорговля = Истина;
	КонецЕсли;
КонецЕсли;

ЭтоРозница = Ложь;
Если ИсходящиеДанные.Свойство("СкладКомпании") Тогда
	Если ТипЗнч(ИсходящиеДанные.СкладКомпании) = Тип("СправочникСсылка.Склады") Тогда
		ЭтоРозница = (ИсходящиеДанные.СкладКомпании.ВидСклада &lt;&gt; Перечисления.ВидыСкладов.Оптовый);
	КонецЕсли;
КонецЕсли;
	
ОблагаетсяЕНВД = Ложь;
Если ЭтоРозница И Параметры.РозницаОблагаетсяЕНВД Тогда
	ОблагаетсяЕНВД = Истина;
КонецЕсли;

ЭтоУслуга = Ложь;
Если ИсходящиеДанные.Свойство("Номенклатура") Тогда
	ЭтоУслуга = ИсходящиеДанные.Номенклатура.Услуга;
КонецЕсли;

Если ЭтоУслуга Тогда
	ДатаДокумента = Неопределено;
	Если ИсходящиеДанные.Свойство("ДатаДокумента") Тогда
		ДатаДокумента = ИсходящиеДанные.ДатаДокумента;
	КонецЕсли;
	
	Фильтр = Новый Структура("Организация,Номенклатура", Параметры.ЮридическоеЛицо, ИсходящиеДанные.Номенклатура);
	Запись = РегистрыСведений.УслугиЕНВД.ПолучитьПоследнее(КонецМесяца(ДатаДокумента), Фильтр);
	ОблагаетсяЕНВД = Запись.ОблагаетсяЕНВД;
КонецЕсли;

ДеятельностьАгентов = Ложь;
Если ИсходящиеДанные.Свойство("ВидДок") Тогда
	Если ИсходящиеДанные.ВидДок = "ОтчетКомитентуОПродажах" Тогда
		ДеятельностьАгентов = Истина;
	КонецЕсли;
КонецЕсли;

Если ДеятельностьАгентов Тогда
	РеквизитыВидаДеятельности.Наименование = "Деятельность агентов";
	
ИначеЕсли КомиссионнаяТорговля Тогда
	РеквизитыВидаДеятельности.Наименование = "Прием на реализацию (служебный)";
	РеквизитыВидаДеятельности.Служебный = 1;
	РеквизитыВидаДеятельности.БазаРаспределенияИМР = 0;
	
ИначеЕсли ЭтоУслуга Тогда // алгоритм вызван не из документа
	РеквизитыВидаДеятельности.Наименование = "Оказание услуг";
	Если ОблагаетсяЕНВД Тогда
		РеквизитыВидаДеятельности.Наименование = "Оказание услуг (ЕНВД)";
		РеквизитыВидаДеятельности.ОблагаетсяЕНВД = 1;
	КонецЕсли;
	
ИначеЕсли ЭтоРозница Тогда
	РеквизитыВидаДеятельности.Наименование = "Розничная торговля";
	Если ОблагаетсяЕНВД Тогда
		РеквизитыВидаДеятельности.Наименование = "Розничная торговля (ЕНВД)";
		РеквизитыВидаДеятельности.ОблагаетсяЕНВД = 1;
	КонецЕсли;
КонецЕсли;

Если ОблагаетсяЕНВД Тогда
	РеквизитыВидаДеятельности.ОблагаетсяНДС = Ложь;
	
Иначе
	РеквизитыВидаДеятельности.ОблагаетсяНДС = Не Параметры.НДСВключатьВСебестоимость;
КонецЕсли;

Если ВходящиеДанные = Неопределено Тогда
	ВходящиеДанные = Новый Структура("РеквизитыВидаДеятельности");
КонецЕсли;

ИсходящиеДанные.Вставить("РеквизитыВидаДеятельности", РеквизитыВидаДеятельности);
ВходящиеДанные.Вставить("РеквизитыВидаДеятельности", РеквизитыВидаДеятельности);</Текст></Алгоритм><Алгоритм Имя="ПредставлениеДокумента"><Текст>Значение = ОбщегоНазначения.СформироватьЗаголовокДокумента(Источник, Источник.Метаданные().Синоним);
Если ОбщегоНазначения.ЕстьРеквизитДокумента("НомерВходящегоДокумента", Источник.Метаданные()) Тогда
	Если ЗначениеЗаполнено(Источник.НомерВходящегоДокумента) Тогда
		Значение = Значение + " (вх. № " + СокрЛП(Источник.НомерВходящегоДокумента) +
										" от " + Источник.ДатаВходящегоДокумента + ")";
	КонецЕсли;
КонецЕсли;</Текст></Алгоритм></Алгоритмы><Запросы/></ПравилаОбмена>
