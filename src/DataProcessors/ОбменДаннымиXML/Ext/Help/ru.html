<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 9.00.8112.16476"></meta></head><body>
<h1>Обработка "Обмен данными в формате XML"</h1>
<p>Обработка "Универсальный обмен данными в формате XML" предназначена для загрузки и выгрузки данных в файл из любой конфигурации, реализованной на платформе 1С:Предприятие версии 8.0.</p>
<p>Обработка имеет четыре закладки</p>
<h2>Выгрузка данных</h2>
<p>Для осуществления выгрузки данных необходимо указать имя файла, в который будет осуществляться выгрузка данных и выбрать файл правил обмена. Правила обмена для любых конфигураций могут быть настроены в специализированной конфигурации "Конвертация данных, редакция 2". </p>
<p>Для выгрузки документов и записей независимых периодических регистров сведений необходимо указать период - "Дату начала" и "Дату окончания". Результирующий файл с выгруженными данными может быть сжат.</p>
<p>На закладке "Правила выгрузки данных" можно выбрать те типы объектов, которые должны выгружаться, настроить отборы для выборки объектов, либо указать узел обмена данными, для которого нужно выгружать данные.</p>
<p>На закладке "Параметры выгрузки" можно указать дополнительные параметры выгрузки данных.</p>
<p>На закладке "Комментарий" можно написать произвольный текст-комментарий, включаемый в файл обмена.</p>
<p> </p>
<h2>Загрузка данных</h2>
<p> </p>
<p>Для осуществления загрузки данных необходимо указать имя файла, из которого будет осуществляться загрузка данных. </p>
<p>Есть возможность настроить загрузку данных в транзакции. Для этого необходимо взвести флажок "Использовать транзакции" и указать количество элементов в одной транзакции при загрузке.</p>
<p> </p>
<h2>Дополнительные настройки</h2>
<p> </p>
<p>Закладка служит для тонкой настройки выгрузки и загрузки данных.</p>
<p>"Режим отладки" - флажок определяет режим выгрузки и загрузки данных</p>
<p>"Количество обработанных объектов для обновления статуса" - параметр служит для определения количества обработанных элементов перед изменением строки состояние загрузки/выгрузки</p>
<p>"Настройки выгрузки данных" - позволяют определить количество элементов обрабатываемых в одной транзакции при выгрузке данных, выгружать и обрабатывать только те объекты на которые есть права доступа, настроить тип изменения регистрации для выгруженных объектов  через планы обмена</p>
<p>"Протокол обмена" - позволяет настроить вывод информационных сообщений в окно сообщений, ведение и запись в отдельный файл протокола обмена.</p>
<p> </p>
<h2>Удаление данных</h2>
<p> </p>
<p>Закладка нужна только для разработчиков правил обмена. Позволяет удалять из информационной базы произвольные объекты.</p>
<h2> </h2>
<h2>Отладка выгрузки и загрузки данных<br> </h2>
<p>Обработка позволяет совершать отладку обработчиков событий и генерировать модуль отладки из файла-правил или файла-данных.</p>
<p>Внимание! Для выполнения отладки обработчиков необходимо наличие в конфигурации обработки "УниверсальныйОбменДаннымиXML" версии не ниже 2.0.25.</p>
<p>Включение режима отладки обработчиков выгрузки производится на закладке "Выгрузка данных" установкой флажка "Режим отладки обработчиков выгрузки". Соответственно, на закладке "Загрузка данных" включение режима отладки загрузки производится установкой флажка "Режим отладки обработчиков загрузки". </p>
<p>После установки режима отладки обработчиков станет доступной кнопка настройки отладки. По нажатию на эту кнопку откроется окно настройки.</p>
<p>Настройка отладки обработчиков выполняется в четыре шага:</p>
<h3>Шаг 1: Выбор режима отладки алгоритмов</h3>
<p><br>На первом шаге необходимо определиться с режимом отладки алгоритмов:</p>
<ul><li>
<div><font size="1">Без <font size="1">отладки</font> алгоритмов</font></div>
</li><li>
<div><font size="1">Вызывать алгоритмы как процедуры</font></div>
</li><li>
<div><font size="1">Подставлять код алгоритмов по месту вызова</font><font size="1"><br></font></div></li></ul><p>Первый режим удобно использовать, когда мы точно знаем, что ошибка в обработчике не связана с кодом какого-либо алгоритма. В этом режиме код алгоритмов не выгружается в модуль отладки. Алгоритмы выполняются в контексте оператора "Выполнить()" и их код недоступен для отладки.</p>
<p>Второй режим необходимо использовать в тех случаях, когда ошибка находится в коде алгоритма. При установке этого режима алгоритмы будут выгружены как отдельные процедуры. В момент вызова алгоритма из какого-либо обработчика происходит обращение к соответствующей процедуре обработки. Этот режим удобно использовать, когда для передачи параметров в алгоритмы используется глобальная переменная "Параметры". Ограничения использования этого режима в том, что при отладке в алгоритме недоступны локальные переменные обработчика, из которого он вызывается. </p>
<p>Третий режим отладки используется, как и во втором случае, при отладке кода алгоритмов и в тех случаях, при которых второй режим отладки не подходит. При установке этого режима алгоритмы будут выгружены как интегрированный код в обработчиках. Т.е. взамен оператора вызова алгоритма вставляется полный код алгоритма с учетом вложенных алгоритмов. В этом режиме нет ограничений на использование локальных переменных обработчика, однако есть ограничение при отладке алгоритмов с рекурсивным вызовом. </p>
<h3>Шаг 2: Формирование модуля отладки</h3>
<p><br>На втором шаге необходимо произвести выгрузку обработчиков нажатием на кнопку "Сформировать модуль отладки выгрузки (загрузки)". Сформированные обработчики и алгоритмы будут выведены в отдельное окно для просмотра. Содержимое модуля отладки необходимо скопировать в буфер обмена нажатием на кнопку "Копировать в буфер обмена".</p>
<h3>Шаг 3: Создание внешней обработки</h3>
<p><br>На этом шаге необходимо запустить конфигуратор и создать новую внешнюю обработку. В модуль обработки необходимо вставить содержимое буфера обмена (модуль отладки) и сохранить обработку под любым именем. </p>
<h3>Шаг 4: Подключение внешней обработки</h3>
<p><br>На четвертом, завершающем шаге, надо указать имя файла внешней обработки в поле ввода. При этом программа выполняет проверку по времени создания (обновления) файла обработки. Если обработка имеет более раннюю версию, чем версия файла модуля отладки, то будет выведено предупреждение и форма настройки закрыта не будет.</p>
<p>Примечание: Возможность отладки глобального обработчика конвертации "После загрузки правил обмена" не поддерживается.</p></body></html>