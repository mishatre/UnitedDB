<ПравилаОбмена>
	<ВерсияФормата РежимСовместимости="">2.01</ВерсияФормата>
	<Ид>d8003396-4300-4181-bed3-aa77ecc432db    </Ид>
	<Наименование>УправлениеТорговлей --&gt; Розница</Наименование>
	<ДатаВремяСоздания>2014-09-26T10:24:48</ДатаВремяСоздания>
	<Источник ВерсияПлатформы="8.0" ВерсияКонфигурации="10.3.30.1" СинонимКонфигурации="Управление торговлей, редакция 10.3">УправлениеТорговлей</Источник>
	<Приемник ВерсияПлатформы="8.0" ВерсияКонфигурации="1.0.16" СинонимКонфигурации="Розница, редакция 1.0">Розница</Приемник>
	<УдалятьСопоставленныеОбъектыВПриемникеПриИхУдаленииВИсточнике>true</УдалятьСопоставленныеОбъектыВПриемникеПриИхУдаленииВИсточнике>
	<ПередПолучениемИзмененныхОбъектов>Параметры.Вставить("УзелДляОбменаОбъект", ОбъектУзлаОбмена);

Структура = Новый Структура;
Структура.Вставить("ОбъектВыборки", Тип("РегистрСведенийНаборЗаписей.ПериодыВыгрузкиСебестоимостиВРозницу"));
ВременныйМассивПравилВыгрузкиДанных.Добавить(Структура);

Структура = Новый Структура;
Структура.Вставить("ОбъектВыборки", Тип("РегистрСведенийНаборЗаписей.СверткаУзлаРозницы"));
ВременныйМассивПравилВыгрузкиДанных.Добавить(Структура);</ПередПолучениемИзмененныхОбъектов>
	<ПослеПолученияИнформацииОбУзлахОбмена>УзелОбъект = УзелОбменаЗагрузкаДанных.ПолучитьОбъект();
Параметры.Вставить("УзелДляОбменаОбъект", УзелОбъект);</ПослеПолученияИнформацииОбУзлахОбмена>
	<ПередВыгрузкойДанных>////// ТИПЫ ///////////////

Параметры.Вставить("ТипСправочникСсылкаНоменклатура", Тип("СправочникСсылка.Номенклатура")); 
Параметры.Вставить("ТипСправочникСсылкаКонтрагенты", Тип("СправочникСсылка.Контрагенты")); 
Параметры.Вставить("ТипСправочникСсылкаОрганизации", Тип("СправочникСсылка.Организации")); 
Параметры.Вставить("ТипСправочникСсылкаСклады", Тип("СправочникСсылка.Склады")); 
Параметры.Вставить("ТипСправочникСсылкаФизическиеЛица", Тип("СправочникСсылка.ФизическиеЛица")); 


////// Разное ///////////////

Параметры.Вставить("УзелДляОбменаОбъект", УзелДляОбмена.ПолучитьОбъект());

НайденнаяСтрока = ТаблицаНастройкиПараметров.Найти("ДатаНачалаВыгрузкиСебестоимости", "Имя");
Если НайденнаяСтрока &lt;&gt; Неопределено Тогда
	НайденнаяСтрока.Значение = УзелДляОбмена.ДатаНачалаВыгрузкиСебестоимости;
КонецЕсли;
НайденнаяСтрока = ТаблицаНастройкиПараметров.Найти("ПериодичностьПередачиСебестоимости", "Имя");
Если НайденнаяСтрока &lt;&gt; Неопределено Тогда
	НайденнаяСтрока.Значение = УзелДляОбмена.ПериодичностьПередачиСебестоимости;
КонецЕсли;

МенеджерВидовКИ = Справочники.ВидыКонтактнойИнформации;
МассивВидовКИ = Новый Массив;
//МассивВидовКИ.Добавить(МенеджерВидовКИ.ЮрАдресФизЛица);
МассивВидовКИ.Добавить(МенеджерВидовКИ.ФактАдресФизЛица);
МассивВидовКИ.Добавить(МенеджерВидовКИ.ТелефонФизЛицаСлужебный);
МассивВидовКИ.Добавить(МенеджерВидовКИ.ТелефонФизЛицаДомашний);
МассивВидовКИ.Добавить(МенеджерВидовКИ.АдресЭлектроннойПочтыКонтактногоЛицаКонтрагента);
МассивВидовКИ.Добавить(МенеджерВидовКИ.ФактАдресКонтрагента);
МассивВидовКИ.Добавить(МенеджерВидовКИ.ЮрАдресКонтрагента);
МассивВидовКИ.Добавить(МенеджерВидовКИ.ТелефонКонтрагента);
МассивВидовКИ.Добавить(МенеджерВидовКИ.ФаксКонтрагента);
МассивВидовКИ.Добавить(МенеджерВидовКИ.ФактАдресОрганизации);
МассивВидовКИ.Добавить(МенеджерВидовКИ.ЮрАдресОрганизации);
МассивВидовКИ.Добавить(МенеджерВидовКИ.ФаксОрганизации);
МассивВидовКИ.Добавить(МенеджерВидовКИ.ТелефонОрганизации);

Параметры.Вставить("МассивВидовКИ", МассивВидовКИ);



Параметры.Вставить("ДатаНачалаВыгрузкиДокументов",УзелДляОбмена.ДатаНачалаВыгрузкиДокументов);
Параметры.Вставить("ИспользоватьФильтрПоОрганизациям",?(УзелДляОбмена.Организации.Количество()&gt;0,Истина,Ложь));

Если Параметры.ИспользоватьФильтрПоОрганизациям Тогда
		
	Параметры.Вставить("МассивОрганизаций",УзелДляОбмена.Организации.Выгрузить().ВыгрузитьКолонку("Организация"));
		
КонецЕсли;

//описание типов ДокументСсылка и ДокументОбъект
МассивТиповДокументов = Новый Массив;
	
Для каждого МетаДокумент Из Метаданные.Документы цикл
		
	МассивТиповДокументов.Добавить(Тип("ДокументСсылка." + МетаДокумент.Имя));	
	МассивТиповДокументов.Добавить(Тип("ДокументОбъект." + МетаДокумент.Имя));	
		
КонецЦикла;	
	
ОписаниеТиповДокументы = Новый ОписаниеТипов(МассивТиповДокументов);
Параметры.Вставить("ОписаниеТиповДокументы",ОписаниеТиповДокументы);

//описание типов СправочникСсылка и СправочникОбъект
МассивТиповСправочников = Новый Массив;
МассивТиповСправочников.Добавить(Тип("СправочникСсылка.Кассы"));	
МассивТиповСправочников.Добавить(Тип("СправочникОбъект.Кассы"));	
МассивТиповСправочников.Добавить(Тип("СправочникСсылка.Организации"));	
МассивТиповСправочников.Добавить(Тип("СправочникОбъект.Организации"));	
	
ОписаниеТиповСправочники = Новый ОписаниеТипов(МассивТиповСправочников);
Параметры.Вставить("ОписаниеТиповСправочники",ОписаниеТиповСправочники);</ПередВыгрузкойДанных>
	<ПослеВыгрузкиДанных>Выполнить(Алгоритмы.ВыгрузитьСебестоимость);

Выполнить(Алгоритмы.ВыполнитьСверткуУзла);</ПослеВыгрузкиДанных>
	<ПередЗагрузкойДанных>//создадим таблицу для объектов, которые хотим запретить редактировать
ТаблицаОбъектовЗапрещенныхДляРедактирования = Новый ТаблицаЗначений;
ТаблицаОбъектовЗапрещенныхДляРедактирования.Колонки.Добавить("Ссылка");
Параметры.Вставить("ТаблицаОбъектовЗапрещенныхДляРедактирования", ТаблицаОбъектовЗапрещенныхДляРедактирования);

//создадим таблицу для объектов, которые хотим разрешить редактировать
ТаблицаОбъектовРазрешенныхДляРедактирования = Новый ТаблицаЗначений;
ТаблицаОбъектовРазрешенныхДляРедактирования.Колонки.Добавить("Ссылка");
Параметры.Вставить("ТаблицаОбъектовРазрешенныхДляРедактирования", ТаблицаОбъектовРазрешенныхДляРедактирования);

Параметры.Вставить("ВерсияКонфигурации", Метаданные.Версия);

// Производим инициализацию списка видов наменклатуры, у которых ведется учет по характеристикам
Параметры.Вставить("ВидыНоменклатурыСУчетомПоХарактеристикам", Новый Соответствие);

Параметры.Вставить("ЗагружатьСебестоимость", глЗначениеПеременной("СпособУчетаСебестоимости") = Перечисления.СпособыУчетаСебестоимости.ПриниматьИзУправляющейСистемы);

// Определяем / создаем хозяйственные операции
Запрос = Новый Запрос;
Запрос.Текст = "ВЫБРАТЬ
|	ХозяйственныеОперации.Наименование КАК Наименование,
|	ХозяйственныеОперации.Ссылка КАК Ссылка,
|	ХозяйственныеОперации.КодХозяйственнойОперации КАК КодХозяйственнойОперации
|ИЗ
|	Справочник.ХозяйственныеОперации КАК ХозяйственныеОперации";

Результат = Запрос.Выполнить();

ТаблицаОпераций = Результат.Выгрузить();

// Возврат от покупателя
Наименование = "Возврат от покупателя";
КодХозяйственнойОперации = Перечисления.КодыХозяйственныхОпераций.ВозвратОтПокупателя;
СтруктураПоиска = Новый Структура;
СтруктураПоиска.Вставить("Наименование",Наименование);
СтруктураПоиска.Вставить("КодХозяйственнойОперации",КодХозяйственнойОперации);

СтрокиТаблицыОпераций = ТаблицаОпераций.НайтиСтроки(СтруктураПоиска);
Если СтрокиТаблицыОпераций.Количество()&gt;0 Тогда
	Параметры.Вставить("ХозяйственнаяОперация_ВозвратОтПокупателя", СтрокиТаблицыОпераций[0].Ссылка);
Иначе
	ХозОперация = Справочники.ХозяйственныеОперации.СоздатьЭлемент();
	ХозОперация.Наименование             = Наименование;
	ХозОперация.КодХозяйственнойОперации = КодХозяйственнойОперации;
	ХозОперация.Записать();
	Параметры.Вставить("ХозяйственнаяОперация_ВозвратОтПокупателя", ХозОперация.Ссылка);
КонецЕсли;

// "Возврат поставщику"
Наименование = "Возврат поставщику";
КодХозяйственнойОперации = Перечисления.КодыХозяйственныхОпераций.ВозвратПоставщику;
СтруктураПоиска = Новый Структура;
СтруктураПоиска.Вставить("Наименование",Наименование);
СтруктураПоиска.Вставить("КодХозяйственнойОперации",КодХозяйственнойОперации);

СтрокиТаблицыОпераций = ТаблицаОпераций.НайтиСтроки(СтруктураПоиска);
Если СтрокиТаблицыОпераций.Количество()&gt;0 Тогда
	Параметры.Вставить("ХозяйственнаяОперация_ВозвратПоставщику", СтрокиТаблицыОпераций[0].Ссылка);
Иначе
	ХозОперация = Справочники.ХозяйственныеОперации.СоздатьЭлемент();
	ХозОперация.Наименование             = Наименование;
	ХозОперация.КодХозяйственнойОперации = КодХозяйственнойОперации;
	ХозОперация.Записать();
	Параметры.Вставить("ХозяйственнаяОперация_ВозвратПоставщику", ХозОперация.Ссылка);
КонецЕсли;


// "Оприходование"
Наименование = "Оприходование";
КодХозяйственнойОперации = Перечисления.КодыХозяйственныхОпераций.Оприходование;
СтруктураПоиска = Новый Структура;
СтруктураПоиска.Вставить("Наименование",Наименование);
СтруктураПоиска.Вставить("КодХозяйственнойОперации",КодХозяйственнойОперации);

СтрокиТаблицыОпераций = ТаблицаОпераций.НайтиСтроки(СтруктураПоиска);
Если СтрокиТаблицыОпераций.Количество()&gt;0 Тогда
	Параметры.Вставить("ХозяйственнаяОперация_Оприходование", СтрокиТаблицыОпераций[0].Ссылка);
Иначе
	ХозОперация = Справочники.ХозяйственныеОперации.СоздатьЭлемент();
	ХозОперация.Наименование             = Наименование;
	ХозОперация.КодХозяйственнойОперации = КодХозяйственнойОперации;
	ХозОперация.Записать();
	Параметры.Вставить("ХозяйственнаяОперация_Оприходование", ХозОперация.Ссылка);
КонецЕсли;

// "Оприходование по инвентаризации"
Наименование = "Оприходование по инвентаризации";
КодХозяйственнойОперации = Перечисления.КодыХозяйственныхОпераций.ОприходованиеПоИнвентаризации;
СтруктураПоиска = Новый Структура;
СтруктураПоиска.Вставить("Наименование",Наименование);
СтруктураПоиска.Вставить("КодХозяйственнойОперации",КодХозяйственнойОперации);

СтрокиТаблицыОпераций = ТаблицаОпераций.НайтиСтроки(СтруктураПоиска);
Если СтрокиТаблицыОпераций.Количество()&gt;0 Тогда
	Параметры.Вставить("ХозяйственнаяОперация_ОприходованиеПоИнвентаризации", СтрокиТаблицыОпераций[0].Ссылка);
Иначе
	ХозОперация = Справочники.ХозяйственныеОперации.СоздатьЭлемент();
	ХозОперация.Наименование             = Наименование;
	ХозОперация.КодХозяйственнойОперации = КодХозяйственнойОперации;
	ХозОперация.Записать();
	Параметры.Вставить("ХозяйственнаяОперация_ОприходованиеПоИнвентаризации", ХозОперация.Ссылка);
КонецЕсли;

// "Списание на затраты"
Наименование = "Списание на затраты";
КодХозяйственнойОперации = Перечисления.КодыХозяйственныхОпераций.СписаниеНаЗатраты;
СтруктураПоиска = Новый Структура;
СтруктураПоиска.Вставить("Наименование",Наименование);
СтруктураПоиска.Вставить("КодХозяйственнойОперации",КодХозяйственнойОперации);

СтрокиТаблицыОпераций = ТаблицаОпераций.НайтиСтроки(СтруктураПоиска);
Если СтрокиТаблицыОпераций.Количество()&gt;0 Тогда
	Параметры.Вставить("ХозяйственнаяОперация_СписаниеНаЗатраты", СтрокиТаблицыОпераций[0].Ссылка);
Иначе
	ХозОперация = Справочники.ХозяйственныеОперации.СоздатьЭлемент();
	ХозОперация.Наименование             = Наименование;
	ХозОперация.КодХозяйственнойОперации = КодХозяйственнойОперации;
	ХозОперация.Записать();
	Параметры.Вставить("ХозяйственнаяОперация_СписаниеНаЗатраты", ХозОперация.Ссылка);
КонецЕсли;

// "Списание по инвентаризации"
Наименование = "Списание по инвентаризации";
КодХозяйственнойОперации = Перечисления.КодыХозяйственныхОпераций.СписаниеПоИнвентаризации;
СтруктураПоиска = Новый Структура;
СтруктураПоиска.Вставить("Наименование",Наименование);
СтруктураПоиска.Вставить("КодХозяйственнойОперации",КодХозяйственнойОперации);

СтрокиТаблицыОпераций = ТаблицаОпераций.НайтиСтроки(СтруктураПоиска);
Если СтрокиТаблицыОпераций.Количество()&gt;0 Тогда
	Параметры.Вставить("ХозяйственнаяОперация_СписаниеПоИнвентаризации", СтрокиТаблицыОпераций[0].Ссылка);
Иначе
	ХозОперация = Справочники.ХозяйственныеОперации.СоздатьЭлемент();
	ХозОперация.Наименование             = Наименование;
	ХозОперация.КодХозяйственнойОперации = КодХозяйственнойОперации;
	ХозОперация.Записать();
	Параметры.Вставить("ХозяйственнаяОперация_СписаниеПоИнвентаризации", ХозОперация.Ссылка);
КонецЕсли;

// Номенклатура для формирования кодов PLU
Параметры.Вставить("НоменклатураДляФормированияPLU", Новый Массив);
Параметры.Вставить("ВидыНоменклатурыДляФормированияPLU", Новый Массив);

//Параметры для заполнения пустых характеристик
Параметры.Вставить("ДокументыСОпределениемДопРеквизитов",Новый Массив);</ПередЗагрузкойДанных>
	<ПослеЗагрузкиДанных>НаборЗаписей = РегистрыСведений.ОбъектыЗапрещенныеДляРедактирования.СоздатьНаборЗаписей();
Для Каждого СтрокаТаблицы Из Параметры.ТаблицаОбъектовЗапрещенныхДляРедактирования Цикл
	
	НаборЗаписей.Очистить();
	
	НаборЗаписей.Отбор.Ссылка.Установить(СтрокаТаблицы.Ссылка);
	
	НоваяЗапись        = НаборЗаписей.Добавить();
	НоваяЗапись.Ссылка = СтрокаТаблицы.Ссылка;
	
	НаборЗаписей.Записать();
	
КонецЦикла;

НаборЗаписей = РегистрыСведений.ОбъектыЗапрещенныеДляРедактирования.СоздатьНаборЗаписей();
Для Каждого СтрокаТаблицы Из Параметры.ТаблицаОбъектовРазрешенныхДляРедактирования Цикл
	
	НаборЗаписей.Отбор.Ссылка.Установить(СтрокаТаблицы.Ссылка);
	НаборЗаписей.Записать();
	
КонецЦикла;

// Производим установку значения "ИспользованиеХарактеристик" во всех отобранных видах номенклатуры
Для каждого ВидНоменклатуры из Параметры.ВидыНоменклатурыСУчетомПоХарактеристикам Цикл
	
	// Получаем ссылку на вид номенклатуры
	ВидНоменклатурыСсылка = ВидНоменклатуры.Ключ;
	
	// Выполняем проверку необходимости изменения значения реквизита
	Если ВидНоменклатурыСсылка.ИспользованиеХарактеристик=Перечисления.ВариантыВеденияДополнительныхДанныхПоНоменклатуре.ИспользоватьОбщиеДляВидаНоменклатуры 
		ИЛИ ВидНоменклатурыСсылка.ИспользованиеХарактеристик=Перечисления.ВариантыВеденияДополнительныхДанныхПоНоменклатуре.ИспользоватьИндивидуальныеДляНоменклатуры Тогда
		Продолжить;
	КонецЕсли;
	
	// Получаем объект элемента справочника
	ВидНоменклатурыОбъект = ВидНоменклатурыСсылка.ПолучитьОбъект();
	ВидНоменклатурыОбъект.ИспользованиеХарактеристик = Перечисления.ВариантыВеденияДополнительныхДанныхПоНоменклатуре.ИспользоватьИндивидуальныеДляНоменклатуры;
	ЗаписатьОбъектВИБ(ВидНоменклатурыОбъект,ТипЗнч(ВидНоменклатурыОбъект));
	
	
КонецЦикла;


Если Параметры.ВидыНоменклатурыДляФормированияPLU.Количество() &gt; 0 
	ИЛИ Параметры.НоменклатураДляФормированияPLU.Количество() &gt; 0  Тогда
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	Номенклатура.Ссылка КАК Номенклатура
	|ИЗ
	|	Справочник.Номенклатура КАК Номенклатура
	|ГДЕ
	|	(НЕ Номенклатура.ЭтоГруппа)
	|	И (Номенклатура.ВидНоменклатуры В (&amp;ВидыНоменклатурыДляФормированияPLU)
	|			ИЛИ Номенклатура.Ссылка В (&amp;НоменклатураДляФормированияPLU))";
	
	Запрос.УстановитьПараметр("ВидыНоменклатурыДляФормированияPLU", Параметры.ВидыНоменклатурыДляФормированияPLU);
	Запрос.УстановитьПараметр("НоменклатураДляФормированияPLU", Параметры.НоменклатураДляФормированияPLU);
	
	Результат = Запрос.Выполнить();
	ТаблицаЗапроса = Результат.Выгрузить();
	
	МассивНоменклатурыPLU = ТаблицаЗапроса.ВыгрузитьКолонку("Номенклатура");
	
	ПроцедурыОбменаДаннымиOffLine.ВыполнитьПроверкуPLU(МассивНоменклатурыPLU);
	
КонецЕсли;

//Связанные объекты, использующие обращения через точку к реквизитам объектов и ссылок, 
//точно доступны только после загрузки данных, в момент загрузки могут быть не определены,
//так как не произошло записи связанного объекта в ИБ

Если Параметры.ДокументыСОпределениемДопРеквизитов.Количество() &gt; 0 Тогда
	
	МассивТабличныхЧастейДокументов = Новый Массив;
	
	Для каждого ДокументСОпределениемДопРеквизитов Из Параметры.ДокументыСОпределениемДопРеквизитов Цикл	
		
		ТипДокумента = ТипЗнч(ДокументСОпределениемДопРеквизитов);
		
		МассивТабличныхЧастейДокументов.Очистить();
		
		Если ДокументСОпределениемДопРеквизитов &lt;&gt; Неопределено  Тогда
					
			Если ТипДокумента = Тип("ДокументСсылка.ВозвратТоваровОтПокупателя") Тогда
							
				МассивТабличныхЧастейДокументов.Добавить("Товары");
				МассивТабличныхЧастейДокументов.Добавить("СоставНабора");
										
			ИначеЕсли ТипДокумента = Тип("ДокументСсылка.ПоступлениеТоваров") Тогда
				
				МассивТабличныхЧастейДокументов.Добавить("Товары");
				
			ИначеЕсли ТипДокумента = Тип("ДокументСсылка.ВозвратТоваровПоставщику") Тогда
				
				МассивТабличныхЧастейДокументов.Добавить("Товары");
				
			ИначеЕсли ТипДокумента = Тип("ДокументСсылка.ВнутреннийЗаказ") Тогда
				
				МассивТабличныхЧастейДокументов.Добавить("Товары");
				
			ИначеЕсли ТипДокумента = Тип("ДокументСсылка.ИнвентаризацияТоваров") Тогда
				
				МассивТабличныхЧастейДокументов.Добавить("Товары");
				
			ИначеЕсли ТипДокумента = Тип("ДокументСсылка.ОприходованиеТоваров") Тогда
				
				МассивТабличныхЧастейДокументов.Добавить("Товары");
				
			ИначеЕсли ТипДокумента = Тип("ДокументСсылка.КомплектацияНоменклатуры") Тогда
				
				МассивТабличныхЧастейДокументов.Добавить("Комплектующие");
				
			ИначеЕсли ТипДокумента = Тип("ДокументСсылка.ОтчетОРозничныхПродажах") Тогда
							
				МассивТабличныхЧастейДокументов.Добавить("Товары");
				МассивТабличныхЧастейДокументов.Добавить("СоставНабора");
				
			ИначеЕсли ТипДокумента = Тип("ДокументСсылка.ПеремещениеТоваров") Тогда
							
				МассивТабличныхЧастейДокументов.Добавить("Товары");
				
			ИначеЕсли ТипДокумента = Тип("ДокументСсылка.ПриходныйОрдерНаТовары") Тогда
							
				МассивТабличныхЧастейДокументов.Добавить("Товары");
				
			ИначеЕсли ТипДокумента = Тип("ДокументСсылка.РасходныйОрдерНаТовары") Тогда
							
				МассивТабличныхЧастейДокументов.Добавить("Товары");
				
			ИначеЕсли ТипДокумента = Тип("ДокументСсылка.РеализацияТоваров") Тогда
							
				МассивТабличныхЧастейДокументов.Добавить("Товары");
				МассивТабличныхЧастейДокументов.Добавить("СоставНабора");
				
			ИначеЕсли ТипДокумента = Тип("ДокументСсылка.СписаниеТоваров") Тогда
							
				МассивТабличныхЧастейДокументов.Добавить("Товары");
				
			Иначе	
				
				Продолжить;
				
			КонецЕсли;
			
			Если МассивТабличныхЧастейДокументов.Количество() &gt; 0 Тогда
				
				ДокументОбъектСОпределениемДопРеквизитов = ДокументСОпределениемДопРеквизитов.ПолучитьОбъект();
				
				Если ДокументОбъектСОпределениемДопРеквизитов &lt;&gt; Неопределено Тогда
				
				Для каждого ИмяТабличнойЧасти Из МассивТабличныхЧастейДокументов Цикл
					
					Выполнить(Алгоритмы.КонвертироватьПустыеХарактеристикиТабличнойЧасти);
					
				КонецЦикла;	
				
				ЗаписатьОбъектВИБ(ДокументОбъектСОпределениемДопРеквизитов,ТипДокумента);
				
				КонецЕсли;
				
			КонецЕсли;	
			
		КонецЕсли;
		
	КонецЦикла;	
	
КонецЕсли;	

//Заполнение пустых характеристик в РС "Комплектующие номенклатуры"
ЗапросПоКомплектующим = Новый Запрос("ВЫБРАТЬ
|	КомплектующиеНоменклатуры.Номенклатура КАК Номенклатура,
|	КомплектующиеНоменклатуры.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
|	КомплектующиеНоменклатуры.Комплектующая КАК Комплектующая,
|	КомплектующиеНоменклатуры.ХарактеристикаКомплектующей КАК ХарактеристикаКомплектующей,
|	ЕСТЬNULL(СуществующиеЗаписи.ЗаписьСуществует, ЛОЖЬ) КАК ЗаписьСуществует
|ИЗ
|	РегистрСведений.КомплектующиеНоменклатуры КАК КомплектующиеНоменклатуры
|		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
|			КомплектующиеНоменклатуры.Номенклатура КАК Номенклатура,
|			ВЫБОР
|				КОГДА КомплектующиеНоменклатуры.ХарактеристикаНоменклатуры.Наименование ПОДОБНО ""%не назначена%""
|					ТОГДА ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка)
|				ИНАЧЕ КомплектующиеНоменклатуры.ХарактеристикаНоменклатуры
|			КОНЕЦ КАК ХарактеристикаНоменклатуры,
|			КомплектующиеНоменклатуры.Комплектующая КАК Комплектующая,
|			ВЫБОР
|				КОГДА КомплектующиеНоменклатуры.ХарактеристикаКомплектующей.Наименование ПОДОБНО ""%не назначена%""
|					ТОГДА ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка)
|				ИНАЧЕ КомплектующиеНоменклатуры.ХарактеристикаКомплектующей
|			КОНЕЦ КАК ХарактеристикаКомплектующей,
|			ИСТИНА КАК ЗаписьСуществует
|		ИЗ
|			РегистрСведений.КомплектующиеНоменклатуры КАК КомплектующиеНоменклатуры
|		ГДЕ
|			(КомплектующиеНоменклатуры.ХарактеристикаНоменклатуры.Наименование ПОДОБНО ""%не назначена%""
|						И КомплектующиеНоменклатуры.Номенклатура.ВидНоменклатуры.ИспользованиеХарактеристик &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ВариантыВеденияДополнительныхДанныхПоНоменклатуре.НеИспользовать)
|					ИЛИ КомплектующиеНоменклатуры.ХарактеристикаКомплектующей.Наименование ПОДОБНО ""%не назначена%""
|						И КомплектующиеНоменклатуры.Комплектующая.ВидНоменклатуры.ИспользованиеХарактеристик &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ВариантыВеденияДополнительныхДанныхПоНоменклатуре.НеИспользовать))) КАК СуществующиеЗаписи
|		ПО КомплектующиеНоменклатуры.Номенклатура = СуществующиеЗаписи.Номенклатура
|			И КомплектующиеНоменклатуры.Комплектующая = СуществующиеЗаписи.Комплектующая
|			И КомплектующиеНоменклатуры.ХарактеристикаНоменклатуры = СуществующиеЗаписи.ХарактеристикаНоменклатуры
|			И КомплектующиеНоменклатуры.ХарактеристикаКомплектующей = СуществующиеЗаписи.ХарактеристикаКомплектующей
|ГДЕ
|	(КомплектующиеНоменклатуры.ХарактеристикаНоменклатуры = ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка)
|				И КомплектующиеНоменклатуры.Номенклатура.ВидНоменклатуры.ИспользованиеХарактеристик &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ВариантыВеденияДополнительныхДанныхПоНоменклатуре.НеИспользовать)
|			ИЛИ КомплектующиеНоменклатуры.ХарактеристикаКомплектующей = ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка)
|				И КомплектующиеНоменклатуры.Комплектующая.ВидНоменклатуры.ИспользованиеХарактеристик &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ВариантыВеденияДополнительныхДанныхПоНоменклатуре.НеИспользовать))");

ВыборкаПоКомплектующим = ЗапросПоКомплектующим.Выполнить().Выбрать();
Пока ВыборкаПоКомплектующим.Следующий() Цикл
	
	Если ВыборкаПоКомплектующим.ЗаписьСуществует Тогда
		//надо удалить запись с пустыми характеристиками
		НаборКомплектующих = РегистрыСведений.КомплектующиеНоменклатуры.СоздатьНаборЗаписей();
		НаборКомплектующих.Отбор.Номенклатура.Установить(ВыборкаПоКомплектующим.Номенклатура);
		НаборКомплектующих.Отбор.Комплектующая.Установить(ВыборкаПоКомплектующим.Комплектующая);
		НаборКомплектующих.Отбор.ХарактеристикаНоменклатуры.Установить(ВыборкаПоКомплектующим.ХарактеристикаНоменклатуры);
		НаборКомплектующих.Отбор.ХарактеристикаКомплектующей.Установить(ВыборкаПоКомплектующим.ХарактеристикаКомплектующей);	
		НаборКомплектующих.Прочитать();
		НаборКомплектующих.Очистить();
		ЗаписатьОбъектВИБ(НаборКомплектующих, ТипЗнч(НаборКомплектующих));
		
	Иначе
		
		НаборКомплектующих = РегистрыСведений.КомплектующиеНоменклатуры.СоздатьНаборЗаписей();
		НаборКомплектующих.Отбор.Номенклатура.Установить(ВыборкаПоКомплектующим.Номенклатура);
		НаборКомплектующих.Отбор.Комплектующая.Установить(ВыборкаПоКомплектующим.Комплектующая);
		
		Если ЗначениеЗаполнено(ВыборкаПоКомплектующим.ХарактеристикаНоменклатуры) Тогда
			
			НаборКомплектующих.Отбор.ХарактеристикаНоменклатуры.Установить(ВыборкаПоКомплектующим.ХарактеристикаНоменклатуры);
			
		КонецЕсли;
		
		Если ЗначениеЗаполнено(ВыборкаПоКомплектующим.ХарактеристикаКомплектующей) Тогда
			
			НаборКомплектующих.Отбор.ХарактеристикаКомплектующей.Установить(ВыборкаПоКомплектующим.ХарактеристикаКомплектующей);
			
		КонецЕсли;
		
		НаборКомплектующих.Прочитать();
		
		Для каждого ЗаписьНабораКомплектующих Из НаборКомплектующих Цикл
			
			// Производим установку нового значения поля "Характеристика номенклатуры"
			Если НЕ ЗначениеЗаполнено(ЗаписьНабораКомплектующих.ХарактеристикаНоменклатуры) Тогда
				
				ПараметрНоменклатура = ЗаписьНабораКомплектующих.Номенклатура;	
				ПараметрХарактеристикаНоменклатуры = ЗаписьНабораКомплектующих.ХарактеристикаНоменклатуры;
				Выполнить(Алгоритмы.ПолучитьНеНазначеннуюХарактеристикуНоменклатуры);
				
				Если ЗначениеЗаполнено(ПараметрХарактеристикаНоменклатуры) Тогда
					
					ЗаписьНабораКомплектующих.ХарактеристикаНоменклатуры = ПараметрХарактеристикаНоменклатуры;
					
				КонецЕсли;
				
				
			КонецЕсли;	  
			
			// Производим установку нового значения поля "Характеристика комплектующей"
			Если НЕ ЗначениеЗаполнено(ЗаписьНабораКомплектующих.ХарактеристикаКомплектующей) Тогда
				
				ПараметрНоменклатура = ЗаписьНабораКомплектующих.Комплектующая;	
				ПараметрХарактеристикаНоменклатуры = ЗаписьНабораКомплектующих.ХарактеристикаКомплектующей;
				Выполнить(Алгоритмы.ПолучитьНеНазначеннуюХарактеристикуНоменклатуры);
				
				Если ЗначениеЗаполнено(ПараметрХарактеристикаНоменклатуры) Тогда
					
					ЗаписьНабораКомплектующих.ХарактеристикаКомплектующей = ПараметрХарактеристикаНоменклатуры;
					
				КонецЕсли;
				
			КонецЕсли;	  
			
		КонецЦикла;  
		
		ЗаписатьОбъектВИБ(НаборКомплектующих, ТипЗнч(НаборКомплектующих));
		
	КонецЕсли;	
	
КонецЦикла;	 

//освобождаем 
Параметры.Очистить();</ПослеЗагрузкиДанных>
	<ПередКонвертациейОбъекта>ТипОбъектаИсточника = ТипЗнч(Источник);

Если Параметры.ОписаниеТиповДокументы.СодержитТип(ТипОбъектаИсточника) Тогда
	
	Отказ = Ложь;
	
	ПараметрИсточник = Источник;
	
	Выполнить(Алгоритмы.ВозможностьВыгрузкиОбъектаПоФильтрам);
		
ИначеЕсли Параметры.ОписаниеТиповСправочники.СодержитТип(ТипОбъектаИсточника) 
	И Параметры.ИспользоватьФильтрПоОрганизациям Тогда
	
	Отказ = Ложь;
	
	Если ТипОбъектаИсточника = Тип("СправочникСсылка.Кассы")
		ИЛИ ТипОбъектаИсточника = Тип("СправочникОбъект.Кассы") Тогда
		
		Если Параметры.МассивОрганизаций.Найти(Источник.Владелец) = Неопределено Тогда
			
			Отказ = Истина;
			
		КонецЕсли;
		
	ИначеЕсли ТипОбъектаИсточника = Тип("СправочникСсылка.Организации")
		ИЛИ ТипОбъектаИсточника = Тип("СправочникОбъект.Организации") Тогда
		
		Если Параметры.МассивОрганизаций.Найти(Источник.Ссылка) = Неопределено Тогда
			
			Отказ = Истина;
			
		КонецЕсли;
		
	КонецЕсли;	
	              		
КонецЕсли;</ПередКонвертациейОбъекта>
	<ПередЗагрузкойОбъекта>//Если Параметры.УзелДляОбменаОбъект.Метаданные().Реквизиты.Найти("ДатаСвертки") &lt;&gt; Неопределено 
//	И ЗначениеЗаполнено(Параметры.УзелДляОбменаОбъект.ДатаСвертки) Тогда
//	
//	ТипОбъекта = ТипЗнч(Объект);
//	
//	Если ТипОбъекта &lt;&gt; Тип("Неопределено") И Документы.ТипВсеСсылки().СодержитТип(ТипОбъекта) Тогда
//		
//		Если Объект.Дата &lt; Параметры.УзелДляОбменаОбъект.ДатаСвертки Тогда
//			
//			Отказ = Истина;
//			
//		КонецЕсли;
//		
//	КонецЕсли;

//КонецЕсли;</ПередЗагрузкойОбъекта>
	<ПриПолученииИнформацииОбУдалении>
МетаданныеОбъекта = Объект.Метаданные();

Если Метаданные.Документы.Содержит(МетаданныеОбъекта) ИЛИ Метаданные.Справочники.Содержит(МетаданныеОбъекта) Тогда
	
	Отказ  = Истина;
	
	ТипОбъекта = ТипЗнч(Объект);
	
	Если Метаданные.Справочники.Содержит(МетаданныеОбъекта) 
		И НЕ Объект.Предопределенный Тогда
		Если НЕ Объект.ПометкаУдаления Тогда
			
			Объект.ПометкаУдаления = Истина;
			ЗаписатьОбъектВИБ(Объект,ТипОбъекта);
			
		КонецЕсли;	
		
		
	КонецЕсли;
	
	
	Если Метаданные.Документы.Содержит(МетаданныеОбъекта) Тогда
		
		Если НЕ Объект.ПометкаУдаления Тогда
			Если Объект.Проведен Тогда
				ОтменитьПроведениеОбъектаВИБ(Объект, ТипОбъекта);
			КонецЕсли;
			
			Объект.ПометкаУдаления = Истина;
			ЗаписатьОбъектВИБ(Объект,ТипОбъекта);
			
			//установим пустое сопоставление
			НаборЗаписей = РегистрыСведений.СоответствиеОбъектовДляОбмена.СоздатьНаборЗаписей();
			НаборЗаписей.Отбор.УзелОбмена.Установить(УзелОбменаЗагрузкаДанных);
			НаборЗаписей.Отбор.СобственнаяСсылка.Установить(Объект.Ссылка);
			
			Для каждого ЗаписьСоответствия Из НаборЗаписей цикл
				ЗаписьСоответствия.СсылкаВДругойИБ = "";
			КонецЦикла;	
			
			
			ЗаписатьОбъектВИБ(НаборЗаписей, "РегистрСведенийНаборЗаписей.СоответствиеОбъектовДляОбмена");
			
			
		КонецЕсли;	
		
		
	КонецЕсли;
	
	
КонецЕсли;

Если ТипЗнч(Объект) = Тип("ПланВидовХарактеристикОбъект.НазначенияСвойствКатегорийОбъектов") Тогда
	
	Если Объект.Предопределенный Тогда
		Отказ = Истина;
	КонецЕсли;
	
КонецЕсли;</ПриПолученииИнформацииОбУдалении>
	<ПослеЗагрузкиПараметров>Если ЗначениеЗаполнено(Параметры.ПериодичностьПередачиСебестоимости) Тогда
	
	Запрос = Новый Запрос;
	Запрос.Текст = "
	|ВЫБРАТЬ
	|	УстановкаСебестоимости.Ссылка КАК Ссылка,
	|	&amp;ДатаНачалаВыгрузкиСебестоимости КАК ДатаНачалаВыгрузкиСебестоимости,
	|	&amp;ПериодичностьПередачиСебестоимости КАК ПериодичностьПередачиСебестоимости
	|ИЗ
	|	Документ.УстановкаСебестоимости КАК УстановкаСебестоимости
	|ГДЕ
	|	УстановкаСебестоимости.ПринятИзУправляющейСистемы
	|	И УстановкаСебестоимости.Периодичность &lt;&gt; &amp;ПериодичностьПередачиСебестоимости
	|	И УстановкаСебестоимости.Дата &gt; &amp;ДатаНачалаВыгрузкиСебестоимости";
	
	Запрос.УстановитьПараметр("ДатаНачалаВыгрузкиСебестоимости", ?(ЗначениеЗаполнено(Параметры.ДатаНачалаВыгрузкиСебестоимости),Параметры.ДатаНачалаВыгрузкиСебестоимости,'00010101'));
	Запрос.УстановитьПараметр("ПериодичностьПередачиСебестоимости", Параметры.ПериодичностьПередачиСебестоимости);
	Результат = Запрос.Выполнить();
	
	Выборка = Результат.Выбрать();
	
	Пока Выборка.Следующий() Цикл
		
		Документ = Выборка.Ссылка.ПолучитьОбъект();
		Документ.УстановитьПометкуУдаления(Истина);
		
	КонецЦикла;
	
КонецЕсли;</ПослеЗагрузкиПараметров>
	<Параметры>
		<Параметр Имя="ДатаНачалаВыгрузкиСебестоимости                   " Наименование="Дата начала выгрузки себестоимости" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Дата" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КассаОтправительЯвляетсяМагазином                 " Наименование="Касса отправитель являетсямагазином" ИспользуетсяПриЗагрузке="false" УстанавливатьВДиалоге="false" ТипЗначения="Булево" ПередаватьПараметрПриВыгрузке="false"/>
		<Параметр Имя="КассаПолучательЯвляетсяМагазином                  " Наименование="Касса получатель являетсямагазином" ИспользуетсяПриЗагрузке="false" УстанавливатьВДиалоге="false" ТипЗначения="Булево" ПередаватьПараметрПриВыгрузке="false"/>
		<Параметр Имя="КассаЯвляетсяМагазином                            " Наименование="Касса является магазином" ИспользуетсяПриЗагрузке="false" УстанавливатьВДиалоге="false" ТипЗначения="Булево" ПередаватьПараметрПриВыгрузке="false"/>
		<Параметр Имя="МассивКассКВыгрузке                               " Наименование="МассивКассКВыгрузке" ИспользуетсяПриЗагрузке="false" УстанавливатьВДиалоге="false" ПередаватьПараметрПриВыгрузке="false"/>
		<Параметр Имя="МассивСкладовКВыгрузке                            " Наименование="МассивСкладовКВыгрузке" ИспользуетсяПриЗагрузке="false" УстанавливатьВДиалоге="false" ПередаватьПараметрПриВыгрузке="false"/>
		<Параметр Имя="ПериодичностьПередачиСебестоимости                " Наименование="Периодичность передачи себестоимости" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="ПеречислениеСсылка.Периодичность" ПередаватьПараметрПриВыгрузке="true" ПравилоКонвертации="Периодичность                                     "/>
		<Параметр Имя="СкладОтправительЯвляетсяМагазином                 " Наименование="Склад отправитель являетсямагазином" ИспользуетсяПриЗагрузке="false" УстанавливатьВДиалоге="false" ТипЗначения="Булево" ПередаватьПараметрПриВыгрузке="false"/>
		<Параметр Имя="СкладПолучательЯвляетсяМагазином                  " Наименование="Склад получатель являетсямагазином" ИспользуетсяПриЗагрузке="false" УстанавливатьВДиалоге="false" ТипЗначения="Булево" ПередаватьПараметрПриВыгрузке="false"/>
		<Параметр Имя="СкладЯвляетсяМагазином                            " Наименование="Склад является магазином" ИспользуетсяПриЗагрузке="false" УстанавливатьВДиалоге="false" ТипЗначения="Булево" ПередаватьПараметрПриВыгрузке="false"/>
	</Параметры>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Группа>
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>50</Порядок>
			<Правило>
				<Код>ВидыДисконтныхКарт</Код>
				<Наименование>СправочникСсылка.ВидыДисконтныхКарт --&gt; СправочникСсылка.ВидыДисконтныхКарт</Наименование>
				<Порядок>50</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ВидыДисконтныхКарт</Источник>
				<Приемник>СправочникСсылка.ВидыДисконтныхКарт</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВидыКонтактнойИнформации</Код>
				<Наименование>СправочникСсылка.ВидыКонтактнойИнформации --&gt; СправочникСсылка.ВидыКонтактнойИнформации</Наименование>
				<Порядок>100</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.ВидыКонтактнойИнформации</Источник>
				<Приемник>СправочникСсылка.ВидыКонтактнойИнформации</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ВидОбъектаКонтактнойИнформации --&gt; ВидОбъектаКонтактнойИнформации</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ВидОбъектаКонтактнойИнформации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОбъектовКонтактнойИнформации"/>
						<Приемник Имя="ВидОбъектаКонтактнойИнформации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОбъектовКонтактнойИнформации"/>
						<КодПравилаКонвертации>ВидыОбъектовКонтактнойИнформации                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Тип --&gt; Тип</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
						<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
						<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ТелефонКонтрагента --&gt; ТелефонКонтрагента</Наименование>
						<Порядок>50</Порядок>
						<Источник>ТелефонКонтрагента</Источник>
						<Приемник>ТелефонКонтрагента</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ТелефонОрганизации --&gt; ТелефонОрганизации</Наименование>
						<Порядок>100</Порядок>
						<Источник>ТелефонОрганизации</Источник>
						<Приемник>ТелефонОрганизации</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ФаксКонтрагента --&gt; ФаксКонтрагента</Наименование>
						<Порядок>150</Порядок>
						<Источник>ФаксКонтрагента</Источник>
						<Приемник>ФаксКонтрагента</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ФаксОрганизации --&gt; ФаксОрганизации</Наименование>
						<Порядок>200</Порядок>
						<Источник>ФаксОрганизации</Источник>
						<Приемник>ФаксОрганизации</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>ФактАдресКонтрагента --&gt; ФактАдресКонтрагента</Наименование>
						<Порядок>250</Порядок>
						<Источник>ФактАдресКонтрагента</Источник>
						<Приемник>ФактАдресКонтрагента</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>ФактАдресОрганизации --&gt; ФактАдресОрганизации</Наименование>
						<Порядок>300</Порядок>
						<Источник>ФактАдресОрганизации</Источник>
						<Приемник>ФактАдресОрганизации</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>ФактАдресФизЛица --&gt; ФактАдресФизЛица</Наименование>
						<Порядок>350</Порядок>
						<Источник>ФактАдресФизЛица</Источник>
						<Приемник>ФактАдресФизЛица</Приемник>
					</Значение>
					<Значение>
						<Код>8</Код>
						<Наименование>ЮрАдресКонтрагента --&gt; ЮрАдресКонтрагента</Наименование>
						<Порядок>400</Порядок>
						<Источник>ЮрАдресКонтрагента</Источник>
						<Приемник>ЮрАдресКонтрагента</Приемник>
					</Значение>
					<Значение>
						<Код>9</Код>
						<Наименование>ЮрАдресОрганизации --&gt; ЮрАдресОрганизации</Наименование>
						<Порядок>450</Порядок>
						<Источник>ЮрАдресОрганизации</Источник>
						<Приемник>ЮрАдресОрганизации</Приемник>
					</Значение>
					<Значение>
						<Код>11</Код>
						<Наименование>АдресЭлектроннойПочтыКонтактногоЛицаКонтрагента --</Наименование>
						<Порядок>550</Порядок>
						<Источник>АдресЭлектроннойПочтыКонтактногоЛицаКонтрагента</Источник>
						<Приемник>EmailКонтрагента</Приемник>
					</Значение>
					<Значение>
						<Код>12</Код>
						<Наименование>ТелефонФизЛицаДомашний --&gt; ТелефонДомашнийФизЛица</Наименование>
						<Порядок>600</Порядок>
						<Источник>ТелефонФизЛицаДомашний</Источник>
						<Приемник>ТелефонДомашнийФизЛица</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыНоменклатуры</Код>
				<Наименование>СправочникСсылка.ВидыНоменклатуры --&gt; СправочникСсылка.ВидыНоменклатуры</Наименование>
				<Порядок>150</Порядок>
				<ПослеЗагрузки>			
Если (НЕ Объект.ЭтоГруппа) И НЕ ЗначениеЗаполнено(Объект.ИспользованиеХарактеристик) Тогда
	
		Если ПараметрыОбъекта["ИспользованиеХарактеристик"] = Истина Тогда  //=Истина, все правильно.
			
			Объект.ИспользованиеХарактеристик = Перечисления.ВариантыВеденияДополнительныхДанныхПоНоменклатуре.ИспользоватьИндивидуальныеДляНоменклатуры;
			
			ЗаписатьОбъектВИБ(Объект,ТипЗнч(Объект));
			
		Иначе
			
			Объект.ИспользованиеХарактеристик = Перечисления.ВариантыВеденияДополнительныхДанныхПоНоменклатуре.НеИспользовать;
			
			ЗаписатьОбъектВИБ(Объект,ТипЗнч(Объект));
			
		КонецЕсли;	
	
	
КонецЕсли;	

Если НЕ Объект.ЭтоНовый() И Объект.Ссылка.ТипНоменклатуры = Перечисления.ТипыНоменклатуры.ПодарочныйСертификат Тогда
	
	Объект.ТипНоменклатуры = Объект.Ссылка.ТипНоменклатуры;
	
КонецЕсли;

Если Объект.ЭтоНовый() Тогда
	
	Параметры.ВидыНоменклатурыДляФормированияPLU.Добавить(Объект.ПолучитьСсылкуНового());
	
	Если НЕ ЗначениеЗаполнено(Объект.ТипНоменклатуры) Тогда
		
		Объект.ТипНоменклатуры = Перечисления.ТипыНоменклатуры.Товар;
		
	КонецЕсли;	
	
Иначе
	
	Параметры.ВидыНоменклатурыДляФормированияPLU.Добавить(Объект.Ссылка);
	
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ВидыНоменклатуры</Источник>
				<Приемник>СправочникСсылка.ВидыНоменклатуры</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ТипНоменклатуры --&gt; ТипНоменклатуры</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ТипНоменклатуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНоменклатуры"/>
						<Приемник Имя="ТипНоменклатуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНоменклатуры"/>
						<КодПравилаКонвертации>ТипыНоменклатуры                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ИспользованиеХарактеристик</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>
Запросы.ИспользованиеХарактеристик.УстановитьПараметр("ВидНоменклатуры",Источник.Ссылка);
РезультатИспользованиеХарактеристик = Запросы.ИспользованиеХарактеристик.Выполнить();

Если РезультатИспользованиеХарактеристик.Пустой() Тогда
	
	Значение = Ложь;
	
Иначе
	
	ВыборкаИспользованиеХарактеристик = РезультатИспользованиеХарактеристик.Выбрать();	
	ВыборкаИспользованиеХарактеристик.Следующий();
	Значение = ВыборкаИспользованиеХарактеристик.ВестиУчетПоХарактеристикам;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВидыОплатЧекаККМ</Код>
				<Наименование>СправочникСсылка.ВидыОплатЧекаККМ --&gt; СправочникСсылка.ВидыОплатЧекаККМ</Наименование>
				<Порядок>200</Порядок>
				<ПослеЗагрузки>Если НЕ Объект.ЭтоНовый() И Ссылка.ТипОплаты = Перечисления.ТипыОплатЧекаККМ.ПодарочныйСертификат Тогда
	
	Объект.ТипОплаты = Ссылка.ТипОплаты;
	
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ВидыОплатЧекаККМ</Источник>
				<Приемник>СправочникСсылка.ВидыОплатЧекаККМ</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
						<КодПравилаКонвертации>ВидыОплатЧекаККМ                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>4</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>БанкКредитор --&gt; БанкКредитор</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="БанкКредитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="БанкКредитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПроцентБанковскойКомиссии --&gt; ПроцентБанковскойКомиссии</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПроцентБанковскойКомиссии" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="ПроцентБанковскойКомиссии" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ТипОплаты --&gt; ТипОплаты</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ТипОплаты" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыОплатЧекаККМ"/>
						<Приемник Имя="ТипОплаты" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыОплатЧекаККМ"/>
						<КодПравилаКонвертации>ТипыОплатЧекаККМ                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Наличные --&gt; Наличные</Наименование>
						<Порядок>50</Порядок>
						<Источник>Наличные</Источник>
						<Приемник>Наличные</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ГруппыПользователей</Код>
				<Наименование>СправочникСсылка.ГруппыПользователей --&gt; СправочникСсылка.ГруппыПользователей</Наименование>
				<Порядок>250</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ГруппыПользователей</Источник>
				<Приемник>СправочникСсылка.ГруппыПользователей</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ГруппыПользователей"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ГруппыПользователей"/>
						<КодПравилаКонвертации>ГруппыПользователей                               </КодПравилаКонвертации>
					</Свойство>
					<Группа>
						<Код>4</Код>
						<Наименование>ПользователиГруппы --&gt; ПользователиГруппы</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПользователиГруппы" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ПользователиГруппы" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>5</Код>
							<Наименование>Пользователь --&gt; Пользователь</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Пользователь" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<Приемник Имя="Пользователь" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>АдминистраторГруппы --&gt; АдминистраторГруппы</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="АдминистраторГруппы" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="АдминистраторГруппы" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ВсеПользователи --&gt; ВсеПользователи</Наименование>
						<Порядок>50</Порядок>
						<Источник>ВсеПользователи</Источник>
						<Приемник>ВсеПользователи</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ДоговорыЭквайринга</Код>
				<Наименование>СправочникСсылка.ДоговорыЭквайринга --&gt; СправочникСсылка.ДоговорыЭквайринга</Наименование>
				<Порядок>300</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ДоговорыЭквайринга</Источник>
				<Приемник>СправочникСсылка.ДоговорыЭквайринга</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Эквайрер --&gt; Эквайрер</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Эквайрер" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Эквайрер" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>250</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<ПередВыгрузкой>Если ВходящиеДанные &lt;&gt; Неопределено Тогда
	Организация = Справочники.Организации.ПустаяСсылка();
	
	Если ТипЗнч(ВходящиеДанные) = Тип("Структура") И ВходящиеДанные.Свойство("Организация") Тогда
		ВходящиеДанные.Свойство("Организация", Организация);
		Значение = Организация;
	Иначе
		Отказ = Истина;
	КонецЕсли;
	
Иначе
		Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>5</Код>
						<Наименование>ТарифыЗаРасчетноеОбслуживание --&gt; ТарифыЗаРасчетноеОбслуживание</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ТарифыЗаРасчетноеОбслуживание" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ТарифыЗаРасчетноеОбслуживание" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>6</Код>
							<Наименование>ВидОплаты --&gt; ВидОплаты</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
							<Приемник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
							<КодПравилаКонвертации>ВидыОплатЧекаККМ                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>ПроцентТорговойУступки --&gt; ПроцентТорговойУступки</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ПроцентТорговойУступки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ПроцентТорговойУступки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ДокументыУдостоверяющиеЛичность</Код>
				<Наименование>СправочникСсылка.ДокументыУдостоверяющиеЛичность --&gt; СправочникСсылка.ДокументыУдостоверяющиеЛичност</Наименование>
				<Порядок>350</Порядок>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 тогда
 
	 СтрокаИменСвойствПоиска = "КодИМНС";
	 
Иначе
	 
	 СтрокаИменСвойствПоиска = "Наименование";
 
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ДокументыУдостоверяющиеЛичность</Источник>
				<Приемник>СправочникСсылка.ДокументыУдостоверяющиеЛичность</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>КодИМНС --&gt; КодИМНС</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="КодИМНС" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодИМНС" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>КодПФР --&gt; КодПФР</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="КодПФР" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПФР" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ДолжностиОрганизаций</Код>
				<Наименование>СправочникСсылка.ДолжностиОрганизаций --&gt; СправочникСсылка.ДолжностиОрганизаций</Наименование>
				<Порядок>400</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ДолжностиОрганизаций</Источник>
				<Приемник>СправочникСсылка.ДолжностиОрганизаций</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ЕдиницыИзмерения</Код>
				<Наименование>СправочникСсылка.ЕдиницыИзмерения --&gt; СправочникСсылка.ЕдиницыИзмерения</Наименование>
				<Порядок>450</Порядок>
				<ПередВыгрузкой>Если Параметры.УзелДляОбменаОбъект.мЕстьФильтрПоНоменклатуре И Не Параметры.УзелДляОбменаОбъект.ЭлементВходитВТаблицу(Источник.Владелец, "Номенклатура", "Номенклатура") Тогда
	
	Отказ = Истина
	
КонецЕсли;

Если НЕ ТипЗнч(Источник.Владелец) = Тип("СправочникСсылка.Номенклатура") Тогда
	
	Отказ = Истина;
	
КонецЕсли;

Если СтрДлина(СокрЛП(Источник.ЕдиницаПоКлассификатору.Код)) &gt; 3 Тогда
	
	Отказ = Истина;
	
КонецЕсли;
</ПередВыгрузкой>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.ЕдиницыИзмерения</Источник>
				<Приемник>СправочникСсылка.ЕдиницыИзмерения</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Владелец" Вид="Свойство"/>
						<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<ПередВыгрузкой>Если ТипЗнч(Источник.Владелец) = Тип("СправочникСсылка.Номенклатура") Тогда
	ИмяПКО = "Номенклатура";
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Вес --&gt; Вес</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Вес" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="Вес" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ЕдиницаПоКлассификатору --&gt; ЕдиницаПоКлассификатору</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ЕдиницаПоКлассификатору" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<Приемник Имя="ЕдиницаПоКлассификатору" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Объем --&gt; Объем</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Объем" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="Объем" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>10</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ЗначенияСвойствОбъектов</Код>
				<Наименование>СправочникСсылка.ЗначенияСвойствОбъектов --&gt; СправочникСсылка.ЗначенияСвойствОбъектов</Наименование>
				<Порядок>500</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ЗначенияСвойствОбъектов</Источник>
				<Приемник>СправочникСсылка.ЗначенияСвойствОбъектов</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Владелец" Вид="Свойство" Тип="ПланВидовХарактеристикСсылка.СвойстваОбъектов"/>
						<Приемник Имя="Владелец" Вид="Свойство" Тип="ПланВидовХарактеристикСсылка.СвойстваОбъектов"/>
						<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ИнформационныеКарты</Код>
				<Наименование>СправочникСсылка.ИнформационныеКарты --&gt; СправочникСсылка.ИнформационныеКарты</Наименование>
				<Порядок>550</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ИнформационныеКарты</Источник>
				<Приемник>СправочникСсылка.ИнформационныеКарты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ИнформационныеКарты"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ИнформационныеКарты"/>
						<КодПравилаКонвертации>ИнформационныеКарты                               </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>4</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ВидДисконтнойКарты --&gt; ВидДисконтнойКарты</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ВидДисконтнойКарты" Вид="Реквизит" Тип="СправочникСсылка.ВидыДисконтныхКарт"/>
						<Приемник Имя="ВидДисконтнойКарты" Вид="Реквизит" Тип="СправочникСсылка.ВидыДисконтныхКарт"/>
						<КодПравилаКонвертации>ВидыДисконтныхКарт                                </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ВидКарты --&gt; ВидКарты</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ВидКарты" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыИнформационныхКарт"/>
						<Приемник Имя="ВидКарты" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыИнформационныхКарт"/>
						<КодПравилаКонвертации>ВидыИнформационныхКарт                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ВладелецКарты --&gt; ВладелецКарты</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ВладелецКарты" Вид="Реквизит"/>
						<Приемник Имя="ВладелецКарты" Вид="Реквизит"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>КодКарты --&gt; КодКарты</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="КодКарты" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодКарты" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Если Источник.ВидКарты = Перечисления.ВидыИнформационныхКарт.Штриховая Тогда
	Значение = "";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ТипКарты --&gt; ТипКарты</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ТипКарты" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыИнформационныхКарт"/>
						<Приемник Имя="ТипКарты" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыИнформационныхКарт"/>
						<КодПравилаКонвертации>ТипыИнформационныхКарт                            </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Кассы</Код>
				<Наименование>СправочникСсылка.Кассы --&gt; СправочникСсылка.Кассы</Наименование>
				<Порядок>600</Порядок>
				<ПередВыгрузкой>Если Параметры.УзелДляОбменаОбъект.мЕстьФильтрПоКассам И Не Параметры.УзелДляОбменаОбъект.ЭлементВходитВТаблицу(Источник.Ссылка, "Кассы", "Касса") Тогда
	
		
КонецЕсли;

Если Не Источник.ЭтоГруппа Тогда
	
	Если ТипЗнч(ВходящиеДанные) = Тип("Структура") И ВходящиеДанные.Свойство("ЭтоКассаЦентральногоОфиса") Тогда
		
		ЭтоКассаЦентральногоОфиса = Ложь;
		ВходящиеДанные.Свойство("ЭтоКассаЦентральногоОфиса", ЭтоКассаЦентральногоОфиса);
		
		Если Не ЭтоКассаЦентральногоОфиса Тогда //эта касса переходит не в склад, а в магазин
			Отказ = Истина;
		КонецЕсли;
		
	Иначе
		
		КодМагазинаИзАлгоритма = "";
		
		КассаДляЗапроса = Источник.Ссылка;
		Выполнить(Алгоритмы.ПолучитьКодМагазинаПоКассе);
		//в результате получили строку КодМагазинаИзАлгоритма
		
		Если Не ПустаяСтрока(КодМагазинаИзАлгоритма) Тогда //эта касса переходит не в склад, а в магазин
			Отказ = Истина;
		КонецЕсли;
		
	КонецЕсли;
	
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>Если Не Объект.ЭтоГруппа Тогда
	
	//если объект перешел по этому правилу, значит это касса ЦентральногоОфиса
	Объект.ТипКассы = Перечисления.ТипыКасс.КассаЦентральногоОфиса;
	
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Кассы</Источник>
				<Приемник>СправочникСсылка.Кассы</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Кассы"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Кассы"/>
						<КодПравилаКонвертации>Кассы                                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>5</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>Владелец --&gt; Организация</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КассаВМагазин</Код>
				<Наименование>СправочникСсылка.Кассы --&gt; СправочникСсылка.Организации</Наименование>
				<Порядок>650</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.Кассы</Источник>
				<Приемник>СправочникСсылка.Магазины</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование> --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Источник;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КатегорииОбъектов</Код>
				<Наименование>СправочникСсылка.КатегорииОбъектов --&gt; СправочникСсылка.КатегорииОбъектов</Наименование>
				<Порядок>700</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.КатегорииОбъектов</Источник>
				<Приемник>СправочникСсылка.КатегорииОбъектов</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>НазначениеКатегории --&gt; НазначениеКатегории</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="НазначениеКатегории" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов"/>
						<Приемник Имя="НазначениеКатегории" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов"/>
						<КодПравилаКонвертации>НазначенияСвойствКатегорийОбъектов                </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторЕдиницИзмерения</Код>
				<Наименование>СправочникСсылка.КлассификаторЕдиницИзмерения --&gt; СправочникСсылка.КлассификаторЕдиницИзмерения</Наименование>
				<Порядок>750</Порядок>
				<ПередВыгрузкой>Если СтрДлина(СокрЛП(Источник.Код)) &gt; 3 Тогда
	Отказ = Истина;
КонецЕсли;
</ПередВыгрузкой>
				<Источник>СправочникСсылка.КлассификаторЕдиницИзмерения</Источник>
				<Приемник>СправочникСсылка.КлассификаторЕдиницИзмерения</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПриВыгрузке>Значение = СокрЛП(Значение);</ПриВыгрузке>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторСтранМира</Код>
				<Наименование>СправочникСсылка.КлассификаторСтранМира --&gt; СправочникСсылка.КлассификаторСтранМира</Наименование>
				<Порядок>800</Порядок>
				<Источник>СправочникСсылка.КлассификаторСтранМира</Источник>
				<Приемник>СправочникСсылка.КлассификаторСтранМира</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Россия --&gt; Россия</Наименование>
						<Порядок>50</Порядок>
						<Источник>Россия</Источник>
						<Приемник>Россия</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>Контрагенты</Код>
				<Наименование>СправочникСсылка.Контрагенты --&gt; СправочникСсылка.Контрагенты</Наименование>
				<Порядок>850</Порядок>
				<ПередВыгрузкой>Если Параметры.УзелДляОбменаОбъект.мЕстьФильтрПоКонтрагентам И Не Параметры.УзелДляОбменаОбъект.ЭлементВходитВТаблицу(Источник.Ссылка, "Контрагенты", "Контрагент") Тогда
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
				<ПоследовательностьПолейПоиска>Если СвойстваПоиска["ЭтоГруппа"] = Истина Тогда
	
	Если ЗначениеЗаполнено(НастройкаПоиска) Тогда
		
		Если НастройкаПоиска = "Ссылка" Тогда
			
			ПрекратитьПоиск = Истина;
			
		Иначе
			
			СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
			
		КонецЕсли;
		
	Иначе
		
		СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
		
	КонецЕсли;
	
Иначе
	
	Если НастройкаПоиска = "Наименование" Тогда
		
		СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
		
	ИначеЕсли НастройкаПоиска = "Ссылка" Тогда
		
		ПрекратитьПоиск = Истина;
		
	ИначеЕсли НастройкаПоиска = "ИННКПП" Тогда
		
		Если ЗначениеЗаполнено(СвойстваПоиска["ИНН"]) Тогда
			СтрокаИменСвойствПоиска = "ИНН, КПП, ЭтоГруппа";
		Иначе
			СтрокаИменСвойствПоиска = "Наименование, НаименованиеПолное, ЭтоГруппа";
		КонецЕсли;
		
	Иначе // По ссылке
		
		ПрекратитьПоиск = Истина;
		
	КонецЕсли;
	
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Контрагенты</Источник>
				<Приемник>СправочникСсылка.Контрагенты</Приемник>
				<НастройкаВариантовПоискаОбъектов>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>Наименование</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по Наименованию</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>ИННКПП</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>ИНН + КПП</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по ИНН и КПП</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>Ссылка</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Внутренний идентификатор</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по Внутреннему идентификатору</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
				</НастройкаВариантовПоискаОбъектов>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>4</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ДокументУдостоверяющийЛичность --&gt; ДокументУдостоверяющийЛичность</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ДокументУдостоверяющийЛичность" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ДокументУдостоверяющийЛичность" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>9</Код>
						<Наименование>КПП --&gt; КПП</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>10</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>ЮрФизЛицо --&gt; ЮрФизЛицо</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<Приемник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<КодПравилаКонвертации>ЮрФизЛицо                                         </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>13</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>650</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>СтруктураКонтактнойИнформации</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Запрос = Новый Запрос("
|ВЫБРАТЬ
|	КонтактнаяИнформация.Вид,
|	КонтактнаяИнформация.Представление
|ИЗ
|	РегистрСведений.КонтактнаяИнформация КАК КонтактнаяИнформация
|ГДЕ
|	КонтактнаяИнформация.Объект = Контрагент
|	И КонтактнаяИнформация.Тип В(&amp;МассивТипов)
|	И КонтактнаяИнформация.Вид В(&amp;МассивВидов)");

МассивТипов = Новый Массив;
МассивТипов.Добавить(Перечисления.ТипыКонтактнойИнформации.Адрес);
МассивТипов.Добавить(Перечисления.ТипыКонтактнойИнформации.Телефон);

МассивВидов = Новый Массив;
МассивВидов.Добавить(Справочники.ВидыКонтактнойИнформации.ФактАдресКонтрагента);
МассивВидов.Добавить(Справочники.ВидыКонтактнойИнформации.ЮрАдресКонтрагента);
МассивВидов.Добавить(Справочники.ВидыКонтактнойИнформации.ТелефонКонтрагента);
МассивВидов.Добавить(Справочники.ВидыКонтактнойИнформации.ФаксКонтрагента);

Запрос.УстановитьПараметр("МассивТипов", МассивТипов);
Запрос.УстановитьПараметр("МассивВидов", МассивВидов);
Запрос.УстановитьПараметр("Контрагент" , Источник.Ссылка);

СтруктураКонтактнойИнформации = Новый Структура;

ВыборкаЗапроса = Запрос.Выполнить().Выбрать();
Пока ВыборкаЗапроса.Следующий() Цикл
	
	Если ВыборкаЗапрос.Вид = Справочники.ВидыКонтактнойИнформации.ФактАдресКонтрагента Тогда
		
		СтруктураКонтактнойИнформации.Вставить("ФактАдресКонтрагента", ВыборкаЗапроса.Представление);
		
	ИначеЕсли ВыборкаЗапрос.Вид = Справочники.ВидыКонтактнойИнформации.ЮрАдресКонтрагента Тогда
		
		СтруктураКонтактнойИнформации.Вставить("ЮрАдресКонтрагента", ВыборкаЗапроса.Представление);
		
	ИначеЕсли ВыборкаЗапрос.Вид = Справочники.ВидыКонтактнойИнформации.ТелефонКонтрагента Тогда
		
		СтруктураКонтактнойИнформации.Вставить("ТелефонКонтрагента", ВыборкаЗапроса.Представление);
		
	ИначеЕсли ВыборкаЗапрос.Вид = Справочники.ВидыКонтактнойИнформации.ФаксКонтрагента Тогда
		
		СтруктураКонтактнойИнформации.Вставить("ФаксКонтрагента", ВыборкаЗапроса.Представление);
		
	КонецЕсли;
	
КонецЦикла;

Если ЗначениеЗаполнено(Источник.ОсновноеКонтактноеЛицо) Тогда
	
	СтруктураКонтактнойИнформации.Вставить("КонтактноеЛицо", Строка(ОсновноеКонтактноеЛицо));
	
КонецЕсли;

Значение = ЗначениеВСтрокуВнутр(СтруктураКонтактнойИнформации);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Номенклатура</Код>
				<Наименование>СправочникСсылка.Номенклатура --&gt; СправочникСсылка.Номенклатура</Наименование>
				<Порядок>900</Порядок>
				<ПередВыгрузкой>Если Параметры.УзелДляОбменаОбъект.мЕстьФильтрПоНоменклатуре И НЕ Параметры.УзелДляОбменаОбъект.ЭлементВходитВТаблицу(Источник.Ссылка, "Номенклатура", "Номенклатура") Тогда
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>
Если ЗначениеЗаполнено(Объект.ВидНоменклатуры) И (НЕ Объект.ЭтоГруппа) И ПараметрыОбъекта["ВестиУчетПоХарактеристикам"] Тогда
	
	Параметры.ВидыНоменклатурыСУчетомПоХарактеристикам.Вставить(Объект.ВидНоменклатуры, Истина);
	
КонецЕсли;

Если Объект.ЭтоНовый() Тогда
	Параметры.НоменклатураДляФормированияPLU.Добавить(Объект.ПолучитьСсылкуНового());
Иначе
	Параметры.НоменклатураДляФормированияPLU.Добавить(Объект.Ссылка);
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>Если СвойстваПоиска["ЭтоГруппа"] = Истина Тогда
	
	Если ЗначениеЗаполнено(НастройкаПоиска) Тогда
		
		Если НастройкаПоиска = "Ссылка" Тогда
			
			ПрекратитьПоиск = Истина;
			
		Иначе
			
			СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа, Родитель";
			
		КонецЕсли;
		
	Иначе
		ПрекратитьПоиск = Истина;
	КонецЕсли;
	
Иначе
	
	Если НастройкаПоиска = "Артикул" Тогда
		
		СтрокаИменСвойствПоиска = "Артикул, ЭтоГруппа";
		
	ИначеЕсли НастройкаПоиска = "Наименование" Тогда
		
		СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
		
	ИначеЕсли НастройкаПоиска = "Ссылка" Тогда
		
		ПрекратитьПоиск = Истина;
		
	ИначеЕсли НастройкаПоиска = "НаименованиеАртикул" Тогда
		
		СтрокаИменСвойствПоиска = "Наименование, Артикул, ЭтоГруппа";
		
	ИначеЕсли НастройкаПоиска = "НаименованиеРодитель" Тогда
		
		СтрокаИменСвойствПоиска = "Наименование, Родитель, ЭтоГруппа";
		
	ИначеЕсли НастройкаПоиска = "НаименованиеРодительАртикул" Тогда
		
		СтрокаИменСвойствПоиска = "Наименование, Родитель, Артикул, ЭтоГруппа";
		
	Иначе // По ссылке
		
		ПрекратитьПоиск = Истина;
		
	КонецЕсли;
	
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Номенклатура</Источник>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<НастройкаВариантовПоискаОбъектов>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>Артикул</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Артикул</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по Артикулу</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>Наименование</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по Наименованию</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>НаименованиеАртикул</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование + Артикул</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопосталение по Наименованию и Артикулу</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>НаименованиеРодитель</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование + Родитель</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопосталение по Наименованию и Родителю</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>НаименованиеРодительАртикул</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование + Родитель + Артикул</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопосталение по Наименованию, Родителю и Артикулу</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>Ссылка</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Внутренний идентфикатор</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по Внутреннему идентификатору</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
				</НастройкаВариантовПоискаОбъектов>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>4</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>Артикул --&gt; Артикул</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>БазоваяЕдиницаИзмерения --&gt; БазоваяЕдиницаИзмерения</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="БазоваяЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<Приемник Имя="БазоваяЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Весовой --&gt; Весовой</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Весовой" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="Весовой" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ВидНоменклатуры --&gt; ВидНоменклатуры</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ВидНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ВидыНоменклатуры"/>
						<Приемник Имя="ВидНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ВидыНоменклатуры"/>
						<КодПравилаКонвертации>ВидыНоменклатуры                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>ЕдиницаДляОтчетов --&gt; ЕдиницаДляОтчетов</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ЕдиницаДляОтчетов" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<Приемник Имя="ЕдиницаДляОтчетов" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>ЕдиницаХраненияОстатков --&gt; ЕдиницаХраненияОстатков</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ЕдиницаХраненияОстатков" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<Приемник Имя="ЕдиницаХраненияОстатков" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>Комплект --&gt; Комплект</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Комплект" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="Комплект" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>ОсновноеИзображение --&gt; ОсновноеИзображение</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="ОсновноеИзображение" Вид="Реквизит" Тип="СправочникСсылка.ХранилищеДополнительнойИнформации"/>
						<Приемник Имя="ОсновноеИзображение" Вид="Реквизит" Тип="СправочникСсылка.ХранилищеДополнительнойИнформации"/>
						<КодПравилаКонвертации>ХранилищеДополнительнойИнформации                 </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>СтранаПроисхождения --&gt; СтранаПроисхождения</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
						<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
						<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>Услуга --&gt; Услуга</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="Услуга" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="Услуга" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование>НоменклатурнаяГруппа --&gt; НоменклатурнаяГруппа</Наименование>
						<Порядок>950</Порядок>
						<Источник Имя="НоменклатурнаяГруппа" Вид="Реквизит" Тип="СправочникСсылка.НоменклатурныеГруппы"/>
						<Приемник Имя="НоменклатурнаяГруппа" Вид="Реквизит" Тип="СправочникСсылка.НоменклатурныеГруппы"/>
						<КодПравилаКонвертации>НоменклатурныеГруппы                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование>ДополнительноеОписаниеНоменклатуры --&gt; ДополнительноеОписание</Наименование>
						<Порядок>1000</Порядок>
						<Источник Имя="ДополнительноеОписаниеНоменклатуры" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ДополнительноеОписание" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование>ВестиУчетПоХарактеристикам --&gt;</Наименование>
						<Порядок>1050</Порядок>
						<Источник Имя="ВестиУчетПоХарактеристикам" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВестиУчетПоХарактеристикам</ИмяПараметраДляПередачи>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>НоменклатурныеГруппы</Код>
				<Наименование>СправочникСсылка.НоменклатурныеГруппы --&gt; СправочникСсылка.НоменклатурныеГруппы</Наименование>
				<Порядок>950</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.НоменклатурныеГруппы</Источник>
				<Приемник>СправочникСсылка.НоменклатурныеГруппы</Приемник>
				<Свойства>
					<Свойство Отключить="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.НоменклатурныеГруппы"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.НоменклатурныеГруппы"/>
						<КодПравилаКонвертации>НоменклатурныеГруппы                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>5</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Организации</Код>
				<Наименование>СправочникСсылка.Организации --&gt; СправочникСсылка.Организации</Наименование>
				<Порядок>1000</Порядок>
				<ПослеВыгрузки>//до выхода УТ 10.3.6 нужно выгружать КИ в правилах
//Выполнить(Алгоритмы.ВыгрузитьКИ);</ПослеВыгрузки>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 И (ЗначениеЗаполнено(СвойстваПоиска["ИНН"]) ИЛИ ЗначениеЗаполнено(СвойстваПоиска["КПП"])) тогда
 
	 СтрокаИменСвойствПоиска = "ИНН, КПП";
	 
ИначеЕсли Не ЗначениеЗаполнено(СвойстваПоиска["ИНН"]) И Не ЗначениеЗаполнено(СвойстваПоиска["КПП"]) И ЗначениеЗаполнено(СвойстваПоиска["НаименованиеПолное"]) Тогда
	 
	 СтрокаИменСвойствПоиска = "НаименованиеПолное";
 
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Организации</Источник>
				<Приемник>СправочникСсылка.Организации</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>КодИМНС --&gt; КодИМНС</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="КодИМНС" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодИМНС" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>КПП --&gt; КПП</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>7</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ОГРН --&gt; ОГРН</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ОГРН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ОГРН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Префикс --&gt; Префикс</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Префикс" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Префикс" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>СвидетельствоДатаВыдачи --&gt; СвидетельствоДатаВыдачи</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="СвидетельствоДатаВыдачи" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="СвидетельствоДатаВыдачи" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>СвидетельствоСерияНомер --&gt; СвидетельствоСерияНомер</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="СвидетельствоСерияНомер" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="СвидетельствоСерияНомер" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>ЮрФизЛицо --&gt; ЮрФизЛицо</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<Приемник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<КодПравилаКонвертации>ЮрФизЛицо                                         </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование> --&gt; РозничнаяТорговляОблагаетсяЕНВД</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="РозничнаяТорговляОблагаетсяЕНВД" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = ОбщегоНазначения.УчетнаяПолитикаНалоговыйУчет("РозничнаяТорговляОблагаетсяЕНВД", Источник.Ссылка, ТекущаяДата());</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Пользователи</Код>
				<Наименование>СправочникСсылка.Пользователи --&gt; СправочникСсылка.Пользователи</Наименование>
				<Порядок>1050</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.Пользователи</Источник>
				<Приемник>СправочникСсылка.Пользователи</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>4</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ФизЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<Приемник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Склады</Код>
				<Наименование>СправочникСсылка.Склады --&gt; СправочникСсылка.Склады</Наименование>
				<Порядок>1100</Порядок>
				<ПередВыгрузкой>Если Не Источник.ЭтоГруппа Тогда
	
	Если ТипЗнч(ВходящиеДанные) = Тип("Структура") И ВходящиеДанные.Свойство("ЭтоСкладЦентральногоОфиса") Тогда
		
		ЭтоСкладЦентральногоОфиса = Ложь;
		ВходящиеДанные.Свойство("ЭтоСкладЦентральногоОфиса", ЭтоСкладЦентральногоОфиса);
		
		Если Не ЭтоСкладЦентральногоОфиса Тогда //этот склад переходит не в склад, а в магазин
			Отказ = Истина;
		КонецЕсли;
		
	Иначе
		
		КодМагазинаИзАлгоритма = "";
		
		СкладДляЗапроса = Источник.Ссылка;
		Выполнить(Алгоритмы.ПолучитьКодМагазинаПоСкладу);
		//в результате получили строку КодМагазинаИзАлгоритма
		
		Если Не ПустаяСтрока(КодМагазинаИзАлгоритма) Тогда //этот склад переходит не в склад, а в магазин
			Отказ = Истина;
		КонецЕсли;
		
	КонецЕсли;
	
КонецЕсли;  

Если (Не Отказ)
	И Параметры.УзелДляОбменаОбъект.мЕстьФильтрПоСкладам И Не Параметры.УзелДляОбменаОбъект.ЭлементВходитВТаблицу(Источник.Ссылка, "Склады", "Склад") Тогда
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>Если Не Объект.ЭтоГруппа Тогда
	
	//если объект перешел по этому правилу, значит это склад ЦентральногоОфиса
	Объект.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса;
	
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Склады</Источник>
				<Приемник>СправочникСсылка.Склады</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>5</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ТипЦенРозничнойТорговли --&gt; ТипЦеныПродажи</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ТипЦенРозничнойТорговли" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
						<Приемник Имя="ТипЦеныПродажи" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
						<КодПравилаКонвертации>ТипыЦенНоменклатуры                               </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>СкладВМагазин</Код>
				<Наименование>СправочникСсылка.Склады --&gt; СправочникСсылка.Магазины</Наименование>
				<Порядок>1150</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.Склады</Источник>
				<Приемник>СправочникСсылка.Магазины</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование> --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Источник;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ТипыЦенНоменклатуры</Код>
				<Наименование>СправочникСсылка.ТипыЦенНоменклатуры --&gt; СправочникСсылка.ТипыЦенНоменклатуры</Наименование>
				<Порядок>1250</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ТипыЦенНоменклатуры</Источник>
				<Приемник>СправочникСсылка.ТипыЦенНоменклатуры</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ФизическиеЛица</Код>
				<Наименование>СправочникСсылка.ФизическиеЛица --&gt; СправочникСсылка.ФизическиеЛица</Наименование>
				<Порядок>1300</Порядок>
				<ПослеЗагрузки>Если НЕ ОбъектНайден 
	И НЕ Объект.ЭтоГруппа Тогда // Только для нового объекта
	
	Разделитель = " ";
	МассивСтрок = Новый Массив();
	Стр = СокрЛП(Объект.Наименование);
	Пока 1 = 1 Цикл
		Поз = Найти(Стр, Разделитель);
		Если Поз = 0 Тогда
			МассивСтрок.Добавить(Стр);
			Прервать;
		КонецЕсли;
		МассивСтрок.Добавить(Лев(Стр, Поз - 1));
		Стр = СокрЛ(Сред(Стр, Поз));
	КонецЦикла;
	
	// Если формат правильные - ФИО
	Если МассивСтрок.Количество()= 3 Тогда
		Если ЗначениеЗаполнено(МассивСтрок[2]) И НЕ ЗначениеЗаполнено(Объект.Пол) Тогда
			Объект.Пол = УправлениеПользователями.ПолучитьПол(МассивСтрок[2]);
		КонецЕсли;
	КонецЕсли;

КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>Если СвойстваПоиска["ЭтоГруппа"] = Истина Тогда
		СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
ИначеЕсли НастройкаПоиска = "Наименование" Тогда
	СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
ИначеЕсли НастройкаПоиска = "НаименованиеДатаРождения" Тогда
	СтрокаИменСвойствПоиска = "Наименование, ДатаРождения, ЭтоГруппа";	
Иначе
	СтрокаИменСвойствПоиска = "Наименование, ДатаРождения, ЭтоГруппа";
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ФизическиеЛица</Источник>
				<Приемник>СправочникСсылка.ФизическиеЛица</Приемник>
				<НастройкаВариантовПоискаОбъектов>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>Наименование</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по наименованию</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>НаименованиеДатаРождения</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование + Дата рождения</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по наименованию и дате рождения</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
				</НастройкаВариантовПоискаОбъектов>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>ДатаРождения --&gt; ДатаРождения</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ДатаРождения" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаРождения" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ФизическиеЛица"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ФизическиеЛица"/>
						<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>7</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ХарактеристикиНоменклатуры</Код>
				<Наименование>СправочникСсылка.ХарактеристикиНоменклатуры --&gt; СправочникСсылка.Номенклатура</Наименование>
				<Порядок>1350</Порядок>
				<ПередВыгрузкой>Если Параметры.УзелДляОбменаОбъект.мЕстьФильтрПоНоменклатуре И Не Параметры.УзелДляОбменаОбъект.ЭлементВходитВТаблицу(Источник.Владелец, "Номенклатура", "Номенклатура") Тогда
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>Если ЗначениеЗаполнено(Объект.Владелец) И Объект.Владелец.ВидНоменклатуры.ИспользованиеХарактеристик=Перечисления.ВариантыВеденияДополнительныхДанныхПоНоменклатуре.ИспользоватьОбщиеДляВидаНоменклатуры Тогда
	
	Объект.Владелец = Объект.Владелец.ВидНоменклатуры;
	
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>ПровестиЗаписьНеЗаписанныхОбъектов();

// Получим и установим значения некоторых параметров
Наименование    = СвойстваПоиска.Получить("Наименование");
Владелец        = СвойстваПоиска.Получить("Владелец");
СсылкаНаОбъект  = Неопределено;
ПрекратитьПоиск = Истина;

// Произведем поиск элемента вручную
Если ЗначениеЗаполнено(Владелец) Тогда
	
	Если Владелец.ВидНоменклатуры.ИспользованиеХарактеристик=Перечисления.ВариантыВеденияДополнительныхДанныхПоНоменклатуре.ИспользоватьОбщиеДляВидаНоменклатуры Тогда
		
		СсылкаНаОбъект = Справочники.ХарактеристикиНоменклатуры.НайтиПоНаименованию(Наименование, Истина,, Владелец.ВидНоменклатуры);
		
	Иначе
		
		СсылкаНаОбъект = Справочники.ХарактеристикиНоменклатуры.НайтиПоНаименованию(Наименование, Истина,, Владелец);
		
	КонецЕсли;
	
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.ХарактеристикиНоменклатуры</Источник>
				<Приемник>СправочникСсылка.ХарактеристикиНоменклатуры</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="Владелец" Вид="Свойство"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ХранилищеДополнительнойИнформации</Код>
				<Наименование>СправочникСсылка.ХранилищеДополнительнойИнформации --&gt; СправочникСсылка.ХранилищеДополнительнойИнфор</Наименование>
				<Порядок>1400</Порядок>
				<ПередВыгрузкой>ТипОбъекта = ТипЗнч(Источник.Объект);

Если ТипОбъекта &lt;&gt; Параметры.ТипСправочникСсылкаНоменклатура 
   И ТипОбъекта &lt;&gt; Параметры.ТипСправочникСсылкаКонтрагенты 
   И ТипОбъекта &lt;&gt; Параметры.ТипСправочникСсылкаОрганизации 
   И ТипОбъекта &lt;&gt; Параметры.ТипСправочникСсылкаСклады 
   И ТипОбъекта &lt;&gt; Параметры.ТипСправочникСсылкаФизическиеЛица Тогда

	Отказ = Истина;
	
ИначеЕсли ТипОбъекта = Параметры.ТипСправочникСсылкаНоменклатура Тогда
	
	Если Параметры.УзелДляОбменаОбъект.мЕстьФильтрПоНоменклатуре И НЕ Параметры.УзелДляОбменаОбъект.ЭлементВходитВТаблицу(Источник.Объект, "Номенклатура", "Номенклатура") Тогда
		
		Отказ = Истина;
		
	КонецЕсли;
	
ИначеЕсли ТипОбъекта = Параметры.ТипСправочникСсылкаКонтрагенты Тогда
	
	Если Параметры.УзелДляОбменаОбъект.мЕстьФильтрПоКонтрагентам И НЕ Параметры.УзелДляОбменаОбъект.ЭлементВходитВТаблицу(Источник.Объект, "Контрагенты", "Контрагент") Тогда
		
		Отказ = Истина;

		
	КонецЕсли;	
	
ИначеЕсли ТипОбъекта = Параметры.ТипСправочникСсылкаСклады Тогда
	
	КодМагазинаИзАлгоритма = "";
	
	СкладДляЗапроса = Источник.Объект;
	Выполнить(Алгоритмы.ПолучитьКодМагазинаПоСкладу);
	
	Если Не ПустаяСтрока(КодМагазинаИзАлгоритма) Тогда //этот склад переходит не в склад, а в магазин
		
		Отказ = Истина;
		
	 ИначеЕсли Параметры.УзелДляОбменаОбъект.мЕстьФильтрПоСкладам И НЕ Параметры.УзелДляОбменаОбъект.ЭлементВходитВТаблицу(Источник.Объект, "Склады", "Склад") Тогда
		
		
	КонецЕсли;

КонецЕсли;</ПередВыгрузкой>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ХранилищеДополнительнойИнформации</Источник>
				<Приемник>СправочникСсылка.ХранилищеДополнительнойИнформации</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>ВидДанных --&gt; ВидДанных</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ВидДанных" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДополнительнойИнформацииОбъектов"/>
						<Приемник Имя="ВидДанных" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДополнительнойИнформацииОбъектов"/>
						<КодПравилаКонвертации>ВидыДополнительнойИнформацииОбъектов              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ИмяФайла --&gt; ИмяФайла</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ИмяФайла" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИмяФайла" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Объект --&gt; Объект</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Объект" Вид="Реквизит"/>
						<Приемник Имя="Объект" Вид="Реквизит"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ТекстФайла --&gt; ТекстФайла</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ТекстФайла" Вид="Реквизит" Тип="ХранилищеЗначения"/>
						<Приемник Имя="ТекстФайла" Вид="Реквизит" Тип="ХранилищеЗначения"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Хранилище --&gt; Хранилище</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Хранилище" Вид="Реквизит" Тип="ХранилищеЗначения"/>
						<Приемник Имя="Хранилище" Вид="Реквизит" Тип="ХранилищеЗначения"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>100</Порядок>
			<Правило>
				<Код>ВозвратТоваровОтПокупателя</Код>
				<Наименование>ДокументСсылка.ВозвратТоваровОтПокупателя --&gt; ДокументСсылка.ВозвратТоваровОтПокупателя</Наименование>
				<Порядок>50</Порядок>
				<ПередВыгрузкой>
Если Источник.ВидПоступления = Перечисления.ВидыПоступленияТоваров.ПоОрдеру Тогда
	
	Для Каждого СтрокаТовары Из Источник.Товары Цикл
		
		Если ЗначениеЗаполнено(СтрокаТовары.ПриходныйОрдер) Тогда
			
			ВыгрузитьПоПравилу(СтрокаТовары.ПриходныйОрдер,,,,"ПриходныйОрдерНаТовары");
			
		КонецЕсли;
		
	КонецЦикла;

КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>Если (Объект.ЭтоНовый() Или Объект.Склад.Пустая() Или Объект.Склад.Магазин &lt;&gt; Объект.Магазин) 
	И НЕ Объект.Магазин.Пустая() Тогда
	
	Объект.Склад = Объект.Магазин.ОсновнойСклад;
	
КонецЕсли;

// Хозяйственная операция
Объект.ХозяйственнаяОперация = Параметры.ХозяйственнаяОперация_ВозвратОтПокупателя;

// если ордерная схема - нужно находить все ПО и расставлять у них реквизит ДокументОснование
Если Объект.ПоступлениеПоОрдернойСхеме Тогда
	
	//на тот случай, если ПО еще не записаны
	ПровестиЗаписьНеЗаписанныхОбъектов();
	
	МассивУникальныхИдентификоторовПриходныхОрдеров = ЗначениеИзСтрокиВнутр(ПараметрыОбъекта["МассивУникальныхИдентификаторовПриходныхОрдеров"]);
	
	Если МассивУникальныхИдентификоторовПриходныхОрдеров.Количество() &lt;&gt; 0 Тогда
		
		//получим ссылку на текущий объект
		Если Объект.ЭтоНовый() Тогда
			
			СсылкаНаОбъект = Объект.ПолучитьСсылкуНового();
			
		Иначе
			
			СсылкаНаОбъект = Объект.Ссылка;
			
		КонецЕсли;
		
		Для Каждого УИд Из МассивУникальныхИдентификоторовПриходныхОрдеров Цикл
			
			ПриходныйОрдерОбъект = Документы.ПриходныйОрдерНаТовары.ПолучитьСсылку(УИд).ПолучитьОбъект();
			
			Если ПриходныйОрдерОбъект &lt;&gt; Неопределено И ПриходныйОрдерОбъект.ДокументОснование &lt;&gt; СсылкаНаОбъект Тогда
				
				ПриходныйОрдерОбъект.ДокументОснование = СсылкаНаОбъект;
				ПриходныйОрдерОбъект.Записать();
				
			КонецЕсли;
			
		КонецЦикла;
		
	КонецЕсли;
	
КонецЕсли;

Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);

Если Объект.ЭтоНовый() Тогда
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.ПолучитьСсылкуНового());
	
Иначе
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.Ссылка);
	
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ВозвратТоваровОтПокупателя</Источник>
				<Приемник>ДокументСсылка.ВозвратТоваровОтПокупателя</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДисконтнаяКарта --&gt; ДисконтнаяКарта</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ДисконтнаяКарта" Вид="Реквизит" Тип="СправочникСсылка.ИнформационныеКарты"/>
						<Приемник Имя="ДисконтнаяКарта" Вид="Реквизит" Тип="СправочникСсылка.ИнформационныеКарты"/>
						<КодПравилаКонвертации>ИнформационныеКарты                               </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>СуммаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>30</Код>
						<Наименование>СкладОрдер --&gt; Магазин</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="СкладОрдер" Вид="Реквизит"/>
						<Приемник Имя="Магазин" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
						<КодПравилаКонвертации>СкладВМагазин                                     </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.ВидПоступления = Перечисления.ВидыПоступленияТоваров.НаСклад Тогда
	СкладДокумента = Источник.СкладОрдер;
Иначе
	//считаем, что склад во всех ПО одинаковый..
	СкладДокумента = Источник.Товары[0].ПриходныйОрдер.Склад;
КонецЕсли;

УстанавливаемыйПараметр = "СкладЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКССкладВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>31</Код>
						<Наименование>СкладОрдер --&gt; Склад</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="СкладОрдер" Вид="Реквизит"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<ПередВыгрузкой>Если Параметры.СкладЯвляетсяМагазином Тогда //склад загрузим потом из магазина
	Отказ = Истина;
Иначе
	
	Если Источник.ВидПоступления = Перечисления.ВидыПоступленияТоваров.НаСклад Тогда
		СкладДокумента = Источник.СкладОрдер;
	Иначе
		//считаем, что склад во всех ПО одинаковый..
		СкладДокумента = Источник.Товары[0].ПриходныйОрдер.Склад;
	КонецЕсли;
	
	Значение = СкладДокумента;

	ИсходящиеДанные = Новый Структура;
	ИсходящиеДанные.Вставить("ЭтоСкладЦентральногоОфиса", Истина);
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>44</Код>
						<Наименование> --&gt; ПоступлениеПоОрдернойСхеме</Наименование>
						<Порядок>700</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ПоступлениеПоОрдернойСхеме" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Источник.ВидПоступления = Перечисления.ВидыПоступленияТоваров.ПоОрдеру;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>17</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>18</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>ПроцентСкидкиНаценки --&gt; ПроцентСкидкиНаценки</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ПроцентСкидкиНаценки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ПроцентСкидкиНаценки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>29</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование>КлючСтроки --&gt; КлючСтроки</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>45</Код>
							<Наименование>ДокументПартии --&gt; ДокументПродажи</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="ДокументПартии" Вид="Реквизит"/>
							<Приемник Имя="ДокументПродажи" Вид="Реквизит"/>
							<ПередВыгрузкой>ТипДокументаПартии = ТипЗнч(ОбъектКоллекции.ДокументПартии);

Если ТипДокументаПартии = Тип("ДокументСсылка.РеализацияТоваровУслуг") Тогда
	
	ИмяПКО = "РеализацияТоваров";
	
ИначеЕсли ТипДокументаПартии = Тип("ДокументСсылка.ОтчетОРозничныхПродажах") Тогда
	
	ИмяПКО = "ОтчетОРозничныхПродажах";
	
Иначе
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>47</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Группа>
						<Код>32</Код>
						<Наименование>СоставНабора --&gt; СоставНабора</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="СоставНабора" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="СоставНабора" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>33</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование>КлючСтроки --&gt; КлючСтроки</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>36</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>37</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>39</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>46</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>42</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>850</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ВозможностьРедактированияВПриемнике = Истина;

Если Источник.ВидПоступления = Перечисления.ВидыПоступленияТоваров.ПоОрдеру Тогда
	
	ВозможностьРедактированияВПриемнике = Ложь;
	
Иначе

	ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
	ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
	ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

	ТабЧастьТовары = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
	ТабЧастьТовары.ИмяТабличнойЧасти = "Товары";
	ТабЧастьТовары.МассивРеквизитов  = Новый Массив();
	ТабЧастьТовары.МассивРеквизитов.Добавить("ДокументПартии");
	ТабЧастьТовары.МассивРеквизитов.Добавить("Качество");
	ТабЧастьТовары.МассивРеквизитов.Добавить("КоличествоМест");
	ТабЧастьТовары.МассивРеквизитов.Добавить("Себестоимость");
	ТабЧастьТовары.МассивРеквизитов.Добавить("СерияНоменклатуры");

	ТабЧастьСоставНабора = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
	ТабЧастьСоставНабора.ИмяТабличнойЧасти = "СоставНабора";
	ТабЧастьСоставНабора.МассивРеквизитов  = Новый Массив();
	ТабЧастьСоставНабора.МассивРеквизитов.Добавить("Качество");
	ТабЧастьСоставНабора.МассивРеквизитов.Добавить("СерияНоменклатуры");

	Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);
	
КонецЕсли;


Значение = Строка(ВозможностьРедактированияВПриемнике);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>43</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>900</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>МассивУникальныхИдентификаторовПриходныхОрдеров</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Массив = Новый Массив;

Если Источник.ВидПоступления = Перечисления.ВидыПоступленияТоваров.ПоОрдеру Тогда
	
	Для Каждого СтрокаТовары Из Источник.Товары Цикл
		
		УИд = СтрокаТовары.ПриходныйОрдер.УникальныйИдентификатор();
		
		Если Массив.Найти(УИд) = Неопределено Тогда
			Массив.Добавить(УИд);
		КонецЕсли;
		
	КонецЦикла;
	
КонецЕсли;


Значение = ЗначениеВСтрокуВнутр(Массив);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВозвратТоваровПоставщику</Код>
				<Наименование>ДокументСсылка.ВозвратТоваровПоставщику --&gt; ДокументСсылка.ВозвратТоваровПоставщику</Наименование>
				<Порядок>100</Порядок>
				<ПослеЗагрузки>
Если Объект.ЭтоНовый() Тогда
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.ПолучитьСсылкуНового());
	
Иначе
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.Ссылка);
	
КонецЕсли;

Если (Объект.ЭтоНовый() Или Объект.Склад.Пустая() Или Объект.Склад.Магазин &lt;&gt; Объект.Магазин) 
	И НЕ Объект.Магазин.Пустая() Тогда
	Объект.Склад = Объект.Магазин.ОсновнойСклад;
КонецЕсли;

// Хозяйственная операция
Объект.ХозяйственнаяОперация = Параметры.ХозяйственнаяОперация_ВозвратПоставщику;

Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ВозвратТоваровПоставщику</Источник>
				<Приемник>ДокументСсылка.ВозвратТоваровПоставщику</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Магазин" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
						<КодПравилаКонвертации>СкладВМагазин                                     </КодПравилаКонвертации>
						<ПередВыгрузкой>СкладДокумента = Источник.Склад;
УстанавливаемыйПараметр = "СкладЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКССкладВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Параметры.СкладЯвляетсяМагазином Тогда //склад загрузим потом из магазина
	
	Отказ = Истина;
	
Иначе

	ИсходящиеДанные = Новый Структура;
	ИсходящиеДанные.Вставить("ЭтоСкладЦентральногоОфиса", Истина);
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>СуммаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>12</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>13</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>ДокументПоступления --&gt; ДокументЗакупки</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="ДокументПоступления" Вид="Реквизит"/>
							<Приемник Имя="ДокументЗакупки" Вид="Реквизит" Тип="ДокументСсылка.ПоступлениеТоваров"/>
							<КодПравилаКонвертации>ПоступлениеТоваров                                </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ТипЗнч(ОбъектКоллекции.ДокументПоступления) &lt;&gt; Тип("ДокументСсылка.ПоступлениеТоваровУслуг") Тогда
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>22</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>700</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ВозможностьРедактированияВПриемнике = Истина;

//Для Каждого СтрокаТовары Из Источник.Товары Цикл
//	
//	Если СтрокаТовары.Склад &lt;&gt; Источник.Склад Тогда
//		ВозможностьРедактированияВПриемнике = Ложь;
//		Прервать;
//	КонецЕсли;
//	
//КонецЦикла;

Если ВозможностьРедактированияВПриемнике Тогда
	
	ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
	ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
	ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

	ТабЧастьТовары = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
	ТабЧастьТовары.ИмяТабличнойЧасти = "Товары";
	ТабЧастьТовары.МассивРеквизитов  = Новый Массив();
	ТабЧастьТовары.МассивРеквизитов.Добавить("ДокументПоступления");
	ТабЧастьТовары.МассивРеквизитов.Добавить("ЕдиницаИзмеренияМест");
	ТабЧастьТовары.МассивРеквизитов.Добавить("Заказ");
	ТабЧастьТовары.МассивРеквизитов.Добавить("Качество");
	ТабЧастьТовары.МассивРеквизитов.Добавить("КоличествоМест");
	ТабЧастьТовары.МассивРеквизитов.Добавить("СерияНоменклатуры");

КонецЕсли;


Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);


Значение = ВозможностьРедактированияВПриемнике;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование> --&gt; РеализацияПоОрдернойСхеме</Наименование>
						<Порядок>750</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="РеализацияПоОрдернойСхеме" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Источник.ВидПередачи = Перечисления.ВидыПередачиТоваров.ПоОрдеру;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВнутреннееПеремещениеНаличныхДенежныхСредств</Код>
				<Наименование>ДокументСсылка.ВнутреннееПеремещениеНаличныхДенежныхСредств --&gt; ДокументСсылка.ВнутреннееПеремещение</Наименование>
				<Порядок>150</Порядок>
				<ПослеЗагрузки>
Если (Объект.ЭтоНовый() Или Объект.Касса.Пустая() Или Объект.Магазин &lt;&gt; Объект.Касса.Магазин)
	И (Не Объект.Магазин.Пустая()) Тогда
	
	// менять кассу на кассу по умолчанию нужно только в том случае, если
	//был поменян магазин
	Объект.Касса = Объект.Магазин.ОсновнаяКасса;
	
КонецЕсли;          

Если (Объект.ЭтоНовый() Или Объект.КассаПолучатель.Пустая() Или Объект.МагазинПолучатель &lt;&gt; Объект.КассаПолучатель.Магазин)
	И Не Объект.МагазинПолучатель.Пустая() Тогда
	
	// менять кассу на кассу по умолчанию нужно только в том случае, если
	//был поменян магазин
	Объект.КассаПолучатель = Объект.МагазинПолучатель.ОсновнаяКасса;
	
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ВнутреннееПеремещениеНаличныхДенежныхСредств</Источник>
				<Приемник>ДокументСсылка.ВнутреннееПеремещениеНаличныхДенежныхСредств</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Оплачено --&gt; Оплачено</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Оплачено" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="Оплачено" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Касса --&gt; Магазин</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Касса" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<Приемник Имя="Магазин" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
						<КодПравилаКонвертации>КассаВМагазин                                     </КодПравилаКонвертации>
						<ПередВыгрузкой>КассаДокумента = Источник.Касса;
УстанавливаемыйПараметр = "КассаОтправительЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКСКассаВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Касса --&gt; Касса</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Касса" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<Приемник Имя="Касса" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<КодПравилаКонвертации>Кассы                                             </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Параметры.КассаОтправительЯвляетсяМагазином Тогда
	Отказ = Истина;
КонецЕсли;

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ЭтоКассаЦентральногоОфиса", Истина);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>КассаПолучатель --&gt; МагазинПолучатель</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="КассаПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<Приемник Имя="МагазинПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
						<КодПравилаКонвертации>КассаВМагазин                                     </КодПравилаКонвертации>
						<ПередВыгрузкой>КассаДокумента = Источник.КассаПолучатель;
УстанавливаемыйПараметр = "КассаПолучательЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКСКассаВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>КассаПолучатель --&gt; КассаПолучатель</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="КассаПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<Приемник Имя="КассаПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<КодПравилаКонвертации>Кассы                                             </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Параметры.КассаПолучательЯвляетсяМагазином Тогда
	Отказ = Истина;
КонецЕсли;

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ЭтоКассаЦентральногоОфиса", Истина);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВнутреннийЗаказ</Код>
				<Наименование>ДокументСсылка.ВнутреннийЗаказ --&gt; ДокументСсылка.ВнутреннийЗаказ</Наименование>
				<Порядок>200</Порядок>
				<ПослеЗагрузки>
Если Объект.ЭтоНовый() Тогда
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.ПолучитьСсылкуНового());
	
Иначе
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.Ссылка);
	
КонецЕсли;

Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ВнутреннийЗаказ</Источник>
				<Приемник>ДокументСсылка.ВнутреннийЗаказ</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДатаОтгрузки --&gt; ДатаОтгрузки</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ДатаОтгрузки" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаОтгрузки" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>Заказчик --&gt; Магазин</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Заказчик" Вид="Реквизит"/>
						<Приемник Имя="Магазин" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
						<КодПравилаКонвертации>СкладВМагазин                                     </КодПравилаКонвертации>
						<ПередВыгрузкой>СкладДокумента = Источник.Заказчик;
УстанавливаемыйПараметр = "СкладЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКССкладВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>8</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>9</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>15</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>550</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ВозможностьРедактированияВПриемнике = Истина;

ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

ТабЧастьТовары = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
ТабЧастьТовары.ИмяТабличнойЧасти = "Товары";
ТабЧастьТовары.МассивРеквизитов  = Новый Массив();

ТабЧастьТовары.МассивРеквизитов.Добавить("ЕдиницаИзмеренияМест");
ТабЧастьТовары.МассивРеквизитов.Добавить("КоличествоМест");
ТабЧастьТовары.МассивРеквизитов.Добавить("Размещение");

Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);


Значение = Строка(ВозможностьРедактированияВПриемнике);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ИнвентаризацияТоваров</Код>
				<Наименование>ДокументСсылка.ИнвентаризацияТоваровНаСкладе --&gt; ДокументСсылка.ИнвентаризацияТоваров</Наименование>
				<Порядок>250</Порядок>
				<ПослеЗагрузки>

Если Объект.ЭтоНовый() Тогда
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.ПолучитьСсылкуНового());
	
Иначе
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.Ссылка);
	
КонецЕсли;

Если (Объект.ЭтоНовый() Или Объект.Склад.Пустая() Или Объект.Склад.Магазин &lt;&gt; Объект.Магазин) 
	И НЕ Объект.Магазин.Пустая() Тогда
	Объект.Склад = Объект.Магазин.ОсновнойСклад;
КонецЕсли;

Если Объект.ЭтоНовый() Тогда
	СсылкаНаОбъект = Объект.ПолучитьСсылкуНового();
Иначе
	СсылкаНаОбъект = Объект.Ссылка;
КонецЕсли;

Объект.Проведен = Истина;

ЗаписатьИнформациюОбОтложенныхДвижениях(СсылкаНаОбъект, Объект.Дата);

Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ИнвентаризацияТоваровНаСкладе</Источник>
				<Приемник>ДокументСсылка.ИнвентаризацияТоваров</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>Склад --&gt; Магазин</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Магазин" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
						<КодПравилаКонвертации>СкладВМагазин                                     </КодПравилаКонвертации>
						<ПередВыгрузкой>СкладДокумента = Источник.Склад;
УстанавливаемыйПараметр = "СкладЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКССкладВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Параметры.СкладЯвляетсяМагазином Тогда //склад загрузим потом из магазина
	Отказ = Истина;
КонецЕсли;

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ЭтоСкладЦентральногоОфиса", Истина);</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>7</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>8</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>КоличествоУчет --&gt; КоличествоУчет</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="КоличествоУчет" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КоличествоУчет" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>СуммаУчет --&gt; СуммаУчет</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СуммаУчет" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаУчет" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>17</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>450</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ВозможностьРедактированияВПриемнике = Истина;

ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

ТабЧастьТовары = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
ТабЧастьТовары.ИмяТабличнойЧасти = "Товары";
ТабЧастьТовары.МассивРеквизитов  = Новый Массив();

ТабЧастьТовары.МассивРеквизитов.Добавить("ЕдиницаИзмеренияМест");
ТабЧастьТовары.МассивРеквизитов.Добавить("Качество");
ТабЧастьТовары.МассивРеквизитов.Добавить("КоличествоМест");
ТабЧастьТовары.МассивРеквизитов.Добавить("СерияНоменклатуры");
ТабЧастьТовары.МассивРеквизитов.Добавить("СуммаРегл");
ТабЧастьТовары.МассивРеквизитов.Добавить("ЦенаВРознице");

Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);


Значение = Строка(ВозможностьРедактированияВПриемнике);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КомплектацияНоменклатуры</Код>
				<Наименование>ДокументСсылка.КомплектацияНоменклатуры --&gt; ДокументСсылка.КомплектацияНоменклатуры</Наименование>
				<Порядок>300</Порядок>
				<ПослеЗагрузки>
Если Объект.ЭтоНовый() Тогда
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.ПолучитьСсылкуНового());
	
Иначе
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.Ссылка);
	
КонецЕсли;


// Необходимо произвести корректировку реквизита "Характеристика номенклатуры"
ПараметрНоменклатура               = Объект.Номенклатура;
ПараметрХарактеристикаНоменклатуры = Объект.ХарактеристикаНоменклатуры;
Выполнить(Алгоритмы.ПолучитьНеНазначеннуюХарактеристикуНоменклатуры);

// Обновляем значение реквизита "Характеристика номенклатуры"
Если ЗначениеЗаполнено(ПараметрХарактеристикаНоменклатуры) Тогда
	Объект.ХарактеристикаНоменклатуры = ПараметрХарактеристикаНоменклатуры;
КонецЕсли;

Если (Объект.ЭтоНовый() Или Объект.Склад.Пустая() Или Объект.Склад.Магазин &lt;&gt; Объект.Магазин) 
	И НЕ Объект.Магазин.Пустая() Тогда
	Объект.Склад = Объект.Магазин.ОсновнойСклад;
КонецЕсли;

Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.КомплектацияНоменклатуры</Источник>
				<Приемник>ДокументСсылка.КомплектацияНоменклатуры</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>ВидОперации --&gt; ВидОперации</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийКомплектацияНоменклатуры"/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийКомплектацияНоменклатуры"/>
						<КодПравилаКонвертации>ВидыОперацийКомплектацияНоменклатуры              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Количество --&gt; Количество</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>Склад --&gt; Магазин</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Магазин" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
						<КодПравилаКонвертации>СкладВМагазин                                     </КодПравилаКонвертации>
						<ПередВыгрузкой>СкладДокумента = Источник.Склад;
УстанавливаемыйПараметр = "СкладЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКССкладВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Параметры.СкладЯвляетсяМагазином Тогда //склад загрузим потом из магазина
	Отказ = Истина;
КонецЕсли;

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ЭтоСкладЦентральногоОфиса", Истина);</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>13</Код>
						<Наименование>Комплектующие --&gt; Комплектующие</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Комплектующие" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Комплектующие" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>14</Код>
							<Наименование>ДоляСтоимости --&gt; ДоляСтоимости</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ДоляСтоимости" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ДоляСтоимости" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>21</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>750</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ВозможностьРедактированияВПриемнике = Истина;

ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

ТабЧастьКомплектующие = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
ТабЧастьКомплектующие.ИмяТабличнойЧасти = "Комплектующие";
ТабЧастьКомплектующие.МассивРеквизитов  = Новый Массив();

ТабЧастьКомплектующие.МассивРеквизитов.Добавить("СерияНоменклатуры");

Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);


Значение = Строка(ВозможностьРедактированияВПриемнике);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
						<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
						<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ОплатаОтПокупателяПлатежнойКартой</Код>
				<Наименование>ДокументСсылка.ОплатаОтПокупателяПлатежнойКартой --&gt; ДокументСсылка.ОплатаОтПокупателяПлатежнойКарто</Наименование>
				<Порядок>350</Порядок>
				<ПослеЗагрузки>Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ОплатаОтПокупателяПлатежнойКартой</Источник>
				<Приемник>ДокументСсылка.ОплатаОтПокупателяПлатежнойКартой</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>ВидОперации --&gt; ВидОперации</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийОплатаОтПокупателяПлатежнойКартой"/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийОплатаОтПокупателяПлатежнойКартой"/>
						<КодПравилаКонвертации>ВидыОперацийОплатаОтПокупателяПлатежнойКартой     </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ВидОплаты --&gt; ВидОплаты</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
						<Приемник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
						<КодПравилаКонвертации>ВидыОплатЧекаККМ                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ДоговорЭквайринга --&gt; ДоговорЭквайринга</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ДоговорЭквайринга" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыЭквайринга"/>
						<Приемник Имя="ДоговорЭквайринга" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыЭквайринга"/>
						<КодПравилаКонвертации>ДоговорыЭквайринга                                </КодПравилаКонвертации>
						<ПриВыгрузке>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("Организация", Источник.Организация);</ПриВыгрузке>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ДокументОснование --&gt; ДокументОснование</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ДокументОснование" Вид="Реквизит"/>
						<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>НомерЧекаККМ --&gt; НомерЧекаККМ</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="НомерЧекаККМ" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="НомерЧекаККМ" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>ПроцентТорговойУступки --&gt; ПроцентТорговойУступки</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="ПроцентТорговойУступки" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="ПроцентТорговойУступки" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>СуммаТорговойУступки --&gt; СуммаТорговойУступки</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="СуммаТорговойУступки" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаТорговойУступки" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>Эквайрер --&gt; Эквайрер</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="Эквайрер" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Эквайрер" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Группа>
						<Код>18</Код>
						<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>19</Код>
							<Наименование>ДокументРасчетовСКонтрагентом --&gt; ДокументРасчетовСКонтрагентом</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ДокументРасчетовСКонтрагентом" Вид="Реквизит"/>
							<Приемник Имя="ДокументРасчетовСКонтрагентом" Вид="Реквизит"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>СуммаПлатежа --&gt; СуммаПлатежа</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>23</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>950</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ОприходованиеТоваров</Код>
				<Наименование>ДокументСсылка.ОприходованиеТоваров --&gt; ДокументСсылка.ОприходованиеТоваров</Наименование>
				<Порядок>400</Порядок>
				<ПослеЗагрузки>
Если Объект.ЭтоНовый() Тогда
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.ПолучитьСсылкуНового());
	
Иначе
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.Ссылка);
	
КонецЕсли;


Если (Объект.ЭтоНовый() 
	Или Объект.Склад.Пустая() 
	Или Объект.Склад.Магазин &lt;&gt; Объект.Магазин) 
	
	И НЕ Объект.Магазин.Пустая() Тогда
	
	Объект.Склад = Объект.Магазин.ОсновнойСклад;
	
КонецЕсли;

// Хозяйственная операция
Если ЗначениеЗаполнено(Объект.ДокументОснование) Тогда
	Объект.ХозяйственнаяОперация = Параметры.ХозяйственнаяОперация_ОприходованиеПоИнвентаризации;
Иначе
	Объект.ХозяйственнаяОперация = Параметры.ХозяйственнаяОперация_Оприходование;
КонецЕсли;	


Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ОприходованиеТоваров</Источник>
				<Приемник>ДокументСсылка.ОприходованиеТоваров</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ИнвентаризацияТоваровНаСкладе --&gt; ДокументОснование</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ИнвентаризацияТоваровНаСкладе" Вид="Реквизит" Тип="ДокументСсылка.ИнвентаризацияТоваровНаСкладе"/>
						<Приемник Имя="ДокументОснование" Вид="Реквизит" Тип="ДокументСсылка.ИнвентаризацияТоваров"/>
						<КодПравилаКонвертации>ИнвентаризацияТоваров                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>Склад --&gt; Магазин</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Магазин" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
						<КодПравилаКонвертации>СкладВМагазин                                     </КодПравилаКонвертации>
						<ПередВыгрузкой>СкладДокумента = Источник.Склад;
УстанавливаемыйПараметр = "СкладЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКССкладВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Параметры.СкладЯвляетсяМагазином Тогда //склад загрузим потом из магазина
	Отказ = Истина;
КонецЕсли;

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ЭтоСкладЦентральногоОфиса", Истина);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Группа>
						<Код>10</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>11</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>18</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>600</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ВозможностьРедактированияВПриемнике = Истина;

ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

ТабЧастьТовары = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
ТабЧастьТовары.ИмяТабличнойЧасти = "Товары";
ТабЧастьТовары.МассивРеквизитов  = Новый Массив();

ТабЧастьТовары.МассивРеквизитов.Добавить("ЕдиницаИзмеренияМест");
ТабЧастьТовары.МассивРеквизитов.Добавить("Качество");
ТабЧастьТовары.МассивРеквизитов.Добавить("КоличествоМест");
ТабЧастьТовары.МассивРеквизитов.Добавить("ПроцентРозничнойНаценки");
ТабЧастьТовары.МассивРеквизитов.Добавить("СерияНоменклатуры");
ТабЧастьТовары.МассивРеквизитов.Добавить("СуммаРегл");
ТабЧастьТовары.МассивРеквизитов.Добавить("ЦенаВРознице");

Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);


Значение = Строка(ВозможностьРедактированияВПриемнике);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ОтчетОРозничныхПродажах</Код>
				<Наименование>ДокументСсылка.ОтчетОРозничныхПродажах --&gt; ДокументСсылка.ОтчетОРозничныхПродажах</Наименование>
				<Порядок>500</Порядок>
				<ПослеЗагрузки>Если Объект.ЭтоНовый() Тогда
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.ПолучитьСсылкуНового());
	
Иначе
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.Ссылка);
	
КонецЕсли;

	
Если (Объект.ЭтоНовый() Или Объект.КассаККМ.Пустая() Или Объект.КассаККМ.Магазин &lt;&gt; Объект.Магазин)
	И (Не Объект.Магазин.Пустая()) Тогда
	
	// менять кассу на кассу по умолчанию нужно только в том случае, если
	//был поменян магазин
	Объект.КассаККМ = Объект.Магазин.ОсновнаяКасса;
	
КонецЕсли;

Для Каждого СтрокаТовары Из Объект.Товары Цикл
	СтрокаТовары.Склад = ОбработкаТабличныхЧастей.ПолучитьСкладПродажиНоменклатуры(СтрокаТовары.Номенклатура, Объект.КассаККМ);
КонецЦикла;

Для Каждого СтрокаСоставНабора Из Объект.СоставНабора Цикл
	СтрокаСоставНабора.Склад = ОбработкаТабличныхЧастей.ПолучитьСкладПродажиНоменклатуры(СтрокаСоставНабора.Номенклатура, Объект.КассаККМ);
КонецЦикла;

Для Каждого СтрокаТовары Из Объект.ВозвращенныеТовары Цикл
	СтрокаТовары.ХозяйственнаяОперация = Параметры.ХозяйственнаяОперация_ВозвратОтПокупателя;
КонецЦикла;

Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ОтчетОРозничныхПродажах</Источник>
				<Приемник>ДокументСсылка.ОтчетОРозничныхПродажах</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДоговорЭквайринга --&gt; ДоговорЭквайринга</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ДоговорЭквайринга" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыЭквайринга"/>
						<Приемник Имя="ДоговорЭквайринга" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыЭквайринга"/>
						<КодПравилаКонвертации>ДоговорыЭквайринга                                </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>СуммаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Эквайрер --&gt; Эквайрер</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Эквайрер" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Эквайрер" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>42</Код>
						<Наименование>Склад --&gt; Магазин</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Магазин" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
						<КодПравилаКонвертации>СкладВМагазин                                     </КодПравилаКонвертации>
						<ПередВыгрузкой>СкладДокумента = Источник.Склад;
УстанавливаемыйПараметр = "СкладЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКССкладВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>КассаККМ --&gt; КассаККМ</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="КассаККМ" Вид="Реквизит" Тип="СправочникСсылка.КассыККМ"/>
						<Приемник Имя="КассаККМ" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<ПередВыгрузкой>Если Параметры.СкладЯвляетсяМагазином Тогда
	Отказ = Истина;
КонецЕсли;

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ЭтоКассаЦентральногоОфиса", Истина);</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>13</Код>
						<Наименование>ОплатаБанковскимиКредитами --&gt; ОплатаБанковскимиКредитами</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="ОплатаБанковскимиКредитами" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ОплатаБанковскимиКредитами" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>14</Код>
							<Наименование>БанкКредитор --&gt; БанкКредитор</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="БанкКредитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="БанкКредитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>ВидОплаты --&gt; ВидОплаты</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
							<Приемник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
							<КодПравилаКонвертации>ВидыОплатЧекаККМ                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>ПроцентБанковскойКомиссии --&gt; ПроцентБанковскойКомиссии</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ПроцентБанковскойКомиссии" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ПроцентБанковскойКомиссии" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>СуммаБанковскойКомиссии --&gt; СуммаБанковскойКомиссии</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СуммаБанковскойКомиссии" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаБанковскойКомиссии" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Группа>
						<Код>19</Код>
						<Наименование>ОплатаПлатежнымиКартами --&gt; ОплатаПлатежнымиКартами</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="ОплатаПлатежнымиКартами" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ОплатаПлатежнымиКартами" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>20</Код>
							<Наименование>ВидОплаты --&gt; ВидОплаты</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
							<Приемник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
							<КодПравилаКонвертации>ВидыОплатЧекаККМ                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>ПроцентТорговойУступки --&gt; ПроцентТорговойУступки</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ПроцентТорговойУступки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ПроцентТорговойУступки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>СуммаТорговойУступки --&gt; СуммаТорговойУступки</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="СуммаТорговойУступки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаТорговойУступки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Группа>
						<Код>24</Код>
						<Наименование>ПродажиПоДисконтнымКартам --&gt; ПродажиПоДисконтнымКартам</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="ПродажиПоДисконтнымКартам" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ПродажиПоДисконтнымКартам" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>25</Код>
							<Наименование>ВладелецДисконтнойКарты --&gt; ВладелецДисконтнойКарты</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ВладелецДисконтнойКарты" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="ВладелецДисконтнойКарты" Вид="Реквизит"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>ДисконтнаяКарта --&gt; ДисконтнаяКарта</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ДисконтнаяКарта" Вид="Реквизит" Тип="СправочникСсылка.ИнформационныеКарты"/>
							<Приемник Имя="ДисконтнаяКарта" Вид="Реквизит" Тип="СправочникСсылка.ИнформационныеКарты"/>
							<КодПравилаКонвертации>ИнформационныеКарты                               </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Группа>
						<Код>28</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>29</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>31</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>33</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование>ПроцентСкидкиНаценки --&gt; ПроцентСкидкиНаценки</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ПроцентСкидкиНаценки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ПроцентСкидкиНаценки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>37</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>38</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>39</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>52</Код>
							<Наименование>КлючСтроки --&gt; КлючСтроки</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>55</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Группа>
						<Код>43</Код>
						<Наименование>СоставНабора --&gt; СоставНабора</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="СоставНабора" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="СоставНабора" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>44</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>46</Код>
							<Наименование>КлючСтроки --&gt; КлючСтроки</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>47</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>48</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>50</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>54</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>53</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>950</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ВозможностьРедактированияВПриемнике = Истина;

ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

ТабЧастьТовары = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
ТабЧастьТовары.ИмяТабличнойЧасти = "Товары";
ТабЧастьТовары.МассивРеквизитов  = Новый Массив();
ТабЧастьТовары.МассивРеквизитов.Добавить("СерияНоменклатуры");

ТабЧастьОплатаБанковскимиКредитами = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
ТабЧастьОплатаБанковскимиКредитами.ИмяТабличнойЧасти = "ОплатаБанковскимиКредитами";
ТабЧастьОплатаБанковскимиКредитами.МассивРеквизитов  = Новый Массив();
ТабЧастьОплатаБанковскимиКредитами.МассивРеквизитов.Добавить("ДоговорВзаиморасчетовБанкаКредитора");

ТабЧастьСоставНабора = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
ТабЧастьСоставНабора.ИмяТабличнойЧасти = "СоставНабора";
ТабЧастьСоставНабора.МассивРеквизитов  = Новый Массив();
ТабЧастьСоставНабора.МассивРеквизитов.Добавить("Качество");
ТабЧастьСоставНабора.МассивРеквизитов.Добавить("СерияНоменклатуры");


Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);


Значение = Строка(ВозможностьРедактированияВПриемнике);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПеремещениеТоваров</Код>
				<Наименование>ДокументСсылка.ПеремещениеТоваров --&gt; ДокументСсылка.ПеремещениеТоваров</Наименование>
				<Порядок>550</Порядок>
				<ПередВыгрузкой>
Если Источник.ВидОперации = Перечисления.ВидыОперацийПеремещениеТоваров.ТоварыПродукция Тогда

	Запросы.НеобходимостьИспользованияОрдернойСхемы.УстановитьПараметр("Склад1",Источник.СкладОтправитель);
	Запросы.НеобходимостьИспользованияОрдернойСхемы.УстановитьПараметр("Склад2",Источник.СкладПолучатель);
	Запросы.НеобходимостьИспользованияОрдернойСхемы.УстановитьПараметр("УзелОбмена",УзелДляОбмена);
	
	Выборка = Запросы.НеобходимостьИспользованияОрдернойСхемы.Выполнить().Выбрать();
	
	Если Выборка.Следующий() Тогда
		
		Если Выборка.РезультатЗапроса  Тогда
			Отказ = Истина;
						
			КомментарийПриВыгрузкеДанных = КомментарийПриВыгрузкеДанных + Символы.ПС +
			"Для документа ""Перемещение товаров"" №" + Источник.Номер + " неправильно задан вид операции
			|Документ не будет выгружен. Измените вид операции!";
			
		КонецЕсли;
		
	КонецЕсли;
	
	
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>
Если Объект.ЭтоНовый() Тогда
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.ПолучитьСсылкуНового());
	
Иначе
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.Ссылка);
	
КонецЕсли;

ИспользованиеОрдернойСхемы = ?(ПараметрыОбъекта["ИспользованиеОрдернойСхемы"] = Неопределено, Ложь, ПараметрыОбъекта["ИспользованиеОрдернойСхемы"]);

Если (Объект.ЭтоНовый() Или Объект.СкладОтправитель.Пустая() Или Объект.СкладОтправитель.Магазин &lt;&gt; Объект.МагазинОтправитель) 
	И НЕ Объект.МагазинОтправитель.Пустая() Тогда
	Объект.СкладОтправитель = Объект.МагазинОтправитель.ОсновнойСклад;
КонецЕсли;

Если (Объект.ЭтоНовый() Или Объект.СкладПолучатель.Пустая() Или Объект.СкладПолучатель.Магазин &lt;&gt; Объект.МагазинПолучатель) 
	И НЕ Объект.МагазинПолучатель.Пустая() Тогда
	Объект.СкладПолучатель = Объект.МагазинПолучатель.ОсновнойСклад;
КонецЕсли;

Если ИспользованиеОрдернойСхемы И ЗначениеЗаполнено(Объект.СкладОтправитель) 
	И Объект.СкладОтправитель.ТипСклада &lt;&gt; Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	
	Объект.РеализацияПоОрдернойСхеме = Истина;
Иначе
	Объект.РеализацияПоОрдернойСхеме = Ложь;
КонецЕсли;

Если ИспользованиеОрдернойСхемы И ЗначениеЗаполнено(Объект.СкладПолучатель) 
	И Объект.СкладПолучатель.ТипСклада &lt;&gt; Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	
	Объект.ПоступлениеПоОрдернойСхеме = Истина;
Иначе
	Объект.ПоступлениеПоОрдернойСхеме = Ложь;
КонецЕсли;


Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПеремещениеТоваров</Источник>
				<Приемник>ДокументСсылка.ПеремещениеТоваров</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>СкладОтправитель --&gt; МагазинОтправитель</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="СкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="МагазинОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
						<КодПравилаКонвертации>СкладВМагазин                                     </КодПравилаКонвертации>
						<ПередВыгрузкой>СкладДокумента = Источник.СкладОтправитель;
УстанавливаемыйПараметр = "СкладОтправительЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКССкладВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>СкладОтправитель --&gt; СкладОтправитель</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="СкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Параметры.СкладОтправительЯвляетсяМагазином Тогда //склад загрузим потом из магазина
	Отказ = Истина;
КонецЕсли;

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ЭтоСкладЦентральногоОфиса", Истина);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>СкладПолучатель --&gt; МагазинПолучатель</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="МагазинПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
						<КодПравилаКонвертации>СкладВМагазин                                     </КодПравилаКонвертации>
						<ПередВыгрузкой>СкладДокумента = Источник.СкладПолучатель;
УстанавливаемыйПараметр = "СкладПолучательЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКССкладВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>СкладПолучатель --&gt; СкладПолучатель</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Параметры.СкладПолучательЯвляетсяМагазином Тогда //склад загрузим потом из магазина
	Отказ = Истина;
КонецЕсли;

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ЭтоСкладЦентральногоОфиса", Истина);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>600</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ИспользованиеОрдернойСхемы</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.ВидОперации = Перечисления.ВидыОперацийПеремещениеТоваров.ТоварыПродукцияПоОрдерам;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>12</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>13</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование> --&gt; Сумма</Наименование>
							<Порядок>300</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Цена * ОбъектКоллекции.Количество;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>23</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>700</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ВозможностьРедактированияВПриемнике = Истина;

ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

ТабЧастьТовары = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
ТабЧастьТовары.ИмяТабличнойЧасти = "Товары";
ТабЧастьТовары.МассивРеквизитов  = Новый Массив();

ТабЧастьТовары.МассивРеквизитов.Добавить("ВнутреннийЗаказ");
ТабЧастьТовары.МассивРеквизитов.Добавить("ЕдиницаИзмеренияМест");
ТабЧастьТовары.МассивРеквизитов.Добавить("Качество");
ТабЧастьТовары.МассивРеквизитов.Добавить("КоличествоМест");
ТабЧастьТовары.МассивРеквизитов.Добавить("СерияНоменклатуры");

Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);


Значение = Строка(ВозможностьРедактированияВПриемнике);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПоступлениеТоваров</Код>
				<Наименование>ДокументСсылка.ПоступлениеТоваровУслуг --&gt; ДокументСсылка.ПоступлениеТоваров</Наименование>
				<Порядок>600</Порядок>
				<ПередВыгрузкой>
МассивСкладов = Параметры.УзелДляОбменаОбъект.СоответствияМагазиновИСкладов.Выгрузить().ВыгрузитьКолонку("СкладМагазина");

Если ТипЗнч(Источник.СкладОрдер) = Параметры.ТипСправочникСсылкаСклады Тогда

	Если МассивСкладов.Найти(Источник.СкладОрдер) = Неопределено Тогда
		
		Отказ = Истина;
		
	КонецЕсли;	
	
Иначе

	ТаблицаПриходныхОрдеров = Источник.Товары.Выгрузить(,"ПриходныйОрдер");
	ТаблицаПриходныхОрдеров.Свернуть("ПриходныйОрдер");
	
	ВыгружатьПоОрдерам = Ложь;
	
	Для каждого СтрокаТаблицыПриходныхОрдеров Из ТаблицаПриходныхОрдеров Цикл
		
		Если МассивСкладов.Найти(СтрокаТаблицыПриходныхОрдеров.ПриходныйОрдер.Склад) &lt;&gt; Неопределено Тогда

			ВыгружатьПоОрдерам = Истина;
          			
		КонецЕсли;	
		
	КонецЦикла;	

	Отказ = НЕ ВыгружатьПоОрдерам;			

	
КонецЕсли;	

Если Источник.ВидПоступления = Перечисления.ВидыПоступленияТоваров.ПоОрдеру И ЗначениеЗаполнено(Источник.СкладОрдер) Тогда
	
	ВыгрузитьПоПравилу(Источник.СкладОрдер, ,,,"ПриходныйОрдерНаТовары");
	
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>

//менять склад нужно не всегда
Если (Объект.ЭтоНовый() Или Объект.Склад.Пустая() Или Объект.Склад.Магазин &lt;&gt; Объект.Магазин) 
	И НЕ Объект.Магазин.Пустая() Тогда
	Объект.Склад = Объект.Магазин.ОсновнойСклад;
КонецЕсли;

// если ордерная схема - нужно находить все ПО и расставлять у них реквизит ДокументОснование
Если Объект.ПоступлениеПоОрдернойСхеме Тогда
	
	//на тот случай, если ПО еще не записаны
	ПровестиЗаписьНеЗаписанныхОбъектов();
	
	МассивУникальныхИдентификоторовПриходныхОрдеров = ЗначениеИзСтрокиВнутр(ПараметрыОбъекта["МассивУникальныхИдентификаторовПриходныхОрдеров"]);
	
	Если МассивУникальныхИдентификоторовПриходныхОрдеров.Количество() &lt;&gt; 0 Тогда
		
		//получим ссылку на текущий объект
		Если Объект.ЭтоНовый() Тогда
			СсылкаНаОбъект = Объект.ПолучитьСсылкуНового();
		Иначе
			СсылкаНаОбъект = Объект.Ссылка;
		КонецЕсли;
		
		Для Каждого УИд Из МассивУникальныхИдентификоторовПриходныхОрдеров Цикл
			
			ПриходныйОрдерОбъект = Документы.ПриходныйОрдерНаТовары.ПолучитьСсылку(УИд).ПолучитьОбъект();
			
			Если ПриходныйОрдерОбъект &lt;&gt; Неопределено И ПриходныйОрдерОбъект.ДокументОснование &lt;&gt; СсылкаНаОбъект Тогда
				
				ПриходныйОрдерОбъект.ДокументОснование = СсылкаНаОбъект;
				ПриходныйОрдерОбъект.Записать();
				
			КонецЕсли;
			
		КонецЦикла;
		
	КонецЕсли;
	
КонецЕсли;

Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);

Если Объект.ЭтоНовый() Тогда
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.ПолучитьСсылкуНового());
	
Иначе
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.Ссылка);
	
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПоступлениеТоваровУслуг</Источник>
				<Приемник>ДокументСсылка.ПоступлениеТоваров</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>СуммаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>31</Код>
						<Наименование>СкладОрдер --&gt; Магазин</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="СкладОрдер" Вид="Реквизит"/>
						<Приемник Имя="Магазин" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
						<КодПравилаКонвертации>СкладВМагазин                                     </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.ВидПоступления = Перечисления.ВидыПоступленияТоваров.НаСклад Тогда
	СкладДокумента = Источник.СкладОрдер;
Иначе
	//считаем, что склад во всех ПО одинаковый..
	СкладДокумента = Источник.Товары[0].ПриходныйОрдер.Склад;
КонецЕсли;

УстанавливаемыйПараметр = "СкладЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКССкладВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование>СкладОрдер --&gt;</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="СкладОрдер" Вид="Реквизит"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>
Если Параметры.СкладЯвляетсяМагазином Тогда //склад загрузим потом из магазина
	Отказ = Истина;
Иначе
	Если Источник.ВидПоступления = Перечисления.ВидыПоступленияТоваров.НаСклад Тогда
		СкладДокумента = Источник.СкладОрдер;
	Иначе
		//считаем, что склад во всех ПО одинаковый..
		СкладДокумента = Источник.Товары[0].ПриходныйОрдер.Склад;
	КонецЕсли;

	
	ИсходящиеДанные = Новый Структура;
	ИсходящиеДанные.Вставить("ЭтоСкладЦентральногоОфиса", Истина);
	
	Значение = СкладДокумента;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>11</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>12</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt;</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Группа>
						<Код>21</Код>
						<Наименование>Услуги --&gt; Товары</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Услуги" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>НеОчищать = Истина;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>22</Код>
							<Наименование>Количество --&gt;</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>Номенклатура --&gt;</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>Сумма --&gt;</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>СуммаНДС --&gt;</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>УдалитьПроект --&gt;</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>28</Код>
							<Наименование> --&gt; Коэффициент</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.Номенклатура.ЕдиницаДляОтчетов) Тогда
	Значение = ОбъектКоллекции.Номенклатура.ЕдиницаДляОтчетов.Коэффициент;
Иначе
	Единица = Справочники.ЕдиницыИзмерения.НайтиПоРеквизиту("ЕдиницаПоКлассификатору",
															 ОбъектКоллекции.Номенклатура.БазоваяЕдиницаИзмерения,
															 ,ОбъектКоллекции.Номенклатура);
	Если Единица &lt;&gt; Неопределено Тогда
		Значение = Единица.Коэффициент;
	Иначе
		Значение = 1;
	КонецЕсли;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>29</Код>
							<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.Номенклатура.ЕдиницаДляОтчетов) Тогда
	Значение = ОбъектКоллекции.Номенклатура.ЕдиницаДляОтчетов;
Иначе
	Значение = Справочники.ЕдиницыИзмерения.НайтиПоРеквизиту("ЕдиницаПоКлассификатору",
															 ОбъектКоллекции.Номенклатура.БазоваяЕдиницаИзмерения,
															 ,ОбъектКоллекции.Номенклатура);
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>32</Код>
						<Наименование> --&gt; ПоступлениеПоОрдернойСхеме</Наименование>
						<Порядок>750</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ПоступлениеПоОрдернойСхеме" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Источник.ВидПоступления = Перечисления.ВидыПоступленияТоваров.ПоОрдеру;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>33</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>800</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ВозможностьРедактированияВПриемнике = Истина;

//сразу сделаем проверку на ТЧ услуги
СкладДокумента = ?(Источник.ВидПоступления = Перечисления.ВидыПоступленияТоваров.ПоОрдеру, Источник.СкладОрдер.Склад, Источник.СкладОрдер);
Для Каждого СтрокаУслуг Из Источник.Услуги Цикл
	
	Если Не ЗначениеЗаполнено(СтрокаУслуг.Подразделение) И СтрокаУслуг.Подразделение &lt;&gt; СкладДокумента.Подразделение Тогда
		ВозможностьРедактированияВПриемнике = Ложь;
		Прервать;
	КонецЕсли;
	
	Если СтрокаУслуг.Содержание &lt;&gt; СтрокаУслуг.Номенклатура.НаименованиеПолное Тогда
		ВозможностьРедактированияВПриемнике = Ложь;
		Прервать;
	КонецЕсли;
	
КонецЦикла;

Если ВозможностьРедактированияВПриемнике Тогда
	
	ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
	ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
	ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

	ТабЧастьТовары = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
	ТабЧастьТовары.ИмяТабличнойЧасти = "Товары";
	ТабЧастьТовары.МассивРеквизитов  = Новый Массив();
	ТабЧастьТовары.МассивРеквизитов.Добавить("ЕдиницаИзмеренияМест");
	ТабЧастьТовары.МассивРеквизитов.Добавить("Заказ");
	ТабЧастьТовары.МассивРеквизитов.Добавить("ЗаказПоставщику");
	ТабЧастьТовары.МассивРеквизитов.Добавить("СерияНоменклатуры");

	ТабЧастьУслуги = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
	ТабЧастьУслуги.ИмяТабличнойЧасти = "Услуги";
	ТабЧастьУслуги.МассивРеквизитов  = Новый Массив();
	ТабЧастьУслуги.МассивРеквизитов.Добавить("Заказ");
	ТабЧастьУслуги.МассивРеквизитов.Добавить("ЗаказПоставщику");
	ТабЧастьУслуги.МассивРеквизитов.Добавить("СтатьяЗатрат");

	Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);
	
КонецЕсли;


Значение = Строка(ВозможностьРедактированияВПриемнике);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>34</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>850</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>МассивУникальныхИдентификаторовПриходныхОрдеров</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Массив = Новый Массив;

Если Источник.ВидПоступления = Перечисления.ВидыПоступленияТоваров.ПоОрдеру Тогда
	
	Для Каждого СтрокаТовары Из Источник.Товары Цикл
		
		УИд = СтрокаТовары.ПриходныйОрдер.УникальныйИдентификатор();
		
		Если Массив.Найти(УИд) = Неопределено Тогда
			Массив.Добавить(УИд);
		КонецЕсли;
		
	КонецЦикла;
	
КонецЕсли;


Значение = ЗначениеВСтрокуВнутр(Массив);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>36</Код>
						<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>37</Код>
						<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
						<Порядок>950</Порядок>
						<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПриходныйКассовыйОрдер</Код>
				<Наименование>ДокументСсылка.ПриходныйКассовыйОрдер --&gt; ДокументСсылка.ПриходныйКассовыйОрдер</Наименование>
				<Порядок>650</Порядок>
				<ПослеЗагрузки>
УИд = Новый УникальныйИдентификатор(ПараметрыОбъекта["УникальныйИдентификаторДокумента"]);

ОтчетОРозничныхПродажахСсылка = Документы.ОтчетОРозничныхПродажах.ПолучитьСсылку(УИд);

ПКОСозданИзОтчетаОРозничныхПродажах = ОтчетОРозничныхПродажахСсылка.ПолучитьОбъект() &lt;&gt; Неопределено;

Если ПКОСозданИзОтчетаОРозничныхПродажах Тогда
	
	//ПКО получился из ОтчетаККМ, в РТ он не нужен
	Отказ = Истина;
	
Иначе

	Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		
		КодМагазина = ПараметрыОбъекта["КодМагазина"];
		МагазинДокумента = Справочники.Магазины.НайтиПоКоду(КодМагазина);
		
		Если ЗначениеЗаполнено(МагазинДокумента) Тогда
		
			Если (Объект.ЭтоНовый() Или Объект.Касса.Пустая() Или МагазинДокумента &lt;&gt; Объект.Касса.Магазин) Тогда
				
				// менять кассу на кассу по умолчанию нужно только в том случае, если
				//был изменен магазин
				Объект.Касса = МагазинДокумента.ОсновнаяКасса;
				
			КонецЕсли;
			
		Иначе
			
			Сообщить(Объект);
			Сообщить("Не смог найти магазин с кодом " + КодМагазина);
			
		КонецЕсли;
		
	КонецЕсли;
	
КонецЕсли;

Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПриходныйКассовыйОрдер</Источник>
				<Приемник>ДокументСсылка.ПриходныйКассовыйОрдер</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>ВидОперации --&gt; ВидОперации</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПКО"/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПКО"/>
						<КодПравилаКонвертации>ВидыОперацийПКО                                   </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.ВидОперации = Перечисления.ВидыОперацийПКО.ВозвратДенежныхСредствПодотчетником
 Или Источник.ВидОперации = Перечисления.ВидыОперацийПКО.ПолучениеНаличныхДенежныхСредствВБанке 
 Или Источник.ВидОперации = Перечисления.ВидыОперацийПКО.РасчетыПоКредитамИЗаймамСКонтрагентами Тогда 
	
	Значение = Перечисления.ВидыОперацийПКО.ПриходДенежныхСредствПрочее;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ДокументОснование --&gt; ДокументОснование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ДокументОснование" Вид="Реквизит"/>
						<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
						<ПередВыгрузкой>Если ТипЗнч(Источник.ДокументОснование)	&lt;&gt; Тип("ДокументСсылка.РеализацияТоваровУслуг") Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>200</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазина</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>КассаДокумента = Источник.Касса;
УстанавливаемыйПараметр = "КассаЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКСКассаВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Касса --&gt; Касса</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Касса" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<Приемник Имя="Касса" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<КодПравилаКонвертации>Кассы                                             </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Параметры.КассаЯвляетсяМагазином Тогда
	Отказ = Истина;
КонецЕсли;

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ЭтоКассаЦентральногоОфиса", Истина);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<ПередВыгрузкой>Если ТипЗнч(Источник.Контрагент) &lt;&gt; Тип("СправочникСсылка.Контрагенты") Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>7</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Основание --&gt; Основание</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Приложение --&gt; Приложение</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>ПринятоОт --&gt; ПринятоОт</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Группа>
						<Код>16</Код>
						<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>17</Код>
							<Наименование>ДокументРасчетовСКонтрагентом --&gt; ДокументРасчетовСКонтрагентом</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ДокументРасчетовСКонтрагентом" Вид="Реквизит"/>
							<Приемник Имя="ДокументРасчетовСКонтрагентом" Вид="Реквизит"/>
							<ПередВыгрузкой>Если ТипЗнч(ОбъектКоллекции.ДокументРасчетовСКонтрагентом) &lt;&gt; Тип("ДокументСсылка.РеализацияТоваровУслуг") Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>СуммаПлатежа --&gt; СуммаПлатежа</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>22</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>900</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>УникальныйИдентификаторДокумента</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Строка(Источник.Ссылка.УникальныйИдентификатор());</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>950</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если Источник.ВидОперации &lt;&gt; Перечисления.ВидыОперацийПКО.ПриходДенежныхСредствПрочее Тогда
	ВозможностьРедактированияВПриемнике = Ложь;             
Иначе

	ВозможностьРедактированияВПриемнике = Истина;

	//сразу проверим по статье движения денежных средств
	Если Источник.ВидОперации = Перечисления.ВидыОперацийПКО.ОплатаПокупателя Тогда
		СтатьяДвиженияДенежныхСредств = Справочники.СтатьиДвиженияДенежныхСредств.ОплатаПокупателя;
	ИначеЕсли Источник.ВидОперации = Перечисления.ВидыОперацийПКО.ВозвратДенежныхСредствПоставщиком Тогда
		СтатьяДвиженияДенежныхСредств = Справочники.СтатьиДвиженияДенежныхСредств.ВозвратДенежныхСредствПоставщиком;
	Иначе
		СтатьяДвиженияДенежныхСредств = Справочники.СтатьиДвиженияДенежныхСредств.ПустаяСсылка();
	КонецЕсли;
	Для Каждого СтрокаПлатежа Из Источник.РасшифровкаПлатежа Цикл
		
		Если СтрокаПлатежа.СтатьяДвиженияДенежныхСредств &lt;&gt; СтатьяДвиженияДенежныхСредств Тогда
			ВозможностьРедактированияВПриемнике = Ложь;
			Прервать;
		КонецЕсли;
		
	КонецЦикла;

	Если ВозможностьРедактированияВПриемнике Тогда
			
		ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
		ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
		ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

		ТабЧастьРасшифровкаПлатежа = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
		ТабЧастьРасшифровкаПлатежа.ИмяТабличнойЧасти = "РасшифровкаПлатежа";
		ТабЧастьРасшифровкаПлатежа.МассивРеквизитов  = Новый Массив();

		ТабЧастьРасшифровкаПлатежа.МассивРеквизитов.Добавить("ДокументПланированияПлатежа");
		ТабЧастьРасшифровкаПлатежа.МассивРеквизитов.Добавить("Проект");

		Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);
		
	КонецЕсли;
	
КонецЕсли;

Значение = Строка(ВозможностьРедактированияВПриемнике);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПриходныйОрдерНаТовары</Код>
				<Наименование>ДокументСсылка.ПриходныйОрдерНаТовары --&gt; ДокументСсылка.ПриходныйОрдерНаТовары</Наименование>
				<Порядок>700</Порядок>
				<ПослеЗагрузки>Если Объект.ЭтоНовый() Тогда
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.ПолучитьСсылкуНового());
	
Иначе
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.Ссылка);
	
КонецЕсли;

Если (Объект.ЭтоНовый() Или Объект.Склад.Пустая() Или Объект.Склад.Магазин &lt;&gt; Объект.Магазин) 
	И НЕ Объект.Магазин.Пустая() Тогда
	Объект.Склад = Объект.Магазин.ОсновнойСклад;
КонецЕсли;

Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПриходныйОрдерНаТовары</Источник>
				<Приемник>ДокументСсылка.ПриходныйОрдерНаТовары</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Группа>
						<Код>3</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>4</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>8</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Магазин" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
						<КодПравилаКонвертации>СкладВМагазин                                     </КодПравилаКонвертации>
						<ПередВыгрузкой>СкладДокумента = Источник.Склад;
УстанавливаемыйПараметр = "СкладЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКССкладВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Параметры.СкладЯвляетсяМагазином Тогда //склад загрузим потом из магазина
	Отказ = Истина;
КонецЕсли;

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ЭтоСкладЦентральногоОфиса", Истина);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>ДокументПеремещения --&gt; ДокументОснование</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ДокументПеремещения" Вид="Реквизит" Тип="ДокументСсылка.ПеремещениеТоваров"/>
						<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
						<КодПравилаКонвертации>ПеремещениеТоваров                                </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Не Источник.ВидОперации = Перечисления.ВидыОперацийПриходныйОрдер.Перемещение Тогда
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>500</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ВозможностьРедактированияВПриемнике = Истина;

ТипДокументаОснования = ТипЗнч(Источник.ДокументПеремещения);

Если ТипДокументаОснования = Тип("ДокументСсылка.ВозвратТоваровОтПокупателя")
 Или ТипДокументаОснования = Тип("ДокументСсылка.ПоступлениеТоваровУслуг") Тогда
 
	ВозможностьРедактированияВПриемнике = Ложь;;
	
Иначе

	ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
	ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
	ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

	ТабЧастьТовары = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
	ТабЧастьТовары.ИмяТабличнойЧасти = "Товары";
	ТабЧастьТовары.МассивРеквизитов  = Новый Массив();

	ТабЧастьТовары.МассивРеквизитов.Добавить("ДокументРезерва");
	ТабЧастьТовары.МассивРеквизитов.Добавить("ЕдиницаИзмеренияМест");
	ТабЧастьТовары.МассивРеквизитов.Добавить("Качество");
	ТабЧастьТовары.МассивРеквизитов.Добавить("КоличествоМест");
	ТабЧастьТовары.МассивРеквизитов.Добавить("СерияНоменклатуры");

	Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);
	
КонецЕсли;


Значение = Строка(ВозможностьРедактированияВПриемнике);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>РасходныйКассовыйОрдер</Код>
				<Наименование>ДокументСсылка.РасходныйКассовыйОрдер --&gt; ДокументСсылка.РасходныйКассовыйОрдер</Наименование>
				<Порядок>750</Порядок>
				<ПослеЗагрузки>
Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
	
	КодМагазина = ПараметрыОбъекта["КодМагазина"];
	МагазинДокумента = Справочники.Магазины.НайтиПоКоду(КодМагазина);
	
	Если ЗначениеЗаполнено(МагазинДокумента) Тогда
	
		Если (Объект.ЭтоНовый() Или Объект.Касса.Пустая() Или МагазинДокумента &lt;&gt; Объект.Касса.Магазин) Тогда
			
			// менять кассу на кассу по умолчанию нужно только в том случае, если
			//был поменян магазин
			Объект.Касса = МагазинДокумента.ОсновнаяКасса;
			
		КонецЕсли;
		
	Иначе
		
		Сообщить(Объект);
		Сообщить("Не смог найти магазин с кодом " + КодМагазина);
		
	КонецЕсли;
	
КонецЕсли;

Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.РасходныйКассовыйОрдер</Источник>
				<Приемник>ДокументСсылка.РасходныйКассовыйОрдер</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>ВидОперации --&gt; ВидОперации</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРКО"/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРКО"/>
						<КодПравилаКонвертации>ВидыОперацийРКО                                   </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.ВидОперации = Перечисления.ВидыОперацийРКО.РасчетыПоКредитамИЗаймамСКонтрагентами
 ИЛИ Источник.ВидОперации = Перечисления.ВидыОперацийРКО.ВыдачаДенежныхСредствПодотчетнику
 ИЛИ Источник.ВидОперации = Перечисления.ВидыОперацийРКО.ВыдачаДенежныхСредствКассеККМ
 ИЛИ Источник.ВидОперации = Перечисления.ВидыОперацийРКО.ВзносНаличнымиВБанк Тогда
	
	Значение = Перечисления.ВидыОперацийРКО.РасходДенежныхСредствПрочее;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Выдать --&gt; Выдать</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ДокументОснование --&gt; ДокументОснование</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ДокументОснование" Вид="Реквизит"/>
						<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
						<ПередВыгрузкой>Если ТипЗнч(Источник.ДокументОснование) = Тип("ДокументСсылка.ВозвратТоваровОтПокупателя") 
	Или ТипЗнч(Источник.ДокументОснование) = Тип("ДокументСсылка.ПоступлениеТоваровУслуг")
	Или ТипЗнч(Источник.ДокументОснование) = Тип("ДокументСсылка.ВозвратТоваровПоставщику") Тогда
	
Иначе
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>250</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазина</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>КассаДокумента = Источник.Касса;
УстанавливаемыйПараметр = "КассаЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКСКассаВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Касса --&gt; Касса</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Касса" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<Приемник Имя="Касса" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<КодПравилаКонвертации>Кассы                                             </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Параметры.КассаЯвляетсяМагазином Тогда
	Отказ = Истина;
КонецЕсли;

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ЭтоКассаЦентральногоОфиса", Истина);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<ПередВыгрузкой>Если ТипЗнч(Источник.Контрагент) &lt;&gt; Тип("СправочникСсылка.Контрагенты") Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>НомерЧекаККМ --&gt; НомерЧекаККМ</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="НомерЧекаККМ" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="НомерЧекаККМ" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Основание --&gt; Основание</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>ПоДокументу --&gt; ПоДокументу</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>Приложение --&gt; Приложение</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Группа>
						<Код>18</Код>
						<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
						<Порядок>950</Порядок>
						<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>19</Код>
							<Наименование>ДокументРасчетовСКонтрагентом --&gt; ДокументРасчетовСКонтрагентом</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ДокументРасчетовСКонтрагентом" Вид="Реквизит"/>
							<Приемник Имя="ДокументРасчетовСКонтрагентом" Вид="Реквизит"/>
							<ПередВыгрузкой>Если ТипЗнч(ОбъектКоллекции.ДокументРасчетовСКонтрагентом) = Тип("ДокументСсылка.ВозвратТоваровОтПокупателя") 
	Или ТипЗнч(ОбъектКоллекции.ДокументРасчетовСКонтрагентом) = Тип("ДокументСсылка.ПоступлениеТоваровУслуг") 
	Или ТипЗнч(ОбъектКоллекции.ДокументРасчетовСКонтрагентом) = Тип("ДокументСсылка.РасходныйКассовыйОрдер") Тогда
	
Иначе
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>СуммаПлатежа --&gt; СуммаПлатежа</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>24</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>1000</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если Источник.ВидОперации &lt;&gt; Перечисления.ВидыОперацийРКО.РасходДенежныхСредствПрочее Тогда
	ВозможностьРедактированияВПриемнике = Ложь;             
Иначе

	ВозможностьРедактированияВПриемнике = Истина;

	//сразу проверим по статье движения денежных средств
	Если Источник.ВидОперации = Перечисления.ВидыОперацийПКО.ОплатаПокупателя Тогда
		СтатьяДвиженияДенежныхСредств = Справочники.СтатьиДвиженияДенежныхСредств.ОплатаПокупателя;
	ИначеЕсли Источник.ВидОперации = Перечисления.ВидыОперацийПКО.ВозвратДенежныхСредствПоставщиком Тогда
		СтатьяДвиженияДенежныхСредств = Справочники.СтатьиДвиженияДенежныхСредств.ВозвратДенежныхСредствПоставщиком;
	Иначе
		СтатьяДвиженияДенежныхСредств = Справочники.СтатьиДвиженияДенежныхСредств.ПустаяСсылка();
	КонецЕсли;
	Для Каждого СтрокаПлатежа Из Источник.РасшифровкаПлатежа Цикл
		
		Если СтрокаПлатежа.СтатьяДвиженияДенежныхСредств &lt;&gt; СтатьяДвиженияДенежныхСредств Тогда
			ВозможностьРедактированияВПриемнике = Ложь;
			Прервать;
		КонецЕсли;
		
	КонецЦикла;

	Если ВозможностьРедактированияВПриемнике Тогда
			
		ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
		ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
		ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

		ТабЧастьРасшифровкаПлатежа = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
		ТабЧастьРасшифровкаПлатежа.ИмяТабличнойЧасти = "РасшифровкаПлатежа";
		ТабЧастьРасшифровкаПлатежа.МассивРеквизитов  = Новый Массив();

		ТабЧастьРасшифровкаПлатежа.МассивРеквизитов.Добавить("ДокументПланированияПлатежа");
		ТабЧастьРасшифровкаПлатежа.МассивРеквизитов.Добавить("Проект");

		Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);
		
	КонецЕсли;
	
КонецЕсли;

Значение = Строка(ВозможностьРедактированияВПриемнике);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>РасходныйОрдерНаТовары</Код>
				<Наименование>ДокументСсылка.РасходныйОрдерНаТовары --&gt; ДокументСсылка.РасходныйОрдерНаТовары</Наименование>
				<Порядок>800</Порядок>
				<ПередВыгрузкой>

ОтправкаДанныхДокументаПередачи = ОтправкаЭлементаДанных.Авто;
Параметры.УзелДляОбменаОбъект.ОпределитьТипОтправкиДанных(Источник.ДокументПередачи.ПолучитьОбъект(), ОтправкаДанныхДокументаПередачи);
Если ОтправкаДанныхДокументаПередачи = ОтправкаЭлементаДанных.Авто Тогда
	
	ВыгрузитьПоПравилу(Источник.ДокументПередачи);
	
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>
//очистим состав набора, т.к. в УТ его быть в принципе не может
Объект.СоставНабора.Очистить();

Если Объект.ЭтоНовый() Тогда
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.ПолучитьСсылкуНового());
	
Иначе
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.Ссылка);
	
КонецЕсли;


Если (Объект.ЭтоНовый() Или Объект.Склад.Пустая() Или Объект.Склад.Магазин &lt;&gt; Объект.Магазин) 
	И НЕ Объект.Магазин.Пустая() Тогда
	Объект.Склад = Объект.Магазин.ОсновнойСклад;
КонецЕсли;

Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.РасходныйОрдерНаТовары</Источник>
				<Приемник>ДокументСсылка.РасходныйОрдерНаТовары</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Группа>
						<Код>3</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>4</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>8</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Магазин" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
						<КодПравилаКонвертации>СкладВМагазин                                     </КодПравилаКонвертации>
						<ПередВыгрузкой>СкладДокумента = Источник.Склад;
УстанавливаемыйПараметр = "СкладЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКССкладВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Параметры.СкладЯвляетсяМагазином Тогда //склад загрузим потом из магазина
	Отказ = Истина;
КонецЕсли;

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ЭтоСкладЦентральногоОфиса", Истина);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>ДокументПередачи --&gt; ДокументОснование</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ДокументПередачи" Вид="Реквизит"/>
						<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
						<КодПравилаКонвертации>РеализацияТоваров                                 </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ТипЗнч(Источник.ДокументПередачи) = Тип("ДокументСсылка.ПеремещениеТоваров") Тогда
	
	ИмяПКО = "ПеремещениеТоваров";
	
ИначеЕсли ТипЗнч(Источник.ДокументПередачи) = Тип("ДокументСсылка.РеализацияТоваровУслуг") Тогда
	
	ИмяПКО = "РеализацияТоваров";
	
ИначеЕсли ТипЗнч(Источник.ДокументПередачи) = Тип("ДокументСсылка.ВозвратТоваровПоставщику") Тогда
	
	ИмяПКО = "ВозвратТоваровПоставщику";
	
Иначе
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>500</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ВозможностьРедактированияВПриемнике = Истина;

ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

ТабЧастьТовары = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
ТабЧастьТовары.ИмяТабличнойЧасти = "Товары";
ТабЧастьТовары.МассивРеквизитов  = Новый Массив();

ТабЧастьТовары.МассивРеквизитов.Добавить("ДокументРезерва");
ТабЧастьТовары.МассивРеквизитов.Добавить("ЕдиницаИзмеренияМест");
ТабЧастьТовары.МассивРеквизитов.Добавить("Качество");
ТабЧастьТовары.МассивРеквизитов.Добавить("КоличествоМест");
ТабЧастьТовары.МассивРеквизитов.Добавить("СерияНоменклатуры");

Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);


Значение = Строка(ВозможностьРедактированияВПриемнике);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>РеализацияТоваров</Код>
				<Наименование>ДокументСсылка.РеализацияТоваровУслуг --&gt; ДокументСсылка.РеализацияТоваров</Наименование>
				<Порядок>850</Порядок>
				<ПослеЗагрузки>

Если Объект.ЭтоНовый() Тогда
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.ПолучитьСсылкуНового());
	
Иначе
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.Ссылка);
	
КонецЕсли;


Если (Объект.ЭтоНовый() Или Объект.Склад.Пустая() Или Объект.Склад.Магазин &lt;&gt; Объект.Магазин) 
	И НЕ Объект.Магазин.Пустая() Тогда
	Объект.Склад = Объект.Магазин.ОсновнойСклад;
КонецЕсли;

Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.РеализацияТоваровУслуг</Источник>
				<Приемник>ДокументСсылка.РеализацияТоваров</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>АдресДоставки --&gt; АдресДоставки</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ДисконтнаяКарта --&gt; ДисконтнаяКарта</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ДисконтнаяКарта" Вид="Реквизит" Тип="СправочникСсылка.ИнформационныеКарты"/>
						<Приемник Имя="ДисконтнаяКарта" Вид="Реквизит" Тип="СправочникСсылка.ИнформационныеКарты"/>
						<КодПравилаКонвертации>ИнформационныеКарты                               </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ДоверенностьВыдана --&gt; ДоверенностьВыдана</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ДоверенностьВыдана" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ДоверенностьВыдана" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ДоверенностьДата --&gt; ДоверенностьДата</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ДоверенностьДата" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДоверенностьДата" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ДоверенностьНомер --&gt; ДоверенностьНомер</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ДоверенностьНомер" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ДоверенностьНомер" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ДоверенностьЧерезКого --&gt; ДоверенностьЧерезКого</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ДоверенностьЧерезКого" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ДоверенностьЧерезКого" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>10</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>36</Код>
						<Наименование>Склад --&gt; Магазин</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Магазин" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
						<КодПравилаКонвертации>СкладВМагазин                                     </КодПравилаКонвертации>
						<ПередВыгрузкой>СкладДокумента = Источник.Склад;
УстанавливаемыйПараметр = "СкладЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКССкладВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Параметры.СкладЯвляетсяМагазином Тогда //склад загрузим потом из магазина
	Отказ = Истина;
КонецЕсли;

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ЭтоСкладЦентральногоОфиса", Истина);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>СуммаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>23</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>1000</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>24</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>28</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>30</Код>
							<Наименование>ПроцентСкидкиНаценки --&gt; ПроцентСкидкиНаценки</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ПроцентСкидкиНаценки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ПроцентСкидкиНаценки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>31</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>33</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>60</Код>
							<Наименование>КлючСтроки --&gt; КлючСтроки</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>64</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt;</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Группа>
						<Код>38</Код>
						<Наименование>Услуги --&gt; Товары</Наименование>
						<Порядок>1100</Порядок>
						<Источник Имя="Услуги" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>НеОчищать = Истина;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>39</Код>
							<Наименование>ЗначениеУсловияАвтоматическойСкидки --&gt; ЗначениеУсловияАвтоматическойСкидки</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЗначениеУсловияАвтоматическойСкидки" Вид="Реквизит"/>
							<Приемник Имя="УдалитьЗначениеУсловияАвтоматическойСкидки" Вид="Реквизит"/>
							<ПередВыгрузкой>Если ТипЗнч(Источник) = Тип("СправочникСсылка.ИнформационныеКарты") Тогда
	ИмяПКО = "ИнформационныеКарты";
ИначеЕсли ТипЗнч(Источник) = Тип("СправочникСсылка.ВидыДисконтныхКарт") Тогда
	ИмяПКО = "ВидыДисконтныхКарт";
ИначеЕсли ТипЗнч(Источник) = Тип("СправочникСсылка.ВидыОплатЧекаККМ") Тогда
	Отказ = Истина;	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>40</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>42</Код>
							<Наименование>ПроцентАвтоматическихСкидок --&gt; ПроцентАвтоматическихСкидок</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ПроцентАвтоматическихСкидок" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="УдалитьПроцентАвтоматическихСкидок" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>43</Код>
							<Наименование>ПроцентСкидкиНаценки --&gt; ПроцентСкидкиНаценки</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ПроцентСкидкиНаценки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ПроцентСкидкиНаценки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>44</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>45</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>46</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>48</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>49</Код>
							<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>550</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура.ЕдиницаХраненияОстатков;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>50</Код>
							<Наименование> --&gt; Коэффициент</Наименование>
							<Порядок>600</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура.ЕдиницаХраненияОстатков.Коэффициент;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Группа>
						<Код>51</Код>
						<Наименование>СоставНабора --&gt; СоставНабора</Наименование>
						<Порядок>1150</Порядок>
						<Источник Имя="СоставНабора" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="СоставНабора" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>52</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>54</Код>
							<Наименование>КлючСтроки --&gt; КлючСтроки</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>55</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>56</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>58</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>63</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>61</Код>
						<Наименование> --&gt; РеализацияПоОрдернойСхеме</Наименование>
						<Порядок>1200</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="РеализацияПоОрдернойСхеме" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Источник.ВидПередачи = Перечисления.ВидыПередачиТоваров.ПоОрдеру;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>62</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>1250</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ВозможностьРедактированияВПриемнике = Истина;

//проверим на измененное содержание
Если ВозможностьРедактированияВПриемнике Тогда
	
	Для Каждого СтрокаУслуги Из Источник.Услуги Цикл
		
		Если СтрокаУслуги.Содержание &lt;&gt; СтрокаУслуги.Номенклатура.НаименованиеПолное Тогда
			ВозможностьРедактированияВПриемнике = Ложь;
			Прервать;	
		КонецЕсли;
		
	КонецЦикла;
	
КонецЕсли;

Если ВозможностьРедактированияВПриемнике Тогда
 
	ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
	ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
	ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

	ТабЧастьТовары = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
	ТабЧастьТовары.ИмяТабличнойЧасти = "Товары";
	ТабЧастьТовары.МассивРеквизитов  = Новый Массив();
	ТабЧастьТовары.МассивРеквизитов.Добавить("ЗаказПокупателя");
	ТабЧастьТовары.МассивРеквизитов.Добавить("ЕдиницаИзмеренияМест");
	ТабЧастьТовары.МассивРеквизитов.Добавить("Качество");
	ТабЧастьТовары.МассивРеквизитов.Добавить("КоличествоМест");
	ТабЧастьТовары.МассивРеквизитов.Добавить("СерияНоменклатуры");
	ТабЧастьТовары.МассивРеквизитов.Добавить("СпособСписанияОстаткаТоваров");

	ТабЧастьСоставНабора = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
	ТабЧастьСоставНабора.ИмяТабличнойЧасти = "СоставНабора";
	ТабЧастьСоставНабора.МассивРеквизитов  = Новый Массив();
	ТабЧастьСоставНабора.МассивРеквизитов.Добавить("Качество"); 
	ТабЧастьСоставНабора.МассивРеквизитов.Добавить("СерияНоменклатуры"); 
	ТабЧастьСоставНабора.МассивРеквизитов.Добавить("СпособСписанияОстаткаТоваров"); 
	
	ТабЧастьУслуги = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
	ТабЧастьУслуги.ИмяТабличнойЧасти = "Услуги";
	ТабЧастьУслуги.МассивРеквизитов  = Новый Массив();
	ТабЧастьУслуги.МассивРеквизитов.Добавить("ЗаказПокупателя");

	Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);
	
КонецЕсли;

Значение = Строка(ВозможностьРедактированияВПриемнике);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>СписаниеТоваров</Код>
				<Наименование>ДокументСсылка.СписаниеТоваров --&gt; ДокументСсылка.СписаниеТоваров</Наименование>
				<Порядок>900</Порядок>
				<ПослеЗагрузки>
Если Объект.ЭтоНовый() Тогда
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.ПолучитьСсылкуНового());
	
Иначе
	
	Параметры.ДокументыСОпределениемДопРеквизитов.Добавить(Объект.Ссылка);
	
КонецЕсли;


Если (Объект.ЭтоНовый() Или Объект.Склад.Пустая() Или Объект.Склад.Магазин &lt;&gt; Объект.Магазин) 
	И НЕ Объект.Магазин.Пустая() Тогда
	Объект.Склад = Объект.Магазин.ОсновнойСклад;
КонецЕсли;

Если ЗначениеЗаполнено(Объект.ДокументОснование) Тогда
	Объект.ХозяйственнаяОперация = Параметры.ХозяйственнаяОперация_СписаниеПоИнвентаризации;
Иначе
	Объект.ХозяйственнаяОперация = Параметры.ХозяйственнаяОперация_СписаниеНаЗатраты;
КонецЕсли;	

Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.СписаниеТоваров</Источник>
				<Приемник>ДокументСсылка.СписаниеТоваров</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>Склад --&gt; Магазин</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Магазин" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
						<КодПравилаКонвертации>СкладВМагазин                                     </КодПравилаКонвертации>
						<ПередВыгрузкой>СкладДокумента = Источник.Склад;
УстанавливаемыйПараметр = "СкладЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКССкладВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Параметры.СкладЯвляетсяМагазином Тогда //склад загрузим потом из магазина
	Отказ = Истина;
КонецЕсли;

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ЭтоСкладЦентральногоОфиса", Истина);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Группа>
						<Код>12</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>13</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>20</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>600</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ВозможностьРедактированияВПриемнике = Истина;

ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

ТабЧастьТовары = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
ТабЧастьТовары.ИмяТабличнойЧасти = "Товары";
ТабЧастьТовары.МассивРеквизитов  = Новый Массив();

ТабЧастьТовары.МассивРеквизитов.Добавить("ДокументРезерва");
ТабЧастьТовары.МассивРеквизитов.Добавить("ЕдиницаИзмеренияМест");
ТабЧастьТовары.МассивРеквизитов.Добавить("Качество");
ТабЧастьТовары.МассивРеквизитов.Добавить("КоличествоМест");
ТабЧастьТовары.МассивРеквизитов.Добавить("СерияНоменклатуры");

Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);


Значение = Строка(ВозможностьРедактированияВПриемнике);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование>Основание --&gt;</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ОснованиеСписания" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование>ИнвентаризацияТоваровНаСкладе --&gt; ДокументОснование</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="ИнвентаризацияТоваровНаСкладе" Вид="Реквизит" Тип="ДокументСсылка.ИнвентаризацияТоваровНаСкладе"/>
						<Приемник Имя="ДокументОснование" Вид="Реквизит" Тип="ДокументСсылка.ИнвентаризацияТоваров"/>
						<КодПравилаКонвертации>ИнвентаризацияТоваров                             </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>УстановкаЦенНоменклатуры</Код>
				<Наименование>ДокументСсылка.УстановкаЦенНоменклатуры --&gt; ДокументСсылка.УстановкаЦенНоменклатуры</Наименование>
				<Порядок>1050</Порядок>
				<ПослеЗагрузки>
Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.УстановкаЦенНоменклатуры</Источник>
				<Приемник>ДокументСсылка.УстановкаЦенНоменклатуры</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Информация --&gt; Информация</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Информация" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Информация" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>НеПроводитьНулевыеЗначения --&gt; НеПроводитьНулевыеЗначения</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="НеПроводитьНулевыеЗначения" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="НеПроводитьНулевыеЗначения" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>9</Код>
						<Наименование>ТипыЦен --&gt; ТипыЦен</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ТипыЦен" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ТипыЦен" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>//выгружаем типы цен, нужные только в данном узле
Если УзелДляОбмена.ТипыЦенНоменклатуры.Количество() &gt; 0 Тогда
	
	Если УзелДляОбмена.ТипыЦенНоменклатуры.Найти(ОбъектКоллекции.ТипЦен, "ТипЦеныНоменклатуры") = Неопределено Тогда
		Отказ = Истина;
	КонецЕсли;
	
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>10</Код>
							<Наименование>ТипЦен --&gt; ТипЦен</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
							<Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
							<КодПравилаКонвертации>ТипыЦенНоменклатуры                               </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Группа>
						<Код>11</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>//выгружаем типы цен, нужные только в данном узле
Если УзелДляОбмена.ТипыЦенНоменклатуры.Количество() &gt; 0 Тогда
	
	Если УзелДляОбмена.ТипыЦенНоменклатуры.Найти(ОбъектКоллекции.ТипЦен, "ТипЦеныНоменклатуры") = Неопределено Тогда
		Отказ = Истина;
	КонецЕсли;
	
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>12</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>ИндексСтрокиТаблицыЦен --&gt; ИндексСтрокиТаблицыЦен</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ИндексСтрокиТаблицыЦен" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ИндексСтрокиТаблицыЦен" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>ТипЦен --&gt; ТипЦен</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
							<Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
							<КодПравилаКонвертации>ТипыЦенНоменклатуры                               </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>18</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>550</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>//ВозможностьРедактированияВПриемнике = Истина;

////смотим по типам цен
//МассивТипЦенУзла = УзелДляОбмена.ТипыЦенНоменклатуры;
//Для Каждого ТипЦены Из Источник.ТипыЦен Цикл
//	
//	НайденнаяЦена = МассивТипЦенУзла.Найти(ТипЦены, "ТипЦеныНоменклатуры");
//	Если НайденнаяЦена = Неопределено Тогда
//		ВозможностьРедактированияВПриемнике = Ложь;
//		Прервать;
//	КонецЕсли;	
//	
//КонецЦикла;

////смотрим по способу расчета цен
//Если ВозможностьРедактированияВПриемнике Тогда
//	
//	Для Каждого СтрокаТовары Из Источник.Товары Цикл
//		
//		Если СтрокаТовары.СпособРасчетаЦены &lt;&gt; Перечисления.СпособыРасчетаЦены.ПоПроцентнойНаценкеНаБазовыйТип
//			И ЗначениеЗаполнено(СтрокаТовары.СпособРасчетаЦены) Тогда
//			
//			ВозможностьРедактированияВПриемнике = Ложь;
//			Прервать;
//			
//		КонецЕсли;
//		
//	КонецЦикла;
//	
//КонецЕсли;


//Значение = Строка(ВозможностьРедактированияВПриемнике);

Значение = Ложь;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>УстановкаЦенНоменклатурыВМагазине</Код>
				<Наименование>ДокументСсылка.ПереоценкаТоваровВРознице --&gt; ДокументСсылка.УстановкаЦенНоменклатурыВМагазине</Наименование>
				<Порядок>1100</Порядок>
				<ПослеЗагрузки>	
Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПереоценкаТоваровВРознице</Источник>
				<Приемник>ДокументСсылка.УстановкаЦенНоменклатурыВМагазине</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДокументУстановкаЦен --&gt; ДокументУстановкаЦен</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ДокументУстановкаЦен" Вид="Реквизит" Тип="ДокументСсылка.УстановкаЦенНоменклатуры"/>
						<Приемник Имя="ДокументУстановкаЦен" Вид="Реквизит"/>
						<КодПравилаКонвертации>УстановкаЦенНоменклатуры                          </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Склад --&gt;</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Магазин" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
						<ПередВыгрузкой>СкладДокумента = Источник.Склад;
УстанавливаемыйПараметр = "СкладЯвляетсяМагазином";
Выполнить(Алгоритмы.ОбработчикПередВыгрузкойПКССкладВМагазин);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>8</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>9</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>ЦенаВРознице --&gt; ЦенаВРознице</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ЦенаВРознице" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ЦенаВРознице" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>ЦенаВРозницеСтарая --&gt; ЦенаВРозницеСтарая</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ЦенаВРозницеСтарая" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ЦенаВРозницеСтарая" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>13</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>500</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ВозможностьРедактированияВПриемнике = Истина;

ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

ТабЧастьТовары = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
ТабЧастьТовары.ИмяТабличнойЧасти = "Товары";
ТабЧастьТовары.МассивРеквизитов  = Новый Массив();

ТабЧастьТовары.МассивРеквизитов.Добавить("Количество");
ТабЧастьТовары.МассивРеквизитов.Добавить("СерияНоменклатуры");
ТабЧастьТовары.МассивРеквизитов.Добавить("ХарактеристикаНоменклатуры");

Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);


Значение = Строка(ВозможностьРедактированияВПриемнике);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>УстановкаСебестоимости</Код>
				<Наименование> --&gt; ДокументСсылка.УстановкаСебестоимости</Наименование>
				<Порядок>1150</Порядок>
				<ПередЗагрузкой>Если НЕ Параметры.ЗагружатьСебестоимость Тогда
	
	Отказ = Истина;
	
КонецЕсли;</ПередЗагрузкой>
				<ПослеЗагрузки>Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Приемник>ДокументСсылка.УстановкаСебестоимости</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование> --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование> --&gt; ПометкаУдаления</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование> --&gt; Проведен</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>10</Код>
						<Наименование> --&gt; ПереданИзУправляющейСистемы</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ПринятИзУправляющейСистемы" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>9</Код>
						<Наименование> --&gt; Магазин</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Магазин" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование> --&gt; Периодичность</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Периодичность" Вид="Реквизит" Тип="ПеречислениеСсылка.Периодичность"/>
					</Свойство>
					<Группа>
						<Код>4</Код>
						<Наименование> --&gt; Товары</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>6</Код>
							<Наименование> --&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование> --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование> --&gt; Себестоимость</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>12</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>400</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>СверткаИзУправляющейСистемы</Код>
				<Наименование> --&gt; ДокументСсылка.СверткаИзУправляющейСистемы</Наименование>
				<Порядок>1200</Порядок>
				<ПослеЗагрузки>// РАСПРЕДЕЛИМ ТАБЛИЧНУЮ ЧАСТЬ "ТОВАРЫ"

#Если Клиент Тогда
	Состояние("Распределение товаров по складам магазинов...");
#КонецЕсли
	
Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	ДокументТовары.Магазин,
|	ДокументТовары.Номенклатура,
|	ДокументТовары.ХарактеристикаНоменклатуры,
|	ДокументТовары.Количество,
|	ДокументТовары.НомерСтроки
|ПОМЕСТИТЬ ДокументТовары
|ИЗ
|	&amp;ДокументТовары КАК ДокументТовары
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ЕСТЬNULL(ДокументТовары.Номенклатура, ТоварыНаСкладахОстатки.Номенклатура) КАК Номенклатура,
|	ЕСТЬNULL(ДокументТовары.ХарактеристикаНоменклатуры, ТоварыНаСкладахОстатки.ХарактеристикаНоменклатуры) КАК ХарактеристикаНоменклатуры,
|	ТоварыНаСкладахОстатки.Склад КАК Склад,
|	ЕСТЬNULL(ДокументТовары.Магазин, ТоварыНаСкладахОстатки.Склад.Магазин) КАК Магазин,
|	ДокументТовары.Количество КАК КоличествоДокумента,
|	ТоварыНаСкладахОстатки.КоличествоОстаток,
|	ДокументТовары.НомерСтроки КАК НомерСтроки
|ИЗ
|	ДокументТовары КАК ДокументТовары
|		ПОЛНОЕ СОЕДИНЕНИЕ РегистрНакопления.ТоварыНаСкладах.Остатки(&amp;ДатаДокумента) КАК ТоварыНаСкладахОстатки
|		ПО ДокументТовары.Магазин = ТоварыНаСкладахОстатки.Склад.Магазин
|			И ДокументТовары.Номенклатура = ТоварыНаСкладахОстатки.Номенклатура
|			И ДокументТовары.ХарактеристикаНоменклатуры = ТоварыНаСкладахОстатки.ХарактеристикаНоменклатуры
|ИТОГИ
|	МАКСИМУМ(Номенклатура),
|	МАКСИМУМ(ХарактеристикаНоменклатуры),
|	МАКСИМУМ(Магазин),
|	МАКСИМУМ(Склад),
|	МАКСИМУМ(КоличествоДокумента)
|ПО
|	НомерСтроки";

Запрос.УстановитьПараметр("ДокументТовары", Объект.Товары);
Запрос.УстановитьПараметр("ДатаДокумента",  Объект.Дата);

Результат = Запрос.Выполнить();

Объект.Товары.Очистить();

ВыборкаПоНомеруСтроки = Результат.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам, "НомерСтроки");

Пока ВыборкаПоНомеруСтроки.Следующий() Цикл
	
	Если ЗначениеЗаполнено(ВыборкаПоНомеруСтроки.НомерСтроки) Тогда
		
		ОстатокПоДокументу = ВыборкаПоНомеруСтроки.КоличествоДокумента;
		
		Если ЗначениеЗаполнено(ВыборкаПоНомеруСтроки.Склад) Тогда
			
			НомерСтрокиСОсновнымСкладом = 0;
			
			//разнесем по складам
			ВыборкаПоОстаткам = ВыборкаПоНомеруСтроки.Выбрать();
			Пока ВыборкаПоОстаткам.Следующий() Цикл
				
				//добавляем строку
				НоваяСтрока = Объект.Товары.Добавить();
				
				НоваяСтрока.Магазин                    = ВыборкаПоОстаткам.Магазин;
				НоваяСтрока.Склад                      = ВыборкаПоОстаткам.Склад;
				НоваяСтрока.Номенклатура               = ВыборкаПоОстаткам.Номенклатура;
				НоваяСтрока.ХарактеристикаНоменклатуры = ВыборкаПоОстаткам.ХарактеристикаНоменклатуры;
				
				Если ВыборкаПоОстаткам.Магазин.ОсновнойСклад = ВыборкаПоОстаткам.Склад Тогда
					
					НомерСтрокиСОсновнымСкладом = НоваяСтрока.НомерСтроки;
					
					//для того, чтобы потом отнести разницу
					КоличествоВСтроке = 0;
					
				Иначе
					
					КоличествоВСтроке = Мин(ОстатокПоДокументу, ВыборкаПоОстаткам.КоличествоОстаток);
					
				КонецЕсли;
				
				НоваяСтрока.Количество                 = КоличествоВСтроке;
				НоваяСтрока.КоличествоДоСвертки        = ВыборкаПоОстаткам.КоличествоОстаток;
				
				ОстатокПоДокументу = ОстатокПоДокументу - КоличествоВСтроке;
				
			КонецЦикла;
			
			//если что-то осталось - отправим на главный склад
			Если ОстатокПоДокументу &gt; 0 Тогда
				
				Если НомерСтрокиСОсновнымСкладом = 0 Тогда
					
					//добавляем строку
					НоваяСтрока = Объект.Товары.Добавить();
					
					НоваяСтрока.Магазин                    = ВыборкаПоНомеруСтроки.Магазин;
					НоваяСтрока.Склад                      = ВыборкаПоНомеруСтроки.Магазин.ОсновнойСклад;
					НоваяСтрока.Номенклатура               = ВыборкаПоНомеруСтроки.Номенклатура;
					НоваяСтрока.ХарактеристикаНоменклатуры = ВыборкаПоНомеруСтроки.ХарактеристикаНоменклатуры;
					НоваяСтрока.Количество                 = ОстатокПоДокументу;
					НоваяСтрока.КоличествоДоСвертки        = 0;
					
				Иначе
					
					//просто добавим к основному складу
					НоваяСтрока = Объект.Товары[НомерСтрокиСОсновнымСкладом-1];
					
					НоваяСтрока.Количество = НоваяСтрока.Количество + ОстатокПоДокументу;
					
				КонецЕсли;
				
			КонецЕсли;
			
		Иначе
			
			//добавляем строку
			НоваяСтрока = Объект.Товары.Добавить();
			
			НоваяСтрока.Магазин                    = ВыборкаПоНомеруСтроки.Магазин;
			НоваяСтрока.Склад                      = ВыборкаПоНомеруСтроки.Магазин.ОсновнойСклад;
			НоваяСтрока.Номенклатура               = ВыборкаПоНомеруСтроки.Номенклатура;
			НоваяСтрока.ХарактеристикаНоменклатуры = ВыборкаПоНомеруСтроки.ХарактеристикаНоменклатуры;
			НоваяСтрока.Количество                 = ОстатокПоДокументу;
			НоваяСтрока.КоличествоДоСвертки        = 0;
			
		КонецЕсли;
		
	Иначе
		
		ВыборкаПоОстаткам = ВыборкаПоНомеруСтроки.Выбрать();
		Пока ВыборкаПоОстаткам.Следующий() Цикл
			
			//добавляем строку
			НоваяСтрока = Объект.Товары.Добавить();
			
			НоваяСтрока.Магазин                    = ВыборкаПоОстаткам.Магазин;
			НоваяСтрока.Склад                      = ВыборкаПоОстаткам.Склад;
			НоваяСтрока.Номенклатура               = ВыборкаПоОстаткам.Номенклатура;
			НоваяСтрока.ХарактеристикаНоменклатуры = ВыборкаПоОстаткам.ХарактеристикаНоменклатуры;
			НоваяСтрока.Количество                 = 0;
			НоваяСтрока.КоличествоДоСвертки        = ВыборкаПоОстаткам.КоличествоОстаток;
			
		КонецЦикла;
		
	КонецЕсли;
	
КонецЦикла;

// Производим конвертацию пустых характеристик
ИмяТабличнойЧасти = "Товары";

ОтборСтрок = Новый Структура("ХарактеристикаНоменклатуры", Справочники.ХарактеристикиНоменклатуры.ПустаяСсылка());

// Получим строки с пустыми характеристиками переданной табличной части
Для каждого СтрокаТабличнойЧасти Из Объект[ИмяТабличнойЧасти].НайтиСтроки(ОтборСтрок) Цикл
	
	// Получаем "не заполненный" элемент характеристики для текущего товара
	ПараметрНоменклатура               = СтрокаТабличнойЧасти.Номенклатура;
	ПараметрХарактеристикаНоменклатуры = СтрокаТабличнойЧасти.ХарактеристикаНоменклатуры;
	Выполнить(Алгоритмы.ПолучитьНеНазначеннуюХарактеристикуНоменклатуры);
	
	// Обновляем поле строки "Характеристика номенклатуры"
	Если ЗначениеЗаполнено(ПараметрХарактеристикаНоменклатуры) Тогда
		СтрокаТабличнойЧасти.ХарактеристикаНоменклатуры = ПараметрХарактеристикаНоменклатуры;
	КонецЕсли;
	
КонецЦикла;

// ТЕПЕРЬ ПО ДЕНЕЖНЫМ СРЕДСТВАМ

#Если Клиент Тогда
	Состояние("Распределение денежных средств по кассам магазинов...");
#КонецЕсли

Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	ДокументДенежныеСредства.Магазин,
|	ДокументДенежныеСредства.Сумма,
|	ДокументДенежныеСредства.НомерСтроки
|ПОМЕСТИТЬ ДокументДенежныеСредства
|ИЗ
|	&amp;ДокументДенежныеСредства КАК ДокументДенежныеСредства
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ДенежныеСредстваОстатки.Касса КАК Касса,
|	ЕСТЬNULL(ДокументДенежныеСредства.Магазин, ДенежныеСредстваОстатки.Касса.Магазин) КАК Магазин,
|	ДокументДенежныеСредства.Сумма КАК СуммаДокумента,
|	ДенежныеСредстваОстатки.СуммаОстаток,
|	ДокументДенежныеСредства.НомерСтроки КАК НомерСтроки
|ИЗ
|	ДокументДенежныеСредства КАК ДокументДенежныеСредства
|		ПОЛНОЕ СОЕДИНЕНИЕ РегистрНакопления.ДенежныеСредства.Остатки(&amp;ДатаДокумента) КАК ДенежныеСредстваОстатки
|		ПО ДокументДенежныеСредства.Магазин = ДенежныеСредстваОстатки.Касса.Магазин
|ИТОГИ
|	МАКСИМУМ(Магазин),
|	МАКСИМУМ(Касса),
|	МАКСИМУМ(СуммаДокумента)
|ПО
|	НомерСтроки";

Запрос.УстановитьПараметр("ДокументДенежныеСредства", Объект.ДенежныеСредства);
Запрос.УстановитьПараметр("ДатаДокумента"           , Объект.Дата);

Результат = Запрос.Выполнить();

Объект.ДенежныеСредства.Очистить();

ВыборкаПоНомеруСтроки = Результат.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам, "НомерСтроки");

Пока ВыборкаПоНомеруСтроки.Следующий() Цикл
	
	Если ЗначениеЗаполнено(ВыборкаПоНомеруСтроки.НомерСтроки) Тогда
		
		ОстатокПоДокументу = ВыборкаПоНомеруСтроки.СуммаДокумента;
		
		Если ЗначениеЗаполнено(ВыборкаПоНомеруСтроки.Касса) Тогда
			
			НомерСтрокиСОсновнойКассой = 0;
			
			//разнесем по кассам
			ВыборкаПоОстаткам = ВыборкаПоНомеруСтроки.Выбрать();
			Пока ВыборкаПоОстаткам.Следующий() Цикл
				
				//добавляем строку
				НоваяСтрока = Объект.ДенежныеСредства.Добавить();
				
				НоваяСтрока.Магазин        = ВыборкаПоОстаткам.Магазин;
				НоваяСтрока.Касса          = ВыборкаПоОстаткам.Касса;
				
				Если ВыборкаПоОстаткам.Магазин.ОсновнаяКасса = ВыборкаПоОстаткам.Касса Тогда
					
					НомерСтрокиСОсновнойКассой = НоваяСтрока.НомерСтроки;
					
					СуммаВСтроке = 0;
					
				Иначе
					
					СуммаВСтроке = Мин(ОстатокПоДокументу, ВыборкаПоОстаткам.СуммаОстаток);
					
				КонецЕсли;
				
				НоваяСтрока.Сумма          = СуммаВСтроке;
				НоваяСтрока.СуммаДоСвертки = ВыборкаПоОстаткам.СуммаОстаток;
				
				ОстатокПоДокументу = ОстатокПоДокументу - СуммаВСтроке;
				
			КонецЦикла;
			
			//если что-то осталось - отправим на главный склад
			Если ОстатокПоДокументу &gt; 0 Тогда
				
				Если НомерСтрокиСОсновнойКассой = 0 Тогда
					
					//добавляем строку
					НоваяСтрока = Объект.ДенежныеСредства.Добавить();
					
					НоваяСтрока.Магазин        = ВыборкаПоНомеруСтроки.Магазин;
					НоваяСтрока.Касса          = ВыборкаПоНомеруСтроки.Магазин.ОсновнаяКасса;
					НоваяСтрока.Сумма          = ОстатокПоДокументу;
					НоваяСтрока.СуммаДоСвертки = 0;
					
				Иначе
					
					//просто добавим к основному складу
					НоваяСтрока = Объект.ДенежныеСредства[НомерСтрокиСОсновнойКассой-1];
					
					НоваяСтрока.Сумма = НоваяСтрока.Сумма + ОстатокПоДокументу;
					
				КонецЕсли;
				
			КонецЕсли;
			
		Иначе
			
			//добавляем строку
			НоваяСтрока = Объект.ДенежныеСредства.Добавить();
			
			НоваяСтрока.Магазин        = ВыборкаПоНомеруСтроки.Магазин;
			НоваяСтрока.Касса          = ВыборкаПоНомеруСтроки.Магазин.ОсновнаяКасса;
			НоваяСтрока.Сумма          = ОстатокПоДокументу;
			НоваяСтрока.СуммаДоСвертки = 0;
			
		КонецЕсли;
		
	Иначе
		
		ВыборкаПоОстаткам = ВыборкаПоНомеруСтроки.Выбрать();
		Пока ВыборкаПоОстаткам.Следующий() Цикл
			
			//добавляем строку
			НоваяСтрока = Объект.ДенежныеСредства.Добавить();
			
			НоваяСтрока.Магазин        = ВыборкаПоОстаткам.Магазин;
			НоваяСтрока.Касса          = ВыборкаПоОстаткам.Касса;
			НоваяСтрока.Сумма          = 0;
			НоваяСтрока.СуммаДоСвертки = ВыборкаПоОстаткам.СуммаОстаток;
			
		КонецЦикла;
		
	КонецЕсли;
	
КонецЦикла;


// Владельцы дисконтных карт
Для каждого СтрокаПродажиПоДисконтнымКартам Из Объект.ПродажиПоДисконтнымКартам Цикл

	Если ЗначениеЗаполнено(СтрокаПродажиПоДисконтнымКартам.ДисконтнаяКарта)
		И ЗначениеЗаполнено(СтрокаПродажиПоДисконтнымКартам.ДисконтнаяКарта.ВладелецКарты)
		И НЕ ЗначениеЗаполнено(СтрокаПродажиПоДисконтнымКартам.ВладелецДисконтнойКарты) Тогда
		СтрокаПродажиПоДисконтнымКартам.ВладелецДисконтнойКарты = СтрокаПродажиПоДисконтнымКартам.ДисконтнаяКарта.ВладелецКарты;
	КонецЕсли;

КонецЦикла;

//УДАЛЕНИЕ ДОКУМЕНТОВ
Если Не Объект.ДляСверки Тогда
	
	Попытка 
		
		УстановитьМонопольныйРежим(Истина);
		
		// получим узлы ЗУП
		МассивУзловОбменаЗУП = Новый Массив;
		СоставПланаОбменаЗУП = ПланыОбмена.ОбменРозницаЗарплатаИУправлениеПерсоналом.ЭтотУзел().Метаданные().Состав;
		
		ВыборкаУзлов = ПланыОбмена.ОбменРозницаЗарплатаИУправлениеПерсоналом.Выбрать();
		Пока ВыборкаУзлов.Следующий() Цикл
			
			Если Не ВыборкаУзлов.Ссылка = ПланыОбмена.ОбменРозницаЗарплатаИУправлениеПерсоналом.ЭтотУзел() Тогда
				
				МассивУзловОбменаЗУП.Добавить(ВыборкаУзлов.Ссылка);
				
			КонецЕсли;
			
		КонецЦикла;
		
		// получим узлы УТ
		МассивУзловОбменаУТ = Новый Массив;
		СоставПланаОбменаУТ = ПланыОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.ЭтотУзел().Метаданные().Состав;
		
		ВыборкаУзлов = ПланыОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.Выбрать();
		Пока ВыборкаУзлов.Следующий() Цикл
			
			Если Не ВыборкаУзлов.Ссылка = ПланыОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.ЭтотУзел() Тогда
				
				МассивУзловОбменаУТ.Добавить(ВыборкаУзлов.Ссылка);
				
			КонецЕсли;
			
		КонецЦикла;
		
		// подготовим переменные для хранения данных
		МассивДокументов = Новый Массив;
		
		ТЗкУдалению = Новый ТаблицаЗначений;
		ТЗкУдалению.Колонки.Добавить("Ссылка");
		ТЗкУдалению.Колонки.Добавить("СсылкаУдаление");
		ТЗкУдалению.Колонки.Добавить("Метаданные");
		
		Заголовок = "Выполнение процедуры свертки узла...";
		Отказ = Ложь;

		// формируем запрос
		ЗапросПоДокументам = Новый Запрос;

		ТекстЗапроса = "";

		Для Каждого Метаданное Из Метаданные.Документы Цикл
			
			Если Метаданное.Имя = "МаркетинговаяАкция" Тогда
				Продолжить;
			КонецЕсли;
			
			Если Не ПустаяСтрока(ТекстЗапроса) Тогда
				
				ТекстЗапроса = ТекстЗапроса + "
				|ОБЪЕДИНИТЬ ВСЕ";
				
			КонецЕсли;
			
			ТекстЗапроса = ТекстЗапроса + "
			|ВЫБРАТЬ Док.Ссылка 
			|ИЗ Документ." + Метаданное.Имя + " КАК Док
			|ГДЕ Док.Дата &lt; &amp;ДатаСвертки";
			
			// если документ - установка скидок, нужно это учесть в запросе
			Если Метаданное.Имя = "УдалитьУстановкаСкидокНоменклатуры" Тогда
				
				МассивУстановокСкидокНоменклатуры = Объект.УдалитьСкидкиНаценкиНоменклатуры.ВыгрузитьКолонку("Документ");
				
				ТекстЗапроса = ТекстЗапроса + " И (НЕ Док.Ссылка В (&amp;МассивУстановокСкидокНоменклатуры))";
				
				ЗапросПоДокументам.УстановитьПараметр("МассивУстановокСкидокНоменклатуры", МассивУстановокСкидокНоменклатуры);
				
			ИначеЕсли Метаданное.Имя = "СверткаИзУправляющейСистемы" И Не Объект.ЭтоНовый() Тогда
				
				ТекстЗапроса = ТекстЗапроса + " И (НЕ Док.Ссылка = &amp;ЭтотДокумент)";
				
				ЗапросПоДокументам.УстановитьПараметр("ЭтотДокумент", Объект.Ссылка);
				
			КонецЕсли;
			
		КонецЦикла;
		ЗапросПоДокументам.Текст = ТекстЗапроса;
		ЗапросПоДокументам.УстановитьПараметр("ДатаСвертки", Объект.Дата);


		#Если Клиент Тогда
			Состояние("Удаление документов...");
		#КонецЕсли

		// загоним данные в таблицу значения и массив
		Результат = ЗапросПоДокументам.Выполнить();
		Выборка = Результат.Выбрать();
		Пока Выборка.Следующий() Цикл
		
			НоваяСтрока = ТЗкУдалению.Добавить();
			НоваяСтрока.Ссылка = Выборка.Ссылка;
			НоваяСтрока.СсылкаУдаление = Новый УдалениеОбъекта(Выборка.Ссылка);
			НоваяСтрока.Метаданные = Выборка.Ссылка.Метаданные();
			
			МассивДокументов.Добавить(Выборка.Ссылка);
		
		КонецЦикла;

		// получим набора регистра сведений "Соответствие объектов для обмена" с тем, чтобы после удаления
		//документов удалить регистрацию изменений этих наборов записей
		ЗапросСОО = Новый Запрос;
		ЗапросСОО.Текст = 
		"ВЫБРАТЬ
		|	СоответствиеОбъектовДляОбмена.СобственнаяСсылка,
		|	СоответствиеОбъектовДляОбмена.СсылкаВДругойИБ
		|ИЗ
		|	РегистрСведений.СоответствиеОбъектовДляОбмена КАК СоответствиеОбъектовДляОбмена
		|ГДЕ
		|	СоответствиеОбъектовДляОбмена.УзелОбмена = &amp;Узел
		|	И СоответствиеОбъектовДляОбмена.СобственнаяСсылка В(&amp;МассивДокументов)";

		ЗапросСОО.УстановитьПараметр("Узел", Параметры.УзелДляОбменаОбъект.Ссылка);
		ЗапросСОО.УстановитьПараметр("МассивДокументов", МассивДокументов);
		ВыборкаСОО = ЗапросСОО.Выполнить().Выбрать();
		
		// удаляем документы
		ТЗнеУдаленных = Новый ТаблицаЗначений;
		УдалитьОбъекты(МассивДокументов, Истина, ТЗнеУдаленных);
		
		// удаляем регистрацию
		Для Каждого СтрокаКУдалению Из ТЗкУдалению Цикл
			
			Если ТЗнеУдаленных.Найти(СтрокаКУдалению.Ссылка) &lt;&gt; Неопределено Тогда
				
				//не смогли удалить - придется пометить на удаление
				ОбъектДокумент = СтрокаКУдалению.Ссылка.ПолучитьОбъект();
				ОбъектДокумент.ОбменДанными.Загрузка = Истина;
				
				//ОбъектДокумент.УстановитьПометкуУдаления(Истина);
				
				ОбъектДокумент.ПометкаУдаления = Истина;
				
				Если ОбъектДокумент.Проведен Тогда
					ОтменитьПроведениеОбъектаВИБ(ОбъектДокумент, ТипЗнч(ОбъектДокумент));
				Иначе
					ОбъектДокумент.Записать();
				КонецЕсли;
				
				Данные = СтрокаКУдалению.Ссылка;
				
			Иначе
				
				//удалили
				Данные = СтрокаКУдалению.СсылкаУдаление;
				
			КонецЕсли;
			
			Если МассивУзловОбменаЗУП.Количество() &gt; 0 И СоставПланаОбменаЗУП.Содержит(СтрокаКУдалению.Метаданные) Тогда
				
				ПланыОбмена.УдалитьРегистрациюИзменений(МассивУзловОбменаЗУП, Данные);
				
			КонецЕсли;
			
			Если СоставПланаОбменаУТ.Содержит(СтрокаКУдалению.Метаданные) Тогда
				
				ПланыОбмена.УдалитьРегистрациюИзменений(МассивУзловОбменаУТ, Данные);
				
			КонецЕсли;
			
		КонецЦикла;

		// удалить регистрацию регистра СОО
		Пока ВыборкаСОО.Следующий() Цикл
			
			НаборЗаписей = РегистрыСведений.СоответствиеОбъектовДляОбмена.СоздатьНаборЗаписей();
			
			НаборЗаписей.Отбор.УзелОбмена.Установить(Параметры.УзелДляОбменаОбъект.Ссылка);
			НаборЗаписей.Отбор.СобственнаяСсылка.Установить(ВыборкаСОО.СобственнаяСсылка);
			НаборЗаписей.Отбор.СсылкаВДругойИБ.Установить(ВыборкаСОО.СсылкаВДругойИБ);
			
			НаборЗаписей.Прочитать();
			
			ПланыОбмена.УдалитьРегистрациюИзменений(МассивУзловОбменаУТ, НаборЗаписей);			
			
		КонецЦикла;
		
		УстановитьМонопольныйРежим(Ложь);

	Исключение
		
		ОбщегоНазначения.СообщитьОбОшибке("Не удалось удалить документы по причине: " + ОписаниеОшибки(),,Заголовок);
		
	КонецПопытки;

КонецЕсли;

#Если Клиент Тогда
	Состояние();
#КонецЕсли

Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>ВыборкаДокументов = Документы.СверткаИзУправляющейСистемы.Выбрать();

Если ВыборкаДокументов.Следующий() Тогда
	
	СсылкаНаОбъект = ВыборкаДокументов.Ссылка;
	
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Приемник>ДокументСсылка.СверткаИзУправляющейСистемы</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование> --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Отключить="true" Поиск="true">
						<Код>2</Код>
						<Наименование> --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование> --&gt; Проведен</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Не УзелДляОбмена.ДляСверки;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>32</Код>
						<Наименование> --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>4</Код>
						<Наименование> --&gt; ДенежныеСредства</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДенежныеСредства" Вид="ТабличнаяЧасть"/>
						<Свойство Отключить="true">
							<Код>5</Код>
							<Наименование> --&gt; Касса</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Касса" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование> --&gt; Сумма</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>30</Код>
							<Наименование> --&gt; Магазин</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Магазин" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
							<КодПравилаКонвертации>КассаВМагазин                                     </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Группа>
						<Код>11</Код>
						<Наименование> --&gt; ПродажиПоДисконтнымКартам</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ПродажиПоДисконтнымКартам" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>12</Код>
							<Наименование> --&gt; ВладелецДисконтнойКарты</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВладелецДисконтнойКарты" Вид="Реквизит"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование> --&gt; ДисконтнаяКарта</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДисконтнаяКарта" Вид="Реквизит" Тип="СправочникСсылка.ИнформационныеКарты"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование> --&gt; Сумма</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Группа>
						<Код>17</Код>
						<Наименование> --&gt; Товары</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>18</Код>
							<Наименование> --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование> --&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>20</Код>
							<Наименование> --&gt; Склад</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование> --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
						</Свойство>
						<Свойство>
							<Код>31</Код>
							<Наименование> --&gt; Магазин</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Магазин" Вид="Реквизит" Тип="СправочникСсылка.Магазины"/>
							<КодПравилаКонвертации>СкладВМагазин                                     </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Группа>
						<Код>22</Код>
						<Наименование> --&gt; ЦеныНоменклатуры</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ЦеныНоменклатуры" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>23</Код>
							<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование> --&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование> --&gt; ТипЦен</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование> --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование> --&gt; Цена</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>28</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>550</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>33</Код>
						<Наименование> --&gt; ДляСверки</Наименование>
						<Порядок>600</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДляСверки" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = УзелДляОбмена.ДляСверки;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Перечисления</Код>
			<Наименование>Перечисления</Наименование>
			<Порядок>150</Порядок>
			<Правило>
				<Код>ВидыДополнительнойИнформацииОбъектов</Код>
				<Наименование>ПеречислениеСсылка.ВидыДополнительнойИнформацииОбъектов --&gt; ПеречислениеСсылка.ВидыДополнительнойИнф</Наименование>
				<Порядок>50</Порядок>
				<Источник>ПеречислениеСсылка.ВидыДополнительнойИнформацииОбъектов</Источник>
				<Приемник>ПеречислениеСсылка.ВидыДополнительнойИнформацииОбъектов</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Изображение --&gt; Изображение</Наименование>
						<Порядок>50</Порядок>
						<Источник>Изображение</Источник>
						<Приемник>Изображение</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Файл --&gt; Файл</Наименование>
						<Порядок>100</Порядок>
						<Источник>Файл</Источник>
						<Приемник>Файл</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыИнформационныхКарт</Код>
				<Наименование>ПеречислениеСсылка.ВидыИнформационныхКарт --&gt; ПеречислениеСсылка.ВидыИнформационныхКарт</Наименование>
				<Порядок>100</Порядок>
				<Источник>ПеречислениеСсылка.ВидыИнформационныхКарт</Источник>
				<Приемник>ПеречислениеСсылка.ВидыИнформационныхКарт</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Магнитная --&gt; Магнитная</Наименование>
						<Порядок>50</Порядок>
						<Источник>Магнитная</Источник>
						<Приемник>Магнитная</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Штриховая --&gt; Штриховая</Наименование>
						<Порядок>100</Порядок>
						<Источник>Штриховая</Источник>
						<Приемник>Штриховая</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийКомплектацияНоменклатуры</Код>
				<Наименование>ПеречислениеСсылка.ВидыОперацийКомплектацияНоменклатуры --&gt; ПеречислениеСсылка.ВидыОперацийКомплекта</Наименование>
				<Порядок>150</Порядок>
				<Источник>ПеречислениеСсылка.ВидыОперацийКомплектацияНоменклатуры</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОперацийКомплектацияНоменклатуры</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Комплектация --&gt; Комплектация</Наименование>
						<Порядок>50</Порядок>
						<Источник>Комплектация</Источник>
						<Приемник>Комплектация</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Разукомплектация --&gt; Разукомплектация</Наименование>
						<Порядок>100</Порядок>
						<Источник>Разукомплектация</Источник>
						<Приемник>Разукомплектация</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийОплатаОтПокупателяПлатежнойКартой</Код>
				<Наименование>ПеречислениеСсылка.ВидыОперацийОплатаОтПокупателяПлатежнойКартой --&gt; ПеречислениеСсылка.ВидыОпераций</Наименование>
				<Порядок>200</Порядок>
				<Источник>ПеречислениеСсылка.ВидыОперацийОплатаОтПокупателяПлатежнойКартой</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОперацийОплатаОтПокупателяПлатежнойКартой</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ВозвратДенежныхСредствПокупателю --&gt; ВозвратДенежн</Наименование>
						<Порядок>50</Порядок>
						<Источник>ВозвратДенежныхСредствПокупателю</Источник>
						<Приемник>ВозвратДенежныхСредствПокупателю</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ОплатаПокупателя --&gt; ОплатаПокупателя</Наименование>
						<Порядок>100</Порядок>
						<Источник>ОплатаПокупателя</Источник>
						<Приемник>ОплатаПокупателя</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийПКО</Код>
				<Наименование>ПеречислениеСсылка.ВидыОперацийПКО --&gt; ПеречислениеСсылка.ВидыОперацийПКО</Наименование>
				<Порядок>250</Порядок>
				<ПередВыгрузкой>Если Источник &lt;&gt; Перечисления.ВидыОперацийПКО.ОплатаПокупателя
	И Источник &lt;&gt; Перечисления.ВидыОперацийПКО.ВозвратДенежныхСредствПоставщиком
	И Источник &lt;&gt; Перечисления.ВидыОперацийПКО.ПрочиеРасчетыСКонтрагентами
	И Источник &lt;&gt; Перечисления.ВидыОперацийПКО.ПриходДенежныхСредствПрочее Тогда
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
				<Источник>ПеречислениеСсылка.ВидыОперацийПКО</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОперацийПКО</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>2</Код>
						<Наименование>ВозвратДенежныхСредствПоставщиком --&gt; ВозвратДенеж</Наименование>
						<Порядок>100</Порядок>
						<Источник>ВозвратДенежныхСредствПоставщиком</Источник>
						<Приемник>ВозвратДенежныхСредствПоставщиком</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ОплатаПокупателя --&gt; ОплатаПокупателя</Наименование>
						<Порядок>150</Порядок>
						<Источник>ОплатаПокупателя</Источник>
						<Приемник>ОплатаПокупателя</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ПриходДенежныхСредствПрочее --&gt; ПриходДенежныхСред</Наименование>
						<Порядок>200</Порядок>
						<Источник>ПриходДенежныхСредствПрочее</Источник>
						<Приемник>ПриходДенежныхСредствПрочее</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>ПрочиеРасчетыСКонтрагентами --&gt; ПрочиеРасчетыСКонт</Наименование>
						<Порядок>250</Порядок>
						<Источник>ПрочиеРасчетыСКонтрагентами</Источник>
						<Приемник>ПрочиеРасчетыСКонтрагентами</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>ВозвратДенежныхСредствПодотчетником --&gt; ПриходДене</Наименование>
						<Порядок>300</Порядок>
						<Источник>ВозвратДенежныхСредствПодотчетником</Источник>
						<Приемник>ПриходДенежныхСредствПрочее</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>ПолучениеНаличныхДенежныхСредствВБанке --&gt; ПриходД</Наименование>
						<Порядок>350</Порядок>
						<Источник>ПолучениеНаличныхДенежныхСредствВБанке</Источник>
						<Приемник>ПриходДенежныхСредствПрочее</Приемник>
					</Значение>
					<Значение>
						<Код>8</Код>
						<Наименование>ПриходДенежныхСредствРозничнаяВыручка --&gt; ПриходДе</Наименование>
						<Порядок>400</Порядок>
						<Источник>ПриходДенежныхСредствРозничнаяВыручка</Источник>
						<Приемник>ПриходДенежныхСредствПрочее</Приемник>
					</Значение>
					<Значение>
						<Код>9</Код>
						<Наименование>РасчетыПоКредитамИЗаймамСКонтрагентами --&gt; ПриходД</Наименование>
						<Порядок>450</Порядок>
						<Источник>РасчетыПоКредитамИЗаймамСКонтрагентами</Источник>
						<Приемник>ПриходДенежныхСредствПрочее</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийРКО</Код>
				<Наименование>ПеречислениеСсылка.ВидыОперацийРКО --&gt; ПеречислениеСсылка.ВидыОперацийРКО</Наименование>
				<Порядок>300</Порядок>
				<Источник>ПеречислениеСсылка.ВидыОперацийРКО</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОперацийРКО</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ВозвратДенежныхСредствПокупателю --&gt; ВозвратДенежн</Наименование>
						<Порядок>50</Порядок>
						<Источник>ВозвратДенежныхСредствПокупателю</Источник>
						<Приемник>ВозвратДенежныхСредствПокупателю</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ВыдачаДенежныхСредствПодотчетнику --&gt; ВыдачаДенежн</Наименование>
						<Порядок>100</Порядок>
						<Источник>ВыдачаДенежныхСредствПодотчетнику</Источник>
						<Приемник>РасходДенежныхСредствПрочее</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ОплатаПоставщику --&gt; ОплатаПоставщику</Наименование>
						<Порядок>150</Порядок>
						<Источник>ОплатаПоставщику</Источник>
						<Приемник>ОплатаПоставщику</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ПрочиеРасчетыСКонтрагентами --&gt; ПрочиеРасчетыСКонт</Наименование>
						<Порядок>200</Порядок>
						<Источник>ПрочиеРасчетыСКонтрагентами</Источник>
						<Приемник>ПрочиеРасчетыСКонтрагентами</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>РасходДенежныхСредствПрочее --&gt; РасходДенежныхСред</Наименование>
						<Порядок>250</Порядок>
						<Источник>РасходДенежныхСредствПрочее</Источник>
						<Приемник>РасходДенежныхСредствПрочее</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>ВзносНаличнымиВБанк --&gt; РасходДенежныхСредствПроче</Наименование>
						<Порядок>300</Порядок>
						<Источник>ВзносНаличнымиВБанк</Источник>
						<Приемник>РасходДенежныхСредствПрочее</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>ВыдачаДенежныхСредствКассеККМ --&gt; РасходДенежныхСр</Наименование>
						<Порядок>350</Порядок>
						<Источник>ВыдачаДенежныхСредствКассеККМ</Источник>
						<Приемник>РасходДенежныхСредствПрочее</Приемник>
					</Значение>
					<Значение>
						<Код>8</Код>
						<Наименование>РасчетыПоКредитамИЗаймамСКонтрагентами --&gt; РасходД</Наименование>
						<Порядок>400</Порядок>
						<Источник>РасчетыПоКредитамИЗаймамСКонтрагентами</Источник>
						<Приемник>РасходДенежныхСредствПрочее</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийЧекККМ</Код>
				<Наименование>ПеречислениеСсылка.ВидыОперацийЧекККМ --&gt; ПеречислениеСсылка.ВидыОперацийЧекККМ</Наименование>
				<Порядок>400</Порядок>
				<Источник>ПеречислениеСсылка.ВидыОперацийЧекККМ</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОперацийЧекККМ</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Возврат --&gt; Возврат</Наименование>
						<Порядок>50</Порядок>
						<Источник>Возврат</Источник>
						<Приемник>Возврат</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Продажа --&gt; Продажа</Наименование>
						<Порядок>100</Порядок>
						<Источник>Продажа</Источник>
						<Приемник>Продажа</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ДниНедели</Код>
				<Наименование>ПеречислениеСсылка.ДниНедели --&gt; ПеречислениеСсылка.ДниНедели</Наименование>
				<Порядок>500</Порядок>
				<Источник>ПеречислениеСсылка.ДниНедели</Источник>
				<Приемник>ПеречислениеСсылка.ДниНедели</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Воскресенье --&gt; Воскресенье</Наименование>
						<Порядок>50</Порядок>
						<Источник>Воскресенье</Источник>
						<Приемник>Воскресенье</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Вторник --&gt; Вторник</Наименование>
						<Порядок>100</Порядок>
						<Источник>Вторник</Источник>
						<Приемник>Вторник</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Понедельник --&gt; Понедельник</Наименование>
						<Порядок>150</Порядок>
						<Источник>Понедельник</Источник>
						<Приемник>Понедельник</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Пятница --&gt; Пятница</Наименование>
						<Порядок>200</Порядок>
						<Источник>Пятница</Источник>
						<Приемник>Пятница</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Среда --&gt; Среда</Наименование>
						<Порядок>250</Порядок>
						<Источник>Среда</Источник>
						<Приемник>Среда</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>Суббота --&gt; Суббота</Наименование>
						<Порядок>300</Порядок>
						<Источник>Суббота</Источник>
						<Приемник>Суббота</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>Четверг --&gt; Четверг</Наименование>
						<Порядок>350</Порядок>
						<Источник>Четверг</Источник>
						<Приемник>Четверг</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ОтветственныеЛицаОрганизацийПеречисление</Код>
				<Наименование>ПеречислениеСсылка.ОтветственныеЛицаОрганизации --&gt; ПеречислениеСсылка.ОтветственныеЛицаОрганизаций</Наименование>
				<Порядок>550</Порядок>
				<Источник>ПеречислениеСсылка.ОтветственныеЛицаОрганизации</Источник>
				<Приемник>ПеречислениеСсылка.ОтветственныеЛицаОрганизаций</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ГлавныйБухгалтер --&gt; ГлавныйБухгалтер</Наименование>
						<Порядок>50</Порядок>
						<Источник>ГлавныйБухгалтер</Источник>
						<Приемник>ГлавныйБухгалтер</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Кассир --&gt; Кассир</Наименование>
						<Порядок>100</Порядок>
						<Источник>Кассир</Источник>
						<Приемник>Кассир</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Руководитель --&gt; Руководитель</Наименование>
						<Порядок>150</Порядок>
						<Источник>Руководитель</Источник>
						<Приемник>Руководитель</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ПериодичностьНакопленияСкидок</Код>
				<Наименование>ПеречислениеСсылка.ПериодичностьНакопленияСкидок --&gt; ПеречислениеСсылка.ПериодичностьНакопленияСкидо</Наименование>
				<Порядок>600</Порядок>
				<Источник>ПеречислениеСсылка.ПериодичностьНакопленияСкидок</Источник>
				<Приемник>ПеречислениеСсылка.ПериодичностьНакопленияСкидок</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ВТечениеВсегоПериода --&gt; ВТечениеВсегоПериода</Наименование>
						<Порядок>50</Порядок>
						<Источник>ВТечениеВсегоПериода</Источник>
						<Приемник>ВТечениеВсегоПериода</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Год --&gt; Год</Наименование>
						<Порядок>100</Порядок>
						<Источник>Год</Источник>
						<Приемник>Год</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Квартал --&gt; Квартал</Наименование>
						<Порядок>150</Порядок>
						<Источник>Квартал</Источник>
						<Приемник>Квартал</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Месяц --&gt; Месяц</Наименование>
						<Порядок>200</Порядок>
						<Источник>Месяц</Источник>
						<Приемник>Месяц</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Полугодие --&gt; Полугодие</Наименование>
						<Порядок>250</Порядок>
						<Источник>Полугодие</Источник>
						<Приемник>Полугодие</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>СтавкиНДС</Код>
				<Наименование>ПеречислениеСсылка.СтавкиНДС --&gt; ПеречислениеСсылка.СтавкиНДС</Наименование>
				<Порядок>700</Порядок>
				<Источник>ПеречислениеСсылка.СтавкиНДС</Источник>
				<Приемник>ПеречислениеСсылка.СтавкиНДС</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>БезНДС --&gt; БезНДС</Наименование>
						<Порядок>50</Порядок>
						<Источник>БезНДС</Источник>
						<Приемник>БезНДС</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>НДС0 --&gt; НДС0</Наименование>
						<Порядок>100</Порядок>
						<Источник>НДС0</Источник>
						<Приемник>НДС0</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>НДС10 --&gt; НДС10</Наименование>
						<Порядок>150</Порядок>
						<Источник>НДС10</Источник>
						<Приемник>НДС10</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>НДС18 --&gt; НДС18</Наименование>
						<Порядок>200</Порядок>
						<Источник>НДС18</Источник>
						<Приемник>НДС18</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>НДС20 --&gt; НДС20</Наименование>
						<Порядок>250</Порядок>
						<Источник>НДС20</Источник>
						<Приемник>НДС20</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>НДС10_110 --&gt; НДС10</Наименование>
						<Порядок>300</Порядок>
						<Источник>НДС10_110</Источник>
						<Приемник>НДС10</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>НДС18_118 --&gt; НДС18</Наименование>
						<Порядок>350</Порядок>
						<Источник>НДС18_118</Источник>
						<Приемник>НДС18</Приемник>
					</Значение>
					<Значение>
						<Код>8</Код>
						<Наименование>НДС20_120 --&gt; НДС20</Наименование>
						<Порядок>400</Порядок>
						<Источник>НДС20_120</Источник>
						<Приемник>НДС20</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>СтатусыПисем</Код>
				<Наименование>ПеречислениеСсылка.СтатусыПисем --&gt; ПеречислениеСсылка.СтатусыПисем</Наименование>
				<Порядок>750</Порядок>
				<Источник>ПеречислениеСсылка.СтатусыПисем</Источник>
				<Приемник>ПеречислениеСсылка.СтатусыПисем</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Исходящее --&gt; Исходящее</Наименование>
						<Порядок>50</Порядок>
						<Источник>Исходящее</Источник>
						<Приемник>Исходящее</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Отправленное --&gt; Отправленное</Наименование>
						<Порядок>100</Порядок>
						<Источник>Отправленное</Источник>
						<Приемник>Отправленное</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Полученное --&gt; Полученное</Наименование>
						<Порядок>150</Порядок>
						<Источник>Полученное</Источник>
						<Приемник>Полученное</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Сохраненное --&gt; Сохраненное</Наименование>
						<Порядок>200</Порядок>
						<Источник>Сохраненное</Источник>
						<Приемник>Сохраненное</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыАвтоматическогоОбменаДанными</Код>
				<Наименование>ПеречислениеСсылка.ТипыАвтоматическогоОбменаДанными --&gt; ПеречислениеСсылка.ТипыАвтоматическогоОбмена</Наименование>
				<Порядок>800</Порядок>
				<Источник>ПеречислениеСсылка.ТипыАвтоматическогоОбменаДанными</Источник>
				<Приемник>ПеречислениеСсылка.ТипыАвтоматическогоОбменаДанными</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ОбменЧерезFTPРесурс --&gt; ОбменЧерезFTPРесурс</Наименование>
						<Порядок>50</Порядок>
						<Источник>ОбменЧерезFTPРесурс</Источник>
						<Приемник>ОбменЧерезFTPРесурс</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ОбменЧерезПочту --&gt; ОбменЧерезПочту</Наименование>
						<Порядок>100</Порядок>
						<Источник>ОбменЧерезПочту</Источник>
						<Приемник>ОбменЧерезПочту</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ОбменЧерезФайловыйРесурс --&gt; ОбменЧерезФайловыйРес</Наименование>
						<Порядок>150</Порядок>
						<Источник>ОбменЧерезФайловыйРесурс</Источник>
						<Приемник>ОбменЧерезФайловыйРесурс</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыНоменклатуры</Код>
				<Наименование>ПеречислениеСсылка.ТипыНоменклатуры --&gt; ПеречислениеСсылка.ТипыНоменклатуры</Наименование>
				<Порядок>850</Порядок>
				<ПередВыгрузкой>Если Источник = Перечисления.ТипыНоменклатуры.Набор Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<Источник>ПеречислениеСсылка.ТипыНоменклатуры</Источник>
				<Приемник>ПеречислениеСсылка.ТипыНоменклатуры</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Комплект --&gt; Комплект</Наименование>
						<Порядок>50</Порядок>
						<Источник>Комплект</Источник>
						<Приемник>Комплект</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Товар --&gt; Товар</Наименование>
						<Порядок>150</Порядок>
						<Источник>Товар</Источник>
						<Приемник>Товар</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Услуга --&gt; Услуга</Наименование>
						<Порядок>200</Порядок>
						<Источник>Услуга</Источник>
						<Приемник>Услуга</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Набор --&gt; Комплект</Наименование>
						<Порядок>250</Порядок>
						<Источник>Набор</Источник>
						<Приемник>Комплект</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыОплатЧекаККМ</Код>
				<Наименование>ПеречислениеСсылка.ТипыОплатЧекаККМ --&gt; ПеречислениеСсылка.ТипыОплатЧекаККМ</Наименование>
				<Порядок>900</Порядок>
				<Источник>ПеречислениеСсылка.ТипыОплатЧекаККМ</Источник>
				<Приемник>ПеречислениеСсылка.ТипыОплатЧекаККМ</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>БанковскийКредит --&gt; БанковскийКредит</Наименование>
						<Порядок>50</Порядок>
						<Источник>БанковскийКредит</Источник>
						<Приемник>БанковскийКредит</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Наличные --&gt; Наличные</Наименование>
						<Порядок>100</Порядок>
						<Источник>Наличные</Источник>
						<Приемник>Наличные</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ПлатежнаяКарта --&gt; ПлатежнаяКарта</Наименование>
						<Порядок>150</Порядок>
						<Источник>ПлатежнаяКарта</Источник>
						<Приемник>ПлатежнаяКарта</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ЮрФизЛицо</Код>
				<Наименование>ПеречислениеСсылка.ЮрФизЛицо --&gt; ПеречислениеСсылка.ЮрФизЛицо</Наименование>
				<Порядок>1000</Порядок>
				<Источник>ПеречислениеСсылка.ЮрФизЛицо</Источник>
				<Приемник>ПеречислениеСсылка.ЮрФизЛицо</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ФизЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>50</Порядок>
						<Источник>ФизЛицо</Источник>
						<Приемник>ФизЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ЮрЛицо --&gt; ЮрЛицо</Наименование>
						<Порядок>100</Порядок>
						<Источник>ЮрЛицо</Источник>
						<Приемник>ЮрЛицо</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыКонтактнойИнформации</Код>
				<Наименование>ПеречислениеСсылка.ТипыКонтактнойИнформации --&gt; ПеречислениеСсылка.ТипыКонтактнойИнформации</Наименование>
				<Порядок>1050</Порядок>
				<Источник>ПеречислениеСсылка.ТипыКонтактнойИнформации</Источник>
				<Приемник>ПеречислениеСсылка.ТипыКонтактнойИнформации</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Адрес --&gt; Адрес</Наименование>
						<Порядок>50</Порядок>
						<Источник>Адрес</Источник>
						<Приемник>Адрес</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>АдресЭлектроннойПочты --&gt; АдресЭлектроннойПочты</Наименование>
						<Порядок>100</Порядок>
						<Источник>АдресЭлектроннойПочты</Источник>
						<Приемник>АдресЭлектроннойПочты</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ВебСтраница --&gt; ВебСтраница</Наименование>
						<Порядок>150</Порядок>
						<Источник>ВебСтраница</Источник>
						<Приемник>ВебСтраница</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Другое --&gt; Другое</Наименование>
						<Порядок>200</Порядок>
						<Источник>Другое</Источник>
						<Приемник>Другое</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Телефон --&gt; Телефон</Наименование>
						<Порядок>250</Порядок>
						<Источник>Телефон</Источник>
						<Приемник>Телефон</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОбъектовКонтактнойИнформации</Код>
				<Наименование>ПеречислениеСсылка.ВидыОбъектовКонтактнойИнформации --&gt; ПеречислениеСсылка.ВидыОбъектовКонтактнойИнф</Наименование>
				<Порядок>1100</Порядок>
				<Источник>ПеречислениеСсылка.ВидыОбъектовКонтактнойИнформации</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОбъектовКонтактнойИнформации</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Контрагенты --&gt; Контрагенты</Наименование>
						<Порядок>50</Порядок>
						<Источник>Контрагенты</Источник>
						<Приемник>Контрагенты</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Организации --&gt; Организации</Наименование>
						<Порядок>100</Порядок>
						<Источник>Организации</Источник>
						<Приемник>Организации</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ФизическиеЛица --&gt; ФизическиеЛица</Наименование>
						<Порядок>150</Порядок>
						<Источник>ФизическиеЛица</Источник>
						<Приемник>ФизическиеЛица</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыИнформационныхКарт</Код>
				<Наименование>Перечисление: Типы информационных карт</Наименование>
				<Порядок>1150</Порядок>
				<Источник>ПеречислениеСсылка.ТипыИнформационныхКарт</Источник>
				<Приемник>ПеречислениеСсылка.ТипыИнформационныхКарт</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Дисконтная --&gt; Дисконтная</Наименование>
						<Порядок>50</Порядок>
						<Источник>Дисконтная</Источник>
						<Приемник>Дисконтная</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Регистрационная --&gt; Регистрационная</Наименование>
						<Порядок>100</Порядок>
						<Источник>Регистрационная</Источник>
						<Приемник>Регистрационная</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>Периодичность</Код>
				<Наименование>Перечисление: Периодичность</Наименование>
				<Порядок>1200</Порядок>
				<Источник>ПеречислениеСсылка.Периодичность</Источник>
				<Приемник>ПеречислениеСсылка.Периодичность</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Год --&gt; Год</Наименование>
						<Порядок>50</Порядок>
						<Источник>Год</Источник>
						<Приемник>Год</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Декада --&gt; Декада</Наименование>
						<Порядок>100</Порядок>
						<Источник>Декада</Источник>
						<Приемник>Декада</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>День --&gt; День</Наименование>
						<Порядок>150</Порядок>
						<Источник>День</Источник>
						<Приемник>День</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Квартал --&gt; Квартал</Наименование>
						<Порядок>200</Порядок>
						<Источник>Квартал</Источник>
						<Приемник>Квартал</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Месяц --&gt; Месяц</Наименование>
						<Порядок>250</Порядок>
						<Источник>Месяц</Источник>
						<Приемник>Месяц</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>Неделя --&gt; Неделя</Наименование>
						<Порядок>300</Порядок>
						<Источник>Неделя</Источник>
						<Приемник>Неделя</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>Полугодие --&gt; Полугодие</Наименование>
						<Порядок>350</Порядок>
						<Источник>Полугодие</Источник>
						<Приемник>Полугодие</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыДомов</Код>
				<Наименование>Перечисление: Типы домов</Наименование>
				<Порядок>1250</Порядок>
				<Источник>ПеречислениеСсылка.ТипыДомов</Источник>
				<Приемник>ПеречислениеСсылка.ТипыДомов</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Владение --&gt; Владение</Наименование>
						<Порядок>50</Порядок>
						<Источник>Владение</Источник>
						<Приемник>Владение</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Дом --&gt; Дом</Наименование>
						<Порядок>100</Порядок>
						<Источник>Дом</Источник>
						<Приемник>Дом</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыКвартир</Код>
				<Наименование>Перечисление: Типы квартир</Наименование>
				<Порядок>1300</Порядок>
				<Источник>ПеречислениеСсылка.ТипыКвартир</Источник>
				<Приемник>ПеречислениеСсылка.ТипыКвартир</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Квартира --&gt; Квартира</Наименование>
						<Порядок>50</Порядок>
						<Источник>Квартира</Источник>
						<Приемник>Квартира</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Офис --&gt; Офис</Наименование>
						<Порядок>100</Порядок>
						<Источник>Офис</Источник>
						<Приемник>Офис</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыКорпусов</Код>
				<Наименование>Перечисление: Типы корпусов</Наименование>
				<Порядок>1350</Порядок>
				<Источник>ПеречислениеСсылка.ТипыКорпусов</Источник>
				<Приемник>ПеречислениеСсылка.ТипыКорпусов</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Корпус --&gt; Корпус</Наименование>
						<Порядок>50</Порядок>
						<Источник>Корпус</Источник>
						<Приемник>Корпус</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Строение --&gt; Строение</Наименование>
						<Порядок>100</Порядок>
						<Источник>Строение</Источник>
						<Приемник>Строение</Приемник>
					</Значение>
				</Значения>
			</Правило>
		</Группа>
		<Группа>
			<Код>Планы видов характеристик</Код>
			<Наименование>Планы видов характеристик</Наименование>
			<Порядок>200</Порядок>
			<Правило>
				<Код>НазначенияСвойствКатегорийОбъектов</Код>
				<Наименование>ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов --&gt; ПланВидовХарактеристикСсылка.Наз</Наименование>
				<Порядок>50</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов</Источник>
				<Приемник>ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов"/>
						<КодПравилаКонвертации>НазначенияСвойствКатегорийОбъектов                </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>4</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Документы --&gt; Документы</Наименование>
						<Порядок>50</Порядок>
						<Источник>Документы</Источник>
						<Приемник>Документы</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>Справочники --&gt; Справочники</Наименование>
						<Порядок>100</Порядок>
						<Источник>Справочники</Источник>
						<Приемник>Справочники</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Справочник_Контрагенты --&gt; Справочник_Контрагенты</Наименование>
						<Порядок>150</Порядок>
						<Источник>Справочник_Контрагенты</Источник>
						<Приемник>Справочник_Контрагенты</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Справочник_Номенклатура --&gt; Справочник_Номенклатур</Наименование>
						<Порядок>200</Порядок>
						<Источник>Справочник_Номенклатура</Источник>
						<Приемник>Справочник_Номенклатура</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>Справочник_Организации --&gt; Справочник_Организации</Наименование>
						<Порядок>250</Порядок>
						<Источник>Справочник_Организации</Источник>
						<Приемник>Справочник_Организации</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Справочник_Склады --&gt; Справочник_Склады</Наименование>
						<Порядок>300</Порядок>
						<Источник>Справочник_Склады</Источник>
						<Приемник>Справочник_Склады</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Справочник_ФизическиеЛица --&gt; Справочник_Физически</Наименование>
						<Порядок>350</Порядок>
						<Источник>Справочник_ФизическиеЛица</Источник>
						<Приемник>Справочник_ФизическиеЛица</Приемник>
					</Значение>
					<Значение>
						<Код>8</Код>
						<Наименование>Справочник_ХарактеристикиНоменклатуры --&gt; Справочн</Наименование>
						<Порядок>400</Порядок>
						<Источник>Справочник_ХарактеристикиНоменклатуры</Источник>
						<Приемник>Справочник_ХарактеристикиНоменклатуры</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>СвойстваОбъектов</Код>
				<Наименование>ПланВидовХарактеристикСсылка.СвойстваОбъектов --&gt; ПланВидовХарактеристикСсылка.СвойстваОбъектов</Наименование>
				<Порядок>100</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>ПланВидовХарактеристикСсылка.СвойстваОбъектов</Источник>
				<Приемник>ПланВидовХарактеристикСсылка.СвойстваОбъектов</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>НазначениеСвойства --&gt; НазначениеСвойства</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="НазначениеСвойства" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов"/>
						<Приемник Имя="НазначениеСвойства" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов"/>
						<КодПравилаКонвертации>НазначенияСвойствКатегорийОбъектов                </КодПравилаКонвертации>
						<ПередВыгрузкой>//Если Источник.НазначениеСвойства = ПланыВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Справочник_ХарактеристикиНоменклатуры Тогда
//	Значение = ПланыВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Справочник_Номенклатура;
//КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ТипыШтрихкодов</Код>
				<Наименование>ПланВидовХарактеристикСсылка.ТипыШтрихкодов --&gt; ПланВидовХарактеристикСсылка.ТипыШтрихкодов</Наименование>
				<Порядок>150</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>ПланВидовХарактеристикСсылка.ТипыШтрихкодов</Источник>
				<Приемник>ПланВидовХарактеристикСсылка.ТипыШтрихкодов</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>EAN128 --&gt; EAN128</Наименование>
						<Порядок>50</Порядок>
						<Источник>EAN128</Источник>
						<Приемник>EAN128</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>EAN13 --&gt; EAN13</Наименование>
						<Порядок>100</Порядок>
						<Источник>EAN13</Источник>
						<Приемник>EAN13</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>EAN8 --&gt; EAN8</Наименование>
						<Порядок>150</Порядок>
						<Источник>EAN8</Источник>
						<Приемник>EAN8</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Code128 --&gt; CODE128</Наименование>
						<Порядок>200</Порядок>
						<Источник>Code128</Источник>
						<Приемник>CODE128</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Code39 --&gt; CODE39</Наименование>
						<Порядок>250</Порядок>
						<Источник>Code39</Источник>
						<Приемник>CODE39</Приемник>
					</Значение>
				</Значения>
			</Правило>
		</Группа>
		<Группа>
			<Код>Регистры сведений</Код>
			<Наименование>Регистры сведений</Наименование>
			<Порядок>250</Порядок>
			<Правило>
				<Код>ГраницыЗапретаИзмененияДанных</Код>
				<Наименование>РегистрСведенийЗапись.ГраницыЗапретаИзмененияДанных --&gt; РегистрСведенийЗапись.ГраницыЗапретаИзменени</Наименование>
				<Порядок>50</Порядок>
				<ПередВыгрузкой>Если Параметры.ИспользоватьФильтрПоОрганизациям 
	И ТипЗнч(Источник.Организация) = Параметры.ТипСправочникСсылкаОрганизации Тогда
	
	Если Параметры.МассивОрганизаций.Найти(Источник.Организация) = Неопределено Тогда
		
		Отказ = Истина;
		
	КонецЕсли;
	         	
КонецЕсли;</ПередВыгрузкой>
				<Источник>РегистрСведенийЗапись.ГраницыЗапретаИзмененияДанных</Источник>
				<Приемник>РегистрСведенийЗапись.ГраницыЗапретаИзмененияДанных</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ГраницаЗапретаИзменений --&gt; ГраницаЗапретаИзменений</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ГраницаЗапретаИзменений" Вид="Ресурс" Тип="Дата"/>
						<Приемник Имя="ГраницаЗапретаИзменений" Вид="Ресурс" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Организация" Вид="Измерение" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Измерение" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Пользователь --&gt; Пользователь</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Пользователь" Вид="Измерение"/>
						<Приемник Имя="Пользователь" Вид="Измерение"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ЗначенияСвойствОбъектовРегистрСведений</Код>
				<Наименование>РегистрСведенийЗапись.ЗначенияСвойствОбъектов --&gt; РегистрСведенийЗапись.ЗначенияСвойствОбъектов</Наименование>
				<Порядок>100</Порядок>
				<ПередВыгрузкой>Если Параметры.ИспользоватьФильтрПоОрганизациям 
	И ТипЗнч(Источник.Объект) = Параметры.ТипСправочникСсылкаОрганизации Тогда
	
	Если Параметры.МассивОрганизаций.Найти(Источник.Объект) = Неопределено Тогда
		
		Отказ = Истина;
		
	КонецЕсли;
	         	
КонецЕсли;</ПередВыгрузкой>
				<Источник>РегистрСведенийЗапись.ЗначенияСвойствОбъектов</Источник>
				<Приемник>РегистрСведенийЗапись.ЗначенияСвойствОбъектов</Приемник>
				<Свойства>
					<Свойство>
						<Код>2</Код>
						<Наименование>Свойство --&gt; Свойство</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Свойство" Вид="Измерение" Тип="ПланВидовХарактеристикСсылка.СвойстваОбъектов"/>
						<Приемник Имя="Свойство" Вид="Измерение" Тип="ПланВидовХарактеристикСсылка.СвойстваОбъектов"/>
						<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Значение --&gt; Значение</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Значение" Вид="Ресурс"/>
						<Приемник Имя="Значение" Вид="Ресурс"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Объект --&gt; Объект</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Объект" Вид="Измерение"/>
						<Приемник Имя="Объект" Вид="Измерение"/>
						<ПередВыгрузкой>Если ТипЗнч(Источник.Объект) = Тип("СправочникСсылка.Склады") Тогда
	ИмяПКО = "Склады";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КатегорииОбъектовРегистрСведений</Код>
				<Наименование>РегистрСведенийЗапись.КатегорииОбъектов --&gt; РегистрСведенийЗапись.КатегорииОбъектов</Наименование>
				<Порядок>150</Порядок>
				<ПередВыгрузкой>Если Параметры.ИспользоватьФильтрПоОрганизациям 
	И ТипЗнч(Источник.Объект) = Параметры.ТипСправочникСсылкаОрганизации Тогда
	
	Если Параметры.МассивОрганизаций.Найти(Источник.Объект) = Неопределено Тогда
		
		Отказ = Истина;
		
	КонецЕсли;
	         	
КонецЕсли;</ПередВыгрузкой>
				<Источник>РегистрСведенийЗапись.КатегорииОбъектов</Источник>
				<Приемник>РегистрСведенийЗапись.КатегорииОбъектов</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Категория --&gt; Категория</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Категория" Вид="Измерение" Тип="СправочникСсылка.КатегорииОбъектов"/>
						<Приемник Имя="Категория" Вид="Измерение" Тип="СправочникСсылка.КатегорииОбъектов"/>
						<КодПравилаКонвертации>КатегорииОбъектов                                 </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Объект --&gt; Объект</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Объект" Вид="Измерение"/>
						<Приемник Имя="Объект" Вид="Измерение"/>
						<ПередВыгрузкой>Если ТипЗнч(Источник.Объект) = Тип("СправочникСсылка.Склады") Тогда
	ИмяПКО = "Склады";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КомплектующиеНоменклатуры</Код>
				<Наименование>РегистрСведенийЗапись.КомплектующиеНоменклатуры --&gt; РегистрСведенийЗапись.КомплектующиеНоменклатуры</Наименование>
				<Порядок>200</Порядок>
				<Источник>РегистрСведенийЗапись.КомплектующиеНоменклатуры</Источник>
				<Приемник>РегистрСведенийЗапись.КомплектующиеНоменклатуры</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДоляСтоимости --&gt; ДоляСтоимости</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ДоляСтоимости" Вид="Ресурс" Тип="Число"/>
						<Приемник Имя="ДоляСтоимости" Вид="Ресурс" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ЕдиницаИзмерения" Вид="Ресурс" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<Приемник Имя="ЕдиницаИзмерения" Вид="Ресурс" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Количество --&gt; Количество</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Количество" Вид="Ресурс" Тип="Число"/>
						<Приемник Имя="Количество" Вид="Ресурс" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Комплектующая --&gt; Комплектующая</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Комплектующая" Вид="Измерение" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="Комплектующая" Вид="Измерение" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Номенклатура" Вид="Измерение" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="Номенклатура" Вид="Измерение" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ХарактеристикаКомплектующей --&gt; ХарактеристикаКомплектующей</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ХарактеристикаКомплектующей" Вид="Измерение" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
						<Приемник Имя="ХарактеристикаКомплектующей" Вид="Измерение" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
						<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ХарактеристикаНоменклатуры" Вид="Измерение" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
						<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Измерение" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
						<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>НазначенияСвойствОбъектов</Код>
				<Наименование>РегистрСведенийЗапись.НазначенияСвойствОбъектов --&gt; РегистрСведенийЗапись.НазначенияСвойствОбъектов</Наименование>
				<Порядок>250</Порядок>
				<Источник>РегистрСведенийЗапись.НазначенияСвойствОбъектов</Источник>
				<Приемник>РегистрСведенийЗапись.НазначенияСвойствОбъектов</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Объект --&gt; Объект</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Объект" Вид="Измерение"/>
						<Приемник Имя="Объект" Вид="Измерение"/>
						<ПередВыгрузкой>Если Параметры.ИспользоватьФильтрПоОрганизациям 
	И ТипЗнч(Источник.Объект) = Параметры.ТипСправочникСсылкаОрганизации Тогда
	
	Если Параметры.МассивОрганизаций.Найти(Источник.Объект) = Неопределено Тогда
		
		Отказ = Истина;
		
	КонецЕсли;
	         	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Свойство --&gt; Свойство</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Свойство" Вид="Измерение" Тип="ПланВидовХарактеристикСсылка.СвойстваОбъектов"/>
						<Приемник Имя="Свойство" Вид="Измерение" Тип="ПланВидовХарактеристикСсылка.СвойстваОбъектов"/>
						<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ОтветственныеЛицаОрганизации</Код>
				<Наименование>РегистрСведенийЗапись.ОтветственныеЛицаОрганизации --&gt; РегистрСведенийЗапись.ОтветственныеЛицаОргани</Наименование>
				<Порядок>300</Порядок>
				<ПередВыгрузкой>Если Параметры.ИспользоватьФильтрПоОрганизациям 
	И ТипЗнч(Источник.СтруктурнаяЕдиница) = Параметры.ТипСправочникСсылкаОрганизации Тогда
	
	Если Параметры.МассивОрганизаций.Найти(Источник.СтруктурнаяЕдиница) = Неопределено Тогда
		
		Отказ = Истина;
		
	КонецЕсли;
	         	
КонецЕсли;</ПередВыгрузкой>
				<Источник>РегистрСведенийЗапись.ОтветственныеЛицаОрганизации</Источник>
				<Приемник>РегистрСведенийЗапись.ОтветственныеЛицаОрганизаций</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Должность --&gt; Должность</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Должность" Вид="Ресурс" Тип="СправочникСсылка.ДолжностиОрганизаций"/>
						<Приемник Имя="Должность" Вид="Ресурс" Тип="СправочникСсылка.ДолжностиОрганизаций"/>
						<КодПравилаКонвертации>ДолжностиОрганизаций                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ОтветственноеЛицо --&gt; ОтветственноеЛицо</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ОтветственноеЛицо" Вид="Измерение" Тип="ПеречислениеСсылка.ОтветственныеЛицаОрганизации"/>
						<Приемник Имя="ОтветственноеЛицо" Вид="Измерение" Тип="ПеречислениеСсылка.ОтветственныеЛицаОрганизаций"/>
						<КодПравилаКонвертации>ОтветственныеЛицаОрганизацийПеречисление          </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Период --&gt; Период</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Период" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Период" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>СтруктурнаяЕдиница --&gt; СтруктурнаяЕдиница</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="СтруктурнаяЕдиница" Вид="Измерение" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="СтруктурнаяЕдиница" Вид="Измерение" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ФизическоеЛицо --&gt; ФизическоеЛицо</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ФизическоеЛицо" Вид="Ресурс" Тип="СправочникСсылка.ФизическиеЛица"/>
						<Приемник Имя="ФизическоеЛицо" Вид="Ресурс" Тип="СправочникСсылка.ФизическиеЛица"/>
						<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПаспортныеДанныеФизЛиц</Код>
				<Наименование>РегистрСведенийЗапись.ПаспортныеДанныеФизЛиц --&gt; РегистрСведенийЗапись.ПаспортныеДанныеФизЛиц</Наименование>
				<Порядок>350</Порядок>
				<Источник>РегистрСведенийЗапись.ПаспортныеДанныеФизЛиц</Источник>
				<Приемник>РегистрСведенийЗапись.ПаспортныеДанныеФизЛиц</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДокументВид --&gt; ДокументВид</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ДокументВид" Вид="Ресурс" Тип="СправочникСсылка.ДокументыУдостоверяющиеЛичность"/>
						<Приемник Имя="ДокументВид" Вид="Ресурс" Тип="СправочникСсылка.ДокументыУдостоверяющиеЛичность"/>
						<КодПравилаКонвертации>ДокументыУдостоверяющиеЛичность                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ДокументДатаВыдачи --&gt; ДокументДатаВыдачи</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ДокументДатаВыдачи" Вид="Ресурс" Тип="Дата"/>
						<Приемник Имя="ДокументДатаВыдачи" Вид="Ресурс" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ДокументКемВыдан --&gt; ДокументКемВыдан</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ДокументКемВыдан" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="ДокументКемВыдан" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ДокументКодПодразделения --&gt; ДокументКодПодразделения</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ДокументКодПодразделения" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="ДокументКодПодразделения" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ДокументНомер --&gt; ДокументНомер</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ДокументНомер" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="ДокументНомер" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ДокументСерия --&gt; ДокументСерия</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ДокументСерия" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="ДокументСерия" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Период --&gt; Период</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Период" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Период" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ФизЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ФизЛицо" Вид="Измерение"/>
						<Приемник Имя="ФизЛицо" Вид="Измерение" Тип="СправочникСсылка.ФизическиеЛица"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ФИОФизЛиц</Код>
				<Наименование>РегистрСведенийЗапись.ФИОФизЛиц --&gt; РегистрСведенийЗапись.ФИОФизЛиц</Наименование>
				<Порядок>450</Порядок>
				<ПередВыгрузкой>ФизЛицо = Источник.ФизЛицо;

Если ЗначениеЗаполнено(ФизЛицо) И ТипЗнч(ФизЛицо) &lt;&gt; Тип("СправочникСсылка.Контрагенты") Тогда
	
	ВыгрузитьПоПравилу(ФизЛицо);
	
КонецЕсли;</ПередВыгрузкой>
				<Источник>РегистрСведенийЗапись.ФИОФизЛиц</Источник>
				<Приемник>РегистрСведенийЗапись.ФИОФизЛиц</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Имя --&gt; Имя</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Имя" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Имя" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Отчество --&gt; Отчество</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Отчество" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Отчество" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Период --&gt; Период</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Период" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Период" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Фамилия --&gt; Фамилия</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Фамилия" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Фамилия" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ФизЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ФизЛицо" Вид="Измерение"/>
						<Приемник Имя="ФизЛицо" Вид="Измерение"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Штрихкоды</Код>
				<Наименование>РегистрСведенийЗапись.Штрихкоды --&gt; РегистрСведенийЗапись.Штрихкоды</Наименование>
				<Порядок>500</Порядок>
				<ПослеЗагрузки>ИскомыйШтрихкод = Объект.Отбор.Штрихкод.Значение;

ЗапросПоШтрихкодам = Новый Запрос;
ЗапросПоШтрихкодам.Текст = "ВЫБРАТЬ
|	Штрихкоды.Штрихкод
|ИЗ
|	РегистрСведений.Штрихкоды КАК Штрихкоды
|ГДЕ
|	Штрихкоды.Штрихкод = &amp;ИскомыйШтрихкод
|	И Штрихкоды.Владелец ССЫЛКА Справочник.СерийныеНомера";

ЗапросПоШтрихкодам.УстановитьПараметр("ИскомыйШтрихкод", ИскомыйШтрихкод);
РезультатЗапроса = ЗапросПоШтрихкодам.Выполнить();

Если НЕ РезультатЗапроса.Пустой() Тогда
	
	Объект = Неопределено;
	
КонецЕсли;</ПослеЗагрузки>
				<Источник>РегистрСведенийЗапись.Штрихкоды</Источник>
				<Приемник>РегистрСведенийЗапись.Штрихкоды</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Владелец" Вид="Измерение"/>
						<Приемник Имя="Владелец" Вид="Измерение"/>
						<ПередВыгрузкой>Если ТипЗнч(Источник.Владелец) = Тип("СправочникСсылка.Номенклатура") Тогда
	ИмяПКО = "Номенклатура";
ИначеЕсли ТипЗнч(Источник.Владелец) = Тип("СправочникСсылка.ИнформационныеКарты") Тогда
	ИмяПКО = "ИнформационныеКарты";
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Штрихкод --&gt; Штрихкод</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Штрихкод" Вид="Измерение" Тип="Строка"/>
						<Приемник Имя="Штрихкод" Вид="Измерение" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ЕдиницаИзмерения" Вид="Измерение" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<Приемник Имя="ЕдиницаИзмерения" Вид="Измерение" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ТипШтрихкода --&gt; ТипШтрихкода</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ТипШтрихкода" Вид="Измерение" Тип="ПланВидовХарактеристикСсылка.ТипыШтрихкодов"/>
						<Приемник Имя="ТипШтрихкода" Вид="Измерение" Тип="ПланВидовХарактеристикСсылка.ТипыШтрихкодов"/>
						<КодПравилаКонвертации>ТипыШтрихкодов                                    </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ХарактеристикаНоменклатуры" Вид="Измерение" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
						<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Измерение" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
						<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>ПредставлениеШтрихкода --&gt; ПредставлениеШтрихкода</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПредставлениеШтрихкода" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ПредставлениеШтрихкода" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КонтактнаяИнформация</Код>
				<Наименование>РегистрСведенийЗапись.КонтактнаяИнформация --&gt; РегистрСведенийЗапись.КонтактнаяИнформация</Наименование>
				<Порядок>1400</Порядок>
				<ПередВыгрузкой>Если Параметры.ИспользоватьФильтрПоОрганизациям 
	И ТипЗнч(Источник.Объект) = Параметры.ТипСправочникСсылкаОрганизации Тогда
	
	Если Параметры.МассивОрганизаций.Найти(Источник.Объект) = Неопределено Тогда
		
		Отказ = Истина;
		
	КонецЕсли;
	         	
КонецЕсли;</ПередВыгрузкой>
				<Источник>РегистрСведенийЗапись.КонтактнаяИнформация</Источник>
				<Приемник>РегистрСведенийЗапись.КонтактнаяИнформация</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Вид --&gt; Вид</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Вид" Вид="Измерение"/>
						<Приемник Имя="Вид" Вид="Измерение"/>
						<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
						<ПередВыгрузкой> 
Если ТипЗнч(Источник.Вид) &lt;&gt; Тип("СправочникСсылка.ВидыКонтактнойИнформации") Тогда
	
	ИмяПКО = "";
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ЗначениеПоУмолчанию --&gt; ЗначениеПоУмолчанию</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ЗначениеПоУмолчанию" Вид="Ресурс" Тип="Булево"/>
						<Приемник Имя="ЗначениеПоУмолчанию" Вид="Ресурс" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Комментарий" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Объект --&gt; Объект</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Объект" Вид="Измерение"/>
						<Приемник Имя="Объект" Вид="Измерение"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Поле1 --&gt; Поле1</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Поле1" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле1" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Поле10 --&gt; Поле10</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Поле10" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле10" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Поле2 --&gt; Поле2</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Поле2" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле2" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Поле3 --&gt; Поле3</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Поле3" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле3" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Поле4 --&gt; Поле4</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Поле4" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле4" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Поле5 --&gt; Поле5</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Поле5" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле5" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Поле6 --&gt; Поле6</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Поле6" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле6" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>Поле7 --&gt; Поле7</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Поле7" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле7" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>Поле8 --&gt; Поле8</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Поле8" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле8" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>Поле9 --&gt; Поле9</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Поле9" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле9" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>Представление --&gt; Представление</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="Представление" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Представление" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>Тип --&gt; Тип</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="Тип" Вид="Измерение" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
						<Приемник Имя="Тип" Вид="Измерение" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
						<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>ТипДома --&gt; ТипДома</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="ТипДома" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыДомов"/>
						<Приемник Имя="ТипДома" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыДомов"/>
						<КодПравилаКонвертации>ТипыДомов                                         </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>ТипКвартиры --&gt; ТипКвартиры</Наименование>
						<Порядок>950</Порядок>
						<Источник Имя="ТипКвартиры" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыКвартир"/>
						<Приемник Имя="ТипКвартиры" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыКвартир"/>
						<КодПравилаКонвертации>ТипыКвартир                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование>ТипКорпуса --&gt; ТипКорпуса</Наименование>
						<Порядок>1000</Порядок>
						<Источник Имя="ТипКорпуса" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыКорпусов"/>
						<Приемник Имя="ТипКорпуса" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыКорпусов"/>
						<КодПравилаКонвертации>ТипыКорпусов                                      </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
	</ПравилаКонвертацииОбъектов>
	<ПравилаВыгрузкиДанных>
		<Группа Отключить="false">
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>50</Порядок>
			<Правило Отключить="false">
				<Код>ВидыДисконтныхКарт</Код>
				<Наименование>Виды дисконтных карт</Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>ВидыДисконтныхКарт                                </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ВидыДисконтныхКарт</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>ВидыНоменклатуры</Код>
				<Наименование>Виды номенклатуры</Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>ВидыНоменклатуры                                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ВидыНоменклатуры</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВидыОплатЧекаККМ</Код>
				<Наименование>Виды оплат чека ККМ</Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>ВидыОплатЧекаККМ                                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ВидыОплатЧекаККМ</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>ГруппыПользователей</Код>
				<Наименование>Группы пользователей</Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>ГруппыПользователей                               </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ГруппыПользователей</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>ДоговорыЭквайринга</Код>
				<Наименование>Договоры эквайринга</Наименование>
				<Порядок>250</Порядок>
				<КодПравилаКонвертации>ДоговорыЭквайринга                                </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ДоговорыЭквайринга</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ДокументыУдостоверяющиеЛичность</Код>
				<Наименование>Документы удостоверяющие личность</Наименование>
				<Порядок>300</Порядок>
				<КодПравилаКонвертации>ДокументыУдостоверяющиеЛичность                   </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ДокументыУдостоверяющиеЛичность</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>ДолжностиОрганизаций</Код>
				<Наименование>Должности организаций</Наименование>
				<Порядок>350</Порядок>
				<КодПравилаКонвертации>ДолжностиОрганизаций                              </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ДолжностиОрганизаций</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>ЕдиницыИзмерения</Код>
				<Наименование>Единицы измерения</Наименование>
				<Порядок>400</Порядок>
				<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ЕдиницыИзмерения</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ИнформационныеКарты</Код>
				<Наименование>Информационные карты</Наименование>
				<Порядок>450</Порядок>
				<КодПравилаКонвертации>ИнформационныеКарты                               </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ИнформационныеКарты</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>Кассы</Код>
				<Наименование>Кассы</Наименование>
				<Порядок>500</Порядок>
				<КодПравилаКонвертации>Кассы                                             </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Кассы</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>КлассификаторЕдиницИзмерения</Код>
				<Наименование>КлассификаторЕдиницИзмерения</Наименование>
				<Порядок>550</Порядок>
				<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.КлассификаторЕдиницИзмерения</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>КлассификаторСтранМира</Код>
				<Наименование>Классификатор стран мира</Наименование>
				<Порядок>600</Порядок>
				<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.КлассификаторСтранМира</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>Контрагенты</Код>
				<Наименование>Контрагенты</Наименование>
				<Порядок>650</Порядок>
				<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Контрагенты</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Организации</Код>
				<Наименование>Организации</Наименование>
				<Порядок>700</Порядок>
				<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Организации</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>Пользователи</Код>
				<Наименование>Пользователи</Наименование>
				<Порядок>750</Порядок>
				<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Пользователи</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Склады</Код>
				<Наименование>Склады (места хранения)</Наименование>
				<Порядок>800</Порядок>
				<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Склады</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>ТипыЦенНоменклатуры</Код>
				<Наименование>Типы цен номенклатуры</Наименование>
				<Порядок>900</Порядок>
				<КодПравилаКонвертации>ТипыЦенНоменклатуры                               </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ТипыЦенНоменклатуры</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>ХарактеристикиНоменклатуры</Код>
				<Наименование>Характеристики номенклатуры</Наименование>
				<Порядок>950</Порядок>
				<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ХарактеристикиНоменклатуры</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ХранилищеДополнительнойИнформации</Код>
				<Наименование>Хранилище дополнительной информации</Наименование>
				<Порядок>1000</Порядок>
				<КодПравилаКонвертации>ХранилищеДополнительнойИнформации                 </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ХранилищеДополнительнойИнформации</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Номенклатура</Код>
				<Наименование>Номенклатура</Наименование>
				<Порядок>1050</Порядок>
				<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Номенклатура</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>КатегорииОбъектов</Код>
				<Наименование>КатегорииОбъектов</Наименование>
				<Порядок>1100</Порядок>
				<КодПравилаКонвертации>КатегорииОбъектов                                 </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.КатегорииОбъектов</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ФизическиеЛица</Код>
				<Наименование>ФизическиеЛица</Наименование>
				<Порядок>1150</Порядок>
				<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ФизическиеЛица</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ЗначенияСвойствОбъектовСправочник</Код>
				<Наименование>ЗначенияСвойствОбъектов</Наименование>
				<Порядок>1200</Порядок>
				<КодПравилаКонвертации>ЗначенияСвойствОбъектов                           </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ЗначенияСвойствОбъектов</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>НоменклатурныеГруппы</Код>
				<Наименование>НоменклатурныеГруппы</Наименование>
				<Порядок>1250</Порядок>
				<КодПравилаКонвертации>НоменклатурныеГруппы                              </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.НоменклатурныеГруппы</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВидыКонтактнойИнформации</Код>
				<Наименование>ВидыКонтактнойИнформации</Наименование>
				<Порядок>1300</Порядок>
				<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ВидыКонтактнойИнформации</ОбъектВыборки>
			</Правило>
		</Группа>
		<Группа Отключить="false">
			<Код>ПланыВидовХарактеристик</Код>
			<Наименование>ПланыВидовХарактеристик</Наименование>
			<Порядок>100</Порядок>
			<Правило Отключить="false">
				<Код>ТипыШтрихкодов</Код>
				<Наименование>ТипыШтрихкодов</Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>ТипыШтрихкодов                                    </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ПланВидовХарактеристикСсылка.ТипыШтрихкодов</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>СвойстваОбъектов</Код>
				<Наименование>Свойства объектов</Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ПланВидовХарактеристикСсылка.СвойстваОбъектов</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>НазначенияСвойствКатегорийОбъектов</Код>
				<Наименование>НазначенияСвойствКатегорийОбъектов</Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>НазначенияСвойствКатегорийОбъектов                </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов</ОбъектВыборки>
			</Правило>
		</Группа>
		<Группа Отключить="false">
			<Код>РегистрыСведений</Код>
			<Наименование>РегистрыСведений</Наименование>
			<Порядок>150</Порядок>
			<Правило Отключить="false">
				<Код>ОтветственныеЛицаОрганизации</Код>
				<Наименование>ОтветственныеЛицаОрганизации</Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>ОтветственныеЛицаОрганизации                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.ОтветственныеЛицаОрганизации</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ПаспортныеДанныеФизЛиц</Код>
				<Наименование>ПаспортныеДанныеФизЛиц</Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>ПаспортныеДанныеФизЛиц                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.ПаспортныеДанныеФизЛиц</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ФИОФизЛиц</Код>
				<Наименование>ФИОФизЛиц</Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>ФИОФизЛиц                                         </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.ФИОФизЛиц</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Штрихкоды</Код>
				<Наименование>Штрихкоды</Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>Штрихкоды                                         </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.Штрихкоды</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>Если ТипЗнч(Объект.Отбор.Владелец.Значение) = Тип("СправочникСсылка.Номенклатура") Тогда
	
	ВыгрузитьПоПравилу(Объект.Отбор.Владелец.Значение, ,,,"Номенклатура");
	
	Если ЗначениеЗаполнено(Объект.Отбор.ХарактеристикаНоменклатуры.Значение) Тогда
		
		ВыгрузитьПоПравилу(Объект.Отбор.ХарактеристикаНоменклатуры.Значение, ,,,"ХарактеристикиНоменклатуры");
		
	КонецЕсли;
		
	
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>КатегорииОбъектовРегистрСведений</Код>
				<Наименование>КатегорииОбъектов</Наименование>
				<Порядок>250</Порядок>
				<КодПравилаКонвертации>КатегорииОбъектовРегистрСведений                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.КатегорииОбъектов</ОбъектВыборки>
				<ПослеВыгрузкиОбъекта>Если ТипЗнч(Объект.Отбор.Объект.Значение) = Тип("СправочникСсылка.Номенклатура") Тогда
	
	ВыгрузитьПоПравилу(Объект.Отбор.Объект.Значение, ,,,"Номенклатура");
	
	ВыборкаХарактеристик = Справочники.ХарактеристикиНоменклатуры.Выбрать(, Объект.Отбор.Объект.Значение);
	Пока ВыборкаХарактеристик.Следующий() Цикл
		
		ВыгрузитьПоПравилу(ВыборкаХарактеристик.Ссылка, ,,,"ХарактеристикиНоменклатуры");
		
	КонецЦикла;
	
КонецЕсли;</ПослеВыгрузкиОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>ЗначенияСвойствОбъектов</Код>
				<Наименование>ЗначенияСвойствОбъектов</Наименование>
				<Порядок>300</Порядок>
				<КодПравилаКонвертации>ЗначенияСвойствОбъектовРегистрСведений            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.ЗначенияСвойствОбъектов</ОбъектВыборки>
				<ПослеВыгрузкиОбъекта>Если ТипЗнч(Объект.Отбор.Объект.Значение) = Тип("СправочникСсылка.Номенклатура") Тогда
	
	ВыгрузитьПоПравилу(Объект.Отбор.Объект.Значение, ,,,"Номенклатура");
	
	ВыборкаХарактеристик = Справочники.ХарактеристикиНоменклатуры.Выбрать(, Объект.Отбор.Объект.Значение);
	Пока ВыборкаХарактеристик.Следующий() Цикл
		
		ВыгрузитьПоПравилу(ВыборкаХарактеристик.Ссылка, ,,,"ХарактеристикиНоменклатуры");
		
	КонецЦикла;
	
КонецЕсли;</ПослеВыгрузкиОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>КомплектующиеНоменклатуры</Код>
				<Наименование>КомплектующиеНоменклатуры</Наименование>
				<Порядок>350</Порядок>
				<КодПравилаКонвертации>КомплектующиеНоменклатуры                         </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.КомплектующиеНоменклатуры</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>ВыгрузитьПоПравилу(Объект.Отбор.Номенклатура.Значение, ,,, "Номенклатура");
ВыгрузитьПоПравилу(Объект.Отбор.Комплектующая.Значение, ,,,"Номенклатура");

Если ЗначениеЗаполнено(Объект.Отбор.ХарактеристикаНоменклатуры.Значение) Тогда
	
	ВыгрузитьПоПравилу(Объект.Отбор.ХарактеристикаНоменклатуры.Значение, ,,,"ХарактеристикиНоменклатуры");
	
КонецЕсли;

Если ЗначениеЗаполнено(Объект.Отбор.ХарактеристикаКомплектующей.Значение) Тогда
	
	ВыгрузитьПоПравилу(Объект.Отбор.ХарактеристикаКомплектующей.Значение, ,,,"ХарактеристикиНоменклатуры");
	
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>НазначенияСвойствОбъектов</Код>
				<Наименование>НазначенияСвойствОбъектов</Наименование>
				<Порядок>450</Порядок>
				<КодПравилаКонвертации>НазначенияСвойствОбъектов                         </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.НазначенияСвойствОбъектов</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>Отказ = (Объект.Отбор.Свойство.Значение.НазначениеСвойства = ПланыВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Справочник_ХарактеристикиНоменклатуры);</ПередВыгрузкойОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>ГраницыЗапретаИзмененияДанных</Код>
				<Наименование>Границы запрета изменения данных</Наименование>
				<Порядок>500</Порядок>
				<КодПравилаКонвертации>ГраницыЗапретаИзмененияДанных                     </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.ГраницыЗапретаИзмененияДанных</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>КонтактнаяИнформация</Код>
				<Наименование>КонтактнаяИнформация</Наименование>
				<Порядок>550</Порядок>
				<КодПравилаКонвертации>КонтактнаяИнформация                              </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.КонтактнаяИнформация</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>Если Объект.Отбор.Объект.Значение = Неопределено Тогда
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>ПериодыВыгрузкиСебестоимостиВРозницу</Код>
				<Наименование>Периоды выгрузки себестоимости в розницу</Наименование>
				<Порядок>600</Порядок>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.ПериодыВыгрузкиСебестоимостиВРозницу</ОбъектВыборки>
				<ПередОбработкойПравила>Отказ = Истина;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>СверткаУзлаРозницы</Код>
				<Наименование>Свертка узла розницы</Наименование>
				<Порядок>650</Порядок>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.СверткаУзлаРозницы</ОбъектВыборки>
				<ПередОбработкойПравила>Отказ = Истина;</ПередОбработкойПравила>
			</Правило>
		</Группа>
		<Группа Отключить="false">
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>200</Порядок>
			<Правило Отключить="false">
				<Код>ВозвратТоваровОтПокупателя</Код>
				<Наименование>ВозвратТоваровОтПокупателя</Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>ВозвратТоваровОтПокупателя                        </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ВозвратТоваровОтПокупателя</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВнутреннееПеремещениеНаличныхДенежныхСредств</Код>
				<Наименование>ВнутреннееПеремещениеНаличныхДенежныхСредств</Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>ВнутреннееПеремещениеНаличныхДенежныхСредств      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ВнутреннееПеремещениеНаличныхДенежныхСредств</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>ИнвентаризацияТоваровНаСкладе</Код>
				<Наименование>ИнвентаризацияТоваровНаСкладе</Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>ИнвентаризацияТоваров                             </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ИнвентаризацияТоваровНаСкладе</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>КомплектацияНоменклатуры</Код>
				<Наименование>КомплектацияНоменклатуры</Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>КомплектацияНоменклатуры                          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.КомплектацияНоменклатуры</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ОприходованиеТоваров</Код>
				<Наименование>ОприходованиеТоваров</Наименование>
				<Порядок>250</Порядок>
				<КодПравилаКонвертации>ОприходованиеТоваров                              </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ОприходованиеТоваров</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ОплатаОтПокупателяПлатежнойКартой</Код>
				<Наименование>ОплатаОтПокупателяПлатежнойКартой</Наименование>
				<Порядок>300</Порядок>
				<КодПравилаКонвертации>ОплатаОтПокупателяПлатежнойКартой                 </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ОплатаОтПокупателяПлатежнойКартой</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>ОтчетОРозничныхПродажах</Код>
				<Наименование>ОтчетОРозничныхПродажах</Наименование>
				<Порядок>400</Порядок>
				<КодПравилаКонвертации>ОтчетОРозничныхПродажах                           </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ОтчетОРозничныхПродажах</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ПеремещениеТоваров</Код>
				<Наименование>ПеремещениеТоваров</Наименование>
				<Порядок>450</Порядок>
				<КодПравилаКонвертации>ПеремещениеТоваров                                </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПеремещениеТоваров</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ПоступлениеТоваровУслуг</Код>
				<Наименование>ПоступлениеТоваровУслуг</Наименование>
				<Порядок>500</Порядок>
				<КодПравилаКонвертации>ПоступлениеТоваров                                </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПоступлениеТоваровУслуг</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>РеализацияТоваровУслуг</Код>
				<Наименование>РеализацияТоваровУслуг</Наименование>
				<Порядок>550</Порядок>
				<КодПравилаКонвертации>РеализацияТоваров                                 </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.РеализацияТоваровУслуг</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>РасходныйКассовыйОрдер</Код>
				<Наименование>РасходныйКассовыйОрдер</Наименование>
				<Порядок>600</Порядок>
				<КодПравилаКонвертации>РасходныйКассовыйОрдер                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.РасходныйКассовыйОрдер</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>СписаниеТоваров</Код>
				<Наименование>СписаниеТоваров</Наименование>
				<Порядок>650</Порядок>
				<КодПравилаКонвертации>СписаниеТоваров                                   </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.СписаниеТоваров</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>УстановкаЦенНоменклатуры</Код>
				<Наименование>УстановкаЦенНоменклатуры</Наименование>
				<Порядок>850</Порядок>
				<КодПравилаКонвертации>УстановкаЦенНоменклатуры                          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.УстановкаЦенНоменклатуры</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ПриходныйКассовыйОрдер</Код>
				<Наименование>ПриходныйКассовыйОрдер</Наименование>
				<Порядок>900</Порядок>
				<КодПравилаКонвертации>ПриходныйКассовыйОрдер                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПриходныйКассовыйОрдер</ОбъектВыборки>
				<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			</Правило>
			<Правило Отключить="false">
				<Код>РасходныйОрдерНаТовары</Код>
				<Наименование>РасходныйОрдерНаТовары</Наименование>
				<Порядок>950</Порядок>
				<КодПравилаКонвертации>РасходныйОрдерНаТовары                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.РасходныйОрдерНаТовары</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ПриходныйОрдерНаТовары</Код>
				<Наименование>ПриходныйОрдерНаТовары</Наименование>
				<Порядок>1000</Порядок>
				<КодПравилаКонвертации>ПриходныйОрдерНаТовары                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПриходныйОрдерНаТовары</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВозвратТоваровПоставщику</Код>
				<Наименование>ВозвратТоваровПоставщику</Наименование>
				<Порядок>1050</Порядок>
				<КодПравилаКонвертации>ВозвратТоваровПоставщику                          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ВозвратТоваровПоставщику</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ПереоценкаТоваровВРознице</Код>
				<Наименование>ПереоценкаТоваровВРознице</Наименование>
				<Порядок>1100</Порядок>
				<КодПравилаКонвертации>УстановкаЦенНоменклатурыВМагазине                 </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПереоценкаТоваровВРознице</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВнутреннийЗаказ</Код>
				<Наименование>ВнутреннийЗаказ</Наименование>
				<Порядок>1150</Порядок>
				<КодПравилаКонвертации>ВнутреннийЗаказ                                   </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ВнутреннийЗаказ</ОбъектВыборки>
			</Правило>
		</Группа>
	</ПравилаВыгрузкиДанных>
	<ПравилаОчисткиДанных/>
	<Алгоритмы>
		<Алгоритм Имя="ВозможностьВыгрузкиОбъектаПоФильтрам" ИспользуетсяПриЗагрузке="false">
			<Текст>

//фильтр по дате выгрузки

Если ПараметрИсточник.Дата &lt; Параметры.ДатаНачалаВыгрузкиДокументов Тогда
	
	Отказ = Истина;
	
КонецЕсли;  

//фильтр по организациям

Если (НЕ Отказ)
	И Параметры.ИспользоватьФильтрПоОрганизациям  Тогда
	
	МетаданныеОбъекта = ПараметрИсточник.Метаданные();
	
	Если  ОбщегоНазначения.ЕстьРеквизитДокумента("Организация", МетаданныеОбъекта) 
		И Параметры.МассивОрганизаций.Найти(ПараметрИсточник.Организация) = Неопределено Тогда
		
		Отказ = Истина;	
		
	КонецЕсли;
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ВыгрузитьКИ" ИспользуетсяПриЗагрузке="false">
			<Текст>Если Не Источник.ЭтоГруппа Тогда

	НаборЗаписей = РегистрыСведений.КонтактнаяИнформация.СоздатьНаборЗаписей();
	
	НаборЗаписей.Отбор.Объект.Установить(Источник.Ссылка);

	Запрос = Новый Запрос;
	Запрос.Текст = "
		|ВЫБРАТЬ
		|	КонтактнаяИнформация.Тип,
		|	КонтактнаяИнформация.Вид
		|ИЗ
		|	РегистрСведений.КонтактнаяИнформация КАК КонтактнаяИнформация
		|ГДЕ
		|	КонтактнаяИнформация.Объект = &amp;Объект
		|	И КонтактнаяИнформация.Вид В(&amp;МассивВидовКИ)";
		
	Запрос.УстановитьПараметр("Объект", Источник.Ссылка);
	Запрос.УстановитьПараметр("МассивВидовКИ", Параметры.МассивВидовКИ);
		
	Выборка = Запрос.Выполнить().Выбрать();

	Пока Выборка.Следующий() Цикл
		
		НаборЗаписей.Отбор.Тип.Установить(Выборка.Тип);
		НаборЗаписей.Отбор.Вид.Установить(Выборка.Вид);
		
		ВыгрузитьПоПравилу(Выборка.Вид);
		
		НаборЗаписей.Прочитать();
		
		ВыгрузитьРегистр(НаборЗаписей,,,,"КонтактнаяИнформация");
		
	КонецЦикла;
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ВыгрузитьСебестоимость" ИспользуетсяПриЗагрузке="false">
			<Текст>УзелОбмена = Параметры.УзелДляОбменаОбъект;

Если УзелОбмена.ВыгружатьСебестоимость Тогда
	
	МассивКодовМагазинов = УзелОбмена.СоответствияМагазиновИСкладов.ВыгрузитьКолонку("КодМагазина");
	
	ПостроительЗапроса = Новый ПостроительЗапроса;
	
	ТекстЗапроса = 
	"
	|ВЫБРАТЬ
	|	ПериодыВыгрузки.Дата КАК Дата
	|ПОМЕСТИТЬ ПериодыВыгрузкиСебестоимости
	|ИЗ
	|	РегистрСведений.ПериодыВыгрузкиСебестоимостиВРозницу.Изменения КАК ПериодыВыгрузки
	|ГДЕ
	|	ПериодыВыгрузки.Узел = &amp;Узел
	|	И ПериодыВыгрузки.Дата &gt;= НАЧАЛОПЕРИОДА(&amp;ДатаНачала, &amp;Периодичность)
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	НАЧАЛОПЕРИОДА(ПродажиСебестоимость.Период, &amp;Периодичность) КАК Период,
	|	
	|	ВЫБОР
	|		КОГДА ПродажиСебестоимость.Регистратор ССЫЛКА Документ.РеализацияТоваровУслуг
	|				ИЛИ ПродажиСебестоимость.Регистратор ССЫЛКА Документ.ОтчетОРозничныхПродажах
	|			ТОГДА ПродажиСебестоимость.Регистратор.Склад
	|		ИНАЧЕ ВЫБОР
	|				КОГДА ПродажиСебестоимость.Регистратор ССЫЛКА Документ.ВозвратТоваровОтПокупателя
	|					ТОГДА
	|						ВЫБОР
	|							КОГДА ПродажиСебестоимость.Регистратор.ВидПоступления = ЗНАЧЕНИЕ(Перечисление.ВидыПоступленияТоваров.НаСклад)
	|								ТОГДА ПродажиСебестоимость.Регистратор.СкладОрдер
	|							ИНАЧЕ ПродажиСебестоимость.Регистратор.СкладОрдер.Склад
	|						КОНЕЦ
	|				ИНАЧЕ ЗНАЧЕНИЕ(Справочник.Склады.ПустаяСсылка)
	|				КОНЕЦ
	|	КОНЕЦ КАК Склад,
	|	
	|	ПродажиСебестоимость.Номенклатура               КАК Номенклатура,
	|	ПродажиСебестоимость.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	|	ПродажиСебестоимость.Количество                 КАК Количество,
	|	ПродажиСебестоимость.Стоимость                  КАК Стоимость
	|	
	|ПОМЕСТИТЬ ВременнаяТаблицаРегистра
	|ИЗ
	|	РегистрНакопления.ПродажиСебестоимость КАК ПродажиСебестоимость
	|ГДЕ
	|	(НЕ ПродажиСебестоимость.Регистратор ССЫЛКА Документ.КорректировкаСтоимостиСписанияТоваров)
	|	И НАЧАЛОПЕРИОДА(ПродажиСебестоимость.Регистратор.Дата, &amp;Периодичность) В (ВЫБРАТЬ Периоды.Дата ИЗ ПериодыВыгрузкиСебестоимости КАК Периоды)
	|{ГДЕ
	|	ПродажиСебестоимость.Номенклатура.*}
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	НАЧАЛОПЕРИОДА(ПродажиСебестоимость.ДокументДвижения.Дата, &amp;Периодичность) КАК Период,
	|	
	|	ВЫБОР
	|		КОГДА ПродажиСебестоимость.ДокументДвижения ССЫЛКА Документ.РеализацияТоваровУслуг
	|				ИЛИ ПродажиСебестоимость.ДокументДвижения ССЫЛКА Документ.ОтчетОРозничныхПродажах
	|			ТОГДА ПродажиСебестоимость.ДокументДвижения.Склад
	|		ИНАЧЕ ВЫБОР
	|				КОГДА ПродажиСебестоимость.ДокументДвижения ССЫЛКА Документ.ВозвратТоваровОтПокупателя
	|					ТОГДА ВЫБОР
	|							КОГДА ПродажиСебестоимость.ДокументДвижения.ВидПоступления = ЗНАЧЕНИЕ(Перечисление.ВидыПоступленияТоваров.НаСклад)
	|								ТОГДА ПродажиСебестоимость.ДокументДвижения.СкладОрдер
	|							ИНАЧЕ ПродажиСебестоимость.ДокументДвижения.СкладОрдер.Склад
	|						КОНЕЦ
	|				ИНАЧЕ ЗНАЧЕНИЕ(Справочник.Склады.ПустаяСсылка)
	|			КОНЕЦ
	|	КОНЕЦ КАК Склад,
	|	
	|	ПродажиСебестоимость.Номенклатура               КАК Номенклатура,
	|	ПродажиСебестоимость.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	|	ПродажиСебестоимость.Количество                 КАК Количество,
	|	ПродажиСебестоимость.Стоимость                  КАК Стоимость
	|ИЗ
	|	РегистрНакопления.ПродажиСебестоимость КАК ПродажиСебестоимость
	|ГДЕ
	|	ПродажиСебестоимость.Регистратор ССЫЛКА Документ.КорректировкаСтоимостиСписанияТоваров
	|	И НАЧАЛОПЕРИОДА(ПродажиСебестоимость.ДокументДвижения.Дата, &amp;Периодичность) В (ВЫБРАТЬ Периоды.Дата ИЗ ПериодыВыгрузкиСебестоимости КАК Периоды)
	|{ГДЕ
	|	ПродажиСебестоимость.Номенклатура.*}
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ВременнаяТаблицаРегистра.Период                                                    КАК Период,
	|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КодМагазина КАК КодМагазина,
	|	ВременнаяТаблицаРегистра.Номенклатура                                              КАК Номенклатура,
	|	ВременнаяТаблицаРегистра.ХарактеристикаНоменклатуры                                КАК ХарактеристикаНоменклатуры,
	|	СУММА(ВременнаяТаблицаРегистра.Количество)                                         КАК Количество,
	|	СУММА(ВременнаяТаблицаРегистра.Стоимость)                                          КАК Стоимость,
	|	
	|	ВЫБОР
	|		КОГДА СУММА(ВременнаяТаблицаРегистра.Количество) &lt;&gt; 0
	|			ТОГДА СУММА(ВременнаяТаблицаРегистра.Стоимость) / СУММА(ВременнаяТаблицаРегистра.Количество)
	|		ИНАЧЕ 0
	|	КОНЕЦ КАК Цена
	|	
	|ИЗ
	|	ВременнаяТаблицаРегистра КАК ВременнаяТаблицаРегистра
	|		ЛЕВОЕ СОЕДИНЕНИЕ ПланОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.СоответствияМагазиновИСкладов КАК ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов
	|		ПО ВременнаяТаблицаРегистра.Склад = ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.СкладМагазина
	|ГДЕ
	|	ВременнаяТаблицаРегистра.Склад В(&amp;МассивСкладов)
	|
	|СГРУППИРОВАТЬ ПО
	|	ВременнаяТаблицаРегистра.Период,
	|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КодМагазина,
	|	ВременнаяТаблицаРегистра.Номенклатура,
	|	ВременнаяТаблицаРегистра.ХарактеристикаНоменклатуры
	|
	|УПОРЯДОЧИТЬ ПО
	|	Период
	|ИТОГИ ПО
	|	Период ПЕРИОДАМИ(&amp;Периодичность, , ),
	|	КодМагазина";
	
	
	ТекстЗапроса = СтрЗаменить(ТекстЗапроса, "&amp;Периодичность", УзелОбмена.ПериодичностьПередачиСебестоимости);
	
	ПостроительЗапроса.Текст = ТекстЗапроса;
	
	// Установка параметров
	ПостроительЗапроса.Параметры.Вставить("МассивСкладов", УзелОбмена.СоответствияМагазиновИСкладов.ВыгрузитьКолонку("СкладМагазина"));
	ПостроительЗапроса.Параметры.Вставить("Узел", УзелОбмена.Ссылка);
	ПостроительЗапроса.Параметры.Вставить("ДатаНачала", ?(ЗначениеЗаполнено(УзелОбмена.ДатаНачалаВыгрузкиСебестоимости),УзелОбмена.ДатаНачалаВыгрузкиСебестоимости,Дата("00010101")));
	
	
	// Заполнение отбора по номенклатуре
	СтруктураОтбораПоНоменклатуреУзла = УзелОбмена.ОтборПоНоменклатуре.Получить();
	Если ТипЗнч(СтруктураОтбораПоНоменклатуреУзла) = Тип("Структура") Тогда
		Для Каждого ЭлементОтбора Из СтруктураОтбораПоНоменклатуреУзла.Отбор Цикл
			Если НЕ ЗначениеЗаполнено(ЭлементОтбора.ПутьКДанным) Тогда
				Продолжить;
			КонецЕсли;
			НовыйЭлементОтбора = ПостроительЗапроса.Отбор.Добавить(ЭлементОтбора.ПутьКДанным);
			ЗаполнитьЗначенияСвойств(НовыйЭлементОтбора, ЭлементОтбора,,"Значение");
			НовыйЭлементОтбора.Значение = ЭлементОтбора.Значение;
		КонецЦикла;
	КонецЕсли;
	
	
	// Подготовим структуры данных
	ТаблицаДокумента = Новый ТаблицаЗначений;
	ТаблицаДокумента.Колонки.Добавить("Номенклатура");
	ТаблицаДокумента.Колонки.Добавить("ХарактеристикаНоменклатуры");
	ТаблицаДокумента.Колонки.Добавить("Цена");
	
	СтруктураВыгрузки = Новый Структура;
	
	// Обход результата запроса и выгрузка
	ПостроительЗапроса.Выполнить();
	ВыборкаПоДатам = ПостроительЗапроса.Результат.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	Пока ВыборкаПоДатам.Следующий() Цикл
		
		ВыборкаПоМагазинам = ВыборкаПоДатам.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
		Пока ВыборкаПоМагазинам.Следующий() Цикл
			
			//Заполнение таблицы себестоимости
			ТаблицаДокумента.Очистить();
			ВыборкаДетальныеЗаписи = ВыборкаПоМагазинам.Выбрать();
			Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
				ЗаполнитьЗначенияСвойств(ТаблицаДокумента.Добавить(), ВыборкаДетальныеЗаписи);
			КонецЦикла; // Выборка по детальным записям
			
			// Заполнение структуры выгрузки
			СтруктураВыгрузки.Вставить("Дата"   , ВыборкаПоДатам.Период);
			СтруктураВыгрузки.Вставить("Магазин", ВыборкаПоМагазинам.КодМагазина);
			СтруктураВыгрузки.Вставить("Периодичность", УзелОбмена.ПериодичностьПередачиСебестоимости);
			СтруктураВыгрузки.Вставить("Ссылка",  Неопределено);
			СтруктураВыгрузки.Вставить("Товары",  ТаблицаДокумента.Скопировать());
			
			// Выгрузка структуры по правилу УстановкаСебестоимости
			ВыгрузитьПоПравилу(СтруктураВыгрузки, , , , "УстановкаСебестоимости");
			
		КонецЦикла; // Выборка по магазинам
		
	КонецЦикла; // Выборка по датам
	
КонецЕсли; // Если выгружаем себестоимость</Текст>
		</Алгоритм>
		<Алгоритм Имя="ВыполнитьСверткуУзла" ИспользуетсяПриЗагрузке="false">
			<Текст>Если Метаданные.ПланыОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.Реквизиты.Найти("ДатаСвертки") &lt;&gt; Неопределено Тогда
	
	Запрос = Новый Запрос;
	Запрос.Текст =
	"ВЫБРАТЬ
	|	СверткаУзлаРозницыИзменения.УзелРозницы.ДатаСвертки КАК ДатаСвертки
	|ИЗ
	|	РегистрСведений.СверткаУзлаРозницы.Изменения КАК СверткаУзлаРозницыИзменения
	|ГДЕ
	|	СверткаУзлаРозницыИзменения.Узел = &amp;Узел
	|	И СверткаУзлаРозницыИзменения.УзелРозницы.ДатаСвертки &lt;&gt; ДАТАВРЕМЯ(1, 1, 1)";
	
	Запрос.УстановитьПараметр("Узел", Параметры.УзелДляОбменаОбъект.Ссылка);
	
	ВыборкаПоДатеСвертки = Запрос.Выполнить().Выбрать();
	Если ВыборкаПоДатеСвертки.Следующий() Тогда
		
		
		ДатаСвертки = КонецДня(ВыборкаПоДатеСвертки.ДатаСвертки - 3600*24);
		
		Структура = Новый Структура;
		Структура.Вставить("Дата", ДатаСвертки);
		
		МассивСкладов  = Параметры.УзелДляОбменаОбъект.СоответствияМагазиновИСкладов.ВыгрузитьКолонку("СкладМагазина");
		МассивКасс     = Параметры.УзелДляОбменаОбъект.СоответствияМагазиновИСкладов.ВыгрузитьКолонку("КассаМагазина");
		МассивТиповЦен = Параметры.УзелДляОбменаОбъект.ТипыЦенНоменклатуры.ВыгрузитьКолонку("ТипЦеныНоменклатуры");
		
		//теперь надо найти остатки на дату свертки
		
		#Если Клиент Тогда
		Состояние("Подготовка свертки узла (товары)...");
		#КонецЕсли

		ПостроительЗапросаТовары = Новый ПостроительЗапроса;
		ПостроительЗапросаТовары.Текст = 
		"ВЫБРАТЬ
		|	ТоварыНаСкладахОстатки.Номенклатура,
		|	ТоварыНаСкладахОстатки.ХарактеристикаНоменклатуры,
		|	ТоварыНаСкладахОстатки.КоличествоОстаток КАК Количество,
		|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КодМагазина КАК Магазин
		|ИЗ
		|	РегистрНакопления.ТоварыНаСкладах.Остатки(&amp;ДатаСвертки, Склад В (&amp;МассивСкладов)) КАК ТоварыНаСкладахОстатки
		|		ЛЕВОЕ СОЕДИНЕНИЕ ПланОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.СоответствияМагазиновИСкладов КАК ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов
		|		ПО ТоварыНаСкладахОстатки.Склад = ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.СкладМагазина
		|ГДЕ
		|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.Ссылка = &amp;Узел
		|{ГДЕ
		|	ТоварыНаСкладахОстатки.Номенклатура.*}
		|
		|ОБЪЕДИНИТЬ ВСЕ
		|
		|ВЫБРАТЬ
		|	ТоварыВРозницеОстатки.Номенклатура,
		|	ТоварыВРозницеОстатки.ХарактеристикаНоменклатуры,
		|	ТоварыВРозницеОстатки.КоличествоОстаток КАК Количество,
		|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КодМагазина КАК Магазин
		|ИЗ
		|	РегистрНакопления.ТоварыВРознице.Остатки(&amp;ДатаСвертки, Склад В (&amp;МассивСкладов)) КАК ТоварыВРозницеОстатки
		|		ЛЕВОЕ СОЕДИНЕНИЕ ПланОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.СоответствияМагазиновИСкладов КАК ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов
		|		ПО ТоварыВРозницеОстатки.Склад = ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.СкладМагазина
		|ГДЕ
		|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.Ссылка = &amp;Узел
		|{ГДЕ
		|	ТоварыВРозницеОстатки.Номенклатура.*}";
		
		ПостроительЗапросаТовары.Параметры.Вставить("МассивСкладов", МассивСкладов);
		ПостроительЗапросаТовары.Параметры.Вставить("ДатаСвертки", ДатаСвертки);
		ПостроительЗапросаТовары.Параметры.Вставить("Узел", Параметры.УзелДляОбменаОбъект.Ссылка);
		
		СтруктураОтбораПоНоменклатуреУзла = Параметры.УзелДляОбменаОбъект.ОтборПоНоменклатуре.Получить();

		Если ТипЗнч(СтруктураОтбораПоНоменклатуреУзла) = Тип("Структура") Тогда
			
			Для Каждого ЭлементОтбора Из СтруктураОтбораПоНоменклатуреУзла.Отбор Цикл
				
				Если Не ЗначениеЗаполнено(ЭлементОтбора.ПутьКДанным) Тогда
					Продолжить;
				КонецЕсли;
				
				НовыйЭлементОтбора = ПостроительЗапросаТовары.Отбор.Добавить(ЭлементОтбора.ПутьКДанным);
				ЗаполнитьЗначенияСвойств(НовыйЭлементОтбора, ЭлементОтбора,,"Значение");
				НовыйЭлементОтбора.Значение = ЭлементОтбора.Значение;
				
			КонецЦикла;
			
		КонецЕсли;
		
		ПостроительЗапросаТовары.Выполнить();
		
		ВыборкаТовары = ПостроительЗапросаТовары.Результат.Выбрать();
		
		ТаблицаДокументаТовары = ПостроительЗапросаТовары.Результат.Выгрузить();
		
		Структура.Вставить("Товары", ТаблицаДокументаТовары);
		
		//\\ еще касса
		
		#Если Клиент Тогда
		Состояние("Подготовка свертки узла (денежные средства)...");
		#КонецЕсли

		ЗапросКассы = Новый Запрос;
		ЗапросКассы.Текст = 
		"ВЫБРАТЬ
		|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КодМагазина КАК Касса,
		|	ДенежныеСредстваОстатки.СуммаОстаток КАК Сумма,
		|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КодМагазина КАК Магазин
		|ИЗ
		|	РегистрНакопления.ДенежныеСредства.Остатки(&amp;ДатаСвертки, БанковскийСчетКасса В (&amp;МассивКасс)) КАК ДенежныеСредстваОстатки
		|		ЛЕВОЕ СОЕДИНЕНИЕ ПланОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.СоответствияМагазиновИСкладов КАК ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов
		|		ПО ДенежныеСредстваОстатки.БанковскийСчетКасса = ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КассаМагазина
		|ГДЕ
		|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.Ссылка = &amp;Узел";
		
		ЗапросКассы.УстановитьПараметр("МассивКасс" , МассивКасс);
		ЗапросКассы.УстановитьПараметр("ДатаСвертки", ДатаСвертки);
		ЗапросКассы.УстановитьПараметр("Узел"       , Параметры.УзелДляОбменаОбъект.Ссылка);
		
		ТаблицаДокументаКассы = ЗапросКассы.Выполнить().Выгрузить();
		
		Структура.Вставить("ДенежныеСредства", ТаблицаДокументаКассы);
		
		//\\ еще цены
		
		#Если Клиент Тогда
		Состояние("Подготовка свертки узла (цены номенклатуры)...");
		#КонецЕсли

		ПостроительЗапросаЦены = Новый ПостроительЗапроса;
		ПостроительЗапросаЦены.Текст =
		"ВЫБРАТЬ
		|	ЦеныНоменклатурыСрезПоследних.ТипЦен,
		|	ЦеныНоменклатурыСрезПоследних.Номенклатура,
		|	ЦеныНоменклатурыСрезПоследних.ХарактеристикаНоменклатуры,
		|	ЦеныНоменклатурыСрезПоследних.Цена,
		|	ЦеныНоменклатурыСрезПоследних.ЕдиницаИзмерения
		|ИЗ
		|	РегистрСведений.ЦеныНоменклатуры.СрезПоследних(&amp;ДатаСвертки, ТипЦен В (&amp;МассивТиповЦен)) КАК ЦеныНоменклатурыСрезПоследних
		|{ГДЕ
		|	ЦеныНоменклатурыСрезПоследних.Номенклатура.*}";
		
		Если МассивТиповЦен.Количество() &gt; 0 Тогда
			ПостроительЗапросаЦены.Параметры.Вставить("МассивТиповЦен", МассивТиповЦен);
		Иначе
			ПостроительЗапросаЦены.Текст = СтрЗаменить(ПостроительЗапросаЦены.Текст, "ТипЦен В (&amp;МассивТиповЦен)", "");
		КонецЕсли;
		
		ПостроительЗапросаЦены.Параметры.Вставить("ДатаСвертки", ДатаСвертки);
		
		Если ТипЗнч(СтруктураОтбораПоНоменклатуреУзла) = Тип("Структура") Тогда
			
			Для Каждого ЭлементОтбора Из СтруктураОтбораПоНоменклатуреУзла.Отбор Цикл
				
				Если Не ЗначениеЗаполнено(ЭлементОтбора.ПутьКДанным) Тогда
					Продолжить;
				КонецЕсли;
				
				НовыйЭлементОтбора = ПостроительЗапросаТовары.Отбор.Добавить(ЭлементОтбора.ПутьКДанным);
				ЗаполнитьЗначенияСвойств(НовыйЭлементОтбора, ЭлементОтбора,,"Значение");
				НовыйЭлементОтбора.Значение = ЭлементОтбора.Значение;
				
			КонецЦикла;
			
		КонецЕсли;
		
		ПостроительЗапросаЦены.Выполнить();
		
		ТаблицаДокументаЦены = ПостроительЗапросаЦены.Результат.Выгрузить();
		
		Структура.Вставить("ЦеныНоменклатуры", ТаблицаДокументаЦены);
		
		//\\ еще дисконтные карты
		
		#Если Клиент Тогда
		Состояние("Подготовка свертки узла (дисконтные карты)...");
		#КонецЕсли

		УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(ДатаСвертки, Ложь);
		
		ПериодНакопления = ОбработкаТабличныхЧастей.ПолучитьПериодРасчетаНакопительныхСкидок(ДатаСвертки, УчетнаяПолитика);
		
		ЗапросДисконтныеКарты = Новый Запрос;
		ЗапросДисконтныеКарты.Текст =
		"ВЫБРАТЬ
		|	ПродажиПоДисконтнымКартамОбороты.ДисконтнаяКарта,
		|	ПродажиПоДисконтнымКартамОбороты.ВладелецДисконтнойКарты,
		|	ПродажиПоДисконтнымКартамОбороты.СуммаОборот КАК Сумма
		|ИЗ
		|	РегистрНакопления.ПродажиПоДисконтнымКартам.Обороты(&amp;ДатаНач, &amp;ДатаКон, , ) КАК ПродажиПоДисконтнымКартамОбороты";
		
		ЗапросДисконтныеКарты.Параметры.Вставить("ДатаНач", ПериодНакопления.ДатаНач);
		ЗапросДисконтныеКарты.Параметры.Вставить("ДатаКон", ПериодНакопления.ДатаКон);
		
		ТаблицаДокументаДисконтныеКарты = ЗапросДисконтныеКарты.Выполнить().Выгрузить();
		
		Структура.Вставить("ПродажиПоДисконтнымКартам", ТаблицаДокументаДисконтныеКарты);
		
		#Если Клиент Тогда
		Состояние("Выгрузка сводной информации...");
		#КонецЕсли
		
		Структура.Вставить("Ссылка", Неопределено);
		
		ВыгрузитьПоПравилу(Структура, , , , "СверткаИзУправляющейСистемы");
		
		
		#Если Клиент Тогда
		Состояние();
		#КонецЕсли
		
	КонецЕсли;
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="КонвертироватьПустыеХарактеристикиТабличнойЧасти" ИспользуетсяПриЗагрузке="true">
			<Текст>// Алгоритм производит замену пустых характеристик табличной части на элементы с наименование "не назначена"
//
// Входные данные:
//    ИмяТабличнойЧасти - Строка

// Создаем структуру для отбора строк с пустыми характеристиками
ОтборСтрок = Новый Структура("ХарактеристикаНоменклатуры", Справочники.ХарактеристикиНоменклатуры.ПустаяСсылка());

// Получим строки с пустыми характеристиками переданной табличной части
Для каждого СтрокаТабличнойЧасти Из ДокументОбъектСОпределениемДопРеквизитов[ИмяТабличнойЧасти].НайтиСтроки(ОтборСтрок) Цикл
	
	// Получаем "не заполненный" элемент характеристики для текущего товара
	ПараметрНоменклатура               = СтрокаТабличнойЧасти.Номенклатура;
	ПараметрХарактеристикаНоменклатуры = СтрокаТабличнойЧасти.ХарактеристикаНоменклатуры;
	Выполнить(Алгоритмы.ПолучитьНеНазначеннуюХарактеристикуНоменклатуры);
	
	// Обновляем поле строки "Характеристика номенклатуры"
	Если ЗначениеЗаполнено(ПараметрХарактеристикаНоменклатуры) Тогда
		СтрокаТабличнойЧасти.ХарактеристикаНоменклатуры = ПараметрХарактеристикаНоменклатуры;
	КонецЕсли;
	
КонецЦикла;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ОбновлениеДанныхОВидахНоменклатуры" ИспользуетсяПриЗагрузке="true">
			<Текст>// Производим установку значения "ИспользованиеХарактеристик" во всех отобранных видах номенклатуры
Для каждого ВидНоменклатуры из Параметры.ВидыНоменклатурыСУчетомПоХарактеристикам Цикл
	
	// Получаем ссылку на вид номенклатуры
	ВидНоменклатурыСсылка = ВидНоменклатуры.Ключ;
	ВидНоменклатурыОбъект = ВидНоменклатурыСсылка.ПолучитьОбъект();
    ЗаписатьОбъектВИБ(ВидНоменклатурыОбъект,ТипЗнч(ВидНоменклатурыОбъект));

	// Выполняем проверку необходимости изменения значения реквизита
	Если ВидНоменклатурыСсылка.ИспользованиеХарактеристик=Перечисления.ВариантыВеденияДополнительныхДанныхПоНоменклатуре.ИспользоватьОбщиеДляВидаНоменклатуры 
	 ИЛИ ВидНоменклатурыСсылка.ИспользованиеХарактеристик=Перечисления.ВариантыВеденияДополнительныхДанныхПоНоменклатуре.ИспользоватьИндивидуальныеДляНоменклатуры Тогда
		Продолжить;
	КонецЕсли;
	
	// Получаем объект элемента справочника
	ВидНоменклатурыОбъект = ВидНоменклатурыСсылка.ПолучитьОбъект();
	ВидНоменклатурыОбъект.ИспользованиеХарактеристик = Перечисления.ВариантыВеденияДополнительныхДанныхПоНоменклатуре.ИспользоватьИндивидуальныеДляНоменклатуры;
	ЗаписатьОбъектВИБ(ВидНоменклатурыОбъект,ТипЗнч(ВидНоменклатурыОбъект));
	
	
КонецЦикла;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ОбработчикПередВыгрузкойПКСКассаВМагазин" ИспользуетсяПриЗагрузке="false">
			<Текст>Запрос = Новый Запрос(
"ВЫБРАТЬ
|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КодМагазина
|ИЗ
|	ПланОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.СоответствияМагазиновИСкладов КАК ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов
|ГДЕ
|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КассаМагазина = &amp;Касса
|	И ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.Ссылка = &amp;УзелДляОбмена");

Запрос.УстановитьПараметр("Касса", КассаДокумента);
Запрос.УстановитьПараметр("УзелДляОбмена", УзелДляОбмена);


РезультатЗапроса = Запрос.Выполнить();
Если РезультатЗапроса.Пустой() Тогда
	
	Параметры[УстанавливаемыйПараметр] = Ложь;
	Отказ = Истина;
	
Иначе
	
	//значит это магазин. склад потом заполнится в документе из магазина
	Параметры[УстанавливаемыйПараметр] = Истина;
	
	//плохо, что смотрим только первый магазин. 
	Выборка = РезультатЗапроса.Выбрать();
	Выборка.Следующий();
	КодМагазина = Выборка.КодМагазина;
	
	Значение = КодМагазина;
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ОбработчикПередВыгрузкойПКСКассаККМВМагазин" ИспользуетсяПриЗагрузке="false">
			<Текст>Запрос = Новый Запрос(
"ВЫБРАТЬ
|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КодМагазина
|ИЗ
|	ПланОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.СоответствияМагазиновИСкладов КАК ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов
|ГДЕ
|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КассаККММагазина = &amp;КассаККМ
|	И ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.Ссылка = &amp;УзелДляОбмена");

Запрос.УстановитьПараметр("КассаККМ", КассаККМДокумента);
Запрос.УстановитьПараметр("УзелДляОбмена", УзелДляОбмена);


РезультатЗапроса = Запрос.Выполнить();
Если РезультатЗапроса.Пустой() Тогда
	
	Параметры[УстанавливаемыйПараметр] = Ложь;
	Отказ = Истина;
	
Иначе
	
	//значит это магазин. склад потом заполнится в документе из магазина
	Параметры[УстанавливаемыйПараметр] = Истина;
	
	//плохо, что смотрим только первый магазин. 
	Выборка = РезультатЗапроса.Выбрать();
	Выборка.Следующий();
	КодМагазина = Выборка.КодМагазина;
	
	Значение = КодМагазина;
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ОбработчикПередВыгрузкойПКССкладВМагазин" ИспользуетсяПриЗагрузке="false">
			<Текст>Запрос = Новый Запрос(
"ВЫБРАТЬ
|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КодМагазина
|ИЗ
|	ПланОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.СоответствияМагазиновИСкладов КАК ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов
|ГДЕ
|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.СкладМагазина = &amp;Склад
|	И ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.Ссылка = &amp;УзелДляОбмена");

Запрос.УстановитьПараметр("Склад", СкладДокумента);
Запрос.УстановитьПараметр("УзелДляОбмена", УзелДляОбмена);


РезультатЗапроса = Запрос.Выполнить();
Если РезультатЗапроса.Пустой() Тогда
	
	Параметры[УстанавливаемыйПараметр] = Ложь;
	Отказ = Истина;
	
Иначе
	
	//значит это магазин. склад потом заполнится в документе из магазина
	Параметры[УстанавливаемыйПараметр] = Истина;
	
	//плохо, что смотрим только первый магазин. 
	Выборка = РезультатЗапроса.Выбрать();
	Выборка.Следующий();
	КодМагазина = Выборка.КодМагазина;
	
	Значение = КодМагазина;
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ОпределитьВозможностьРедактированияВПриемникеПоТЧ" ИспользуетсяПриЗагрузке="false">
			<Текст>
Если ВозможностьРедактированияВПриемнике Тогда

	Для Каждого ТабличнаяЧасть Из ТаблицаДляПроверкиТабличныхЧастей Цикл
	
		Для Каждого СтрокаТЧ Из Источник[ТабличнаяЧасть.ИмяТабличнойЧасти] Цикл
			
			Для Каждого ИмяРеквизита Из ТабличнаяЧасть.МассивРеквизитов Цикл
				
				Если ИмяРеквизита = "Качество" Тогда
					
					Если СтрокаТЧ.Качество &lt;&gt; Справочники.Качество.Новый Тогда
						ВозможностьРедактированияВПриемнике = Ложь;
						Прервать;
					КонецЕсли;
					
				ИначеЕсли ИмяРеквизита = "СпособСписанияОстаткаТоваров" Тогда
					
					Если СтрокаТЧ.СпособСписанияОстаткаТоваров &lt;&gt; Перечисления.СпособыСписанияОстаткаТоваров.СоСклада Тогда
						ВозможностьРедактированияВПриемнике = Ложь;
						Прервать;
					КонецЕсли;
					
				ИначеЕсли ИмяРеквизита = "СуммаРегл" Тогда
					
					Если СтрокаТЧ.Сумма &lt;&gt; СтрокаТЧ.СуммаРегл Тогда
						ВозможностьРедактированияВПриемнике = Ложь;
						Прервать;
					КонецЕсли;
					
				Иначе
					
					Если ЗначениеЗаполнено(СтрокаТЧ[ИмяРеквизита]) Тогда
						ВозможностьРедактированияВПриемнике = Ложь;
						Прервать;
					КонецЕсли;

				КонецЕсли;
				
			КонецЦикла;
			
			//если уже определили, что нельзя редактировать - дальше можно не смотреть
			Если Не ВозможностьРедактированияВПриемнике Тогда
				Прервать;
			КонецЕсли;
			
		КонецЦикла;
		
		//если уже определили, что нельзя редактировать - дальше можно не смотреть
		Если Не ВозможностьРедактированияВПриемнике Тогда
			Прервать;
		КонецЕсли;
		
	КонецЦикла;
	
КонецЕсли;

//</Текст>
		</Алгоритм>
		<Алгоритм Имя="ПолучитьКодМагазинаПоКассе" ИспользуетсяПриЗагрузке="false">
			<Текст>КодМагазинаИзАлгоритма = "";

Запрос = Новый Запрос(
"ВЫБРАТЬ ПЕРВЫЕ 1
|	ПоПравиламКонвертацииСоответствияМагазиновИСкладов.КодМагазина
|ИЗ
|	ПланОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.СоответствияМагазиновИСкладов КАК ПоПравиламКонвертацииСоответствияМагазиновИСкладов
|ГДЕ
|	ПоПравиламКонвертацииСоответствияМагазиновИСкладов.КассаМагазина = &amp;Касса
|	И ПоПравиламКонвертацииСоответствияМагазиновИСкладов.Ссылка      = &amp;УзелДляОбмена");

Запрос.УстановитьПараметр("Касса", КассаДляЗапроса);
Запрос.УстановитьПараметр("УзелДляОбмена", УзелДляОбмена);

РезультатЗапроса = Запрос.Выполнить();
Если Не РезультатЗапроса.Пустой() Тогда
	
	Выборка = РезультатЗапроса.Выбрать();
	Выборка.Следующий();
	
	КодМагазинаИзАлгоритма = Выборка.КодМагазина;
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ПолучитьКодМагазинаПоКассеККМ" ИспользуетсяПриЗагрузке="false">
			<Текст>КодМагазинаИзАлгоритма = "";

Запрос = Новый Запрос(
"ВЫБРАТЬ ПЕРВЫЕ 1
|	ПоПравиламКонвертацииСоответствияМагазиновИСкладов.КодМагазина
|ИЗ
|	ПланОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.СоответствияМагазиновИСкладов КАК ПоПравиламКонвертацииСоответствияМагазиновИСкладов
|ГДЕ
|	ПоПравиламКонвертацииСоответствияМагазиновИСкладов.КассаККММагазина = &amp;КассаККМ
|	И ПоПравиламКонвертацииСоответствияМагазиновИСкладов.Ссылка      = &amp;УзелДляОбмена");

Запрос.УстановитьПараметр("КассаККМ", КассаККМДляЗапроса);
Запрос.УстановитьПараметр("УзелДляОбмена", УзелДляОбмена);

РезультатЗапроса = Запрос.Выполнить();
Если Не РезультатЗапроса.Пустой() Тогда
	
	Выборка = РезультатЗапроса.Выбрать();
	Выборка.Следующий();
	
	КодМагазинаИзАлгоритма = Выборка.КодМагазина;
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ПолучитьКодМагазинаПоОрганизации" ИспользуетсяПриЗагрузке="false">
			<Текст>КодМагазинаИзАлгоритма = "";

Запрос = Новый Запрос(
"ВЫБРАТЬ ПЕРВЫЕ 1
|	ПоПравиламКонвертацииСоответствияМагазиновИСкладов.КодМагазина
|ИЗ
|	ПланОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.СоответствияМагазиновИСкладов КАК ПоПравиламКонвертацииСоответствияМагазиновИСкладов
|ГДЕ
|	ПоПравиламКонвертацииСоответствияМагазиновИСкладов.Организация = &amp;Организация
|	И ПоПравиламКонвертацииСоответствияМагазиновИСкладов.Ссылка      = &amp;УзелДляОбмена");

Запрос.УстановитьПараметр("Организация", ОрганизацияДляЗапроса);
Запрос.УстановитьПараметр("УзелДляОбмена", УзелДляОбмена);
//плохо, что по первой организации
РезультатЗапроса = Запрос.Выполнить();
Если Не РезультатЗапроса.Пустой() Тогда
	
	Выборка = РезультатЗапроса.Выбрать();
	Выборка.Следующий();
	
	КодМагазинаИзАлгоритма = Выборка.КодМагазина;
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ПолучитьКодМагазинаПоСкладу" ИспользуетсяПриЗагрузке="false">
			<Текст>КодМагазинаИзАлгоритма = "";

Запрос = Новый Запрос(
"ВЫБРАТЬ ПЕРВЫЕ 1
|	ПоПравиламКонвертацииСоответствияМагазиновИСкладов.КодМагазина
|ИЗ
|	ПланОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.СоответствияМагазиновИСкладов КАК ПоПравиламКонвертацииСоответствияМагазиновИСкладов
|ГДЕ
|	ПоПравиламКонвертацииСоответствияМагазиновИСкладов.СкладМагазина = &amp;Склад
|	И ПоПравиламКонвертацииСоответствияМагазиновИСкладов.Ссылка = &amp;УзелДляОбмена");

Запрос.УстановитьПараметр("Склад", СкладДляЗапроса);
Запрос.УстановитьПараметр("УзелДляОбмена", УзелДляОбмена);

РезультатЗапроса = Запрос.Выполнить();
Если Не РезультатЗапроса.Пустой() Тогда
	
	Выборка = РезультатЗапроса.Выбрать();
	Выборка.Следующий();
	
	КодМагазинаИзАлгоритма = Выборка.КодМагазина;
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ПолучитьНеНазначеннуюХарактеристикуНоменклатуры" ИспользуетсяПриЗагрузке="true">
			<Текст>// Алгоритм производит поиск имеющейся или создает новую характеристику с наименование "не назначена" для переданного товара
//
// Входные данные:
//    ПараметрНоменклатура - СправочникСсылка.Номенклатура
//    ПараметрХарактеристикаНоменклатуры - СправочникСсылка.ХарактеристикиНоменклатуры
//
// Выходные данные:
//    ПараметрХарактеристикаНоменклатуры - СправочникСсылка.ХарактеристикиНоменклатуры

// Произведем анализ переданных данных и определимся с дальнейшими действиями


Если ЗначениеЗаполнено(ПараметрХарактеристикаНоменклатуры) Тогда
	ПроизвестиПоиск = ЛОЖЬ;
ИначеЕсли ПараметрНоменклатура.ВидНоменклатуры.ИспользованиеХарактеристик=Перечисления.ВариантыВеденияДополнительныхДанныхПоНоменклатуре.ИспользоватьИндивидуальныеДляНоменклатуры Тогда
	ВладелецХарактеристики = ПараметрНоменклатура;
	ПроизвестиПоиск = ИСТИНА;
ИначеЕсли ПараметрНоменклатура.ВидНоменклатуры.ИспользованиеХарактеристик=Перечисления.ВариантыВеденияДополнительныхДанныхПоНоменклатуре.ИспользоватьОбщиеДляВидаНоменклатуры Тогда
	ВладелецХарактеристики = ПараметрНоменклатура.ВидНоменклатуры;
	ПроизвестиПоиск = ИСТИНА;
ИначеЕсли НЕ Параметры.ВидыНоменклатурыСУчетомПоХарактеристикам.Получить(ПараметрНоменклатура.ВидНоменклатуры)=Неопределено Тогда
	ВладелецХарактеристики = ПараметрНоменклатура;
	ПроизвестиПоиск = ИСТИНА;
Иначе
	ПараметрХарактеристикаНоменклатуры = Справочники.ХарактеристикиНоменклатуры.ПустаяСсылка();
	ПроизвестиПоиск = ЛОЖЬ;
КонецЕсли;

// Если требуется, производим поиск характеристики
Если ПроизвестиПоиск Тогда
	
	// Произведем поиск характеристики в пределах данного владельца
	ПараметрХарактеристикаНоменклатуры = Справочники.ХарактеристикиНоменклатуры.НайтиПоНаименованию("не назначена", ИСТИНА,, ВладелецХарактеристики);
	
	// Если характеристика с таким наименованием не обнаружена, произведем ее создание
	Если ПараметрХарактеристикаНоменклатуры.Пустая() Тогда
		
		// Создадим и заполним объект нового элемента справочника
		ХарактеристикаОбъект = Справочники.ХарактеристикиНоменклатуры.СоздатьЭлемент();
		ХарактеристикаОбъект.Владелец     = ВладелецХарактеристики;
		ХарактеристикаОбъект.Наименование = "не назначена";
		ХарактеристикаОбъект.УстановитьНовыйКод();
		
		// Записываем новый элемент в базу данных
		ХарактеристикаОбъект.ОбменДанными.Загрузка = ИСТИНА;
		ХарактеристикаОбъект.Записать();
		
		ПараметрХарактеристикаНоменклатуры = ХарактеристикаОбъект.Ссылка;
		
	КонецЕсли;
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="УстановитьВозможностьРедактированияОбъекта" ИспользуетсяПриЗагрузке="true">
			<Текст>//проверим возможность редактирования в базе приемнике
Если Объект.ЭтоНовый() Тогда
	
	СсылкаНаОбъект = Объект.ПолучитьСсылкуНового();
	
Иначе
	
	СсылкаНаОбъект = Объект.Ссылка;
	
КонецЕсли;

Если Булево(ПараметрыОбъекта["ВозможностьРедактированияВПриемнике"]) Тогда
	
	НоваяСтрока        = Параметры.ТаблицаОбъектовРазрешенныхДляРедактирования.Добавить();
	НоваяСтрока.Ссылка = СсылкаНаОбъект;
	
Иначе
	
	НоваяСтрока        = Параметры.ТаблицаОбъектовЗапрещенныхДляРедактирования.Добавить();
	НоваяСтрока.Ссылка = СсылкаНаОбъект;
	
КонецЕсли;</Текст>
		</Алгоритм>
	</Алгоритмы>
	<Запросы>
		<Запрос Имя="ИспользованиеХарактеристик" ИспользуетсяПриЗагрузке="false">
			<Текст>ВЫБРАТЬ
МАКСИМУМ(Номенклатура.ВестиУчетПоХарактеристикам) КАК ВестиУчетПоХарактеристикам
ИЗ
	Справочник.Номенклатура КАК Номенклатура
ГДЕ
	Номенклатура.ВидНоменклатуры = &amp;ВидНоменклатуры
	И (НЕ Номенклатура.ЭтоГруппа)</Текст>
		</Запрос>
		<Запрос Имя="НаличиеОбъектаВЗапрещенныхКРедактированию" ИспользуетсяПриЗагрузке="false">
			<Текст>ВЫБРАТЬ ПЕРВЫЕ 1
	ЗапрещенныеДляРедактирования.Ссылка
ИЗ
	РегистрСведений.ОбъектыЗапрещенныеДляРедактирования КАК ЗапрещенныеДляРедактирования
ГДЕ
	ЗапрещенныеДляРедактирования.Ссылка = &amp;Ссылка</Текст>
		</Запрос>
		<Запрос Имя="НеобходимостьИспользованияОрдернойСхемы" ИспользуетсяПриЗагрузке="false">
			<Текст>ВЫБРАТЬ
	ВЫБОР
		КОГДА КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КодМагазина) &gt; 1
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК РезультатЗапроса
ИЗ
	ПланОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.СоответствияМагазиновИСкладов КАК ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов
ГДЕ
	(ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.СкладМагазина = &amp;Склад1
			ИЛИ ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.СкладМагазина = &amp;Склад2)
	И ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.Ссылка = &amp;УзелОбмена</Текст>
		</Запрос>
	</Запросы>
</ПравилаОбмена>