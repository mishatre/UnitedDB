<ПравилаОбмена>
	<ВерсияФормата РежимСовместимости="">2.01</ВерсияФормата>
	<Ид>ccd23828-4543-459c-9653-0f9d19b784d4    </Ид>
	<Наименование>Розница -&gt; УправлениеТорговлей</Наименование>
	<ДатаВремяСоздания>2014-09-26T10:24:58</ДатаВремяСоздания>
	<Источник ВерсияПлатформы="8.0" ВерсияКонфигурации="1.0.16" СинонимКонфигурации="Розница, редакция 1.0">Розница</Источник>
	<Приемник ВерсияПлатформы="8.0" ВерсияКонфигурации="10.3.30.1" СинонимКонфигурации="Управление торговлей, редакция 10.3">УправлениеТорговлей</Приемник>
	<УдалятьСопоставленныеОбъектыВПриемникеПриИхУдаленииВИсточнике>true</УдалятьСопоставленныеОбъектыВПриемникеПриИхУдаленииВИсточнике>
	<ПередПолучениемИзмененныхОбъектов>Параметры.Вставить("УзелОбмена", УзелОбмена);</ПередПолучениемИзмененныхОбъектов>
	<ПослеПолученияИнформацииОбУзлахОбмена>//часто используемые данные

Параметры.Вставить("ВалютаРегламентированногоУчета", Константы.ВалютаРегламентированногоУчета.Получить());

Параметры.Вставить("ТипСправочникСсылкаНоменклатура"  , Тип("СправочникСсылка.Номенклатура")); 
Параметры.Вставить("ТипСправочникСсылкаКонтрагенты"   , Тип("СправочникСсылка.Контрагенты")); 
Параметры.Вставить("ТипСправочникСсылкаОрганизации"   , Тип("СправочникСсылка.Организации")); 
Параметры.Вставить("ТипСправочникСсылкаСклады"        , Тип("СправочникСсылка.Склады")); 
Параметры.Вставить("ТипСправочникСсылкаФизическиеЛица", Тип("СправочникСсылка.ФизическиеЛица")); 

//произвольная организация - первая разрешенная
Запрос = Новый Запрос;
Запрос.Текст = 
	"ВЫБРАТЬ РАЗРЕШЕННЫЕ ПЕРВЫЕ 1
	|	Организации.Ссылка
	|ИЗ
	|	Справочник.Организации КАК Организации";
РезультатЗапроса = Запрос.Выполнить();
Если РезультатЗапроса.Пустой() Тогда
	Параметры.Вставить("РазрешеннаяОрганизация", Справочники.Организации.ПустаяСсылка());
Иначе
	Выборка = РезультатЗапроса.Выбрать();
	Выборка.Следующий();
	Параметры.Вставить("РазрешеннаяОрганизация", Выборка.Ссылка);
КонецЕсли;

	
//построим соответствия кодов магазинов и реквизитов
Запрос = Новый Запрос;
Запрос.Текст = 
	"ВЫБРАТЬ
	|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КодМагазина,
	|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.СкладМагазина,
	|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КассаМагазина,
	|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КассаККММагазина,
	|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.Организация
	|ИЗ
	|	ПланОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.СоответствияМагазиновИСкладов КАК ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов
	|ГДЕ
	|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.Ссылка = &amp;УзелОбменаЗагрузкаДанных";
	
Запрос.УстановитьПараметр("УзелОбменаЗагрузкаДанных", УзелОбменаЗагрузкаДанных);
	
СоответствиеКодСклад       = Новый Соответствие;
СоответствиеКодКасса       = Новый Соответствие;
СоответствиеКодКассаККМ    = Новый Соответствие;
СоответствиеКодОрганизация = Новый Соответствие;
	
Выборка = Запрос.Выполнить().Выбрать();
Пока Выборка.Следующий() Цикл
	
	СоответствиеКодСклад.Вставить(Выборка.КодМагазина, Выборка.СкладМагазина);
	СоответствиеКодКасса.Вставить(Выборка.КодМагазина, Выборка.КассаМагазина);
	СоответствиеКодКассаККМ.Вставить(Выборка.КодМагазина, Выборка.КассаККММагазина);
	СоответствиеКодОрганизация.Вставить(Выборка.КодМагазина, Выборка.Организация);
	
КонецЦикла;

Параметры.Вставить("СоответствиеКодСклад"      , СоответствиеКодСклад);
Параметры.Вставить("СоответствиеКодКасса"      , СоответствиеКодКасса);
Параметры.Вставить("СоответствиеКодКассаККМ"   , СоответствиеКодКассаККМ);
Параметры.Вставить("СоответствиеКодОрганизация", СоответствиеКодОрганизация);


УзелОбъект = УзелОбменаЗагрузкаДанных.ПолучитьОбъект();
//фиктивный вызов для заполнения таблиц
ФиктивнаяОтправка = ОтправкаЭлементаДанных.Авто;
УзелОбъект.ОпределитьТипОтправкиДанных(Справочники.Номенклатура.ПустаяСсылка(), ФиктивнаяОтправка);
Параметры.Вставить("УзелДляОбменаОбъект", УзелОбъект);</ПослеПолученияИнформацииОбУзлахОбмена>
	<ПередЗагрузкойДанных>ТаблицаОбъектовЗапрещенныхДляРедактирования = Новый ТаблицаЗначений;
ТаблицаОбъектовЗапрещенныхДляРедактирования.Колонки.Добавить("Ссылка");
Параметры.Вставить("ТаблицаОбъектовЗапрещенныхДляРедактирования", ТаблицаОбъектовЗапрещенныхДляРедактирования);

//создадим таблицу для объектов, которые хотим разрешить редактировать
ТаблицаОбъектовРазрешенныхДляРедактирования = Новый ТаблицаЗначений;
ТаблицаОбъектовРазрешенныхДляРедактирования.Колонки.Добавить("Ссылка");
Параметры.Вставить("ТаблицаОбъектовРазрешенныхДляРедактирования", ТаблицаОбъектовРазрешенныхДляРедактирования);</ПередЗагрузкойДанных>
	<ПослеЗагрузкиДанных>НаборЗаписей = РегистрыСведений.ОбъектыЗапрещенныеДляРедактирования.СоздатьНаборЗаписей();
Для Каждого СтрокаТаблицы Из Параметры.ТаблицаОбъектовЗапрещенныхДляРедактирования Цикл
	
	НаборЗаписей.Очистить();

	НаборЗаписей.Отбор.Ссылка.Установить(СтрокаТаблицы.Ссылка);
	
	НоваяЗапись        = НаборЗаписей.Добавить();
	НоваяЗапись.Ссылка = СтрокаТаблицы.Ссылка;
	
	НаборЗаписей.Записать();
	
КонецЦикла;

НаборЗаписей = РегистрыСведений.ОбъектыЗапрещенныеДляРедактирования.СоздатьНаборЗаписей();
Для Каждого СтрокаТаблицы Из Параметры.ТаблицаОбъектовРазрешенныхДляРедактирования Цикл
	
	НаборЗаписей.Отбор.Ссылка.Установить(СтрокаТаблицы.Ссылка);
	НаборЗаписей.Записать();
	
КонецЦикла;</ПослеЗагрузкиДанных>
	<ПередЗагрузкойОбъекта>//Если Параметры.УзелДляОбменаОбъект.Метаданные().Реквизиты.Найти("ДатаСвертки") &lt;&gt; Неопределено 
//	И ЗначениеЗаполнено(Параметры.УзелДляОбменаОбъект.ДатаСвертки) Тогда
//	
//	ТипОбъекта = ТипЗнч(Объект);
//	
//	Если ТипОбъекта &lt;&gt; Тип("Неопределено") И Документы.ТипВсеСсылки().СодержитТип(ТипОбъекта) Тогда
//		
//		Если Объект.Дата &lt; Параметры.УзелДляОбменаОбъект.ДатаСвертки Тогда
//			
//			Отказ = Истина;
//			
//		КонецЕсли;
//		
//	КонецЕсли;

//КонецЕсли;</ПередЗагрузкойОбъекта>
	<ПриПолученииИнформацииОбУдалении>
МетаданныеОбъекта = Объект.Метаданные();

Если Параметры.УзелДляОбменаОбъект.Метаданные().Реквизиты.Найти("ДатаСвертки") &lt;&gt; Неопределено
	И ЗначениеЗаполнено(Параметры.УзелДляОбменаОбъект.ДатаСвертки)
	И Метаданные.Документы.Содержит(МетаданныеОбъекта)
	И Объект.Дата &lt; Параметры.УзелДляОбменаОбъект.ДатаСвертки Тогда
	
	Отказ = Истина;
	
КонецЕсли;

Если НЕ Отказ Тогда
	Если Метаданные.Документы.Содержит(МетаданныеОбъекта) ИЛИ Метаданные.Справочники.Содержит(МетаданныеОбъекта) Тогда
		
		Отказ  = Истина;
		ТипОбъекта = ТипЗнч(Объект);
		Если Метаданные.Справочники.Содержит(МетаданныеОбъекта) 
			И НЕ Объект.Предопределенный Тогда
			
			Объект.ПометкаУдаления = Истина;
			ЗаписатьОбъектВИБ(Объект,ТипОбъекта);
			
		КонецЕсли;
		
		
		Если Метаданные.Документы.Содержит(МетаданныеОбъекта) Тогда
			
			Если Объект.Проведен Тогда
				
				ОтменитьПроведениеОбъектаВИБ(Объект, ТипОбъекта);
				
			КонецЕсли;
			
			Если ТипОбъекта = Тип("ДокументОбъект.ОтчетОРозничныхПродажах") Тогда
				
				УИД = Объект.Ссылка.УникальныйИдентификатор();
				
				ОбъектПКО = Документы.ПриходныйКассовыйОрдер.ПолучитьСсылку(УИД).ПолучитьОбъект();
				Если ОбъектПКО &lt;&gt; Неопределено Тогда
					ТипОбъектаПКО = ТипЗнч(ОбъектПКО);
					
					Если ОбъектПКО.Проведен Тогда
						
						ОтменитьПроведениеОбъектаВИБ(ОбъектПКО, ТипОбъектаПКО);
						
					КонецЕсли;
					
					ОбъектПКО.ПометкаУдаления = Истина;
					ЗаписатьОбъектВИБ(ОбъектПКО,ТипОбъектаПКО);
					
				КонецЕсли;
				
			КонецЕсли;	
			
			Объект.ПометкаУдаления = Истина;
			ЗаписатьОбъектВИБ(Объект,ТипОбъекта);
			
			
		КонецЕсли;
		
	КонецЕсли;	
КонецЕсли;</ПриПолученииИнформацииОбУдалении>
	<Параметры/>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Группа>
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>50</Порядок>
			<Правило>
				<Код>ВидыДисконтныхКарт</Код>
				<Наименование>СправочникСсылка.ВидыДисконтныхКарт --&gt; СправочникСсылка.ВидыДисконтныхКарт</Наименование>
				<Порядок>50</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ВидыДисконтныхКарт</Источник>
				<Приемник>СправочникСсылка.ВидыДисконтныхКарт</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВидыКонтактнойИнформации</Код>
				<Наименование>СправочникСсылка.ВидыКонтактнойИнформации --&gt; СправочникСсылка.ВидыКонтактнойИнформации</Наименование>
				<Порядок>100</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.ВидыКонтактнойИнформации</Источник>
				<Приемник>СправочникСсылка.ВидыКонтактнойИнформации</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>ВидОбъектаКонтактнойИнформации --&gt; ВидОбъектаКонтактнойИнформации</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ВидОбъектаКонтактнойИнформации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОбъектовКонтактнойИнформации"/>
						<Приемник Имя="ВидОбъектаКонтактнойИнформации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОбъектовКонтактнойИнформации"/>
						<КодПравилаКонвертации>ВидыОбъектовКонтактнойИнформации                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Тип --&gt; Тип</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
						<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
						<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ТелефонКонтрагента --&gt; ТелефонКонтрагента</Наименование>
						<Порядок>50</Порядок>
						<Источник>ТелефонКонтрагента</Источник>
						<Приемник>ТелефонКонтрагента</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ТелефонОрганизации --&gt; ТелефонОрганизации</Наименование>
						<Порядок>100</Порядок>
						<Источник>ТелефонОрганизации</Источник>
						<Приемник>ТелефонОрганизации</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ФаксКонтрагента --&gt; ФаксКонтрагента</Наименование>
						<Порядок>150</Порядок>
						<Источник>ФаксКонтрагента</Источник>
						<Приемник>ФаксКонтрагента</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ФаксОрганизации --&gt; ФаксОрганизации</Наименование>
						<Порядок>200</Порядок>
						<Источник>ФаксОрганизации</Источник>
						<Приемник>ФаксОрганизации</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>ФактАдресКонтрагента --&gt; ФактАдресКонтрагента</Наименование>
						<Порядок>250</Порядок>
						<Источник>ФактАдресКонтрагента</Источник>
						<Приемник>ФактАдресКонтрагента</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>ФактАдресОрганизации --&gt; ФактАдресОрганизации</Наименование>
						<Порядок>300</Порядок>
						<Источник>ФактАдресОрганизации</Источник>
						<Приемник>ФактАдресОрганизации</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>ФактАдресФизЛица --&gt; ФактАдресФизЛица</Наименование>
						<Порядок>350</Порядок>
						<Источник>ФактАдресФизЛица</Источник>
						<Приемник>ФактАдресФизЛица</Приемник>
					</Значение>
					<Значение>
						<Код>8</Код>
						<Наименование>ЮрАдресКонтрагента --&gt; ЮрАдресКонтрагента</Наименование>
						<Порядок>400</Порядок>
						<Источник>ЮрАдресКонтрагента</Источник>
						<Приемник>ЮрАдресКонтрагента</Приемник>
					</Значение>
					<Значение>
						<Код>9</Код>
						<Наименование>ЮрАдресОрганизации --&gt; ЮрАдресОрганизации</Наименование>
						<Порядок>450</Порядок>
						<Источник>ЮрАдресОрганизации</Источник>
						<Приемник>ЮрАдресОрганизации</Приемник>
					</Значение>
					<Значение>
						<Код>10</Код>
						<Наименование>ЮрАдресФизЛица --&gt; ЮрАдресФизЛица</Наименование>
						<Порядок>500</Порядок>
						<Источник>ЮрАдресФизЛица</Источник>
						<Приемник>ЮрАдресФизЛица</Приемник>
					</Значение>
					<Значение>
						<Код>11</Код>
						<Наименование>EmailКонтрагента --&gt; АдресЭлектроннойПочтыКонтактн</Наименование>
						<Порядок>550</Порядок>
						<Источник>EmailКонтрагента</Источник>
						<Приемник>АдресЭлектроннойПочтыКонтактногоЛицаКонтрагента</Приемник>
					</Значение>
					<Значение>
						<Код>12</Код>
						<Наименование>ТелефонДомашнийФизЛица --&gt; ТелефонФизЛицаДомашний</Наименование>
						<Порядок>600</Порядок>
						<Источник>ТелефонДомашнийФизЛица</Источник>
						<Приемник>ТелефонФизЛицаДомашний</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыНоменклатуры</Код>
				<Наименование>СправочникСсылка.ВидыНоменклатуры --&gt; СправочникСсылка.ВидыНоменклатуры</Наименование>
				<Порядок>150</Порядок>
				<ПослеЗагрузки>Если НЕ Объект.ЭтоНовый() 
	И НЕ ЗначениеЗаполнено(Объект.ТипНоменклатуры) Тогда
	
	Если Ссылка.ТипНоменклатуры = Перечисления.ТипыНоменклатуры.Набор Тогда
       		
		Объект.ТипНоменклатуры = Перечисления.ТипыНоменклатуры.Набор;
		
	КонецЕсли;	
		
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ВидыНоменклатуры</Источник>
				<Приемник>СправочникСсылка.ВидыНоменклатуры</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ТипНоменклатуры --&gt; ТипНоменклатуры</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ТипНоменклатуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНоменклатуры"/>
						<Приемник Имя="ТипНоменклатуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНоменклатуры"/>
						<КодПравилаКонвертации>ТипыНоменклатуры                                  </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВидыОплатЧекаККМ</Код>
				<Наименование>СправочникСсылка.ВидыОплатЧекаККМ --&gt; СправочникСсылка.ВидыОплатЧекаККМ</Наименование>
				<Порядок>200</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ВидыОплатЧекаККМ</Источник>
				<Приемник>СправочникСсылка.ВидыОплатЧекаККМ</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>БанкКредитор --&gt; БанкКредитор</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="БанкКредитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="БанкКредитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПроцентБанковскойКомиссии --&gt; ПроцентБанковскойКомиссии</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПроцентБанковскойКомиссии" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="ПроцентБанковскойКомиссии" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
						<КодПравилаКонвертации>ВидыОплатЧекаККМ                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ТипОплаты --&gt; ТипОплаты</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ТипОплаты" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыОплатЧекаККМ"/>
						<Приемник Имя="ТипОплаты" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыОплатЧекаККМ"/>
						<КодПравилаКонвертации>ТипыОплатЧекаККМ                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>8</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Наличные --&gt; Наличные</Наименование>
						<Порядок>50</Порядок>
						<Источник>Наличные</Источник>
						<Приемник>Наличные</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ГруппыПользователей</Код>
				<Наименование>СправочникСсылка.ГруппыПользователей --&gt; СправочникСсылка.ГруппыПользователей</Наименование>
				<Порядок>250</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ГруппыПользователей</Источник>
				<Приемник>СправочникСсылка.ГруппыПользователей</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>АдминистраторГруппы --&gt; АдминистраторГруппы</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="АдминистраторГруппы" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="АдминистраторГруппы" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ГруппыПользователей"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ГруппыПользователей"/>
						<КодПравилаКонвертации>ГруппыПользователей                               </КодПравилаКонвертации>
					</Свойство>
					<Группа>
						<Код>6</Код>
						<Наименование>ПользователиГруппы --&gt; ПользователиГруппы</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПользователиГруппы" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ПользователиГруппы" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>7</Код>
							<Наименование>Пользователь --&gt; Пользователь</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Пользователь" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<Приемник Имя="Пользователь" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ВсеПользователи --&gt; ВсеПользователи</Наименование>
						<Порядок>50</Порядок>
						<Источник>ВсеПользователи</Источник>
						<Приемник>ВсеПользователи</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ДоговорыЭквайринга</Код>
				<Наименование>СправочникСсылка.ДоговорыЭквайринга --&gt; СправочникСсылка.ДоговорыЭквайринга</Наименование>
				<Порядок>300</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ДоговорыЭквайринга</Источник>
				<Приемник>СправочникСсылка.ДоговорыЭквайринга</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Эквайрер --&gt; Эквайрер</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Эквайрер" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Эквайрер" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Группа>
						<Код>5</Код>
						<Наименование>ТарифыЗаРасчетноеОбслуживание --&gt; ТарифыЗаРасчетноеОбслуживание</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ТарифыЗаРасчетноеОбслуживание" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ТарифыЗаРасчетноеОбслуживание" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>6</Код>
							<Наименование>ВидОплаты --&gt; ВидОплаты</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
							<Приемник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
							<КодПравилаКонвертации>ВидыОплатЧекаККМ                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>ПроцентТорговойУступки --&gt; ПроцентТорговойУступки</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ПроцентТорговойУступки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ПроцентТорговойУступки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ДокументыУдостоверяющиеЛичность</Код>
				<Наименование>СправочникСсылка.ДокументыУдостоверяющиеЛичность --&gt; СправочникСсылка.ДокументыУдостоверяющиеЛичност</Наименование>
				<Порядок>350</Порядок>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 тогда
 
	 СтрокаИменСвойствПоиска = "КодИМНС";
	 
Иначе
	 
	 СтрокаИменСвойствПоиска = "Наименование";
 
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ДокументыУдостоверяющиеЛичность</Источник>
				<Приемник>СправочникСсылка.ДокументыУдостоверяющиеЛичность</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>КодИМНС --&gt; КодИМНС</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="КодИМНС" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодИМНС" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>КодПФР --&gt; КодПФР</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="КодПФР" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПФР" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ДолжностиОрганизаций</Код>
				<Наименование>СправочникСсылка.ДолжностиОрганизаций --&gt; СправочникСсылка.ДолжностиОрганизаций</Наименование>
				<Порядок>400</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ДолжностиОрганизаций</Источник>
				<Приемник>СправочникСсылка.ДолжностиОрганизаций</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ЕдиницыИзмерения</Код>
				<Наименование>СправочникСсылка.ЕдиницыИзмерения --&gt; СправочникСсылка.ЕдиницыИзмерения</Наименование>
				<Порядок>450</Порядок>
				<ПередВыгрузкой>Если Не ЗначениеЗаполнено(Источник.Владелец) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>//Если Не Отказ И Параметры.УзелДляОбменаОбъект.мЕстьФильтрПоНоменклатуре И Не Параметры.УзелДляОбменаОбъект.ЭлементВходитВТаблицу(Объект.Владелец, "Номенклатура", "Номенклатура") Тогда
//	
//	Отказ = Истина;

//КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.ЕдиницыИзмерения</Источник>
				<Приемник>СправочникСсылка.ЕдиницыИзмерения</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Вес --&gt; Вес</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Вес" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="Вес" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="Владелец" Вид="Свойство"/>
						<ПередВыгрузкой>Если ТипЗнч(Источник.Владелец) = Тип("СправочникСсылка.Номенклатура") Тогда
	ИмяПКО = "Номенклатура";
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ЕдиницаПоКлассификатору --&gt; ЕдиницаПоКлассификатору</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ЕдиницаПоКлассификатору" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<Приемник Имя="ЕдиницаПоКлассификатору" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Объем --&gt; Объем</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Объем" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="Объем" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>10</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ЗначенияСвойствОбъектов</Код>
				<Наименование>СправочникСсылка.ЗначенияСвойствОбъектов --&gt; СправочникСсылка.ЗначенияСвойствОбъектов</Наименование>
				<Порядок>500</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ЗначенияСвойствОбъектов</Источник>
				<Приемник>СправочникСсылка.ЗначенияСвойствОбъектов</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Владелец" Вид="Свойство" Тип="ПланВидовХарактеристикСсылка.СвойстваОбъектов"/>
						<Приемник Имя="Владелец" Вид="Свойство" Тип="ПланВидовХарактеристикСсылка.СвойстваОбъектов"/>
						<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ИнформационныеКарты</Код>
				<Наименование>СправочникСсылка.ИнформационныеКарты --&gt; СправочникСсылка.ИнформационныеКарты</Наименование>
				<Порядок>550</Порядок>
				<ПослеЗагрузки>
Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ИнформационныеКарты</Источник>
				<Приемник>СправочникСсылка.ИнформационныеКарты</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>ВидДисконтнойКарты --&gt; ВидДисконтнойКарты</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ВидДисконтнойКарты" Вид="Реквизит" Тип="СправочникСсылка.ВидыДисконтныхКарт"/>
						<Приемник Имя="ВидДисконтнойКарты" Вид="Реквизит" Тип="СправочникСсылка.ВидыДисконтныхКарт"/>
						<КодПравилаКонвертации>ВидыДисконтныхКарт                                </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ВидКарты --&gt; ВидКарты</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ВидКарты" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыИнформационныхКарт"/>
						<Приемник Имя="ВидКарты" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыИнформационныхКарт"/>
						<КодПравилаКонвертации>ВидыИнформационныхКарт                            </КодПравилаКонвертации>
						<ПередВыгрузкой>
// Если вид информационной карты - "Смешанная" то выполняем замену
// на значение, указанное в реквизите плана обмена плане обмена
// ВидИнформационнойКартыСмешаннаяВУТ

Если Источник.ВидКарты = Перечисления.ВидыИнформационныхКарт.Смешанная Тогда
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	Узел.ВидИнформационнойКартыСмешаннаяВУТ
	|ИЗ
	|	ПланОбмена.ОбменУправлениеТорговлейРозничнаяТорговля КАК Узел
	|ГДЕ
	|	Узел.Ссылка = &amp;УзелПланаОбмена";
	Запрос.УстановитьПараметр("УзелПланаОбмена", Параметры.УзелОбмена);
	Выборка = Запрос.Выполнить().Выбрать();
	
	Если Выборка.Следующий() Тогда
		Значение = Выборка.ВидИнформационнойКартыСмешаннаяВУТ;
	Иначе
		Значение = Перечисления.ВидыИнформационныхКарт.ПустаяСсылка();
	КонецЕсли;
	
	// Необходимо запретить изменять данную информационную карту в УТ
	// Для этого существует свойство ПКО ЭтоСмешаннаяИнформационнаяКарта
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ВладелецКарты --&gt; ВладелецКарты</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ВладелецКарты" Вид="Реквизит"/>
						<Приемник Имя="ВладелецКарты" Вид="Реквизит"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>КодКарты --&gt; КодКарты</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="КодКарты" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодКарты" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Если Источник.ВидКарты = Перечисления.ВидыИнформационныхКарт.Штриховая Тогда
	
	НаборЗаписейШтриходов = РегистрыСведений.Штрихкоды.СоздатьНаборЗаписей();
	НаборЗаписейШтриходов.Отбор.Владелец.Установить(Источник.Ссылка);
	НаборЗаписейШтриходов.Прочитать();
	Если НаборЗаписейШтриходов.Количество() &gt; 0 Тогда
		Значение = НаборЗаписейШтриходов[0].Штрихкод;
	Иначе
		Значение = "";
	КонецЕсли;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ИнформационныеКарты"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ИнформационныеКарты"/>
						<КодПравилаКонвертации>ИнформационныеКарты                               </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>11</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ТипКарты --&gt; ТипКарты</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ТипКарты" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыИнформационныхКарт"/>
						<Приемник Имя="ТипКарты" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыИнформационныхКарт"/>
						<КодПравилаКонвертации>ТипыИнформационныхКарт                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование> --&gt; ТипШтрихКода</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ТипШтрихКода" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.ТипыШтрихкодов"/>
						<ПередВыгрузкой>Если Источник.ВидКарты = Перечисления.ВидыИнформационныхКарт.Штриховая Тогда
	
	СтрокаШтрихкода = РаботаСТорговымОборудованием.ПолучитьШтрихКод(Источник.Ссылка);
	Если СтрокаШтрихкода &lt;&gt; Неопределено Тогда
		Значение = СтрокаШтрихкода.ТипШтрихкода;
	КонецЕсли;
	
ИначеЕсли Источник.ВидКарты = Перечисления.ВидыИнформационныхКарт.Смешанная Тогда
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	Узел.ВидИнформационнойКартыСмешаннаяВУТ
	|ИЗ
	|	ПланОбмена.ОбменУправлениеТорговлейРозничнаяТорговля КАК Узел
	|ГДЕ
	|	Узел.Ссылка = &amp;УзелПланаОбмена";
	Запрос.УстановитьПараметр("УзелПланаОбмена", Параметры.УзелОбмена);
	Выборка = Запрос.Выполнить().Выбрать();
	
	Если Выборка.Следующий() Тогда
		Если Выборка.ВидИнформационнойКартыСмешаннаяВУТ = Перечисления.ВидыИнформационныхКарт.Штриховая Тогда
			СтрокаШтрихкода = РаботаСТорговымОборудованием.ПолучитьШтрихКод(Источник.Ссылка);
			Если СтрокаШтрихкода &lt;&gt; Неопределено Тогда
				Значение = СтрокаШтрихкода.ТипШтрихкода;
			КонецЕсли;
		КонецЕсли;
	КонецЕсли;
	
Иначе
	
	Значение = ПланыВидовХарактеристик.ТипыШтрихкодов.EAN13;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>
ВозможностьРедактирования = Истина;

Если Источник.ВидКарты = Перечисления.ВидыИнформационныхКарт.Смешанная Тогда
	ВозможностьРедактирования = Ложь;
КонецЕсли;

Если ТипЗнч(Источник.ВладелецКарты) = Тип("СправочникСсылка.ФизическиеЛица") Тогда
	ВозможностьРедактирования = Ложь;
КонецЕсли;

Если ВозможностьРедактирования Тогда
	Значение = Истина;
Иначе
	Значение = ЛОжь;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КассаВКассуККМ</Код>
				<Наименование>СправочникСсылка.Кассы --&gt; СправочникСсылка.КассыККМ</Наименование>
				<Порядок>600</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Кассы</Источник>
				<Приемник>СправочникСсылка.КассыККМ</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Организация --&gt; Владелец</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Кассы</Код>
				<Наименование>СправочникСсылка.Кассы --&gt; СправочникСсылка.Кассы</Наименование>
				<Порядок>650</Порядок>
				<ПослеЗагрузки>Если Параметры.УзелДляОбменаОбъект.мЕстьФильтрПоКассам И Не Параметры.УзелДляОбменаОбъект.ЭлементВходитВТаблицу(Объект.Ссылка, "Кассы", "Касса") Тогда
	
	Отказ = Истина;	
	
КонецЕсли;

Если НЕ Объект.ЭтоГруппа Тогда
	
	Если НЕ (Отказ И ЗначениеЗаполнено(Объект.ВалютаДенежныхСредств)) Тогда
		
		Объект.ВалютаДенежныхСредств = Константы.ВалютаРегламентированногоУчета.Получить();
		
	КонецЕсли;
	
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Кассы</Источник>
				<Приемник>СправочникСсылка.Кассы</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Кассы"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Кассы"/>
						<КодПравилаКонвертации>Кассы                                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>5</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>Организация --&gt; Владелец</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КатегорииОбъектов</Код>
				<Наименование>СправочникСсылка.КатегорииОбъектов --&gt; СправочникСсылка.КатегорииОбъектов</Наименование>
				<Порядок>700</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.КатегорииОбъектов</Источник>
				<Приемник>СправочникСсылка.КатегорииОбъектов</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>НазначениеКатегории --&gt; НазначениеКатегории</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="НазначениеКатегории" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов"/>
						<Приемник Имя="НазначениеКатегории" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов"/>
						<КодПравилаКонвертации>НазначенияСвойствКатегорийОбъектов                </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторЕдиницИзмерения</Код>
				<Наименование>СправочникСсылка.КлассификаторЕдиницИзмерения --&gt; СправочникСсылка.КлассификаторЕдиницИзмерения</Наименование>
				<Порядок>750</Порядок>
				<Источник>СправочникСсылка.КлассификаторЕдиницИзмерения</Источник>
				<Приемник>СправочникСсылка.КлассификаторЕдиницИзмерения</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПриВыгрузке>Значение = Прав(Значение,3)+" ";</ПриВыгрузке>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторСтранМира</Код>
				<Наименование>СправочникСсылка.КлассификаторСтранМира --&gt; СправочникСсылка.КлассификаторСтранМира</Наименование>
				<Порядок>800</Порядок>
				<Источник>СправочникСсылка.КлассификаторСтранМира</Источник>
				<Приемник>СправочникСсылка.КлассификаторСтранМира</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Россия --&gt; Россия</Наименование>
						<Порядок>50</Порядок>
						<Источник>Россия</Источник>
						<Приемник>Россия</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>Контрагенты</Код>
				<Наименование>СправочникСсылка.Контрагенты --&gt; СправочникСсылка.Контрагенты</Наименование>
				<Порядок>850</Порядок>
				<ПослеВыгрузки>
Выполнить(Алгоритмы.ВыгрузитьКИ);</ПослеВыгрузки>
				<ПоследовательностьПолейПоиска>Если СвойстваПоиска["ЭтоГруппа"] = Истина Тогда
	
	Если ЗначениеЗаполнено(НастройкаПоиска) Тогда
		
		Если НастройкаПоиска = "Ссылка" Тогда
			
			ПрекратитьПоиск = Истина;
			
		Иначе
			
			СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
			
		КонецЕсли;
		
	Иначе
		
		СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
		
	КонецЕсли;

	
Иначе
	
	Если НастройкаПоиска = "Наименование" Тогда
		
		СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
		
	ИначеЕсли НастройкаПоиска = "Ссылка" Тогда
		
		ПрекратитьПоиск = Истина;
		
	ИначеЕсли НастройкаПоиска = "ИННКПП" Тогда
		
		Если ЗначениеЗаполнено(СвойстваПоиска["ИНН"]) Тогда
			СтрокаИменСвойствПоиска = "ИНН, КПП, ЭтоГруппа";
		Иначе
			СтрокаИменСвойствПоиска = "Наименование, НаименованиеПолное, ЭтоГруппа";
		КонецЕсли;
		
	Иначе // По ссылке
		
		//ПрекратитьПоиск = Истина;
		
	КонецЕсли;
	
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Контрагенты</Источник>
				<Приемник>СправочникСсылка.Контрагенты</Приемник>
				<НастройкаВариантовПоискаОбъектов>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>Наименование</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по Наименованию</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>ИННКПП</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>ИНН + КПП</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по ИНН и КПП</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>Ссылка</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Внутренний идентификатор</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по Внутреннему идентификатору</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
				</НастройкаВариантовПоискаОбъектов>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>ДокументУдостоверяющийЛичность --&gt; ДокументУдостоверяющийЛичность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ДокументУдостоверяющийЛичность" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ДокументУдостоверяющийЛичность" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>КПП --&gt; КПП</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>7</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Если ПустаяСтрока(Источник.Наименование) 
	ИЛИ НЕ ЗначениеЗаполнено(Источник.Наименование) тогда
	Значение = "Не задано";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>11</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ЮрФизЛицо --&gt; ЮрФизЛицо</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<Приемник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<КодПравилаКонвертации>ЮрФизЛицо                                         </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Номенклатура</Код>
				<Наименование>СправочникСсылка.Номенклатура --&gt; СправочникСсылка.Номенклатура</Наименование>
				<Порядок>900</Порядок>
				<ПоследовательностьПолейПоиска>Если СвойстваПоиска["ЭтоГруппа"] = Истина Тогда
	
	Если ЗначениеЗаполнено(НастройкаПоиска) Тогда
		
		Если НастройкаПоиска = "Ссылка" Тогда
			
			ПрекратитьПоиск = Истина;
			
		Иначе
			
			СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
			
		КонецЕсли;
		
	Иначе
		ПрекратитьПоиск = Истина;
	КонецЕсли;
	
Иначе
	
	Если НастройкаПоиска = "Артикул" Тогда
		
		СтрокаИменСвойствПоиска = "Артикул, ЭтоГруппа";
		
	ИначеЕсли НастройкаПоиска = "Наименование" Тогда
		
		СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
		
	ИначеЕсли НастройкаПоиска = "Ссылка" Тогда
		
		ПрекратитьПоиск = Истина;
		
	ИначеЕсли НастройкаПоиска = "НаименованиеАртикул" Тогда
		
		СтрокаИменСвойствПоиска = "Наименование, Артикул, ЭтоГруппа";
		
	ИначеЕсли НастройкаПоиска = "НаименованиеРодитель" Тогда
		
		СтрокаИменСвойствПоиска = "Наименование, Родитель, ЭтоГруппа";
		
	ИначеЕсли НастройкаПоиска = "НаименованиеРодительАртикул" Тогда
		
		СтрокаИменСвойствПоиска = "Наименование, Родитель, Артикул, ЭтоГруппа";
		
	Иначе // По ссылке
		
		ПрекратитьПоиск = Истина;
		
	КонецЕсли;
	
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Номенклатура</Источник>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<НастройкаВариантовПоискаОбъектов>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>Артикул</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Артикул</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по Артикулу</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>Наименование</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по Наименованию</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>НаименованиеАртикул</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование + Артикул</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по Наименованию и Артикулу</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>НаименованиеРодитель</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование + Родитель</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по Наименованию и Родителю</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>НаименованиеРодительАртикул</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование + Родитель + Артикул</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по Наименованию, Родителю и Артикулу</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>Ссылка</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Внутренний идентификатор</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по внутреннему идентификатору</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
				</НастройкаВариантовПоискаОбъектов>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Артикул --&gt; Артикул</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>БазоваяЕдиницаИзмерения --&gt; БазоваяЕдиницаИзмерения</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="БазоваяЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<Приемник Имя="БазоваяЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Весовой --&gt; Весовой</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Весовой" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="Весовой" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ВидНоменклатуры --&gt; ВидНоменклатуры</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ВидНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ВидыНоменклатуры"/>
						<Приемник Имя="ВидНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ВидыНоменклатуры"/>
						<КодПравилаКонвертации>ВидыНоменклатуры                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ЕдиницаДляОтчетов --&gt; ЕдиницаДляОтчетов</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ЕдиницаДляОтчетов" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<Приемник Имя="ЕдиницаДляОтчетов" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ЕдиницаХраненияОстатков --&gt; ЕдиницаХраненияОстатков</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ЕдиницаХраненияОстатков" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<Приемник Имя="ЕдиницаХраненияОстатков" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Комплект --&gt; Комплект</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Комплект" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="Комплект" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>11</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>ОсновноеИзображение --&gt; ОсновноеИзображение</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ОсновноеИзображение" Вид="Реквизит" Тип="СправочникСсылка.ХранилищеДополнительнойИнформации"/>
						<Приемник Имя="ОсновноеИзображение" Вид="Реквизит" Тип="СправочникСсылка.ХранилищеДополнительнойИнформации"/>
						<КодПравилаКонвертации>ХранилищеДополнительнойИнформации                 </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>16</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>СтранаПроисхождения --&gt; СтранаПроисхождения</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
						<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
						<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>Услуга --&gt; Услуга</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="Услуга" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="Услуга" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>20</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование>НоменклатурнаяГруппа --&gt; НоменклатурнаяГруппа</Наименование>
						<Порядок>950</Порядок>
						<Источник Имя="НоменклатурнаяГруппа" Вид="Реквизит" Тип="СправочникСсылка.НоменклатурныеГруппы"/>
						<Приемник Имя="НоменклатурнаяГруппа" Вид="Реквизит" Тип="СправочникСсылка.НоменклатурныеГруппы"/>
						<КодПравилаКонвертации>НоменклатурныеГруппы                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование>ДополнительноеОписание --&gt; ДополнительноеОписаниеНоменклатуры</Наименование>
						<Порядок>1000</Порядок>
						<Источник Имя="ДополнительноеОписание" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ДополнительноеОписаниеНоменклатуры" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование> --&gt; ВестиУчетПоХарактеристикам</Наименование>
						<Порядок>1050</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВестиУчетПоХарактеристикам" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>ИспользованиеХарактеристик = Источник.ВидНоменклатуры.ИспользованиеХарактеристик;
Значение = ЗначениеЗаполнено(ИспользованиеХарактеристик) И (НЕ ИспользованиеХарактеристик=Перечисления.ВариантыВеденияДополнительныхДанныхПоНоменклатуре.НеИспользовать);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ХарактеристикиНоменклатуры</Код>
				<Наименование>СправочникСсылка.Номенклатура --&gt; СправочникСсылка.ХарактеристикиНоменклатуры</Наименование>
				<Порядок>950</Порядок>
				<ПередВыгрузкой>Если НРег(СокрЛП(Источник.Наименование)) = "не назначена" Тогда
	
	Отказ = Истина;
	
Иначе
	
Если НЕ Источник.Владелец=Неопределено Тогда
					
	// Характеристики, подчиненные виду номенклатуры выгружать не будем
	Если Источник.Владелец.ЭтоГруппа ИЛИ (НЕ ТипЗнч(Источник.Владелец)=Тип("СправочникСсылка.Номенклатура")) Тогда
		
		Отказ = Истина;
		
	КонецЕсли;
	
	// Если передали не записанный объект, то не следует его запоминать
	Если НЕ(Отказ И ЗначениеЗаполнено(Источник.Ссылка)) Тогда
		
		КлючВыгружаемыхДанных = "ХарактеристикаНоменклатуры."+Источник.Владелец.УникальныйИдентификатор()+"."+Источник.Наименование;
		СинхронизироватьПоИдентификатору = Ложь;
		
	КонецЕсли;
	
КонецЕсли;

КонецЕсли;</ПередВыгрузкой>
				<ПоследовательностьПолейПоиска>ПровестиЗаписьНеЗаписанныхОбъектов();

// Получим и установим значения некоторых параметров
Наименование    = СвойстваПоиска.Получить("Наименование");
Владелец        = СвойстваПоиска.Получить("Владелец");
СсылкаНаОбъект  = Неопределено;
ПрекратитьПоиск = Истина;

// Произведем поиск элемента вручную
Если ЗначениеЗаполнено(Владелец) Тогда
	
	СсылкаНаОбъект = Справочники.ХарактеристикиНоменклатуры.НайтиПоНаименованию(Наименование, Истина,, Владелец);
	
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.ХарактеристикиНоменклатуры</Источник>
				<Приемник>СправочникСсылка.ХарактеристикиНоменклатуры</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Владелец" Вид="Свойство"/>
						<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>НоменклатурныеГруппы</Код>
				<Наименование>СправочникСсылка.НоменклатурныеГруппы --&gt; СправочникСсылка.НоменклатурныеГруппы</Наименование>
				<Порядок>1000</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.НоменклатурныеГруппы</Источник>
				<Приемник>СправочникСсылка.НоменклатурныеГруппы</Приемник>
				<Свойства>
					<Свойство Отключить="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>4</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.НоменклатурныеГруппы"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.НоменклатурныеГруппы"/>
						<КодПравилаКонвертации>НоменклатурныеГруппы                              </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Организации</Код>
				<Наименование>СправочникСсылка.Организации --&gt; СправочникСсылка.Организации</Наименование>
				<Порядок>1050</Порядок>
				<ПослеВыгрузки>
Выполнить(Алгоритмы.ВыгрузитьКИ);</ПослеВыгрузки>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 И (ЗначениеЗаполнено(СвойстваПоиска["ИНН"]) ИЛИ ЗначениеЗаполнено(СвойстваПоиска["КПП"])) тогда
 
	 СтрокаИменСвойствПоиска = "ИНН, КПП";
	 
ИначеЕсли Не ЗначениеЗаполнено(СвойстваПоиска["ИНН"]) И Не ЗначениеЗаполнено(СвойстваПоиска["КПП"]) И ЗначениеЗаполнено(СвойстваПоиска["НаименованиеПолное"]) Тогда
	 
	 СтрокаИменСвойствПоиска = "НаименованиеПолное";
 
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Организации</Источник>
				<Приемник>СправочникСсылка.Организации</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>КодИМНС --&gt; КодИМНС</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="КодИМНС" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодИМНС" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>КПП --&gt; КПП</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>7</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ОГРН --&gt; ОГРН</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ОГРН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ОГРН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Префикс --&gt; Префикс</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Префикс" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Префикс" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>СвидетельствоДатаВыдачи --&gt; СвидетельствоДатаВыдачи</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="СвидетельствоДатаВыдачи" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="СвидетельствоДатаВыдачи" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>СвидетельствоСерияНомер --&gt; СвидетельствоСерияНомер</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="СвидетельствоСерияНомер" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="СвидетельствоСерияНомер" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>ЮрФизЛицо --&gt; ЮрФизЛицо</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<Приемник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<КодПравилаКонвертации>ЮрФизЛицо                                         </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Пользователи</Код>
				<Наименование>СправочникСсылка.Пользователи --&gt; СправочникСсылка.Пользователи</Наименование>
				<Порядок>1100</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Пользователи</Источник>
				<Приемник>СправочникСсылка.Пользователи</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ФизЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<Приемник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>6</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Склады</Код>
				<Наименование>СправочникСсылка.Склады --&gt; СправочникСсылка.Склады</Наименование>
				<Порядок>1150</Порядок>
				<ПослеЗагрузки>Если Параметры.УзелДляОбменаОбъект.мЕстьФильтрПоСкладам И Не Параметры.УзелДляОбменаОбъект.ЭлементВходитВТаблицу(Объект.Ссылка, "Склады", "Склад") Тогда
	
	Отказ = Истина;
	
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Склады</Источник>
				<Приемник>СправочникСсылка.Склады</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>5</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ТипЦеныПродажи --&gt; ТипЦенРозничнойТорговли</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ТипЦеныПродажи" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
						<Приемник Имя="ТипЦенРозничнойТорговли" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
						<КодПравилаКонвертации>ТипыЦенНоменклатуры                               </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ТипыЦенНоменклатуры</Код>
				<Наименование>СправочникСсылка.ТипыЦенНоменклатуры --&gt; СправочникСсылка.ТипыЦенНоменклатуры</Наименование>
				<Порядок>1250</Порядок>
				<ПослеЗагрузки>Если Не ЗначениеЗаполнено(Объект.ПорядокОкругления) Тогда
	Объект.ПорядокОкругления = Перечисления.ПорядкиОкругления.Окр0_01;
КонецЕсли;

Если Не ЗначениеЗаполнено(Объект.ВалютаЦены) Тогда
	Объект.ВалютаЦены = Параметры.ВалютаРегламентированногоУчета;
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ТипыЦенНоменклатуры</Источник>
				<Приемник>СправочникСсылка.ТипыЦенНоменклатуры</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ФизическиеЛица</Код>
				<Наименование>СправочникСсылка.ФизическиеЛица --&gt; СправочникСсылка.ФизическиеЛица</Наименование>
				<Порядок>1300</Порядок>
				<ПослеВыгрузки>
Выполнить(Алгоритмы.ВыгрузитьКИ);</ПослеВыгрузки>
				<ПоследовательностьПолейПоиска>Если СвойстваПоиска["ЭтоГруппа"] = Истина Тогда
		СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
ИначеЕсли НастройкаПоиска = "Наименование" Тогда
	СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
ИначеЕсли НастройкаПоиска = "НаименованиеДатаРождения" Тогда
	СтрокаИменСвойствПоиска = "Наименование, ДатаРождения, ЭтоГруппа";	
Иначе
	СтрокаИменСвойствПоиска = "Наименование, ДатаРождения, ЭтоГруппа";
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ФизическиеЛица</Источник>
				<Приемник>СправочникСсылка.ФизическиеЛица</Приемник>
				<НастройкаВариантовПоискаОбъектов>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>Наименование</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по наименованию</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>НаименованиеДатаРождения</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование + ДатаРождения</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по наименованию и дате рождения</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
				</НастройкаВариантовПоискаОбъектов>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>ДатаРождения --&gt; ДатаРождения</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ДатаРождения" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаРождения" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ФизическиеЛица"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ФизическиеЛица"/>
						<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>7</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ХранилищеДополнительнойИнформации</Код>
				<Наименование>СправочникСсылка.ХранилищеДополнительнойИнформации --&gt; СправочникСсылка.ХранилищеДополнительнойИнфор</Наименование>
				<Порядок>1350</Порядок>
				<ПослеЗагрузки>ТипОбъекта = ТипЗнч(Объект.Объект);

Если ТипОбъекта &lt;&gt; Параметры.ТипСправочникСсылкаНоменклатура 
   И ТипОбъекта &lt;&gt; Параметры.ТипСправочникСсылкаКонтрагенты 
   И ТипОбъекта &lt;&gt; Параметры.ТипСправочникСсылкаОрганизации 
   И ТипОбъекта &lt;&gt; Параметры.ТипСправочникСсылкаСклады 
   И ТипОбъекта &lt;&gt; Параметры.ТипСправочникСсылкаФизическиеЛица Тогда

	Отказ = Истина;
	

ИначеЕсли ТипОбъекта = Параметры.ТипСправочникСсылкаКонтрагенты Тогда
	
	Если Параметры.УзелДляОбменаОбъект.мЕстьФильтрПоКонтрагентам И НЕ Параметры.УзелДляОбменаОбъект.ЭлементВходитВТаблицу(Объект.Объект, "Контрагенты", "Контрагент") Тогда
		
		Отказ = Истина;	

	КонецЕсли;	
	
ИначеЕсли ТипОбъекта = Параметры.ТипСправочникСсылкаСклады Тогда
	
	КодМагазинаИзАлгоритма = "";
	
	СкладДляЗапроса = Объект.Объект;
	Выполнить(Алгоритмы.ПолучитьКодМагазинаПоСкладу);
	
	Если Не ПустаяСтрока(КодМагазинаИзАлгоритма) Тогда //этот склад переходит не в склад, а в магазин
		
		Отказ = Истина;
		
	 ИначеЕсли Параметры.УзелДляОбменаОбъект.мЕстьФильтрПоСкладам И НЕ Параметры.УзелДляОбменаОбъект.ЭлементВходитВТаблицу(Объект.Объект, "Склады", "Склад") Тогда
		
		Отказ = Истина;			
		
	КонецЕсли;

КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ХранилищеДополнительнойИнформации</Источник>
				<Приемник>СправочникСсылка.ХранилищеДополнительнойИнформации</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>ВидДанных --&gt; ВидДанных</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ВидДанных" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДополнительнойИнформацииОбъектов"/>
						<Приемник Имя="ВидДанных" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДополнительнойИнформацииОбъектов"/>
						<КодПравилаКонвертации>ВидыДополнительнойИнформацииОбъектов              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ИмяФайла --&gt; ИмяФайла</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ИмяФайла" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИмяФайла" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Объект --&gt; Объект</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Объект" Вид="Реквизит"/>
						<Приемник Имя="Объект" Вид="Реквизит"/>
						<ПередВыгрузкой>//ТипОбъекта = ТипЗнч(Источник.Объект);
//							
//Если ТипОбъекта = Тип("СправочникСсылка.Номенклатура") Тогда
//	ИмяПКО = "Номенклатура";
//КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ТекстФайла --&gt; ТекстФайла</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ТекстФайла" Вид="Реквизит" Тип="ХранилищеЗначения"/>
						<Приемник Имя="ТекстФайла" Вид="Реквизит" Тип="ХранилищеЗначения"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Хранилище --&gt; Хранилище</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Хранилище" Вид="Реквизит" Тип="ХранилищеЗначения"/>
						<Приемник Имя="Хранилище" Вид="Реквизит" Тип="ХранилищеЗначения"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>100</Порядок>
			<Правило>
				<Код>ВнутреннееПеремещениеНаличныхДенежныхСредств</Код>
				<Наименование>ДокументСсылка.ВнутреннееПеремещениеНаличныхДенежныхСредств --&gt; ДокументСсылка.ВнутреннееПеремещение</Наименование>
				<Порядок>50</Порядок>
				<ПослеЗагрузки>

//нужные переменные
МетаданныеДокумента  = Объект.Метаданные();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();

/// ШАПКА 

//заполним кассу отправитель
ИмяПараметра = "КодМагазинаОтправителя";
ИскомаяКасса = Справочники.Кассы.ПустаяСсылка();
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);
Если Не ИскомаяКасса.Пустая() Тогда
	Объект.Касса = ИскомаяКасса;
КонецЕсли;

//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);

//заполним кассу получатель
ИмяПараметра = "КодМагазинаПолучателя";
ИскомаяКасса = Справочники.Кассы.ПустаяСсылка();
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);
Если Не ИскомаяКасса.Пустая() Тогда
	Объект.КассаПолучатель = ИскомаяКасса;
КонецЕсли;

//валюта документа
Объект.ВалютаДокумента = Объект.Касса.ВалютаДенежныхСредств;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ВнутреннееПеремещениеНаличныхДенежныхСредств</Источник>
				<Приемник>ДокументСсылка.ВнутреннееПеремещениеНаличныхДенежныхСредств</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Касса --&gt; Касса</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Касса" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<Приемник Имя="Касса" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<КодПравилаКонвертации>Кассы                                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Касса --&gt; Касса</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазинаОтправителя</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если Источник.Касса.ТипКассы &lt;&gt; Перечисления.ТипыКасс.КассаЦентральногоОфиса Тогда
	Значение = Источник.Касса.Магазин.Код;
Иначе
	Значение = "";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>КассаПолучатель --&gt; КассаПолучатель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="КассаПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<Приемник Имя="КассаПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<КодПравилаКонвертации>Кассы                                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Касса --&gt; Касса</Наименование>
						<Порядок>200</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазинаПолучателя</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если Источник.КассаПолучатель.ТипКассы &lt;&gt; Перечисления.ТипыКасс.КассаЦентральногоОфиса Тогда
	Значение = Источник.КассаПолучатель.Магазин.Код;
Иначе
	Значение = "";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Оплачено --&gt; Оплачено</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Оплачено" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="Оплачено" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование> --&gt; ОрганизацияПолучатель</Наименование>
						<Порядок>600</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ОрганизацияПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.КассаПолучатель.Организация) Тогда
	Значение = Источник.КассаПолучатель.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование> --&gt; ОрганизацияОтправитель</Наименование>
						<Порядок>650</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ОрганизацияОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Касса.Организация) Тогда
	Значение = Источник.Касса.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВнутреннийЗаказ</Код>
				<Наименование>ДокументСсылка.ВнутреннийЗаказ --&gt; ДокументСсылка.ВнутреннийЗаказ</Наименование>
				<Порядок>100</Порядок>
				<ПослеЗагрузки>

//нужные переменные
МетаданныеДокумента  = Объект.Метаданные();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();
ИскомыйСклад         = Справочники.Склады.ПустаяСсылка();
ИскомаяОрганизация   = Справочники.Организации.ПустаяСсылка();

/// ШАПКА 

//получим нужные поля по коду магазина
ИмяПараметра = "КодМагазина";
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);

//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);

Если Не ЗначениеЗаполнено(Объект.ВидЗаказа) Тогда
	Объект.ВидЗаказа = Перечисления.ВидыВнутреннегоЗаказа.НаСклад;
КонецЕсли;

//заполним склад
Если Не ИскомыйСклад.Пустая() Тогда
	Объект.Заказчик = ИскомыйСклад;
КонецЕсли;

Если Не ИскомаяОрганизация.Пустая() И Не ЗначениеЗаполнено(Объект.Организация) Тогда
	Объект.Организация = ИскомаяОрганизация;
КонецЕсли;

Если Не ИскомоеПодразделение.Пустая() И Не ЗначениеЗаполнено(Объект.Подразделение) Тогда
	Объект.Подразделение = ИскомоеПодразделение;
КонецЕсли;

/// ТАБЛИЧНАЯ ЧАСТЬ

//работа с табличными частями
ИмяТабличнойЧасти = "Товары";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ВнутреннийЗаказ</Источник>
				<Приемник>ДокументСсылка.ВнутреннийЗаказ</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДатаОтгрузки --&gt; ДатаОтгрузки</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ДатаОтгрузки" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаОтгрузки" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>500</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазина</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.Магазин.Код;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>9</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>11</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>350</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВозвратТоваровОтПокупателя</Код>
				<Наименование>ДокументСсылка.ВозвратТоваровОтПокупателя --&gt; ДокументСсылка.ВозвратТоваровОтПокупателя</Наименование>
				<Порядок>150</Порядок>
				<ПослеЗагрузки>
//нужные переменные
МетаданныеДокумента  = Объект.Метаданные();
ИскомыйСклад         = Справочники.Склады.ПустаяСсылка();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();

/// ШАПКА 

//получим нужные поля по коду магазина
ИмяПараметра = "КодМагазина";
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);

//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);

//заполним поле договор
ДокументОбъект                  = Объект;
ВалютаРегламентированногоУчета  = Константы.ВалютаРегламентированногоУчета.Получить();
ВидДоговора                     = Перечисления.ВидыДоговоровКонтрагентов.СПокупателем;
КонтрагентПараметр              = Объект.Контрагент;
ОрганизацияПараметр             = Объект.Организация;
ДатаПараметр                    = Объект.Дата;
ДоговорВТабличнойЧасти          = Ложь;
Выполнить(Алгоритмы.УстановитьДоговорПоКонтрагенту);

//наличие\отсутствиие ордерной схемы
Если ПараметрыОбъекта["ИспользованиеОрдернойСхемы"] Тогда
	
	УИд = ПараметрыОбъекта["СсылкаНаПриходныйОрдерНаТовары"];
	Если НЕ УИд = Неопределено Тогда
		СсылкаНаПриходныйОрдерНаТовары = Документы.ПриходныйОрдерНаТовары.ПолучитьСсылку(Новый УникальныйИдентификатор(УИд));
		Если СсылкаНаПриходныйОрдерНаТовары.ПолучитьОбъект() &lt;&gt; Неопределено Тогда
			
			Объект.ВидПоступления = Перечисления.ВидыПоступленияТоваров.ПоОрдеру;
			
			Объект.СкладОрдер = СсылкаНаПриходныйОрдерНаТовары;
			
			//во всех строках расставляем ПО
			Для Каждого СтрокаТовары Из Объект.Товары Цикл
				СтрокаТовары.ПриходныйОрдер = СсылкаНаПриходныйОрдерНаТовары;
			КонецЦикла;
		Иначе
		Объект.ВидПоступления = Перечисления.ВидыПоступленияТоваров.НаСклад;	
		КонецЕсли;
	Иначе
	Объект.ВидПоступления = Перечисления.ВидыПоступленияТоваров.НаСклад;	
	КонецЕсли;
Иначе
	Объект.ВидПоступления = Перечисления.ВидыПоступленияТоваров.НаСклад;
	
	//заполним поле склад
	Если Не ИскомыйСклад.Пустая() Тогда
		Объект.СкладОрдер = ИскомыйСклад;
	КонецЕсли;

КонецЕсли;

/// ТАБЛИЧНАЯ ЧАСТЬ

// Обработаем стандартно табличную часть докумета
ИмяТабличнойЧасти = "Товары";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);

ИмяТабличнойЧасти = "СоставНабора";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);

//заполним склад в табличной части тем же складом, который указан в шапке
Для Каждого СтрокаДокумента Из Объект.Товары Цикл
	СтрокаДокумента.Склад = Объект.СкладОрдер;
КонецЦикла;



Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ВозвратТоваровОтПокупателя</Источник>
				<Приемник>ДокументСсылка.ВозвратТоваровОтПокупателя</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДисконтнаяКарта --&gt; ДисконтнаяКарта</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ДисконтнаяКарта" Вид="Реквизит" Тип="СправочникСсылка.ИнформационныеКарты"/>
						<Приемник Имя="ДисконтнаяКарта" Вид="Реквизит" Тип="СправочникСсылка.ИнформационныеКарты"/>
						<КодПравилаКонвертации>ИнформационныеКарты                               </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>СуммаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>30</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>550</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>31</Код>
						<Наименование>Склад --&gt; СкладОрдер</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="СкладОрдер" Вид="Реквизит"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад) И Источник.Склад.ТипСклада &lt;&gt; Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>32</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>700</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазина</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Значение = "";	
Иначе
	Значение = Источник.Магазин.Код;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>34</Код>
						<Наименование>СоставНабора --&gt; СоставНабора</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="СоставНабора" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="СоставНабора" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>37</Код>
							<Наименование>КлючСтроки --&gt; КлючСтроки</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>38</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>39</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>40</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>46</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>50</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>51</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>450</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Группа>
						<Код>17</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>20</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>45</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>ПроцентСкидкиНаценки --&gt; ПроцентСкидкиНаценки</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ПроцентСкидкиНаценки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ПроцентСкидкиНаценки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>53</Код>
							<Наименование> --&gt; ПроцентАвтоматическихСкидок</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПроцентАвтоматическихСкидок" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ОбъектКоллекции.Количество = 0 ИЛИ ОбъектКоллекции.Цена = 0 Тогда
	Значение = 0
Иначе
	Значение = Окр(100*(ОбъектКоллекции.Количество * ОбъектКоллекции.Цена - ОбъектКоллекции.Сумма) / (ОбъектКоллекции.Количество * ОбъектКоллекции.Цена) - ОбъектКоллекции.ПроцентСкидкиНаценки,2,1)
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>29</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>33</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>43</Код>
							<Наименование>КлючСтроки --&gt; КлючСтроки</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>44</Код>
							<Наименование>ДокументПродажи --&gt; ДокументПартии</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="ДокументПродажи" Вид="Реквизит"/>
							<Приемник Имя="ДокументПартии" Вид="Реквизит"/>
							<ПередВыгрузкой>ТипДокументаПродажи = ТипЗнч(ОбъектКоллекции.ДокументПродажи);

Если ТипДокументаПродажи = Тип("ДокументСсылка.РеализацияТоваров") Тогда
	ИмяПКО = "РеализацияТоваровУслуг";
ИначеЕсли ТипДокументаПродажи = Тип("ДокументСсылка.ОтчетОРозничныхПродажах") Тогда
	ИмяПКО = "ОтчетОРозничныхПродажах";
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>49</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>700</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>47</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>850</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ИспользованиеОрдернойСхемы</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.ПоступлениеПоОрдернойСхеме;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>48</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>900</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>СсылкаНаПриходныйОрдерНаТовары</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>//если документ оформлен по ордерной схеме и еще нет ПО по этому документу - документ вообще не отправляем
Если Источник.ПоступлениеПоОрдернойСхеме Тогда
	
	Запрос = Новый Запрос("
	|ВЫБРАТЬ
	|	ПриходныйОрдерНаТовары.Ссылка
	|ИЗ
	|	Документ.ПриходныйОрдерНаТовары КАК ПриходныйОрдерНаТовары
	|ГДЕ
	|	ПриходныйОрдерНаТовары.ДокументОснование = &amp;ДокументОснование
	|	И ПриходныйОрдерНаТовары.Проведен");
	
	Запрос.УстановитьПараметр("ДокументОснование", Источник.Ссылка);
	
	РезультатЗапроса = Запрос.Выполнить();
	
	Если РезультатЗапроса.Пустой() Тогда
		Отказ = Истина;
	Иначе
		Выборка = РезультатЗапроса.Выбрать();
		Выборка.Следующий();
		Значение = Строка(Выборка.Ссылка.УникальныйИдентификатор());
	КонецЕсли;
	
Иначе
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>52</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>950</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>
ВозможностьРедактирования = Истина;

Для Каждого СтрокаТЧ ИЗ Источник.Товары Цикл
	Если ЗначениеЗаполнено(СтрокаТЧ.Продавец) ИЛИ ЗначениеЗаполнено(СтрокаТЧ.ЧекККМ) Тогда
		ВозможностьРедактирования = Ложь;
		Прервать;
	КонецЕсли;
КонецЦикла;

Если ВозможностьРедактирования Тогда
	Значение = Истина;
Иначе
	Значение = Ложь;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВозвратТоваровПоставщику</Код>
				<Наименование>ДокументСсылка.ВозвратТоваровПоставщику --&gt; ДокументСсылка.ВозвратТоваровПоставщику</Наименование>
				<Порядок>200</Порядок>
				<ПослеЗагрузки>

//нужные переменные
МетаданныеДокумента  = Объект.Метаданные();
ИскомыйСклад         = Справочники.Склады.ПустаяСсылка();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();

/// ШАПКА 

//получим нужные поля по коду магазина
ИмяПараметра = "КодМагазина";
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);

//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);

//проверим, что контрагент - поставщик
Если ЗначениеЗаполнено(Объект.Контрагент) И Не Объект.Контрагент.Поставщик Тогда
	Контрагент = Объект.Контрагент.ПолучитьОбъект();
	Если Контрагент &lt;&gt; Неопределено Тогда
		Контрагент.Поставщик = Истина;
		Контрагент.Записать();
	КонецЕсли;
КонецЕсли;

//заполним поле договор
ДокументОбъект                  = Объект;
ВалютаРегламентированногоУчета  = Константы.ВалютаРегламентированногоУчета.Получить();
ВидДоговора                     = Перечисления.ВидыДоговоровКонтрагентов.СПоставщиком;
КонтрагентПараметр              = Объект.Контрагент;
ОрганизацияПараметр             = Объект.Организация;
ДатаПараметр                    = Объект.Дата;
ДоговорВТабличнойЧасти          = Ложь;
Выполнить(Алгоритмы.УстановитьДоговорПоКонтрагенту);

//вид поступления
Если ПараметрыОбъекта["ИспользованиеОрдернойСхемы"] Тогда
	
	Объект.ВидПередачи = Перечисления.ВидыПередачиТоваров.ПоОрдеру;
	
Иначе
	
	Объект.ВидПередачи = Перечисления.ВидыПередачиТоваров.СоСклада;
	
	//алгоритм по ордерной схеме..
КонецЕсли;

//заполним поле склад
Если Не ИскомыйСклад.Пустая() Тогда
	Объект.Склад = ИскомыйСклад;
КонецЕсли;

/// ТАБЛИЧНАЯ ЧАСТЬ

//заполним единицы измерения и, если нужно, номенклатуру (по характеристике)
ИмяТабличнойЧасти = "Товары";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);

//заполним склад в табличной части тем же складом, который указан в шапке
Для Каждого СтрокаДокумента Из Объект.Товары Цикл
	СтрокаДокумента.Склад = Объект.Склад;
КонецЦикла;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ВозвратТоваровПоставщику</Источник>
				<Приемник>ДокументСсылка.ВозвратТоваровПоставщику</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>400</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад) И Источник.Склад.ТипСклада &lt;&gt; Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>500</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазина</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Значение = "";	
Иначе
	Значение = Источник.Магазин.Код;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>СуммаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>12</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>13</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>500</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>ДокументЗакупки --&gt; ДокументПоступления</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="ДокументЗакупки" Вид="Реквизит" Тип="ДокументСсылка.ПоступлениеТоваров"/>
							<Приемник Имя="ДокументПоступления" Вид="Реквизит"/>
							<КодПравилаКонвертации>ПоступлениеТоваровУслуг                           </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>21</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>750</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ИспользованиеОрдернойСхемы</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.РеализацияПоОрдернойСхеме;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ИнвентаризацияТоваровНаСкладе</Код>
				<Наименование>ДокументСсылка.ИнвентаризацияТоваров --&gt; ДокументСсылка.ИнвентаризацияТоваровНаСкладе</Наименование>
				<Порядок>250</Порядок>
				<ПослеЗагрузки>

//нужные переменные
МетаданныеДокумента  = Объект.Метаданные();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();


/// ШАПКА 

//получим нужные поля по коду магазина
ИмяПараметра = "КодМагазина";
ИскомыйСклад = Справочники.Склады.ПустаяСсылка();

//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);

//заполним склад
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);
Если Не ИскомыйСклад.Пустая() Тогда
	Объект.Склад = ИскомыйСклад;
КонецЕсли;


/// ТАБЛИЧНАЯ ЧАСТЬ

//работа с табличными частями
ИмяТабличнойЧасти = "Товары";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ИнвентаризацияТоваров</Источник>
				<Приемник>ДокументСсылка.ИнвентаризацияТоваровНаСкладе</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>300</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад) И Источник.Склад.ТипСклада &lt;&gt; Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>400</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазина</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Значение = "";	
Иначе
	Значение = Источник.Магазин.Код;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>7</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>9</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>КоличествоУчет --&gt; КоличествоУчет</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="КоличествоУчет" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КоличествоУчет" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>СуммаУчет --&gt; СуммаУчет</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СуммаУчет" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаУчет" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>Сумма --&gt; СуммаРегл</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаРегл" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>550</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КомплектацияНоменклатуры</Код>
				<Наименование>ДокументСсылка.КомплектацияНоменклатуры --&gt; ДокументСсылка.КомплектацияНоменклатуры</Наименование>
				<Порядок>300</Порядок>
				<ПослеЗагрузки>

МетаданныеДокумента  = Объект.Метаданные();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();
ИскомыйСклад         = Справочники.Склады.ПустаяСсылка();


/// ШАПКА 

//получим нужные поля по коду магазина
ИмяПараметра = "КодМагазина";
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);

//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);


//заполним вид поступления и склад
Если Не ИскомыйСклад.Пустая() Тогда
	Объект.Склад = ИскомыйСклад;
КонецЕсли;

Если Не ЗначениеЗаполнено(Объект.НДСвСтоимостиТоваров) Тогда
	Объект.НДСвСтоимостиТоваров = Перечисления.ДействиеНДСВСтоимостиТоваров.НеИзменять;
КонецЕсли;

// Получим наименование характеристики товара
НаименованиеХарактеристикиНоменклатуры = ПараметрыОбъекта["НаименованиеХарактеристикиНоменклатуры"];

// Производим поиск характеристики товара
Если НРег(СокрЛП(НаименованиеХарактеристикиНоменклатуры)) &lt;&gt; "не назначена" Тогда
	
	Если НЕ (ЗначениеЗаполнено(Объект.ХарактеристикаНоменклатуры) ИЛИ ПустаяСтрока(НаименованиеХарактеристикиНоменклатуры)) Тогда
		
		Объект.ХарактеристикаНоменклатуры = Справочники.ХарактеристикиНоменклатуры.НайтиПоНаименованию(ПараметрыОбъекта["НаименованиеХарактеристикиНоменклатуры"], Истина,, Объект.Номенклатура);
		
		// Если не удалось найти - создаем новый элемент
		Если НЕ ЗначениеЗаполнено(Объект.ХарактеристикаНоменклатуры) И ЗначениеЗаполнено(Объект.Номенклатура) Тогда
			
			ХарактеристикаНоменклатурыОбъект = Справочники.ХарактеристикиНоменклатуры.СоздатьЭлемент();
			ХарактеристикаНоменклатурыОбъект.Владелец     = Объект.Номенклатура;
			ХарактеристикаНоменклатурыОбъект.Наименование = НаименованиеХарактеристикиНоменклатуры;
			ХарактеристикаНоменклатурыОбъект.ОбменДанными.Загрузка = Истина;
			ХарактеристикаНоменклатурыОбъект.Записать();
			Объект.ХарактеристикаНоменклатуры = ХарактеристикаНоменклатурыОбъект.Ссылка;
			
		КонецЕсли;
		
	КонецЕсли;
	
КонецЕсли;

/// ТАБЛИЧНАЯ ЧАСТЬ

//работа с табличными частями
ИмяТабличнойЧасти = "Комплектующие";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.КомплектацияНоменклатуры</Источник>
				<Приемник>ДокументСсылка.КомплектацияНоменклатуры</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>ВидОперации --&gt; ВидОперации</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийКомплектацияНоменклатуры"/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийКомплектацияНоменклатуры"/>
						<КодПравилаКонвертации>ВидыОперацийКомплектацияНоменклатуры              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Количество --&gt; Количество</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
						<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
						<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>650</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование> --&gt; Склад</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад) И Источник.Склад.ТипСклада &lt;&gt; Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>24</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>750</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазина</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Значение = "";	
Иначе
	Значение = Источник.Магазин.Код;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>13</Код>
						<Наименование>Комплектующие --&gt; Комплектующие</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="Комплектующие" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Комплектующие" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>14</Код>
							<Наименование>ДоляСтоимости --&gt; ДоляСтоимости</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ДоляСтоимости" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ДоляСтоимости" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>350</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>25</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>850</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ОплатаОтПокупателяПлатежнойКартой</Код>
				<Наименование>ДокументСсылка.ОплатаОтПокупателяПлатежнойКартой --&gt; ДокументСсылка.ОплатаОтПокупателяПлатежнойКарто</Наименование>
				<Порядок>350</Порядок>
				<ПослеЗагрузки>
//нужные переменные
МетаданныеДокумента  = Объект.Метаданные();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();

/// ШАПКА 

//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);

//проверим, что контрагент - покупатель
Если Не Объект.Контрагент.Покупатель Тогда
	Контрагент = Объект.Контрагент.ПолучитьОбъект();
	Если Контрагент &lt;&gt; Неопределено Тогда
		Контрагент.Покупатель = Истина;
		Контрагент.Записать();
	КонецЕсли;
КонецЕсли;

//заполним поле договор
ВалютаРегламентированногоУчета  = Константы.ВалютаРегламентированногоУчета.Получить();
Объект.ВалютаДокумента          = ВалютаРегламентированногоУчета;


//определим вид договора в табличной части и заодно статью движения денежных средств
ВидДоговора = Неопределено;
СтатьяДвиженияДенежныхСредств = Неопределено;
	
ВидДоговора                   = Перечисления.ВидыДоговоровКонтрагентов.СПокупателем;	

КонтрагентПараметр     = Объект.Контрагент;
ОрганизацияПараметр    = Объект.Организация;
ДатаПараметр           = Объект.Дата;
ДоговорВТабличнойЧасти = Истина;
ИмяТабличнойЧасти      = "РасшифровкаПлатежа";

Для Каждого СтрокаРасшифровкиПлатежа Из Объект.РасшифровкаПлатежа Цикл
	
	ДокументОбъект = СтрокаРасшифровкиПлатежа;
	Выполнить(Алгоритмы.УстановитьДоговорПоКонтрагенту);
	
	//расчитаем сумму взаиморасчетов
	Если ЗначениеЗаполнено(СтрокаРасшифровкиПлатежа.ДоговорКонтрагента) Тогда
		
		Если НЕ СтрокаРасшифровкиПлатежа.ДоговорКонтрагента.РасчетыВУсловныхЕдиницах
			И СтрокаРасшифровкиПлатежа.ДоговорКонтрагента.ВалютаВзаиморасчетов = Объект.ВалютаДокумента Тогда
			
			СтрокаРасшифровкиПлатежа.СуммаВзаиморасчетов = СтрокаРасшифровкиПлатежа.СуммаПлатежа;
			
		Иначе
		
			СтрокаРасшифровкиПлатежа.СуммаВзаиморасчетов = СтрокаРасшифровкиПлатежа.СуммаПлатежа *  СтрокаРасшифровкиПлатежа.КратностьВзаиморасчетов
						/ СтрокаРасшифровкиПлатежа.КурсВзаиморасчетов;
						
		КонецЕсли;
		
	КонецЕсли;			
	
	//установим статью движения денежных средств
	СтрокаРасшифровкиПлатежа.СтатьяДвиженияДенежныхСредств = СтатьяДвиженияДенежныхСредств;	
КонецЦикла;


Объект.ДоговорВзаиморасчетовЭквайрера = Объект.ДоговорЭквайринга.ДоговорВзаиморасчетов;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ОплатаОтПокупателяПлатежнойКартой</Источник>
				<Приемник>ДокументСсылка.ОплатаОтПокупателяПлатежнойКартой</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>ВидОперации --&gt; ВидОперации</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийОплатаОтПокупателяПлатежнойКартой"/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийОплатаОтПокупателяПлатежнойКартой"/>
						<КодПравилаКонвертации>ВидыОперацийОплатаОтПокупателяПлатежнойКартой     </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ВидОплаты --&gt; ВидОплаты</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
						<Приемник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
						<КодПравилаКонвертации>ВидыОплатЧекаККМ                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ДоговорЭквайринга --&gt; ДоговорЭквайринга</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ДоговорЭквайринга" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыЭквайринга"/>
						<Приемник Имя="ДоговорЭквайринга" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыЭквайринга"/>
						<КодПравилаКонвертации>ДоговорыЭквайринга                                </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ДокументОснование --&gt; ДокументОснование</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ДокументОснование" Вид="Реквизит"/>
						<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>НомерЧекаККМ --&gt; НомерЧекаККМ</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="НомерЧекаККМ" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="НомерЧекаККМ" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>ПроцентТорговойУступки --&gt; ПроцентТорговойУступки</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="ПроцентТорговойУступки" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="ПроцентТорговойУступки" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>СуммаТорговойУступки --&gt; СуммаТорговойУступки</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="СуммаТорговойУступки" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаТорговойУступки" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>Эквайрер --&gt; Эквайрер</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="Эквайрер" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Эквайрер" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Группа>
						<Код>18</Код>
						<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>19</Код>
							<Наименование>ДокументРасчетовСКонтрагентом --&gt; ДокументРасчетовСКонтрагентом</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ДокументРасчетовСКонтрагентом" Вид="Реквизит"/>
							<Приемник Имя="ДокументРасчетовСКонтрагентом" Вид="Реквизит"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>СуммаПлатежа --&gt; СуммаПлатежа</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ОприходованиеТоваров</Код>
				<Наименование>ДокументСсылка.ОприходованиеТоваров --&gt; ДокументСсылка.ОприходованиеТоваров</Наименование>
				<Порядок>400</Порядок>
				<ПослеЗагрузки>

//нужные переменные
МетаданныеДокумента  = Объект.Метаданные();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();
ИскомыйСклад         = Справочники.Склады.ПустаяСсылка();

/// ШАПКА 

//получим нужные поля по коду магазина
ИмяПараметра = "КодМагазина";
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);

//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);

//заполним склад
Если Не ИскомыйСклад.Пустая() Тогда
	Объект.Склад = ИскомыйСклад;
КонецЕсли;


/// ТАБЛИЧНАЯ ЧАСТЬ

//работа с табличными частями
ИмяТабличнойЧасти = "Товары";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ОприходованиеТоваров</Источник>
				<Приемник>ДокументСсылка.ОприходованиеТоваров</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Основание --&gt; Основание</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ДокументОснование" Вид="Реквизит" Тип="ДокументСсылка.ИнвентаризацияТоваров"/>
						<Приемник Имя="ИнвентаризацияТоваровНаСкладе" Вид="Реквизит" Тип="ДокументСсылка.ИнвентаризацияТоваровНаСкладе"/>
						<КодПравилаКонвертации>ИнвентаризацияТоваровНаСкладе                     </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>500</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование> --&gt; Склад</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад) И Источник.Склад.ТипСклада &lt;&gt; Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>600</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазина</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Значение = "";	
Иначе
	Значение = Источник.Магазин.Код;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>10</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>12</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаРегл" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>Сумма --&gt; СуммаРегл</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>450</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ОтчетОРозничныхПродажах</Код>
				<Наименование>ДокументСсылка.ОтчетОРозничныхПродажах --&gt; ДокументСсылка.ОтчетОРозничныхПродажах</Наименование>
				<Порядок>500</Порядок>
				<ПослеЗагрузки>

//нужные переменные
МетаданныеДокумента  = Объект.Метаданные();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();
ИскомаяКасса         = Справочники.Кассы.ПустаяСсылка();
ИскомыйСклад         = Справочники.Склады.ПустаяСсылка();
ИскомаяКассаККМ      = Справочники.КассыККМ.ПустаяСсылка();
мВалютаРегламентированногоУчета = Константы.ВалютаРегламентированногоУчета.Получить();

/// ШАПКА 

Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);

//получим нужные поля по коду магазина
ИмяПараметра = "КодМагазина";
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);

//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);

Объект.ВидОперации = Перечисления.ВидыОперацийОтчетОРозничныхПродажах.ОтчетККМОПродажах;

//заполним склад и кассуККМ
Если Не ИскомыйСклад.Пустая() Тогда
	Объект.Склад    = ИскомыйСклад;
	Если НЕ ЗначениеЗаполнено(Объект.КассаККМ) тогда 
		Объект.КассаККМ = ИскомаяКассаККМ;
	КонецЕсли;
КонецЕсли;

Если Не ЗначениеЗаполнено(Объект.ДоговорВзаиморасчетовЭквайрера) Тогда
	Объект.ДоговорВзаиморасчетовЭквайрера = Объект.ДоговорЭквайринга.ДоговорВзаиморасчетов;
КонецЕсли;

Если ТипЗнч(ПараметрыОбъекта["ОплатаПодарочнымиСертификатами"]) = Тип("Число") Тогда
	
	СуммаОплатыПодарочнымиСертификатами  = ПараметрыОбъекта["ОплатаПодарочнымиСертификатами"];
	
Иначе 
	
	СуммаОплатыПодарочнымиСертификатами = 0;
	
КонецЕсли;	


Объект.ПрочаяБезналичнаяОплата = СуммаОплатыПодарочнымиСертификатами;		
	


// Установка Склада для табличных частей
Для каждого СтрокаТЧ Из Объект.Товары Цикл
	СтрокаТЧ.Склад = ИскомыйСклад;
КонецЦикла;
Для каждого СтрокаТЧ Из Объект.СоставНабора Цикл
	СтрокаТЧ.Склад = ИскомыйСклад;
КонецЦикла;


/// ТАБЛИЧНАЯ ЧАСТЬ

//работа с табличными частями
ИмяТабличнойЧасти = "Товары";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);

ИмяТабличнойЧасти = "СоставНабора";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);

//заполним склад в табличной части тем же складом, который указан в шапке
Для Каждого СтрокаДокумента Из Объект.Товары Цикл
	СтрокаДокумента.Склад = Объект.Склад;
КонецЦикла;

//по банковским кредитам
Для Каждого СтрокаДокумента Из Объект.ОплатаБанковскимиКредитами Цикл
	СтрокаДокумента.ДоговорВзаиморасчетовБанкаКредитора = СтрокаДокумента.ВидОплаты.ДоговорВзаиморасчетовБанкаКредитора;
КонецЦикла;

// По дисконтным картам
ТаблицаПродажДК = Объект.ПродажиПоДисконтнымКартам.Выгрузить();
ТаблицаПродажДК.Свернуть("ДисконтнаяКарта, ВладелецДисконтнойКарты", "Сумма");
Объект.ПродажиПоДисконтнымКартам.Загрузить(ТаблицаПродажДК);

////////////////////////////////////////////////////////////////////////////////////////////////////////

//Создание документа "Приходный Кассовый Ордер


Если ТипЗнч(ПараметрыОбъекта["ОплатаПодарочнымиСертификатами"]) = Тип("Число") Тогда
	
	СуммаНаличнымиПоДокументу = Число(Объект.Товары.Итог("Сумма"))+?(Объект.СуммаВключаетНДС, 0, Объект.Товары.Итог("СуммаНДС")) - Объект.ОплатаПлатежнымиКартами.Итог("Сумма") - Объект.ОплатаБанковскимиКредитами.Итог("Сумма") - Объект.ПрочаяБезналичнаяОплата;
		
Иначе
	
	СуммаНаличнымиПоДокументу = Число(Объект.Товары.Итог("Сумма"))+?(Объект.СуммаВключаетНДС, 0, Объект.Товары.Итог("СуммаНДС")) - Объект.ОплатаПлатежнымиКартами.Итог("Сумма") - Объект.ОплатаБанковскимиКредитами.Итог("Сумма");
	
КонецЕсли;

ОтчетОРозничныхПродажахУИД = Новый УникальныйИдентификатор(ПараметрыОбъекта["УникальныйИдентификаторДокумента"]);

СсылкаНаДокументПКО        = Документы.ПриходныйКассовыйОрдер.ПолучитьСсылку(ОтчетОРозничныхПродажахУИД);

Если Не СуммаНаличнымиПоДокументу = 0 Тогда
	
	Если Объект.Ссылка.Пустая() Или СсылкаНаДокументПКО.ПолучитьОбъект() = Неопределено Тогда
		НовыйПКО  = Истина;
		ОбъектПКО = Документы.ПриходныйКассовыйОрдер.СоздатьДокумент();
		ОбъектПКО.УстановитьСсылкуНового(СсылкаНаДокументПКО);
	Иначе
		НовыйПКО  = Ложь;
		ОбъектПКО = СсылкаНаДокументПКО.ПолучитьОбъект();
	КонецЕсли;
	
	
	МетаданныеДокументаПКО = ОбъектПКО.Метаданные();
	
	Касса = ИскомаяКасса;
	Если Касса.Пустая() Тогда 
		Касса = УправлениеПользователями.ПолучитьЗначениеПоУмолчанию(ПараметрыСеанса.ТекущийПользователь, "ОсновнаяКасса");
	КонецЕсли;
	
	
	
	ОбъектПКО.Дата                          = Объект.Дата;
	ОбъектПКО.Контрагент                    = Объект.КассаККМ; //деньги получаем из кассы ККМ, из документа ОтчетККМ
	ОбъектПКО.Организация                   = Объект.Организация;
	ОбъектПКО.ДокументОснование             = Объект.Ссылка;
	ОбъектПКО.ВидОперации                   = Перечисления.ВидыОперацийПКО.ПриходДенежныхСредствРозничнаяВыручка;
	ОбъектПКО.ВидПриемаРозничнойВыручки     = Перечисления.ВидПриемаРозничнойВыручки.ИзКассы;
	ОбъектПКО.ОтраженоВОперУчете            = Истина;
	ОбъектПКО.Оплачено                      = Истина;
	ОбъектПКО.ВалютаДокумента               = мВалютаРегламентированногоУчета;
	ОбъектПКО.СуммаДокумента                = СуммаНаличнымиПоДокументу;
	
	ОбъектПКО.ПометкаУдаления               = Объект.ПометкаУдаления;
	
	//флаги учета
	ОбъектПКО.ОтражатьВУправленческомУчете  = Истина;
	ОбщегоНазначения.ОбработатьПризнакОтраженияВреглУчете(ОбъектПКО, , "ОтражатьВНалоговомУчете", , Истина);
	
	//ответсвенный
	Если ОбъектПКО.Ответственный = Неопределено Или ОбъектПКО.Ответственный.Пустая() Тогда
		ОбъектПКО.Ответственный             = Объект.Ответственный;
	КонецЕсли;
	
	//касса
	Если ОбъектПКО.Касса = Неопределено Или ОбъектПКО.Касса.Пустая() Тогда
		ОбъектПКО.Касса                     = Касса; //деньги получаем в основную кассу магазина
	КонецЕсли;
	
	//номер
	Если НовыйПКО Тогда
		ОбъектПКО.УстановитьНовыйНомер(ОбъектПКО.Организация.Префикс);
	КонецЕсли;
	
	//подразделение
	Если Не ИскомоеПодразделение.Пустая() И Не ЗначениеЗаполнено(ОбъектПКО.Подразделение) Тогда
		ОбъектПКО.Подразделение = ИскомоеПодразделение;
	КонецЕсли;
	
	ОбъектПКО.РасшифровкаПлатежа.Очистить();
	СтрокаПлатеж                         = ОбъектПКО.РасшифровкаПлатежа.Добавить();
	СтрокаПлатеж.КурсВзаиморасчетов      = 1;
	СтрокаПлатеж.КурсВзаиморасчетов      = 1;
	СтрокаПлатеж.КратностьВзаиморасчетов = 1;
	СтрокаПлатеж.СуммаПлатежа            = СуммаНаличнымиПоДокументу;
	
	// определим как записывать документ
	Если Объект.Проведен Тогда
		
		РежимЗаписи = РежимЗаписиДокумента.Проведение;
		
	Иначе
		
		РежимЗаписи = РежимЗаписиДокумента.ОтменаПроведения;
		
	КонецЕсли;
	
	РежимПроведения = РежимПроведенияДокумента.Неоперативный;
	
	ТипОбъектаПКО = ТипЗнч(ОбъектПКО);
	
	
	Попытка
		
		// записываем документ - проверяем наличие коллизий
		НаличиеКоллизии = ПроверитьНаличиеКоллизийИзмененийДляОбъекта(ОбъектПКО, ТипОбъектаПКО,, ПриоритетОбъектаОбмена);
		
		// проведение убираем всегда...
		ОтменитьПроведениеОбъектаВИБ(ОбъектПКО, ТипОбъектаПКО);
		
		Если НЕ ОбъектНайденПоКлючуВПриемнике Тогда
			ЗарегистрироватьСоответствиеОбъектовДляОбмена(Объект.Ссылка, СвойстваПоиска);
		КонецЕсли;
		
		ДобавитьСсылкуВСписокЗагруженныхОбъектов(НППГлобальнойСсылки, НппСсылки, ОбъектПКО.Ссылка, ТипОбъекта);
		
		Если РежимЗаписи = РежимЗаписиДокумента.Проведение Тогда
			
			// если хотим провести документ помеченый на удаление, то пометку удаления снимаем ...
			//Если ОбъектПКО.ПометкаУдаления  Тогда
			//	
			//	ОбъектПКО.ПометкаУдаления = Ложь;
			//					
			//КонецЕсли;		
			
			НаборЗаписейРегистра = мМенеджерРегистраОтложенныеДвижения.СоздатьНаборЗаписей();
			НаборЗаписейРегистра.Отбор.УзелОбмена.Установить(УзелОбменаЗагрузкаДанных);
			НаборЗаписейРегистра.Отбор.Документ.Установить(ОбъектПКО.Ссылка);
			
			СтрокаНабора = НаборЗаписейРегистра.Добавить();
			СтрокаНабора.УзелОбмена    = УзелОбменаЗагрузкаДанных;
			СтрокаНабора.Документ      = ОбъектПКО.Ссылка;
			СтрокаНабора.ДатаДокумента = ОбъектПКО.Дата;
			
			ЗаписатьОбъектВИБ(НаборЗаписейРегистра, "РегистрСведенийНаборЗаписей.ОтложенныеДвиженияДокументов");
			
		КонецЕсли;
		
		//пока не работает механизм запрета в УТ, нет смысла
		//запрещаем объект для редактирования
		НоваяСтрока        = Параметры.ТаблицаОбъектовЗапрещенныхДляРедактирования.Добавить();
		НоваяСтрока.Ссылка = ОбъектПКО.Ссылка;
		
	Исключение
		
		СтрокаОписанияОшибки = ОписаниеОшибки();
		
		// не смогли выполнить необходимые действия для документа
		ЗаписатьДокументВБезопасномРежиме(ОбъектПКО, ТипОбъектаПКО);
		
		
		ЗП        = ПолучитьСтруктуруЗаписиПротокола(25, СтрокаОписанияОшибки);
		ЗП.ИмяПКО = ИмяПравила;
		
		Если Не ПустаяСтрока(Источник) Тогда
			
			ЗП.Источник = Источник;
			
		КонецЕсли;
		
		ЗП.ТипОбъекта = ТипОбъектаПКО;
		ЗП.Объект     = Строка(ОбъектПКО);
		ЗаписатьВПротоколВыполнения(25, ЗП);
		
		// объект не смогли в нормальном режиме записать - надо об этом сообщить
		ВызватьИсключение "Ошибка при записи документа: " + Строка(ОбъектПКО) + Символы.ПС + СтрокаОписанияОшибки;
		
	КонецПопытки;
	
Иначе
	
	Если СсылкаНаДокументПКО.ПолучитьОбъект() &lt;&gt; Неопределено Тогда
		
		ОбъектПКО = СсылкаНаДокументПКО.ПолучитьОбъект();
		ТипОбъектаПКО = ТипЗнч(ОбъектПКО);
		ОтменитьПроведениеОбъектаВИБ(ОбъектПКО, ТипОбъектаПКО);
		ОбъектПКО.ПометкаУдаления = Истина;
		ЗаписатьОбъектВИБ(ОбъектПКО,ТипОбъектаПКО);
		
	КонецЕсли;
	
	
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ОтчетОРозничныхПродажах</Источник>
				<Приемник>ДокументСсылка.ОтчетОРозничныхПродажах</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДоговорЭквайринга --&gt; ДоговорЭквайринга</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ДоговорЭквайринга" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыЭквайринга"/>
						<Приемник Имя="ДоговорЭквайринга" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыЭквайринга"/>
						<КодПравилаКонвертации>ДоговорыЭквайринга                                </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>СуммаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Эквайрер --&gt; Эквайрер</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Эквайрер" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Эквайрер" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>КассаККМ --&gt; КассаККМ</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="КассаККМ" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<Приемник Имя="КассаККМ" Вид="Реквизит" Тип="СправочникСсылка.КассыККМ"/>
						<КодПравилаКонвертации>КассаВКассуККМ                                    </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.КассаККМ.ТипКассы = Перечисления.ТипыКасс.КассаЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>44</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>650</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.КассаККМ.Организация) Тогда
	Значение = Источник.КассаККМ.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>45</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>700</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазина</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.Магазин.Код;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>13</Код>
						<Наименование>ОплатаБанковскимиКредитами --&gt; ОплатаБанковскимиКредитами</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="ОплатаБанковскимиКредитами" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ОплатаБанковскимиКредитами" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>14</Код>
							<Наименование>БанкКредитор --&gt; БанкКредитор</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="БанкКредитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="БанкКредитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>ВидОплаты --&gt; ВидОплаты</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
							<Приемник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
							<КодПравилаКонвертации>ВидыОплатЧекаККМ                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>ПроцентБанковскойКомиссии --&gt; ПроцентБанковскойКомиссии</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ПроцентБанковскойКомиссии" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ПроцентБанковскойКомиссии" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>СуммаБанковскойКомиссии --&gt; СуммаБанковскойКомиссии</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СуммаБанковскойКомиссии" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаБанковскойКомиссии" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Группа>
						<Код>19</Код>
						<Наименование>ОплатаПлатежнымиКартами --&gt; ОплатаПлатежнымиКартами</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="ОплатаПлатежнымиКартами" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ОплатаПлатежнымиКартами" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>20</Код>
							<Наименование>ВидОплаты --&gt; ВидОплаты</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
							<Приемник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
							<КодПравилаКонвертации>ВидыОплатЧекаККМ                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>ПроцентТорговойУступки --&gt; ПроцентТорговойУступки</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ПроцентТорговойУступки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ПроцентТорговойУступки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>СуммаТорговойУступки --&gt; СуммаТорговойУступки</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="СуммаТорговойУступки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаТорговойУступки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Группа>
						<Код>28</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>31</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>33</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>43</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование>ПроцентСкидкиНаценки --&gt; ПроцентСкидкиНаценки</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ПроцентСкидкиНаценки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ПроцентСкидкиНаценки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>65</Код>
							<Наименование> --&gt; ПроцентАвтоматическихСкидок</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПроцентАвтоматическихСкидок" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ОбъектКоллекции.Количество = 0 ИЛИ ОбъектКоллекции.Цена = 0 Тогда
	Значение = 0
Иначе
	Значение = Окр(100*(ОбъектКоллекции.Количество * ОбъектКоллекции.Цена - ОбъектКоллекции.Сумма) / (ОбъектКоллекции.Количество * ОбъектКоллекции.Цена) - ОбъектКоллекции.ПроцентСкидкиНаценки,2,1)
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>37</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>38</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>39</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>42</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>57</Код>
							<Наименование>КлючСтроки --&gt; КлючСтроки</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>58</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>650</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>46</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>950</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>УникальныйИдентификаторДокумента</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Строка(Источник.Ссылка.УникальныйИдентификатор());</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>47</Код>
						<Наименование>СоставНабора --&gt; СоставНабора</Наименование>
						<Порядок>1000</Порядок>
						<Источник Имя="СоставНабора" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="СоставНабора" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>54</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>49</Код>
							<Наименование>КлючСтроки --&gt; КлючСтроки</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>50</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>51</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>53</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>55</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>59</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>450</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>60</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>1050</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>
ВозможностьРедактирования = Истина;

Для Каждого СтрокаТЧ ИЗ Источник.Товары Цикл
	Если ЗначениеЗаполнено(СтрокаТЧ.Продавец) Тогда
		ВозможностьРедактирования = Ложь;
		Прервать;
	КонецЕсли;
КонецЦикла;

Для Каждого СтрокаТЧ Из Источник.ПродажиПоДисконтнымКартам Цикл
	Если ТипЗнч(СтрокаТЧ.ВладелецДисконтнойКарты) = Тип("СправочникСсылка.ФизическиеЛица") Тогда
		ВозможностьРедактирования = Ложь;
		Прервать;
	КонецЕсли;
КонецЦикла;

Если ВозможностьРедактирования Тогда
	Значение = Истина;
Иначе
	Значение = Ложь;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>61</Код>
						<Наименование>ПродажиПоДисконтнымКартам --&gt; ПродажиПоДисконтнымКартам</Наименование>
						<Порядок>1100</Порядок>
						<Источник Имя="ПродажиПоДисконтнымКартам" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ПродажиПоДисконтнымКартам" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>64</Код>
							<Наименование> --&gt; ВладелецДисконтнойКарты</Наименование>
							<Порядок>50</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВладелецДисконтнойКарты" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							<ПередВыгрузкой>ВладелецКарты  = ОбъектКоллекции.ДисконтнаяКарта.ВладелецКарты;

Если НЕ ЗначениеЗаполнено(ВладелецКарты) ИЛИ ТипЗнч(ВладелецКарты) &lt;&gt; Тип("СправочникСсылка.Контрагенты") Тогда
	
	// Владелец дисконтной карты - физическое лицо...
	Значение = Справочники.Контрагенты.ПустаяСсылка();
Иначе
	Значение = ВладелецКарты;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>62</Код>
							<Наименование>ДисконтнаяКарта --&gt; ДисконтнаяКарта</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ДисконтнаяКарта" Вид="Реквизит" Тип="СправочникСсылка.ИнформационныеКарты"/>
							<Приемник Имя="ДисконтнаяКарта" Вид="Реквизит" Тип="СправочникСсылка.ИнформационныеКарты"/>
							<КодПравилаКонвертации>ИнформационныеКарты                               </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>63</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>66</Код>
						<Наименование>ОплатаПодарочнымиСертификатами --&gt;</Наименование>
						<Порядок>1150</Порядок>
						<Источник Имя="ОплатаПодарочнымиСертификатами" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ОплатаПодарочнымиСертификатами</ИмяПараметраДляПередачи>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПеремещениеТоваров</Код>
				<Наименование>ДокументСсылка.ПеремещениеТоваров --&gt; ДокументСсылка.ПеремещениеТоваров</Наименование>
				<Порядок>550</Порядок>
				<ПослеЗагрузки>
//нужные переменные
МетаданныеДокумента  = Объект.Метаданные();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();

/// ШАПКА 

//заполним склад отправителя
ИмяПараметра = "КодМагазинаОтправителя";
ИскомыйСклад = Справочники.Склады.ПустаяСсылка();
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);
Если Не ИскомыйСклад.Пустая() Тогда
	Объект.СкладОтправитель = ИскомыйСклад;
КонецЕсли;

//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);

//заполним склад получателя
ИмяПараметра = "КодМагазинаПолучателя";
ИскомыйСклад = Справочники.Склады.ПустаяСсылка();
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);
Если Не ИскомыйСклад.Пустая() Тогда
	Объект.СкладПолучатель = ИскомыйСклад;
КонецЕсли;

Если ПараметрыОбъекта["ИспользованиеОрдернойСхемы"] Тогда
	Объект.ВидОперации = Перечисления.ВидыОперацийПеремещениеТоваров.ТоварыПродукцияПоОрдерам;	
Иначе
	Объект.ВидОперации = Перечисления.ВидыОперацийПеремещениеТоваров.ТоварыПродукция;
КонецЕсли;

Если Не ЗначениеЗаполнено(Объект.НДСвСтоимостиТоваров) Тогда
	Объект.НДСвСтоимостиТоваров = Перечисления.ДействиеНДСВСтоимостиТоваров.НеИзменять;
КонецЕсли;

/// ТАБЛИЧНАЯ ЧАСТЬ

//работа с табличными частями
ИмяТабличнойЧасти = "Товары";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПеремещениеТоваров</Источник>
				<Приемник>ДокументСсылка.ПеремещениеТоваров</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>350</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.СкладОтправитель.Организация) Тогда
	Значение = Источник.СкладОтправитель.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>СкладОтправитель --&gt; СкладОтправитель</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="СкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="СкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.СкладОтправитель) И Источник.СкладОтправитель.ТипСклада &lt;&gt; Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>СкладПолучатель --&gt; СкладПолучатель</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.СкладПолучатель) И Источник.СкладПолучатель.ТипСклада &lt;&gt; Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>500</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазинаПолучателя</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если Источник.СкладПолучатель.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Значение = "";	
Иначе
	Значение = Источник.МагазинПолучатель.Код;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>550</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазинаОтправителя</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если Источник.СкладОтправитель.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Значение = "";	
Иначе
	Значение = Источник.МагазинОтправитель.Код;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>600</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ИспользованиеОрдернойСхемы</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.РеализацияПоОрдернойСхеме Или Источник.ПоступлениеПоОрдернойСхеме;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>12</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>14</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>350</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПоступлениеТоваровУслуг</Код>
				<Наименование>ДокументСсылка.ПоступлениеТоваров --&gt; ДокументСсылка.ПоступлениеТоваровУслуг</Наименование>
				<Порядок>600</Порядок>
				<ПослеЗагрузки>

//нужные переменные
МетаданныеДокумента  = Объект.Метаданные();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();
ИскомыйСклад         = Справочники.Склады.ПустаяСсылка();
ИскомаяОрганизация   = Справочники.Организации.ПустаяСсылка();

/// ШАПКА 

//получим нужные поля по коду магазина
ИмяПараметра = "КодМагазина";
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);

//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);

//проверим, что контрагент - поставщик
Если ЗначениеЗаполнено(Объект.Контрагент) И Не Объект.Контрагент.Поставщик Тогда
	Контрагент = Объект.Контрагент.ПолучитьОбъект();
	Если Контрагент &lt;&gt; Неопределено Тогда
		Контрагент.Поставщик = Истина;
		Контрагент.Записать();
	КонецЕсли;
КонецЕсли;

//заполним поле договор
ДокументОбъект                  = Объект;
ВалютаРегламентированногоУчета  = Константы.ВалютаРегламентированногоУчета.Получить();
ВидДоговора                     = Перечисления.ВидыДоговоровКонтрагентов.СПоставщиком;
КонтрагентПараметр              = Объект.Контрагент;
ОрганизацияПараметр             = Объект.Организация;
ДоговорВТабличнойЧасти          = Ложь;
ДатаПараметр                    = Объект.Дата;
Выполнить(Алгоритмы.УстановитьДоговорПоКонтрагенту);

//наличие\отсутствиие ордерной схемы
Если ПараметрыОбъекта["ИспользованиеОрдернойСхемы"] Тогда
	
	ПровестиЗаписьНеЗаписанныхОбъектов();
	Объект.ВидПоступления = Перечисления.ВидыПоступленияТоваров.ПоОрдеру;
	
	УИд = ПараметрыОбъекта["СсылкаНаПриходныйОрдерНаТовары"];
	Если НЕ УИд = Неопределено Тогда
		СсылкаНаПриходныйОрдерНаТовары = Документы.ПриходныйОрдерНаТовары.ПолучитьСсылку(Новый УникальныйИдентификатор(УИд));
		
		Если СсылкаНаПриходныйОрдерНаТовары.ПолучитьОбъект() &lt;&gt; Неопределено Тогда
			
			Объект.СкладОрдер = СсылкаНаПриходныйОрдерНаТовары;
			
			////во всех строках расставляем ПО
			//Для Каждого СтрокаТовары Из Объект.Товары Цикл
			//	СтрокаТовары.ПриходныйОрдер = СсылкаНаПриходныйОрдерНаТовары;
			//КонецЦикла;
			
		Иначе
			
			Объект.СкладОрдер = Документы.ПриходныйОрдерНаТовары.ПустаяСсылка();
			
		КонецЕсли;
	КонецЕсли;
	
Иначе
	
	Объект.ВидПоступления = Перечисления.ВидыПоступленияТоваров.НаСклад;
	Объект.СкладОрдер     = ИскомыйСклад;
	
КонецЕсли;



/// ТАБЛИЧНАЯ ЧАСТЬ

// Обработаем стандартно табличную часть докумета
ИмяТабличнойЧасти = "Товары";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);

//заполним склад в табличной части тем же складом, который указан в шапке
Для Каждого СтрокаДокумента Из Объект.Товары Цикл
	СтрокаДокумента.Склад = Объект.СкладОрдер;
КонецЦикла;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПоступлениеТоваров</Источник>
				<Приемник>ДокументСсылка.ПоступлениеТоваровУслуг</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СуммаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>24</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>650</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>25</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>700</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазина</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Значение = "";	
Иначе
	Значение = Источник.Магазин.Код;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>26</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="СкладОрдер" Вид="Реквизит"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад) И Источник.Склад.ТипСклада &lt;&gt; Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>13</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Если ОбъектКоллекции.Номенклатура.Услуга Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>15</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>39</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>500</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Группа>
						<Код>27</Код>
						<Наименование>Товары --&gt; Услуги</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Если НЕ ОбъектКоллекции.Номенклатура.Услуга Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>28</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>30</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>31</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>33</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>34</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование> --&gt; Содержание</Наименование>
							<Порядок>400</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура.НаименованиеПолное;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>36</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>900</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ИспользованиеОрдернойСхемы</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.ПоступлениеПоОрдернойСхеме;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>37</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>950</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>СсылкаНаПриходныйОрдерНаТовары</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>//если документ оформлен по ордерной схеме и еще нет ПО по этому документу - документ вообще не отправляем
Если Источник.ПоступлениеПоОрдернойСхеме Тогда
	
	Запрос = Новый Запрос("
	|ВЫБРАТЬ
	|	ПриходныйОрдерНаТовары.Ссылка
	|ИЗ
	|	Документ.ПриходныйОрдерНаТовары КАК ПриходныйОрдерНаТовары
	|ГДЕ
	|	ПриходныйОрдерНаТовары.ДокументОснование = &amp;ДокументОснование
	|	И ПриходныйОрдерНаТовары.Проведен");
	
	Запрос.УстановитьПараметр("ДокументОснование", Источник.Ссылка);
	
	РезультатЗапроса = Запрос.Выполнить();
	
	Если РезультатЗапроса.Пустой() Тогда
		Отказ = Истина;
	Иначе
		//должен быть только один приходный ордер!!
		Выборка = РезультатЗапроса.Выбрать();
		Выборка.Следующий();
		Значение = Строка(Выборка.Ссылка.УникальныйИдентификатор());
		
		ВыгрузитьПоПравилу(Выборка.Ссылка,,,,"ПриходныйОрдерНаТовары");
		
	КонецЕсли;
	
Иначе
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПриходныйКассовыйОрдер</Код>
				<Наименование>ДокументСсылка.ПриходныйКассовыйОрдер --&gt; ДокументСсылка.ПриходныйКассовыйОрдер</Наименование>
				<Порядок>650</Порядок>
				<ПослеЗагрузки>

МетаданныеДокумента  = Объект.Метаданные();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();
ИскомаяКасса         = Справочники.Кассы.ПустаяСсылка();

/// ШАПКА 

//получим нужные поля по коду магазина
ИмяПараметра    = "КодМагазина";
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);

//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);

//заполним кассу
Если Не ИскомаяКасса.Пустая() Тогда
	Объект.Касса = ИскомаяКасса;
КонецЕсли;

//валюты
ВалютаРегламентированногоУчета  = Константы.ВалютаРегламентированногоУчета.Получить();
Объект.ВалютаДокумента = ВалютаРегламентированногоУчета;
Если Объект.ВидОперации = Перечисления.ВидыОперацийПКО.ВозвратДенежныхСредствПодотчетником Тогда
	Объект.ВалютаВзаиморасчетовПодотчетника = ВалютаРегламентированногоУчета;
КонецЕсли;

//заполним признак опер. учета и признак оплаты
Объект.ОтраженоВОперУчете = Истина;
Объект.Оплачено           = Истина;

//определим вид договора в табличной части и заодно статью движения денежных средств
ВидДоговора = Неопределено;
СтатьяДвиженияДенежныхСредств = Неопределено;
Если Объект.ВидОперации = Перечисления.ВидыОперацийПКО.ОплатаПокупателя Тогда
	
	ВидДоговора                   = Перечисления.ВидыДоговоровКонтрагентов.СПокупателем;	
	СтатьяДвиженияДенежныхСредств = Справочники.СтатьиДвиженияДенежныхСредств.ОплатаПокупателя;
	
ИначеЕсли Объект.ВидОперации = Перечисления.ВидыОперацийПКО.ВозвратДенежныхСредствПоставщиком Тогда
	
	ВидДоговора                   = Перечисления.ВидыДоговоровКонтрагентов.СПоставщиком;		
	СтатьяДвиженияДенежныхСредств = Справочники.СтатьиДвиженияДенежныхСредств.ВозвратДенежныхСредствПоставщиком;
	
ИначеЕсли Объект.ВидОперации = Перечисления.ВидыОперацийПКО.ПрочиеРасчетыСКонтрагентами Тогда
	
	ВидДоговора                   = Перечисления.ВидыДоговоровКонтрагентов.Прочее;		
	СтатьяДвиженияДенежныхСредств = Справочники.СтатьиДвиженияДенежныхСредств.ПрочиеРасчетыСКонтрагентами;
	
КонецЕсли;

//договор определяем, только если ПКО - оплата от покупателя или возврат поставщику
Если ВидДоговора &lt;&gt; Неопределено Тогда
	
	//параметры для вызова алгоритма УстановитьДоговорКонтрагенту
	КонтрагентПараметр     = Объект.Контрагент;
	ОрганизацияПараметр    = Объект.Организация;
	ДатаПараметр           = Объект.Дата;
	ДоговорВТабличнойЧасти = Истина;
	ИмяТабличнойЧасти      = "РасшифровкаПлатежа";
	
	Для Каждого СтрокаРасшифровкиПлатежа Из Объект.РасшифровкаПлатежа Цикл
		
		ДокументОбъект = СтрокаРасшифровкиПлатежа;
		Выполнить(Алгоритмы.УстановитьДоговорПоКонтрагенту);
		
		//расчитаем сумму взаиморасчетов
		Если ЗначениеЗаполнено(СтрокаРасшифровкиПлатежа.ДоговорКонтрагента) Тогда
			
			Если НЕ СтрокаРасшифровкиПлатежа.ДоговорКонтрагента.РасчетыВУсловныхЕдиницах
				И СтрокаРасшифровкиПлатежа.ДоговорКонтрагента.ВалютаВзаиморасчетов = Объект.ВалютаДокумента Тогда
				
				СтрокаРасшифровкиПлатежа.СуммаВзаиморасчетов = СтрокаРасшифровкиПлатежа.СуммаПлатежа;
				
			Иначе
			
				СтрокаРасшифровкиПлатежа.СуммаВзаиморасчетов = СтрокаРасшифровкиПлатежа.СуммаПлатежа *  СтрокаРасшифровкиПлатежа.КратностьВзаиморасчетов
							/ СтрокаРасшифровкиПлатежа.КурсВзаиморасчетов;
							
			КонецЕсли;
			
		КонецЕсли;		
		
		//если надо - уберем ДокументРасчетовСКонтрагентом
		Если ЗначениеЗаполнено(СтрокаРасшифровкиПлатежа.ДоговорКонтрагента) 
		   И НЕ СтрокаРасшифровкиПлатежа.ДоговорКонтрагента.ВестиПоДокументамРасчетовСКонтрагентом Тогда
			
		   СтрокаРасшифровкиПлатежа.ДокументРасчетовСКонтрагентом = Неопределено;
		   
		КонецЕсли;
		
		//установим статью движения денежных средств
		СтрокаРасшифровкиПлатежа.СтатьяДвиженияДенежныхСредств = СтатьяДвиженияДенежныхСредств;
		
	КонецЦикла;
	
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПриходныйКассовыйОрдер</Источник>
				<Приемник>ДокументСсылка.ПриходныйКассовыйОрдер</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ВидОперации --&gt; ВидОперации</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПКО"/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПКО"/>
						<КодПравилаКонвертации>ВидыОперацийПКО                                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ДокументОснование --&gt; ДокументОснование</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ДокументОснование" Вид="Реквизит"/>
						<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
						<ПередВыгрузкой>Если ТипЗнч("Источник.ДокументОснование") &lt;&gt; Тип("ДокументСсылка.РеализацияТоваров") Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>13</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>Основание --&gt; Основание</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>Приложение --&gt; Приложение</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>ПринятоОт --&gt; ПринятоОт</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>750</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Касса.Организация) Тогда
	Значение = Источник.Касса.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Касса --&gt; Касса</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="Касса" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<Приемник Имя="Касса" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<КодПравилаКонвертации>Кассы                                             </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Не ЗначениеЗаполнено(Источник.Касса) Или Источник.Касса.ТипКассы &lt;&gt; Перечисления.ТипыКасс.КассаЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>850</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазина</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если Не ЗначениеЗаполнено(Источник.Касса) Или Источник.Касса = Перечисления.ТипыКасс.КассаЦентральногоОфиса Тогда
	Значение = "";
Иначе
	Значение = Источник.Касса.Магазин.Код;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование> --&gt; Оплачено</Наименование>
						<Порядок>900</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Оплачено" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>3</Код>
						<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
						<Порядок>950</Порядок>
						<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>4</Код>
							<Наименование>ДокументРасчетовСКонтрагентом --&gt; ДокументРасчетовСКонтрагентом</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ДокументРасчетовСКонтрагентом" Вид="Реквизит"/>
							<Приемник Имя="ДокументРасчетовСКонтрагентом" Вид="Реквизит"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>СуммаПлатежа --&gt; СуммаПлатежа</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>24</Код>
						<Наименование> --&gt; СуммаДокумента</Наименование>
						<Порядок>1000</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>Значение = Источник.РасшифровкаПлатежа.Итог("СуммаПлатежа");</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПриходныйОрдерНаТовары</Код>
				<Наименование>ДокументСсылка.ПриходныйОрдерНаТовары --&gt; ДокументСсылка.ПриходныйОрдерНаТовары</Наименование>
				<Порядок>700</Порядок>
				<ПослеЗагрузки>

//нужные переменные
МетаданныеДокумента  = Объект.Метаданные();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();
ИскомыйСклад         = Справочники.Склады.ПустаяСсылка();

/// ШАПКА 

//получим нужные поля по коду магазина
ИмяПараметра = "КодМагазина";
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);

//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);

//заполним склад
Если Не ИскомыйСклад.Пустая() Тогда
	Объект.Склад = ИскомыйСклад;
КонецЕсли;

//попытаемся установить вид операции
ВидДокументаОснования = ПараметрыОбъекта["ВидДокументаОснования"];
Если ВидДокументаОснования = "ОтПокупателя" Тогда
	Объект.ВидОперации = Перечисления.ВидыОперацийПриходныйОрдер.ОтПокупателя;
ИначеЕсли ВидДокументаОснования = "Перемещение" Тогда
	Объект.ВидОперации = Перечисления.ВидыОперацийПриходныйОрдер.Перемещение;
ИначеЕсли ВидДокументаОснования = "ОтПоставщика" Тогда
	Объект.ВидОперации = Перечисления.ВидыОперацийПриходныйОрдер.ОтПоставщика;
КонецЕсли;

/// ТАБЛИЧНАЯ ЧАСТЬ

//работа с табличными частями
ИмяТабличнойЧасти = "Товары";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);


Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПриходныйОрдерНаТовары</Источник>
				<Приемник>ДокументСсылка.ПриходныйОрдерНаТовары</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>350</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<ПередВыгрузкой>ТипДокументаОснования = ТипЗнч(Источник.ДокументОснование);
Если ТипДокументаОснования = Тип("ДокументСсылка.ВозвратТоваровОтПокупателя")
 Или ТипДокументаОснования = Тип("ДокументСсылка.ПоступлениеТоваров") Тогда

	Значение = Источник.ДокументОснование.Контрагент;
	
Иначе
	
	Отказ = Истина;

КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>400</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВидДокументаОснования</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ТипДокументаОснования = ТипЗнч(Источник.ДокументОснование);

Если ТипДокументаОснования = Тип("ДокументСсылка.ВозвратТоваровОтПокупателя") Тогда
	Значение = "ОтПокупателя";
ИначеЕсли ТипДокументаОснования = Тип("ДокументСсылка.ПеремещениеТоваров") Тогда
	Значение = "Перемещение";
ИначеЕсли ТипДокументаОснования = Тип("ДокументСсылка.ПоступлениеТоваров") Тогда
	Значение = "ОтПоставщика";
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>ДокументОснование --&gt;</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ДокументОснование" Вид="Реквизит"/>
						<Приемник Имя="ДокументПеремещения" Вид="Реквизит" Тип="ДокументСсылка.ПеремещениеТоваров"/>
						<ПередВыгрузкой>Если ТипЗнч(Источник.ДокументОснование) &lt;&gt; Тип("ДокументСсылка.ПеремещениеТоваров") Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>500</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад) И Источник.Склад.ТипСклада &lt;&gt; Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>600</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазина</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Значение = "";
Иначе
	Значение = Источник.Магазин.Код;
КонецЕсли</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>3</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>5</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>300</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>18</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>700</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ВозможностьРедактированияВПриемнике = Истина;

ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

ТабЧастьТовары = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
ТабЧастьТовары.ИмяТабличнойЧасти = "Товары";
ТабЧастьТовары.МассивРеквизитов  = Новый Массив();
ТабЧастьТовары.МассивРеквизитов.Добавить("Цена");
ТабЧастьТовары.МассивРеквизитов.Добавить("Сумма");


Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);


Значение = Строка(ВозможностьРедактированияВПриемнике);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>РеализацияТоваровУслуг</Код>
				<Наименование>ДокументСсылка.РеализацияТоваров --&gt; ДокументСсылка.РеализацияТоваровУслуг</Наименование>
				<Порядок>750</Порядок>
				<ПослеЗагрузки>


//нужные переменные
МетаданныеДокумента  = Объект.Метаданные();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();
ИскомыйСклад         = Справочники.Склады.ПустаяСсылка();

/// ШАПКА 

//получим нужные поля по коду магазина
ИмяПараметра = "КодМагазина";
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);

//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);

//проверим, что контрагент - покупатель
Если Не Объект.Контрагент.Пустая() И Не Объект.Контрагент.Покупатель Тогда
	Контрагент = Объект.Контрагент.ПолучитьОбъект();
	Если Контрагент &lt;&gt; Неопределено Тогда
		Контрагент.Покупатель = Истина;
		Контрагент.Записать();
	КонецЕсли;
КонецЕсли;

//заполним поле договор
ДокументОбъект                  = Объект;
ВалютаРегламентированногоУчета  = Параметры.ВалютаРегламентированногоУчета;
ВидДоговора                     = Перечисления.ВидыДоговоровКонтрагентов.СПокупателем;
КонтрагентПараметр              = Объект.Контрагент;
ОрганизацияПараметр             = Объект.Организация;
ДоговорВТабличнойЧасти          = Ложь;
ДатаПараметр                    = Объект.Дата;
Выполнить(Алгоритмы.УстановитьДоговорПоКонтрагенту);

//заполним вид операции
Объект.ВидОперации = Перечисления.ВидыОперацийРеализацияТоваров.ПродажаКомиссия;

//вид передачи
Если ПараметрыОбъекта["ИспользованиеОрдернойСхемы"] Тогда
	Объект.ВидПередачи = Перечисления.ВидыПередачиТоваров.ПоОрдеру;
Иначе
	Объект.ВидПередачи = Перечисления.ВидыПередачиТоваров.СоСклада;
КонецЕсли;

//вид передачи и склад
Если Не ИскомыйСклад.Пустая() Тогда
	Объект.Склад = ИскомыйСклад;
КонецЕсли;


/// ТАБЛИЧНАЯ ЧАСТЬ

//заполним единицы измерения и, если нужно, номенклатуру (по характеристике)
ИмяТабличнойЧасти = "Товары";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);

ИмяТабличнойЧасти = "СоставНабора";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);


ИмяТабличнойЧасти = "Услуги";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);
//заполним склад в табличной части тем же складом, который указан в шапке
Для Каждого СтрокаДокумента Из Объект.Товары Цикл
	СтрокаДокумента.Склад = Объект.Склад;
	СтрокаДокумента.СпособСписанияОстаткаТоваров = Перечисления.СпособыСписанияОстаткаТоваров.СоСклада;
КонецЦикла;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.РеализацияТоваров</Источник>
				<Приемник>ДокументСсылка.РеализацияТоваровУслуг</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>АдресДоставки --&gt; АдресДоставки</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ДисконтнаяКарта --&gt; ДисконтнаяКарта</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ДисконтнаяКарта" Вид="Реквизит" Тип="СправочникСсылка.ИнформационныеКарты"/>
						<Приемник Имя="ДисконтнаяКарта" Вид="Реквизит" Тип="СправочникСсылка.ИнформационныеКарты"/>
						<КодПравилаКонвертации>ИнформационныеКарты                               </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ДоверенностьВыдана --&gt; ДоверенностьВыдана</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ДоверенностьВыдана" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ДоверенностьВыдана" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ДоверенностьДата --&gt; ДоверенностьДата</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ДоверенностьДата" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДоверенностьДата" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ДоверенностьНомер --&gt; ДоверенностьНомер</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ДоверенностьНомер" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ДоверенностьНомер" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ДоверенностьЧерезКого --&gt; ДоверенностьЧерезКого</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ДоверенностьЧерезКого" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ДоверенностьЧерезКого" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>10</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>СуммаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>44</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>850</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>45</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад) И Источник.Склад.ТипСклада &lt;&gt; Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>46</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>950</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазина</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Значение = "";	
Иначе
	Значение = Источник.Магазин.Код;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>25</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>1000</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Если ОбъектКоллекции.Номенклатура.Услуга Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>29</Код>
							<Наименование>КлючСтроки --&gt; КлючСтроки</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>30</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>31</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>43</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>34</Код>
							<Наименование>ПроцентСкидкиНаценки --&gt; ПроцентСкидкиНаценки</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ПроцентСкидкиНаценки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ПроцентСкидкиНаценки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>65</Код>
							<Наименование> --&gt; ПроцентАвтоматическихСкидок</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПроцентАвтоматическихСкидок" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ОбъектКоллекции.Количество = 0 ИЛИ ОбъектКоллекции.Цена = 0 Тогда
	Значение = 0
Иначе
	Значение = Окр(100*(ОбъектКоллекции.Количество * ОбъектКоллекции.Цена - ОбъектКоллекции.Сумма) / (ОбъектКоллекции.Количество * ОбъектКоллекции.Цена) - ОбъектКоллекции.ПроцентСкидкиНаценки,2,1)
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>36</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>37</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>39</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>40</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>63</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>650</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Группа>
						<Код>47</Код>
						<Наименование>Товары --&gt; Услуги</Наименование>
						<Порядок>1050</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Если Не ОбъектКоллекции.Номенклатура.Услуга Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>51</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>53</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>55</Код>
							<Наименование>ПроцентСкидкиНаценки --&gt; ПроцентСкидкиНаценки</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ПроцентСкидкиНаценки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ПроцентСкидкиНаценки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>66</Код>
							<Наименование> --&gt; ПроцентАвтоматическихСкидок</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПроцентАвтоматическихСкидок" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ОбъектКоллекции.Количество = 0 ИЛИ ОбъектКоллекции.Цена = 0 Тогда
	Значение = 0
Иначе
	Значение = Окр(100*(ОбъектКоллекции.Количество * ОбъектКоллекции.Цена - ОбъектКоллекции.Сумма) / (ОбъектКоллекции.Количество * ОбъектКоллекции.Цена) - ОбъектКоллекции.ПроцентСкидкиНаценки,2,1)
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>56</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>57</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>58</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>60</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>61</Код>
							<Наименование> --&gt; Содержание</Наименование>
							<Порядок>450</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура.Наименование;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Группа>
						<Код>18</Код>
						<Наименование>СоставНабора --&gt; СоставНабора</Наименование>
						<Порядок>1100</Порядок>
						<Источник Имя="СоставНабора" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="СоставНабора" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>21</Код>
							<Наименование>КлючСтроки --&gt; КлючСтроки</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КлючСтроки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>42</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>64</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>400</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>62</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>1150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ИспользованиеОрдернойСхемы</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.РеализацияПоОрдернойСхеме;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>67</Код>
						<Наименование> --&gt; ТипЦен</Наименование>
						<Порядок>1200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
						<КодПравилаКонвертации>ТипыЦенНоменклатуры                               </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладскоеПомещение Тогда
	Значение = Источник.Склад.ТипЦеныПродажи; 
Иначе
	Значение = Источник.Магазин.ТипЦенРозничнойТорговли;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>РасходныйКассовыйОрдер</Код>
				<Наименование>ДокументСсылка.РасходныйКассовыйОрдер --&gt; ДокументСсылка.РасходныйКассовыйОрдер</Наименование>
				<Порядок>800</Порядок>
				<ПослеЗагрузки>

//нужные переменные
МетаданныеДокумента  = Объект.Метаданные();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();
ИскомаяКасса         = Справочники.Кассы.ПустаяСсылка();

/// ШАПКА 

//получим нужные поля по коду магазина
ИмяПараметра = "КодМагазина";
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);

//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);

//заполним кассу
Если Не ИскомаяКасса.Пустая() Тогда
	Объект.Касса = ИскомаяКасса;
КонецЕсли;

//валюты
ВалютаРегламентированногоУчета  = Константы.ВалютаРегламентированногоУчета.Получить();
Объект.ВалютаДокумента = ВалютаРегламентированногоУчета;
Если Объект.ВидОперации = Перечисления.ВидыОперацийПКО.ВозвратДенежныхСредствПодотчетником Тогда
	Объект.ВалютаВзаиморасчетаПодотчетника = ВалютаРегламентированногоУчета;
КонецЕсли;

//заполним признак опер. учета и признак оплаты
Объект.ОтраженоВОперУчете = Истина;
Объект.Оплачено           = Истина;

//определим вид договора в табличной части и заодно статью движения денежных средств
ВидДоговора = Неопределено;
СтатьяДвиженияДенежныхСредств = Неопределено;
Если Объект.ВидОперации = Перечисления.ВидыОперацийРКО.ОплатаПоставщику Тогда
	
	ВидДоговора                   = Перечисления.ВидыДоговоровКонтрагентов.СПоставщиком;
	СтатьяДвиженияДенежныхСредств = Справочники.СтатьиДвиженияДенежныхСредств.ОплатаПоставщику;
	
ИначеЕсли Объект.ВидОперации = Перечисления.ВидыОперацийРКО.ВозвратДенежныхСредствПокупателю Тогда
	
	ВидДоговора                   = Перечисления.ВидыДоговоровКонтрагентов.СПокупателем;
	СтатьяДвиженияДенежныхСредств = Справочники.СтатьиДвиженияДенежныхСредств.ВозвратДенежныхСредствПокупателю;
	
ИначеЕсли Объект.ВидОперации = Перечисления.ВидыОперацийРКО.ПрочиеРасчетыСКонтрагентами Тогда
	
	ВидДоговора                   = Перечисления.ВидыДоговоровКонтрагентов.Прочее;
	СтатьяДвиженияДенежныхСредств = Справочники.СтатьиДвиженияДенежныхСредств.ПрочиеРасчетыСКонтрагентами;
	
КонецЕсли;

//договор определяем, только если РКО - оплата покупателю или возврат от поставщика
Если ВидДоговора &lt;&gt; Неопределено Тогда
	
	//параметры для вызова алгоритма УстановитьДоговорКонтрагенту
	КонтрагентПараметр     = Объект.Контрагент;
	ОрганизацияПараметр    = Объект.Организация;
	ДатаПараметр           = Объект.Дата;
	ДоговорВТабличнойЧасти = Истина;
	ИмяТабличнойЧасти      = "РасшифровкаПлатежа";
	
	Для Каждого СтрокаРасшифровкиПлатежа Из Объект.РасшифровкаПлатежа Цикл
		
		ДокументОбъект = СтрокаРасшифровкиПлатежа;
		Выполнить(Алгоритмы.УстановитьДоговорПоКонтрагенту);
		
		//расчитаем сумму взаиморасчетов
		Если ЗначениеЗаполнено(СтрокаРасшифровкиПлатежа.ДоговорКонтрагента) Тогда
			
			Если НЕ СтрокаРасшифровкиПлатежа.ДоговорКонтрагента.РасчетыВУсловныхЕдиницах
				И СтрокаРасшифровкиПлатежа.ДоговорКонтрагента.ВалютаВзаиморасчетов = Объект.ВалютаДокумента Тогда
				
				СтрокаРасшифровкиПлатежа.СуммаВзаиморасчетов = СтрокаРасшифровкиПлатежа.СуммаПлатежа;
				
			Иначе
			
				СтрокаРасшифровкиПлатежа.СуммаВзаиморасчетов = СтрокаРасшифровкиПлатежа.СуммаПлатежа *  СтрокаРасшифровкиПлатежа.КратностьВзаиморасчетов / СтрокаРасшифровкиПлатежа.КурсВзаиморасчетов;
				
			КонецЕсли;
			
		КонецЕсли;
		
		
		//если надо - уберем ДокументРасчетовСКонтрагентом
		Если ЗначениеЗаполнено(СтрокаРасшифровкиПлатежа.ДоговорКонтрагента) 
		   И НЕ СтрокаРасшифровкиПлатежа.ДоговорКонтрагента.ВестиПоДокументамРасчетовСКонтрагентом Тогда
			
		   СтрокаРасшифровкиПлатежа.ДокументРасчетовСКонтрагентом = Неопределено;
		   
		КонецЕсли;

				
		//установим статью движения денежных средств
		СтрокаРасшифровкиПлатежа.СтатьяДвиженияДенежныхСредств = СтатьяДвиженияДенежныхСредств;
		
	КонецЦикла;
	
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.РасходныйКассовыйОрдер</Источник>
				<Приемник>ДокументСсылка.РасходныйКассовыйОрдер</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>ВидОперации --&gt; ВидОперации</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРКО"/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРКО"/>
						<КодПравилаКонвертации>ВидыОперацийРКО                                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Выдать --&gt; Выдать</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ДокументОснование --&gt; ДокументОснование</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ДокументОснование" Вид="Реквизит"/>
						<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>НомерЧекаККМ --&gt; НомерЧекаККМ</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="НомерЧекаККМ" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="НомерЧекаККМ" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>10</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Основание --&gt; Основание</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>ПоДокументу --&gt; ПоДокументу</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>Приложение --&gt; Приложение</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>850</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Касса.Организация) Тогда
	Значение = Источник.Касса.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>24</Код>
						<Наименование>Касса --&gt; Касса</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="Касса" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<Приемник Имя="Касса" Вид="Реквизит" Тип="СправочникСсылка.Кассы"/>
						<КодПравилаКонвертации>Кассы                                             </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Не ЗначениеЗаполнено(Источник.Касса) Или Источник.Касса.ТипКассы &lt;&gt; Перечисления.ТипыКасс.КассаЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>25</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>950</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазина</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если Не ЗначениеЗаполнено(Источник.Касса) Или Источник.Касса = Перечисления.ТипыКасс.КассаЦентральногоОфиса Тогда
	Значение = "";
Иначе
	Значение = Источник.Касса.Магазин.Код;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>26</Код>
						<Наименование> --&gt; Оплачено</Наименование>
						<Порядок>1000</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Оплачено" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>18</Код>
						<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
						<Порядок>1050</Порядок>
						<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>19</Код>
							<Наименование>ДокументРасчетовСКонтрагентом --&gt; ДокументРасчетовСКонтрагентом</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ДокументРасчетовСКонтрагентом" Вид="Реквизит"/>
							<Приемник Имя="ДокументРасчетовСКонтрагентом" Вид="Реквизит"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>СуммаПлатежа --&gt; СуммаПлатежа</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>27</Код>
						<Наименование> --&gt; СуммаДокумента</Наименование>
						<Порядок>1100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>Значение = Источник.РасшифровкаПлатежа.Итог("СуммаПлатежа");</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>РасходныйОрдерНаТовары</Код>
				<Наименование>ДокументСсылка.РасходныйОрдерНаТовары --&gt; ДокументСсылка.РасходныйОрдерНаТовары</Наименование>
				<Порядок>850</Порядок>
				<ПослеЗагрузки>
//нужные переменные
МетаданныеДокумента  = Объект.Метаданные();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();
ИскомыйСклад         = Справочники.Склады.ПустаяСсылка();

/// ШАПКА 

//получим нужные поля по коду магазина
ИмяПараметра = "КодМагазина";
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);


//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);

//попытаемся установить вид операции
ВидДокументаОснования = ПараметрыОбъекта["ВидДокументаОснования"];
Если ВидДокументаОснования = "Покупателю" Тогда
	Объект.ВидОперации = Перечисления.ВидыОперацийРасходныйОрдер.РасходПоНакладной;
ИначеЕсли ВидДокументаОснования = "Перемещение" Тогда
	Объект.ВидОперации = Перечисления.ВидыОперацийРасходныйОрдер.Перемещение;
ИначеЕсли ВидДокументаОснования = "Поставщику" Тогда
	Объект.ВидОперации = Перечисления.ВидыОперацийРасходныйОрдер.ВозвратПоставщику;
КонецЕсли;

//установим контрагента
ТипДокументаПередачи = ТипЗнч(Объект.ДокументПередачи);
Если ЗначениеЗаполнено(Объект.ДокументПередачи) 
   И (ТипДокументаПередачи = Тип("ДокументСсылка.ВозвратТоваровПоставщику") 
	  Или ТипДокументаПередачи = Тип("ДокументСсылка.РеализацияТоваровУслуг")) Тогда
	  
	Объект.Контрагент  = Объект.ДокументПередачи.Контрагент;
	
КонецЕсли;


//заполним склад
Если Не ИскомыйСклад.Пустая() Тогда
	Объект.Склад = ИскомыйСклад;
КонецЕсли;


/// ТАБЛИЧНАЯ ЧАСТЬ

// Обработаем стандартно табличную часть докумета
ИмяТабличнойЧасти = "Товары";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);

Выполнить(Алгоритмы.УстановитьВозможностьРедактированияОбъекта);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.РасходныйОрдерНаТовары</Источник>
				<Приемник>ДокументСсылка.РасходныйОрдерНаТовары</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>ДокументОснование --&gt;</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ДокументОснование" Вид="Реквизит"/>
						<Приемник Имя="ДокументПередачи" Вид="Реквизит"/>
						<ПередВыгрузкой>Если ТипЗнч(Источник.ДокументОснование) = Тип("ДокументСсылка.РеализацияТоваров") Тогда
	ИмяПКО = "РеализацияТоваровУслуг";
ИначеЕсли ТипЗнч(Источник.ДокументОснование) = Тип("ДокументСсылка.ПеремещениеТоваров") Тогда
	ИмяПКО = "ПеремещениеТоваров";
ИначеЕсли ТипЗнч(Источник.ДокументОснование) = Тип("ДокументСсылка.ВозвратТоваровПоставщику") Тогда
	ИмяПКО = "ВозвратТоваровПоставщику";
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>450</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>24</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад) И Источник.Склад.ТипСклада &lt;&gt; Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>25</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>550</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазина</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Значение = "";	
Иначе
	Значение = Источник.Магазин.Код;
КонецЕсли</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>3</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Если ОбъектКоллекции.Номенклатура.Комплект Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>5</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>31</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>300</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Группа>
						<Код>14</Код>
						<Наименование>СоставНабора --&gt;</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="СоставНабора" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>НеОчищать = Истина;</ПередОбработкойВыгрузки>
						<ПередВыгрузкой>Если ОбъектКоллекции.КлючСтроки &gt; Источник.Товары.Количество() Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>18</Код>
							<Наименование>Номенклатура --&gt;</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>29</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Количество --&gt;</Наименование>
							<Порядок>150</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество * Источник.Товары[ОбъектКоллекции.КлючСтроки-1].Количество;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>30</Код>
							<Наименование> --&gt; Коэффициент</Наименование>
							<Порядок>200</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ЕдиницаИзмерения.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>300</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>26</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>700</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ВозможностьРедактированияВПриемнике = Истина;

ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

ТабЧастьТовары = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
ТабЧастьТовары.ИмяТабличнойЧасти = "Товары";
ТабЧастьТовары.МассивРеквизитов  = Новый Массив();
ТабЧастьТовары.МассивРеквизитов.Добавить("Цена");
ТабЧастьТовары.МассивРеквизитов.Добавить("Сумма");


Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);


Значение = Строка(ВозможностьРедактированияВПриемнике);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>27</Код>
						<Наименование> --&gt; Контрагент</Наименование>
						<Порядок>750</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<ПередВыгрузкой>Если ТипЗнч(Источник.ДокументОснование) = Тип("ДокументСсылка.ВозвратТоваровОтПокупателя") 
 Или ТипЗнч(Источник.ДокументОснование) = Тип("ДокументСсылка.РеализацияТоваров") Тогда
	Значение = Источник.ДокументОснование.Контрагент;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>28</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>800</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВидДокументаОснования</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если ТипЗнч(Источник.ДокументОснование) = Тип("ДокументСсылка.РеализацияТоваров") Тогда
	Значение = "Покупателю"
ИначеЕсли ТипЗнч(Источник.ДокументОснование) = Тип("ДокументСсылка.ПеремещениеТоваров") Тогда
	Значение = "Перемещение";
ИначеЕсли ТипЗнч(Источник.ДокументОснование) = Тип("ДокументСсылка.ВозвратТоваровПоставщику") Тогда
	Значение = "Поставщику";
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>СписаниеТоваров</Код>
				<Наименование>ДокументСсылка.СписаниеТоваров --&gt; ДокументСсылка.СписаниеТоваров</Наименование>
				<Порядок>900</Порядок>
				<ПослеЗагрузки>
//нужные переменные
МетаданныеДокумента  = Объект.Метаданные();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();
ИскомыйСклад         = Справочники.Склады.ПустаяСсылка();

/// ШАПКА 

//получим нужные поля по коду магазина
ИмяПараметра = "КодМагазина";
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);

//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);

//заполним склад
Если Не ИскомыйСклад.Пустая() Тогда
	Объект.Склад = ИскомыйСклад;
КонецЕсли;

Если Не ЗначениеЗаполнено(Объект.НДСвСтоимостиТоваров) Тогда
	Объект.НДСвСтоимостиТоваров = Перечисления.ДействиеНДСВСтоимостиТоваров.НеИзменять;
КонецЕсли;

/// ТАБЛИЧНАЯ ЧАСТЬ

//работа с табличными частями
ИмяТабличнойЧасти = "Товары";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.СписаниеТоваров</Источник>
				<Приемник>ДокументСсылка.СписаниеТоваров</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>400</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад) И Источник.Склад.ТипСклада &lt;&gt; Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>500</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазина</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Значение = "";	
Иначе
	Значение = Источник.Магазин.Код;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>12</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>14</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>350</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>24</Код>
						<Наименование>ОснованиеСписания --&gt;</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ОснованиеСписания" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>25</Код>
						<Наименование>ДокументОснование --&gt;</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ДокументОснование" Вид="Реквизит" Тип="ДокументСсылка.ИнвентаризацияТоваров"/>
						<Приемник Имя="ИнвентаризацияТоваровНаСкладе" Вид="Реквизит" Тип="ДокументСсылка.ИнвентаризацияТоваровНаСкладе"/>
						<КодПравилаКонвертации>ИнвентаризацияТоваровНаСкладе                     </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>УстановкаЦенНоменклатуры</Код>
				<Наименование>ДокументСсылка.УстановкаЦенНоменклатуры --&gt; ДокументСсылка.УстановкаЦенНоменклатуры</Наименование>
				<Порядок>1050</Порядок>
				<ПослеЗагрузки>МетаданныеДокумента  = Объект.Метаданные();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();

/// ШАПКА 

//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);


/// ТАБЛИЧНАЯ ЧАСТЬ

//работа с табличными частями
ИмяТабличнойЧасти = "Товары";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);

//установим валюту и способ расчета цены
ВалютаРегламентированногоУчета = Константы.ВалютаРегламентированногоУчета.Получить();
Для Каждого СтрокаТовары Из Объект.Товары Цикл
	Если Не ЗначениеЗаполнено(СтрокаТовары.Валюта) Тогда
		СтрокаТовары.Валюта = ВалютаРегламентированногоУчета;
	КонецЕсли;
	Если Не ЗначениеЗаполнено(СтрокаТовары.СпособРасчетаЦены) Тогда
		СтрокаТовары.СпособРасчетаЦены = Перечисления.СпособыРасчетаЦены.ПоПроцентнойНаценкеНаБазовыйТип;
	КонецЕсли;
КонецЦикла;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.УстановкаЦенНоменклатуры</Источник>
				<Приемник>ДокументСсылка.УстановкаЦенНоменклатуры</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Информация --&gt; Информация</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Информация" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Информация" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>НеПроводитьНулевыеЗначения --&gt; НеПроводитьНулевыеЗначения</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="НеПроводитьНулевыеЗначения" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="НеПроводитьНулевыеЗначения" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>9</Код>
						<Наименование>ТипыЦен --&gt; ТипыЦен</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ТипыЦен" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ТипыЦен" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>10</Код>
							<Наименование>ТипЦен --&gt; ТипЦен</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
							<Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
							<КодПравилаКонвертации>ТипыЦенНоменклатуры                               </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Группа>
						<Код>11</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>13</Код>
							<Наименование>ИндексСтрокиТаблицыЦен --&gt; ИндексСтрокиТаблицыЦен</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ИндексСтрокиТаблицыЦен" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ИндексСтрокиТаблицыЦен" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>ТипЦен --&gt; ТипЦен</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
							<Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
							<КодПравилаКонвертации>ТипыЦенНоменклатуры                               </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>400</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>УстановкаЦенНоменклатурыВМагазине</Код>
				<Наименование>ДокументСсылка.УстановкаЦенНоменклатурыВМагазине --&gt; ДокументСсылка.ПереоценкаТоваровВРознице</Наименование>
				<Порядок>1100</Порядок>
				<ПослеЗагрузки>
МетаданныеДокумента  = Объект.Метаданные();
ИскомоеПодразделение = Справочники.Подразделения.ПустаяСсылка();
ИскомыйСклад         = Справочники.Склады.ПустаяСсылка();
ИскомаяОрганизация   = Справочники.Организации.ПустаяСсылка();


/// ШАПКА 

//получим нужные поля по коду магазина
ИмяПараметра = "КодМагазина";
Выполнить(Алгоритмы.ОпределитьПараметрыМагазина);

Если ИскомыйСклад.ВидСклада &lt;&gt; Перечисления.ВидыСкладов.Розничный Тогда
	Отказ = Истина;
КонецЕсли;

//общие реквизиты шапки
Выполнить(Алгоритмы.ОбработкаШапки);

Объект.ВидОперации = Перечисления.ВидыОперацийПереоценкаТоваровВРознице.ПереоценкаВРознице;

//заполним склад
Если Не ИскомыйСклад.Пустая() Тогда
	Объект.Склад = ИскомыйСклад;
КонецЕсли;

Если Не ИскомаяОрганизация.Пустая() И Не ЗначениеЗаполнено(Объект.Организация) Тогда
	Объект.Организация = ИскомаяОрганизация;
КонецЕсли;

/// ТАБЛИЧНАЯ ЧАСТЬ

//работа с табличными частями
ИмяТабличнойЧасти = "Товары";
ДокументОбъект = Объект;
Выполнить(Алгоритмы.ОбработкаТабличнойЧасти);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.УстановкаЦенНоменклатурыВМагазине</Источник>
				<Приемник>ДокументСсылка.ПереоценкаТоваровВРознице</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДокументУстановкаЦен --&gt; ДокументУстановкаЦен</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ДокументУстановкаЦен" Вид="Реквизит"/>
						<Приемник Имя="ДокументУстановкаЦен" Вид="Реквизит" Тип="ДокументСсылка.УстановкаЦенНоменклатуры"/>
						<КодПравилаКонвертации>УстановкаЦенНоменклатуры                          </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>400</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>КодМагазина</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.Магазин.Код;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>8</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>9</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>ЦенаВРознице --&gt; ЦенаВРознице</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ЦенаВРознице" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ЦенаВРознице" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>ЦенаВРозницеСтарая --&gt; ЦенаВРозницеСтарая</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ЦенаВРозницеСтарая" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ЦенаВРозницеСтарая" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование> --&gt;</Наименование>
							<Порядок>200</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>14</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>500</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВозможностьРедактированияВПриемнике</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ВозможностьРедактированияВПриемнике = Истина;

ТаблицаДляПроверкиТабличныхЧастей = Новый ТаблицаЗначений;
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("ИмяТабличнойЧасти");
ТаблицаДляПроверкиТабличныхЧастей.Колонки.Добавить("МассивРеквизитов");

ТабЧастьТовары = ТаблицаДляПроверкиТабличныхЧастей.Добавить();
ТабЧастьТовары.ИмяТабличнойЧасти = "Товары";
ТабЧастьТовары.МассивРеквизитов  = Новый Массив();
ТабЧастьТовары.МассивРеквизитов.Добавить("Дата");
ТабЧастьТовары.МассивРеквизитов.Добавить("ДокументУстановкиЦен");


Выполнить(Алгоритмы.ОпределитьВозможностьРедактированияВПриемникеПоТЧ);


Значение = Строка(ВозможностьРедактированияВПриемнике);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Перечисления</Код>
			<Наименование>Перечисления</Наименование>
			<Порядок>150</Порядок>
			<Правило>
				<Код>ВидыИнформационныхКарт</Код>
				<Наименование>ПеречислениеСсылка.ВидыИнформационныхКарт --&gt; ПеречислениеСсылка.ВидыИнформационныхКарт</Наименование>
				<Порядок>50</Порядок>
				<Источник>ПеречислениеСсылка.ВидыИнформационныхКарт</Источник>
				<Приемник>ПеречислениеСсылка.ВидыИнформационныхКарт</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Магнитная --&gt; Магнитная</Наименование>
						<Порядок>50</Порядок>
						<Источник>Магнитная</Источник>
						<Приемник>Магнитная</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Штриховая --&gt; Штриховая</Наименование>
						<Порядок>100</Порядок>
						<Источник>Штриховая</Источник>
						<Приемник>Штриховая</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыДнейПроизводственногоКалендаря</Код>
				<Наименование>ПеречислениеСсылка.ВидыДнейПроизводственногоКалендаря --&gt; ПеречислениеСсылка.ВидыДнейПроизводственно</Наименование>
				<Порядок>150</Порядок>
				<Источник>ПеречислениеСсылка.ВидыДнейПроизводственногоКалендаря</Источник>
				<Приемник>ПеречислениеСсылка.ВидыДнейПроизводственногоКалендаря</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Воскресенье --&gt; Воскресенье</Наименование>
						<Порядок>50</Порядок>
						<Источник>Воскресенье</Источник>
						<Приемник>Воскресенье</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Праздник --&gt; Праздник</Наименование>
						<Порядок>100</Порядок>
						<Источник>Праздник</Источник>
						<Приемник>Праздник</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Предпраздничный --&gt; Предпраздничный</Наименование>
						<Порядок>150</Порядок>
						<Источник>Предпраздничный</Источник>
						<Приемник>Предпраздничный</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Рабочий --&gt; Рабочий</Наименование>
						<Порядок>200</Порядок>
						<Источник>Рабочий</Источник>
						<Приемник>Рабочий</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Суббота --&gt; Суббота</Наименование>
						<Порядок>250</Порядок>
						<Источник>Суббота</Источник>
						<Приемник>Суббота</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыДополнительнойИнформацииОбъектов</Код>
				<Наименование>ПеречислениеСсылка.ВидыДополнительнойИнформацииОбъектов --&gt; ПеречислениеСсылка.ВидыДополнительнойИнф</Наименование>
				<Порядок>200</Порядок>
				<Источник>ПеречислениеСсылка.ВидыДополнительнойИнформацииОбъектов</Источник>
				<Приемник>ПеречислениеСсылка.ВидыДополнительнойИнформацииОбъектов</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Изображение --&gt; Изображение</Наименование>
						<Порядок>50</Порядок>
						<Источник>Изображение</Источник>
						<Приемник>Изображение</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Файл --&gt; Файл</Наименование>
						<Порядок>100</Порядок>
						<Источник>Файл</Источник>
						<Приемник>Файл</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыДополнительныхВнешнихОбработок</Код>
				<Наименование>ПеречислениеСсылка.ВидыДополнительныхВнешнихОбработок --&gt; ПеречислениеСсылка.ВидыДополнительныхВнешн</Наименование>
				<Порядок>250</Порядок>
				<Источник>ПеречислениеСсылка.ВидыДополнительныхВнешнихОбработок</Источник>
				<Приемник>ПеречислениеСсылка.ВидыДополнительныхВнешнихОбработок</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ЗаполнениеТабличныхЧастей --&gt; ЗаполнениеТабличныхЧ</Наименование>
						<Порядок>50</Порядок>
						<Источник>ЗаполнениеТабличныхЧастей</Источник>
						<Приемник>ЗаполнениеТабличныхЧастей</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Обработка --&gt; Обработка</Наименование>
						<Порядок>100</Порядок>
						<Источник>Обработка</Источник>
						<Приемник>Обработка</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ПечатнаяФорма --&gt; ПечатнаяФорма</Наименование>
						<Порядок>150</Порядок>
						<Источник>ПечатнаяФорма</Источник>
						<Приемник>ПечатнаяФорма</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Отчет --&gt; Отчет</Наименование>
						<Порядок>200</Порядок>
						<Источник>Отчет</Источник>
						<Приемник>Отчет</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийКомплектацияНоменклатуры</Код>
				<Наименование>ПеречислениеСсылка.ВидыОперацийКомплектацияНоменклатуры --&gt; ПеречислениеСсылка.ВидыОперацийКомплекта</Наименование>
				<Порядок>300</Порядок>
				<Источник>ПеречислениеСсылка.ВидыОперацийКомплектацияНоменклатуры</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОперацийКомплектацияНоменклатуры</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Комплектация --&gt; Комплектация</Наименование>
						<Порядок>50</Порядок>
						<Источник>Комплектация</Источник>
						<Приемник>Комплектация</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Разукомплектация --&gt; Разукомплектация</Наименование>
						<Порядок>100</Порядок>
						<Источник>Разукомплектация</Источник>
						<Приемник>Разукомплектация</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийОплатаОтПокупателяПлатежнойКартой</Код>
				<Наименование>ПеречислениеСсылка.ВидыОперацийОплатаОтПокупателяПлатежнойКартой --&gt; ПеречислениеСсылка.ВидыОпераций</Наименование>
				<Порядок>350</Порядок>
				<Источник>ПеречислениеСсылка.ВидыОперацийОплатаОтПокупателяПлатежнойКартой</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОперацийОплатаОтПокупателяПлатежнойКартой</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ВозвратДенежныхСредствПокупателю --&gt; ВозвратДенежн</Наименование>
						<Порядок>50</Порядок>
						<Источник>ВозвратДенежныхСредствПокупателю</Источник>
						<Приемник>ВозвратДенежныхСредствПокупателю</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ОплатаПокупателя --&gt; ОплатаПокупателя</Наименование>
						<Порядок>100</Порядок>
						<Источник>ОплатаПокупателя</Источник>
						<Приемник>ОплатаПокупателя</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийРКО</Код>
				<Наименование>ПеречислениеСсылка.ВидыОперацийРКО --&gt; ПеречислениеСсылка.ВидыОперацийРКО</Наименование>
				<Порядок>400</Порядок>
				<Источник>ПеречислениеСсылка.ВидыОперацийРКО</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОперацийРКО</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ВозвратДенежныхСредствПокупателю --&gt; ВозвратДенежн</Наименование>
						<Порядок>50</Порядок>
						<Источник>ВозвратДенежныхСредствПокупателю</Источник>
						<Приемник>ВозвратДенежныхСредствПокупателю</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ОплатаПоставщику --&gt; ОплатаПоставщику</Наименование>
						<Порядок>150</Порядок>
						<Источник>ОплатаПоставщику</Источник>
						<Приемник>ОплатаПоставщику</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ПрочиеРасчетыСКонтрагентами --&gt; ПрочиеРасчетыСКонт</Наименование>
						<Порядок>200</Порядок>
						<Источник>ПрочиеРасчетыСКонтрагентами</Источник>
						<Приемник>ПрочиеРасчетыСКонтрагентами</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>РасходДенежныхСредствПрочее --&gt; РасходДенежныхСред</Наименование>
						<Порядок>250</Порядок>
						<Источник>РасходДенежныхСредствПрочее</Источник>
						<Приемник>РасходДенежныхСредствПрочее</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийЧекККМ</Код>
				<Наименование>ПеречислениеСсылка.ВидыОперацийЧекККМ --&gt; ПеречислениеСсылка.ВидыОперацийЧекККМ</Наименование>
				<Порядок>500</Порядок>
				<Источник>ПеречислениеСсылка.ВидыОперацийЧекККМ</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОперацийЧекККМ</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Возврат --&gt; Возврат</Наименование>
						<Порядок>50</Порядок>
						<Источник>Возврат</Источник>
						<Приемник>Возврат</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Продажа --&gt; Продажа</Наименование>
						<Порядок>100</Порядок>
						<Источник>Продажа</Источник>
						<Приемник>Продажа</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ДниНедели</Код>
				<Наименование>ПеречислениеСсылка.ДниНедели --&gt; ПеречислениеСсылка.ДниНедели</Наименование>
				<Порядок>600</Порядок>
				<Источник>ПеречислениеСсылка.ДниНедели</Источник>
				<Приемник>ПеречислениеСсылка.ДниНедели</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Воскресенье --&gt; Воскресенье</Наименование>
						<Порядок>50</Порядок>
						<Источник>Воскресенье</Источник>
						<Приемник>Воскресенье</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Вторник --&gt; Вторник</Наименование>
						<Порядок>100</Порядок>
						<Источник>Вторник</Источник>
						<Приемник>Вторник</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Понедельник --&gt; Понедельник</Наименование>
						<Порядок>150</Порядок>
						<Источник>Понедельник</Источник>
						<Приемник>Понедельник</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Пятница --&gt; Пятница</Наименование>
						<Порядок>200</Порядок>
						<Источник>Пятница</Источник>
						<Приемник>Пятница</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Среда --&gt; Среда</Наименование>
						<Порядок>250</Порядок>
						<Источник>Среда</Источник>
						<Приемник>Среда</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>Суббота --&gt; Суббота</Наименование>
						<Порядок>300</Порядок>
						<Источник>Суббота</Источник>
						<Приемник>Суббота</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>Четверг --&gt; Четверг</Наименование>
						<Порядок>350</Порядок>
						<Источник>Четверг</Источник>
						<Приемник>Четверг</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ДополнительнаяКолонкаПечатныхФормДокументов</Код>
				<Наименование>ПеречислениеСсылка.ДополнительнаяКолонкаПечатныхФормДокументов --&gt; ПеречислениеСсылка.Дополнительная</Наименование>
				<Порядок>650</Порядок>
				<Источник>ПеречислениеСсылка.ДополнительнаяКолонкаПечатныхФормДокументов</Источник>
				<Приемник>ПеречислениеСсылка.ДополнительнаяКолонкаПечатныхФормДокументов</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Артикул --&gt; Артикул</Наименование>
						<Порядок>50</Порядок>
						<Источник>Артикул</Источник>
						<Приемник>Артикул</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>100</Порядок>
						<Источник>Код</Источник>
						<Приемник>Код</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>НеВыводить --&gt; НеВыводить</Наименование>
						<Порядок>150</Порядок>
						<Источник>НеВыводить</Источник>
						<Приемник>НеВыводить</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ОтветственныеЛицаОрганизацииСправочник</Код>
				<Наименование>ПеречислениеСсылка.ОтветственныеЛицаОрганизаций --&gt; ПеречислениеСсылка.ОтветственныеЛицаОрганизации</Наименование>
				<Порядок>700</Порядок>
				<Источник>ПеречислениеСсылка.ОтветственныеЛицаОрганизаций</Источник>
				<Приемник>ПеречислениеСсылка.ОтветственныеЛицаОрганизации</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ГлавныйБухгалтер --&gt; ГлавныйБухгалтер</Наименование>
						<Порядок>50</Порядок>
						<Источник>ГлавныйБухгалтер</Источник>
						<Приемник>ГлавныйБухгалтер</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Кассир --&gt; Кассир</Наименование>
						<Порядок>100</Порядок>
						<Источник>Кассир</Источник>
						<Приемник>Кассир</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Руководитель --&gt; Руководитель</Наименование>
						<Порядок>150</Порядок>
						<Источник>Руководитель</Источник>
						<Приемник>Руководитель</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ПериодичностьНакопленияСкидок</Код>
				<Наименование>ПеречислениеСсылка.ПериодичностьНакопленияСкидок --&gt; ПеречислениеСсылка.ПериодичностьНакопленияСкидо</Наименование>
				<Порядок>750</Порядок>
				<Источник>ПеречислениеСсылка.ПериодичностьНакопленияСкидок</Источник>
				<Приемник>ПеречислениеСсылка.ПериодичностьНакопленияСкидок</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ВТечениеВсегоПериода --&gt; ВТечениеВсегоПериода</Наименование>
						<Порядок>50</Порядок>
						<Источник>ВТечениеВсегоПериода</Источник>
						<Приемник>ВТечениеВсегоПериода</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Год --&gt; Год</Наименование>
						<Порядок>100</Порядок>
						<Источник>Год</Источник>
						<Приемник>Год</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Квартал --&gt; Квартал</Наименование>
						<Порядок>150</Порядок>
						<Источник>Квартал</Источник>
						<Приемник>Квартал</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Месяц --&gt; Месяц</Наименование>
						<Порядок>200</Порядок>
						<Источник>Месяц</Источник>
						<Приемник>Месяц</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Полугодие --&gt; Полугодие</Наименование>
						<Порядок>250</Порядок>
						<Источник>Полугодие</Источник>
						<Приемник>Полугодие</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>СтавкиНДС</Код>
				<Наименование>ПеречислениеСсылка.СтавкиНДС --&gt; ПеречислениеСсылка.СтавкиНДС</Наименование>
				<Порядок>850</Порядок>
				<Источник>ПеречислениеСсылка.СтавкиНДС</Источник>
				<Приемник>ПеречислениеСсылка.СтавкиНДС</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>БезНДС --&gt; БезНДС</Наименование>
						<Порядок>50</Порядок>
						<Источник>БезНДС</Источник>
						<Приемник>БезНДС</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>НДС0 --&gt; НДС0</Наименование>
						<Порядок>100</Порядок>
						<Источник>НДС0</Источник>
						<Приемник>НДС0</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>НДС10 --&gt; НДС10</Наименование>
						<Порядок>150</Порядок>
						<Источник>НДС10</Источник>
						<Приемник>НДС10</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>НДС18 --&gt; НДС18</Наименование>
						<Порядок>200</Порядок>
						<Источник>НДС18</Источник>
						<Приемник>НДС18</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>НДС20 --&gt; НДС20</Наименование>
						<Порядок>250</Порядок>
						<Источник>НДС20</Источник>
						<Приемник>НДС20</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыНоменклатуры</Код>
				<Наименование>ПеречислениеСсылка.ТипыНоменклатуры --&gt; ПеречислениеСсылка.ТипыНоменклатуры</Наименование>
				<Порядок>900</Порядок>
				<Источник>ПеречислениеСсылка.ТипыНоменклатуры</Источник>
				<Приемник>ПеречислениеСсылка.ТипыНоменклатуры</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Комплект --&gt; Комплект</Наименование>
						<Порядок>50</Порядок>
						<Источник>Комплект</Источник>
						<Приемник>Комплект</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Товар --&gt; Товар</Наименование>
						<Порядок>150</Порядок>
						<Источник>Товар</Источник>
						<Приемник>Товар</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Услуга --&gt; Услуга</Наименование>
						<Порядок>200</Порядок>
						<Источник>Услуга</Источник>
						<Приемник>Услуга</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>ПодарочныйСертификат --&gt; Товар</Наименование>
						<Порядок>250</Порядок>
						<Источник>ПодарочныйСертификат</Источник>
						<Приемник>Товар</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыОплатЧекаККМ</Код>
				<Наименование>ПеречислениеСсылка.ТипыОплатЧекаККМ --&gt; ПеречислениеСсылка.ТипыОплатЧекаККМ</Наименование>
				<Порядок>950</Порядок>
				<Источник>ПеречислениеСсылка.ТипыОплатЧекаККМ</Источник>
				<Приемник>ПеречислениеСсылка.ТипыОплатЧекаККМ</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>БанковскийКредит --&gt; БанковскийКредит</Наименование>
						<Порядок>50</Порядок>
						<Источник>БанковскийКредит</Источник>
						<Приемник>БанковскийКредит</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Наличные --&gt; Наличные</Наименование>
						<Порядок>100</Порядок>
						<Источник>Наличные</Источник>
						<Приемник>Наличные</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ПлатежнаяКарта --&gt; ПлатежнаяКарта</Наименование>
						<Порядок>150</Порядок>
						<Источник>ПлатежнаяКарта</Источник>
						<Приемник>ПлатежнаяКарта</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ПодарочныйСертификат --&gt;</Наименование>
						<Порядок>200</Порядок>
						<Источник>ПодарочныйСертификат</Источник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ЮрФизЛицо</Код>
				<Наименование>ПеречислениеСсылка.ЮрФизЛицо --&gt; ПеречислениеСсылка.ЮрФизЛицо</Наименование>
				<Порядок>1050</Порядок>
				<Источник>ПеречислениеСсылка.ЮрФизЛицо</Источник>
				<Приемник>ПеречислениеСсылка.ЮрФизЛицо</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ФизЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>50</Порядок>
						<Источник>ФизЛицо</Источник>
						<Приемник>ФизЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ЮрЛицо --&gt; ЮрЛицо</Наименование>
						<Порядок>100</Порядок>
						<Источник>ЮрЛицо</Источник>
						<Приемник>ЮрЛицо</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийПКО</Код>
				<Наименование>ПеречислениеСсылка.ВидыОперацийПКО --&gt; ПеречислениеСсылка.ВидыОперацийПКО</Наименование>
				<Порядок>1100</Порядок>
				<Источник>ПеречислениеСсылка.ВидыОперацийПКО</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОперацийПКО</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ВозвратДенежныхСредствПоставщиком --&gt; ВозвратДенеж</Наименование>
						<Порядок>50</Порядок>
						<Источник>ВозвратДенежныхСредствПоставщиком</Источник>
						<Приемник>ВозвратДенежныхСредствПоставщиком</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ОплатаПокупателя --&gt; ОплатаПокупателя</Наименование>
						<Порядок>100</Порядок>
						<Источник>ОплатаПокупателя</Источник>
						<Приемник>ОплатаПокупателя</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ПриходДенежныхСредствПрочее --&gt; ПриходДенежныхСред</Наименование>
						<Порядок>150</Порядок>
						<Источник>ПриходДенежныхСредствПрочее</Источник>
						<Приемник>ПриходДенежныхСредствПрочее</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ПрочиеРасчетыСКонтрагентами --&gt; ПрочиеРасчетыСКонт</Наименование>
						<Порядок>200</Порядок>
						<Источник>ПрочиеРасчетыСКонтрагентами</Источник>
						<Приемник>ПрочиеРасчетыСКонтрагентами</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОбъектовКонтактнойИнформации</Код>
				<Наименование>ПеречислениеСсылка.ВидыОбъектовКонтактнойИнформации --&gt; ПеречислениеСсылка.ВидыОбъектовКонтактнойИнф</Наименование>
				<Порядок>1150</Порядок>
				<Источник>ПеречислениеСсылка.ВидыОбъектовКонтактнойИнформации</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОбъектовКонтактнойИнформации</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Контрагенты --&gt; Контрагенты</Наименование>
						<Порядок>50</Порядок>
						<Источник>Контрагенты</Источник>
						<Приемник>Контрагенты</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Организации --&gt; Организации</Наименование>
						<Порядок>100</Порядок>
						<Источник>Организации</Источник>
						<Приемник>Организации</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ФизическиеЛица --&gt; ФизическиеЛица</Наименование>
						<Порядок>150</Порядок>
						<Источник>ФизическиеЛица</Источник>
						<Приемник>ФизическиеЛица</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыКонтактнойИнформации</Код>
				<Наименование>ПеречислениеСсылка.ТипыКонтактнойИнформации --&gt; ПеречислениеСсылка.ТипыКонтактнойИнформации</Наименование>
				<Порядок>1200</Порядок>
				<Источник>ПеречислениеСсылка.ТипыКонтактнойИнформации</Источник>
				<Приемник>ПеречислениеСсылка.ТипыКонтактнойИнформации</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Адрес --&gt; Адрес</Наименование>
						<Порядок>50</Порядок>
						<Источник>Адрес</Источник>
						<Приемник>Адрес</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>АдресЭлектроннойПочты --&gt; АдресЭлектроннойПочты</Наименование>
						<Порядок>100</Порядок>
						<Источник>АдресЭлектроннойПочты</Источник>
						<Приемник>АдресЭлектроннойПочты</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ВебСтраница --&gt; ВебСтраница</Наименование>
						<Порядок>150</Порядок>
						<Источник>ВебСтраница</Источник>
						<Приемник>ВебСтраница</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Другое --&gt; Другое</Наименование>
						<Порядок>200</Порядок>
						<Источник>Другое</Источник>
						<Приемник>Другое</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Телефон --&gt; Телефон</Наименование>
						<Порядок>250</Порядок>
						<Источник>Телефон</Источник>
						<Приемник>Телефон</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыИнформационныхКарт</Код>
				<Наименование>Перечисление: Типы информационных карт</Наименование>
				<Порядок>1250</Порядок>
				<Источник>ПеречислениеСсылка.ТипыИнформационныхКарт</Источник>
				<Приемник>ПеречислениеСсылка.ТипыИнформационныхКарт</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Дисконтная --&gt; Дисконтная</Наименование>
						<Порядок>50</Порядок>
						<Источник>Дисконтная</Источник>
						<Приемник>Дисконтная</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Регистрационная --&gt; Регистрационная</Наименование>
						<Порядок>100</Порядок>
						<Источник>Регистрационная</Источник>
						<Приемник>Регистрационная</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыДомов</Код>
				<Наименование>Перечисление: Типы домов</Наименование>
				<Порядок>1300</Порядок>
				<Источник>ПеречислениеСсылка.ТипыДомов</Источник>
				<Приемник>ПеречислениеСсылка.ТипыДомов</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Владение --&gt; Владение</Наименование>
						<Порядок>50</Порядок>
						<Источник>Владение</Источник>
						<Приемник>Владение</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Дом --&gt; Дом</Наименование>
						<Порядок>100</Порядок>
						<Источник>Дом</Источник>
						<Приемник>Дом</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыКвартир</Код>
				<Наименование>Перечисление: Типы квартир</Наименование>
				<Порядок>1350</Порядок>
				<Источник>ПеречислениеСсылка.ТипыКвартир</Источник>
				<Приемник>ПеречислениеСсылка.ТипыКвартир</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Квартира --&gt; Квартира</Наименование>
						<Порядок>50</Порядок>
						<Источник>Квартира</Источник>
						<Приемник>Квартира</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Офис --&gt; Офис</Наименование>
						<Порядок>100</Порядок>
						<Источник>Офис</Источник>
						<Приемник>Офис</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыКорпусов</Код>
				<Наименование>Перечисление: Типы корпусов</Наименование>
				<Порядок>1400</Порядок>
				<Источник>ПеречислениеСсылка.ТипыКорпусов</Источник>
				<Приемник>ПеречислениеСсылка.ТипыКорпусов</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Корпус --&gt; Корпус</Наименование>
						<Порядок>50</Порядок>
						<Источник>Корпус</Источник>
						<Приемник>Корпус</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Строение --&gt; Строение</Наименование>
						<Порядок>100</Порядок>
						<Источник>Строение</Источник>
						<Приемник>Строение</Приемник>
					</Значение>
				</Значения>
			</Правило>
		</Группа>
		<Группа>
			<Код>Планы видов характеристик</Код>
			<Наименование>Планы видов характеристик</Наименование>
			<Порядок>200</Порядок>
			<Правило>
				<Код>НазначенияСвойствКатегорийОбъектов</Код>
				<Наименование>ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов --&gt; ПланВидовХарактеристикСсылка.Наз</Наименование>
				<Порядок>50</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов</Источник>
				<Приемник>ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов"/>
						<КодПравилаКонвертации>НазначенияСвойствКатегорийОбъектов                </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>5</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Документы --&gt; Документы</Наименование>
						<Порядок>50</Порядок>
						<Источник>Документы</Источник>
						<Приемник>Документы</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Справочник_Контрагенты --&gt; Справочник_Контрагенты</Наименование>
						<Порядок>100</Порядок>
						<Источник>Справочник_Контрагенты</Источник>
						<Приемник>Справочник_Контрагенты</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Справочник_Номенклатура --&gt; Справочник_Номенклатур</Наименование>
						<Порядок>150</Порядок>
						<Источник>Справочник_Номенклатура</Источник>
						<Приемник>Справочник_Номенклатура</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Справочник_Склады --&gt; Справочник_Склады</Наименование>
						<Порядок>200</Порядок>
						<Источник>Справочник_Склады</Источник>
						<Приемник>Справочник_Склады</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Справочник_ФизическиеЛица --&gt; Справочник_Физически</Наименование>
						<Порядок>250</Порядок>
						<Источник>Справочник_ФизическиеЛица</Источник>
						<Приемник>Справочник_ФизическиеЛица</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>Справочники --&gt; Справочники</Наименование>
						<Порядок>300</Порядок>
						<Источник>Справочники</Источник>
						<Приемник>Справочники</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>Справочник_Организации --&gt; Справочник_Организации</Наименование>
						<Порядок>350</Порядок>
						<Источник>Справочник_Организации</Источник>
						<Приемник>Справочник_Организации</Приемник>
					</Значение>
					<Значение>
						<Код>8</Код>
						<Наименование>Справочник_ХарактеристикиНоменклатуры --&gt; Справочн</Наименование>
						<Порядок>400</Порядок>
						<Источник>Справочник_ХарактеристикиНоменклатуры</Источник>
						<Приемник>Справочник_ХарактеристикиНоменклатуры</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>СвойстваОбъектов</Код>
				<Наименование>ПланВидовХарактеристикСсылка.СвойстваОбъектов --&gt; ПланВидовХарактеристикСсылка.СвойстваОбъектов</Наименование>
				<Порядок>100</Порядок>
				<ПослеЗагрузки>Если Не ЗначениеЗаполнено(Объект.НазначениеСвойства) Тогда
	Объект.НазначениеСвойства = ПланыВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Справочник_Номенклатура;
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>ПланВидовХарактеристикСсылка.СвойстваОбъектов</Источник>
				<Приемник>ПланВидовХарактеристикСсылка.СвойстваОбъектов</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>НазначениеСвойства --&gt; НазначениеСвойства</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="НазначениеСвойства" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов"/>
						<Приемник Имя="НазначениеСвойства" Вид="Реквизит" Тип="ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов"/>
						<КодПравилаКонвертации>НазначенияСвойствКатегорийОбъектов                </КодПравилаКонвертации>
						<ПередВыгрузкой>//Если Источник.НазначениеСвойства = ПланыВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Справочник_Номенклатура Тогда
//	Отказ = Истина;
//КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ТипыШтрихкодов</Код>
				<Наименование>ПланВидовХарактеристикСсылка.ТипыШтрихкодов --&gt; ПланВидовХарактеристикСсылка.ТипыШтрихкодов</Наименование>
				<Порядок>150</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>ПланВидовХарактеристикСсылка.ТипыШтрихкодов</Источник>
				<Приемник>ПланВидовХарактеристикСсылка.ТипыШтрихкодов</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>EAN128 --&gt; EAN128</Наименование>
						<Порядок>50</Порядок>
						<Источник>EAN128</Источник>
						<Приемник>EAN128</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>EAN13 --&gt; EAN13</Наименование>
						<Порядок>100</Порядок>
						<Источник>EAN13</Источник>
						<Приемник>EAN13</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>EAN8 --&gt; EAN8</Наименование>
						<Порядок>150</Порядок>
						<Источник>EAN8</Источник>
						<Приемник>EAN8</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>CODE128 --&gt; Code128</Наименование>
						<Порядок>200</Порядок>
						<Источник>CODE128</Источник>
						<Приемник>Code128</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>CODE39 --&gt; Code39</Наименование>
						<Порядок>250</Порядок>
						<Источник>CODE39</Источник>
						<Приемник>Code39</Приемник>
					</Значение>
				</Значения>
			</Правило>
		</Группа>
		<Группа>
			<Код>Регистры сведений</Код>
			<Наименование>Регистры сведений</Наименование>
			<Порядок>250</Порядок>
			<Правило>
				<Код>ЗначенияСвойствОбъектовРегистрСведений</Код>
				<Наименование>РегистрСведенийЗапись.ЗначенияСвойствОбъектов --&gt; РегистрСведенийЗапись.ЗначенияСвойствОбъектов</Наименование>
				<Порядок>50</Порядок>
				<ПослеЗагрузки>ПровестиЗаписьНеЗаписанныхОбъектов();

// Получим наименование характеристики товара и список всех ее владельцев
Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
	
	НаименованиеХарактеристикиНоменклатуры = ПараметрыОбъекта["НаименованиеХарактеристикиНоменклатуры"];
	
	Попытка
		ВладельцыХарактеристики = ЗначениеИзСтрокиВнутр(ПараметрыОбъекта["ВладельцыХарактеристики"]);
	Исключение
		ВладельцыХарактеристики = Новый Массив;
	КонецПопытки;
	
	Если НРег(СокрЛП(НаименованиеХарактеристикиНоменклатуры)) = "не назначена" Тогда
		
		Объект.Очистить();
		
	Иначе
		// Производим поиск характеристики товара
		Если НЕ(ЗначениеЗаполнено(Объект.Отбор.Объект.Значение) ИЛИ ПустаяСтрока(НаименованиеХарактеристикиНоменклатуры)) И ТипЗнч(ВладельцыХарактеристики)=Тип("Массив") Тогда
			
			// Получим характеристику для каждого владельца
			Для каждого ТекСтрока Из ВладельцыХарактеристики Цикл
				
				// Восстанавливаем значение текущего владельца характеристики
				Владелец = Справочники.Номенклатура.ПолучитьСсылку(Новый УникальныйИдентификатор(ТекСтрока));
				
				// Найдем соответствующую характеристику
				ХарактеристикаНоменклатуры = Справочники.ХарактеристикиНоменклатуры.НайтиПоНаименованию(НаименованиеХарактеристикиНоменклатуры, Истина,, Владелец);
				
				// Если не удалось найти - создаем новый элемент
				Если НЕ ЗначениеЗаполнено(ХарактеристикаНоменклатуры) И ЗначениеЗаполнено(Владелец) Тогда
					
					ХарактеристикаНоменклатурыОбъект = Справочники.ХарактеристикиНоменклатуры.СоздатьЭлемент();
					ХарактеристикаНоменклатурыОбъект.Владелец     = Владелец;
					ХарактеристикаНоменклатурыОбъект.Наименование = НаименованиеХарактеристикиНоменклатуры;
					ХарактеристикаНоменклатурыОбъект.ОбменДанными.Загрузка = Истина;
					ХарактеристикаНоменклатурыОбъект.Записать();
					ХарактеристикаНоменклатуры = ХарактеристикаНоменклатурыОбъект.Ссылка;
					
				КонецЕсли;
				
				// Внесем изменения в параметры набора записей и произведем его запись
				Если ЗначениеЗаполнено(ХарактеристикаНоменклатуры) Тогда
					
					Объект.Отбор.Объект.Установить(ХарактеристикаНоменклатуры, Истина);
					Для каждого Запись Из Объект Цикл
						Запись.Объект = ХарактеристикаНоменклатуры;
					КонецЦикла;
					
					Объект.ОбменДанными.Загрузка = Истина;
					Объект.Записать(Истина);
					
				КонецЕсли;
				
			КонецЦикла;
			
			// Если не удалось восстановить значения характеристик, то не будем загружать такой набор
			Если ВладельцыХарактеристики.Количество()=0 И НЕ ЗначениеЗаполнено(Объект.Отбор.Объект.Значение) Тогда
				
				Объект.Очистить();
				
			КонецЕсли;
			
		КонецЕсли;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
				<Источник>РегистрСведенийЗапись.ЗначенияСвойствОбъектов</Источник>
				<Приемник>РегистрСведенийЗапись.ЗначенияСвойствОбъектов</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Значение --&gt; Значение</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Значение" Вид="Ресурс"/>
						<Приемник Имя="Значение" Вид="Ресурс"/>
						<ПередВыгрузкой>//Если ТипЗнч(Источник.Значение) = Тип("Булево") 
//	Или ТипЗнч(Источник.Значение) = Тип("Строка")
//	Или ТипЗнч(Источник.Значение) = Тип("Дата")
//	Или ТипЗнч(Источник.Значение) = Тип("Число")
//	Или ТипЗнч(Источник.Значение) = Тип("СправочникСсылка.КлассификаторЕдиницИзмерения")
//	Или ТипЗнч(Источник.Значение) = Тип("СправочникСсылка.Контрагенты")
//	Или ТипЗнч(Источник.Значение) = Тип("СправочникСсылка.ЗначенияСвойствОбъектов")
//	Или ТипЗнч(Источник.Значение) = Тип("СправочникСсылка.Номенклатура")
//	Или ТипЗнч(Источник.Значение) = Тип("СправочникСсылка.Склады")
//	Или ТипЗнч(Источник.Значение) = Тип("СправочникСсылка.Пользователи")
//	Или ТипЗнч(Источник.Значение) = Тип("СправочникСсылка.Организации")
//	Или ТипЗнч(Источник.Значение) = Тип("СправочникСсылка.КлассификаторСтранМира")
//	Или ТипЗнч(Источник.Значение) = Тип("СправочникСсылка.ФизическиеЛица") Тогда
//	
//	//все правильно, переносим
//	
//Иначе
//	
//	Отказ = Истина;

//КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Объект --&gt; Объект</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Объект" Вид="Измерение"/>
						<Приемник Имя="Объект" Вид="Измерение"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Свойство --&gt; Свойство</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Свойство" Вид="Измерение" Тип="ПланВидовХарактеристикСсылка.СвойстваОбъектов"/>
						<Приемник Имя="Свойство" Вид="Измерение" Тип="ПланВидовХарактеристикСсылка.СвойстваОбъектов"/>
						<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>250</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = ?(ТипЗнч(Источник.Объект)=Тип("СправочникСсылка.ХарактеристикиНоменклатуры"), Источник.Объект.Наименование, "");</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>300</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВладельцыХарактеристики</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>ВладельцыХарактеристики = Новый Массив;

Если ТипЗнч(Источник.Объект)=Тип("СправочникСсылка.ХарактеристикиНоменклатуры") Тогда
	
	Если ТипЗнч(Источник.Объект.Владелец)=Тип("СправочникСсылка.ВидыНоменклатуры") Тогда
		
		ТекстЗапроса = 
		"ВЫБРАТЬ
		|	Номенклатура.Ссылка КАК Ссылка
		|ИЗ
		|	Справочник.Номенклатура КАК Номенклатура
		|ГДЕ
		|	(НЕ Номенклатура.ЭтоГруппа)
		|	И Номенклатура.ВидНоменклатуры = &amp;ВидНоменклатуры";
		Запрос = Новый Запрос(ТекстЗапроса);
		Запрос.УстановитьПараметр("ВидНоменклатуры", Источник.Объект.Владелец);
		
		ВладельцыХарактеристики = Запрос.Выполнить().Выгрузить().ВыгрузитьКолонку("Ссылка");
		
	Иначе
		
		Если ЗначениеЗаполнено(Источник.Объект) Тогда
			ВладельцыХарактеристики.Добавить(Источник.Объект.Владелец);
		КонецЕсли;
		
	КонецЕсли;
	
КонецЕсли;

МассивУникальныхИдентификаторовВладельцев = Новый Массив;

Для каждого ТекСтрока Из ВладельцыХарактеристики Цикл
	
	МассивУникальныхИдентификаторовВладельцев.Добавить(Строка(ТекСтрока.УникальныйИдентификатор()));
	
КонецЦикла;

Значение = ЗначениеВСтрокуВнутр(МассивУникальныхИдентификаторовВладельцев);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КатегорииОбъектовРегистрСведений</Код>
				<Наименование>РегистрСведенийЗапись.КатегорииОбъектов --&gt; РегистрСведенийЗапись.КатегорииОбъектов</Наименование>
				<Порядок>100</Порядок>
				<Источник>РегистрСведенийЗапись.КатегорииОбъектов</Источник>
				<Приемник>РегистрСведенийЗапись.КатегорииОбъектов</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Категория --&gt; Категория</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Категория" Вид="Измерение" Тип="СправочникСсылка.КатегорииОбъектов"/>
						<Приемник Имя="Категория" Вид="Измерение" Тип="СправочникСсылка.КатегорииОбъектов"/>
						<КодПравилаКонвертации>КатегорииОбъектов                                 </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Объект --&gt; Объект</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Объект" Вид="Измерение"/>
						<Приемник Имя="Объект" Вид="Измерение"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КомплектующиеНоменклатуры</Код>
				<Наименование>РегистрСведенийЗапись.КомплектующиеНоменклатуры --&gt; РегистрСведенийЗапись.КомплектующиеНоменклатуры</Наименование>
				<Порядок>150</Порядок>
				<ПослеЗагрузки>ПровестиЗаписьНеЗаписанныхОбъектов();

Для Каждого Запись Из Объект Цикл
	
	// Получим наименование характеристики товара
	НаименованиеХарактеристикиНоменклатуры = ПараметрыОбъекта["НаименованиеХарактеристикиНоменклатуры"];
	
	// Производим поиск характеристики товара
    Если НРег(СокрЛП(НаименованиеХарактеристикиНоменклатуры)) &lt;&gt; "не назначена" Тогда

	Если НЕ(ЗначениеЗаполнено(Запись.ХарактеристикаНоменклатуры) ИЛИ ПустаяСтрока(НаименованиеХарактеристикиНоменклатуры)) Тогда
		
		Запись.ХарактеристикаНоменклатуры = Справочники.ХарактеристикиНоменклатуры.НайтиПоНаименованию(НаименованиеХарактеристикиНоменклатуры, Истина,, Запись.Номенклатура);
		
		// Если не удалось найти - создаем новый элемент
		Если НЕ ЗначениеЗаполнено(Запись.ХарактеристикаНоменклатуры) И ЗначениеЗаполнено(Запись.Номенклатура) Тогда
			
			ХарактеристикаНоменклатурыОбъект = Справочники.ХарактеристикиНоменклатуры.СоздатьЭлемент();
			ХарактеристикаНоменклатурыОбъект.Владелец     = Запись.Номенклатура;
			ХарактеристикаНоменклатурыОбъект.Наименование = НаименованиеХарактеристикиНоменклатуры;
			ХарактеристикаНоменклатурыОбъект.ОбменДанными.Загрузка = Истина;
			ХарактеристикаНоменклатурыОбъект.Записать();
			Запись.ХарактеристикаНоменклатуры = ХарактеристикаНоменклатурыОбъект.Ссылка;
			
		КонецЕсли;
		
	КонецЕсли;
	
	КонецЕсли;
	// Получим наименование характеристики товара
	НаименованиеХарактеристикиКомплектующей = ПараметрыОбъекта["НаименованиеХарактеристикиКомплектующей"];
	
	// Производим поиск характеристики товара
	Если НРег(СокрЛП(НаименованиеХарактеристикиКомплектующей)) &lt;&gt; "не назначена" Тогда
		
	Если НЕ(ЗначениеЗаполнено(Запись.ХарактеристикаКомплектующей) ИЛИ ПустаяСтрока(НаименованиеХарактеристикиКомплектующей)) Тогда
		
		Запись.ХарактеристикаКомплектующей = Справочники.ХарактеристикиНоменклатуры.НайтиПоНаименованию(НаименованиеХарактеристикиКомплектующей, Истина,, Запись.Комплектующая);
		
		// Если не удалось найти - создаем новый элемент
		Если НЕ ЗначениеЗаполнено(Запись.ХарактеристикаКомплектующей) И ЗначениеЗаполнено(Запись.Комплектующая) Тогда
			
			ХарактеристикаНоменклатурыОбъект = Справочники.ХарактеристикиНоменклатуры.СоздатьЭлемент();
			ХарактеристикаНоменклатурыОбъект.Владелец     = Запись.Комплектующая;
			ХарактеристикаНоменклатурыОбъект.Наименование = НаименованиеХарактеристикиКомплектующей;
			ХарактеристикаНоменклатурыОбъект.ОбменДанными.Загрузка = Истина;
			ХарактеристикаНоменклатурыОбъект.Записать();
			Запись.ХарактеристикаКомплектующей = ХарактеристикаНоменклатурыОбъект.Ссылка;
			
		КонецЕсли;
		
	КонецЕсли;
	
	КонецЕсли;

	// Внесем изменения в параметры отбора
	Объект.Отбор.ХарактеристикаНоменклатуры .Установить(Запись.ХарактеристикаНоменклатуры,  Истина);
	Объект.Отбор.Комплектующая              .Установить(Запись.Комплектующая,               Истина);
	Объект.Отбор.ХарактеристикаКомплектующей.Установить(Запись.ХарактеристикаКомплектующей, Истина);
	
КонецЦикла;</ПослеЗагрузки>
				<Источник>РегистрСведенийЗапись.КомплектующиеНоменклатуры</Источник>
				<Приемник>РегистрСведенийЗапись.КомплектующиеНоменклатуры</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДоляСтоимости --&gt; ДоляСтоимости</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ДоляСтоимости" Вид="Ресурс" Тип="Число"/>
						<Приемник Имя="ДоляСтоимости" Вид="Ресурс" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ЕдиницаИзмерения" Вид="Ресурс" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<Приемник Имя="ЕдиницаИзмерения" Вид="Ресурс" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Количество --&gt; Количество</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Количество" Вид="Ресурс" Тип="Число"/>
						<Приемник Имя="Количество" Вид="Ресурс" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Комплектующая --&gt; Комплектующая</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Комплектующая" Вид="Измерение" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="Комплектующая" Вид="Измерение" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Номенклатура" Вид="Измерение" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="Номенклатура" Вид="Измерение" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>350</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>400</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>НаименованиеХарактеристикиКомплектующей</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.ХарактеристикаКомплектующей.Наименование;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>НазначенияСвойствОбъектов</Код>
				<Наименование>РегистрСведенийЗапись.НазначенияСвойствОбъектов --&gt; РегистрСведенийЗапись.НазначенияСвойствОбъектов</Наименование>
				<Порядок>200</Порядок>
				<Источник>РегистрСведенийЗапись.НазначенияСвойствОбъектов</Источник>
				<Приемник>РегистрСведенийЗапись.НазначенияСвойствОбъектов</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Объект --&gt; Объект</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Объект" Вид="Измерение"/>
						<Приемник Имя="Объект" Вид="Измерение"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Свойство --&gt; Свойство</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Свойство" Вид="Измерение" Тип="ПланВидовХарактеристикСсылка.СвойстваОбъектов"/>
						<Приемник Имя="Свойство" Вид="Измерение" Тип="ПланВидовХарактеристикСсылка.СвойстваОбъектов"/>
						<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ОтветственныеЛицаОрганизации</Код>
				<Наименование>РегистрСведенийЗапись.ОтветственныеЛицаОрганизаций --&gt; РегистрСведенийЗапись.ОтветственныеЛицаОргани</Наименование>
				<Порядок>250</Порядок>
				<Источник>РегистрСведенийЗапись.ОтветственныеЛицаОрганизаций</Источник>
				<Приемник>РегистрСведенийЗапись.ОтветственныеЛицаОрганизации</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Должность --&gt; Должность</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Должность" Вид="Ресурс" Тип="СправочникСсылка.ДолжностиОрганизаций"/>
						<Приемник Имя="Должность" Вид="Ресурс" Тип="СправочникСсылка.ДолжностиОрганизаций"/>
						<КодПравилаКонвертации>ДолжностиОрганизаций                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ОтветственноеЛицо --&gt; ОтветственноеЛицо</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ОтветственноеЛицо" Вид="Измерение" Тип="ПеречислениеСсылка.ОтветственныеЛицаОрганизаций"/>
						<Приемник Имя="ОтветственноеЛицо" Вид="Измерение" Тип="ПеречислениеСсылка.ОтветственныеЛицаОрганизации"/>
						<КодПравилаКонвертации>ОтветственныеЛицаОрганизацииСправочник            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Период --&gt; Период</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Период" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Период" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>СтруктурнаяЕдиница --&gt; СтруктурнаяЕдиница</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="СтруктурнаяЕдиница" Вид="Измерение" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="СтруктурнаяЕдиница" Вид="Измерение" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ФизическоеЛицо --&gt; ФизическоеЛицо</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ФизическоеЛицо" Вид="Ресурс" Тип="СправочникСсылка.ФизическиеЛица"/>
						<Приемник Имя="ФизическоеЛицо" Вид="Ресурс" Тип="СправочникСсылка.ФизическиеЛица"/>
						<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПаспортныеДанныеФизЛиц</Код>
				<Наименование>РегистрСведенийЗапись.ПаспортныеДанныеФизЛиц --&gt; РегистрСведенийЗапись.ПаспортныеДанныеФизЛиц</Наименование>
				<Порядок>300</Порядок>
				<Источник>РегистрСведенийЗапись.ПаспортныеДанныеФизЛиц</Источник>
				<Приемник>РегистрСведенийЗапись.ПаспортныеДанныеФизЛиц</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДокументВид --&gt; ДокументВид</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ДокументВид" Вид="Ресурс" Тип="СправочникСсылка.ДокументыУдостоверяющиеЛичность"/>
						<Приемник Имя="ДокументВид" Вид="Ресурс" Тип="СправочникСсылка.ДокументыУдостоверяющиеЛичность"/>
						<КодПравилаКонвертации>ДокументыУдостоверяющиеЛичность                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ДокументДатаВыдачи --&gt; ДокументДатаВыдачи</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ДокументДатаВыдачи" Вид="Ресурс" Тип="Дата"/>
						<Приемник Имя="ДокументДатаВыдачи" Вид="Ресурс" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ДокументКемВыдан --&gt; ДокументКемВыдан</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ДокументКемВыдан" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="ДокументКемВыдан" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ДокументКодПодразделения --&gt; ДокументКодПодразделения</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ДокументКодПодразделения" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="ДокументКодПодразделения" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ДокументНомер --&gt; ДокументНомер</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ДокументНомер" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="ДокументНомер" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ДокументСерия --&gt; ДокументСерия</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ДокументСерия" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="ДокументСерия" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Период --&gt; Период</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Период" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Период" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ФизЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ФизЛицо" Вид="Измерение" Тип="СправочникСсылка.ФизическиеЛица"/>
						<Приемник Имя="ФизЛицо" Вид="Измерение"/>
						<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ФИОФизЛиц</Код>
				<Наименование>РегистрСведенийЗапись.ФИОФизЛиц --&gt; РегистрСведенийЗапись.ФИОФизЛиц</Наименование>
				<Порядок>400</Порядок>
				<Источник>РегистрСведенийЗапись.ФИОФизЛиц</Источник>
				<Приемник>РегистрСведенийЗапись.ФИОФизЛиц</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Имя --&gt; Имя</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Имя" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Имя" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Отчество --&gt; Отчество</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Отчество" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Отчество" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Период --&gt; Период</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Период" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Период" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Фамилия --&gt; Фамилия</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Фамилия" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Фамилия" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ФизЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ФизЛицо" Вид="Измерение"/>
						<Приемник Имя="ФизЛицо" Вид="Измерение"/>
						<ПередВыгрузкой>Если ТипЗнч(Источник.ФизЛицо) = Тип("СправочникСсылка.ФизическиеЛица") Тогда
	ИмяПКО = "ФизическиеЛица";
ИначеЕсли ТипЗнч(Источник.ФизЛицо) = Тип("СправочникСсылка.Организации") Тогда
	ИмяПКО = "Организации";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Штрихкоды</Код>
				<Наименование>РегистрСведенийЗапись.Штрихкоды --&gt; РегистрСведенийЗапись.Штрихкоды</Наименование>
				<Порядок>450</Порядок>
				<ПослеЗагрузки>ПровестиЗаписьНеЗаписанныхОбъектов();

Для Каждого Запись Из Объект Цикл
	
	// Получим наименование характеристики товара
	НаименованиеХарактеристикиНоменклатуры = ПараметрыОбъекта["НаименованиеХарактеристикиНоменклатуры"];
	
	// Производим поиск характеристики товара
	Если НРег(СокрЛП(НаименованиеХарактеристикиНоменклатуры)) &lt;&gt; "не назначена" Тогда
	
	Если НЕ(ЗначениеЗаполнено(Запись.ХарактеристикаНоменклатуры) ИЛИ ПустаяСтрока(НаименованиеХарактеристикиНоменклатуры)) И ТипЗнч(Запись.Владелец)=Тип("СправочникСсылка.Номенклатура") Тогда
		
		Запись.ХарактеристикаНоменклатуры = Справочники.ХарактеристикиНоменклатуры.НайтиПоНаименованию(НаименованиеХарактеристикиНоменклатуры, Истина,, Запись.Владелец);
		
		// Если не удалось найти - создаем новый элемент
		Если НЕ ЗначениеЗаполнено(Запись.ХарактеристикаНоменклатуры) И ЗначениеЗаполнено(Запись.Владелец) Тогда
			
			ХарактеристикаНоменклатурыОбъект = Справочники.ХарактеристикиНоменклатуры.СоздатьЭлемент();
			ХарактеристикаНоменклатурыОбъект.Владелец     = Запись.Владелец;
			ХарактеристикаНоменклатурыОбъект.Наименование = НаименованиеХарактеристикиНоменклатуры;
			ХарактеристикаНоменклатурыОбъект.ОбменДанными.Загрузка = Истина;
			ХарактеристикаНоменклатурыОбъект.Записать();
			Запись.ХарактеристикаНоменклатуры = ХарактеристикаНоменклатурыОбъект.Ссылка;
			
		КонецЕсли;
		
	КонецЕсли;
	
	КонецЕсли;
	// Внесем изменения в параметры отбора
	Объект.Отбор.ХарактеристикаНоменклатуры.Установить(Запись.ХарактеристикаНоменклатуры, Истина);
	
	// Качество устанавливается в новый только владелец не ссылка на справочник "Информационные карты"
	Если ТипЗнч(Запись.Владелец) &lt;&gt; Тип("СправочникСсылка.ИнформационныеКарты") Тогда
		Если НЕ ЗначениеЗаполнено(Запись.Качество) Тогда
			Запись.Качество = Справочники.Качество.Новый;
		КонецЕсли;
	КонецЕсли;
	
КонецЦикла;</ПослеЗагрузки>
				<Источник>РегистрСведенийЗапись.Штрихкоды</Источник>
				<Приемник>РегистрСведенийЗапись.Штрихкоды</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Владелец" Вид="Измерение"/>
						<Приемник Имя="Владелец" Вид="Измерение"/>
						<ПередВыгрузкой>Если ТипЗнч(Источник.Владелец) = Тип("СправочникСсылка.ИнформационныеКарты") Тогда
	ИмяПКО = "ИнформационныеКарты";
Иначе
	ИмяПКО = "Номенклатура";
	Если ТипЗнч(Источник.Владелец) = Тип("СправочникСсылка.СерийныеНомера") Тогда
		Значение = Источник.Владелец.Владелец
	КонецЕсли;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Штрихкод --&gt; Штрихкод</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Штрихкод" Вид="Измерение" Тип="Строка"/>
						<Приемник Имя="Штрихкод" Вид="Измерение" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ЕдиницаИзмерения --&gt;</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЕдиницаИзмерения" Вид="Измерение" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<Приемник Имя="ЕдиницаИзмерения" Вид="Измерение" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ТипШтрихкода --&gt;</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ТипШтрихкода" Вид="Измерение" Тип="ПланВидовХарактеристикСсылка.ТипыШтрихкодов"/>
						<Приемник Имя="ТипШтрихкода" Вид="Измерение" Тип="ПланВидовХарактеристикСсылка.ТипыШтрихкодов"/>
						<КодПравилаКонвертации>ТипыШтрихкодов                                    </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>350</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>НаименованиеХарактеристикиНоменклатуры</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.ХарактеристикаНоменклатуры.Наименование;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ХарактеристикаНоменклатуры --&gt; ХарактеристикаНоменклатуры</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ХарактеристикаНоменклатуры" Вид="Измерение" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
						<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Измерение" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
						<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ПредставлениеШтрихкода --&gt; ПредставлениеШтрихкода</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПредставлениеШтрихкода" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ПредставлениеШтрихкода" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КонтактнаяИнформация</Код>
				<Наименование>РегистрСведенийЗапись.КонтактнаяИнформация --&gt; РегистрСведенийЗапись.КонтактнаяИнформация</Наименование>
				<Порядок>500</Порядок>
				<Источник>РегистрСведенийЗапись.КонтактнаяИнформация</Источник>
				<Приемник>РегистрСведенийЗапись.КонтактнаяИнформация</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Вид --&gt; Вид</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Вид" Вид="Измерение"/>
						<Приемник Имя="Вид" Вид="Измерение"/>
						<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
						<ПередВыгрузкой>
Если ТипЗнч(Источник.Вид) &lt;&gt; Тип("СправочникСсылка.ВидыКонтактнойИнформации") Тогда
	
	ИмяПКО = "";
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Объект --&gt; Объект</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Объект" Вид="Измерение"/>
						<Приемник Имя="Объект" Вид="Измерение"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Тип --&gt; Тип</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Тип" Вид="Измерение" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
						<Приемник Имя="Тип" Вид="Измерение" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
						<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ЗначениеПоУмолчанию --&gt; ЗначениеПоУмолчанию</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЗначениеПоУмолчанию" Вид="Ресурс" Тип="Булево"/>
						<Приемник Имя="ЗначениеПоУмолчанию" Вид="Ресурс" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Комментарий" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Поле1 --&gt; Поле1</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Поле1" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле1" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Поле10 --&gt; Поле10</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Поле10" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле10" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Поле2 --&gt; Поле2</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Поле2" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле2" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Поле3 --&gt; Поле3</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Поле3" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле3" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Поле4 --&gt; Поле4</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Поле4" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле4" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Поле5 --&gt; Поле5</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Поле5" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле5" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Поле6 --&gt; Поле6</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Поле6" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле6" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>Поле7 --&gt; Поле7</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Поле7" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле7" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>Поле8 --&gt; Поле8</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Поле8" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле8" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>Поле9 --&gt; Поле9</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Поле9" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле9" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>Представление --&gt; Представление</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="Представление" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Представление" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>ТипДома --&gt; ТипДома</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="ТипДома" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыДомов"/>
						<Приемник Имя="ТипДома" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыДомов"/>
						<КодПравилаКонвертации>ТипыДомов                                         </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>ТипКвартиры --&gt; ТипКвартиры</Наименование>
						<Порядок>950</Порядок>
						<Источник Имя="ТипКвартиры" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыКвартир"/>
						<Приемник Имя="ТипКвартиры" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыКвартир"/>
						<КодПравилаКонвертации>ТипыКвартир                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование>ТипКорпуса --&gt; ТипКорпуса</Наименование>
						<Порядок>1000</Порядок>
						<Источник Имя="ТипКорпуса" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыКорпусов"/>
						<Приемник Имя="ТипКорпуса" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыКорпусов"/>
						<КодПравилаКонвертации>ТипыКорпусов                                      </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
	</ПравилаКонвертацииОбъектов>
	<ПравилаВыгрузкиДанных>
		<Группа Отключить="false">
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>50</Порядок>
			<Правило Отключить="false">
				<Код>ПеремещениеТоваров</Код>
				<Наименование>ПеремещениеТоваров</Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>ПеремещениеТоваров                                </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПеремещениеТоваров</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>РасходныйКассовыйОрдер</Код>
				<Наименование>РасходныйКассовыйОрдер</Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>РасходныйКассовыйОрдер                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.РасходныйКассовыйОрдер</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>СписаниеТоваров</Код>
				<Наименование>СписаниеТоваров</Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>СписаниеТоваров                                   </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.СписаниеТоваров</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>УстановкаЦенНоменклатуры</Код>
				<Наименование>УстановкаЦенНоменклатуры</Наименование>
				<Порядок>350</Порядок>
				<КодПравилаКонвертации>УстановкаЦенНоменклатуры                          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.УстановкаЦенНоменклатуры</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВнутреннееПеремещениеНаличныхДенежныхСредств</Код>
				<Наименование>ВнутреннееПеремещениеНаличныхДенежныхСредств</Наименование>
				<Порядок>450</Порядок>
				<КодПравилаКонвертации>ВнутреннееПеремещениеНаличныхДенежныхСредств      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ВнутреннееПеремещениеНаличныхДенежныхСредств</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВозвратТоваровОтПокупателя</Код>
				<Наименование>ВозвратТоваровОтПокупателя</Наименование>
				<Порядок>500</Порядок>
				<КодПравилаКонвертации>ВозвратТоваровОтПокупателя                        </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ВозвратТоваровОтПокупателя</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>КомплектацияНоменклатуры</Код>
				<Наименование>КомплектацияНоменклатуры</Наименование>
				<Порядок>550</Порядок>
				<КодПравилаКонвертации>КомплектацияНоменклатуры                          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.КомплектацияНоменклатуры</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ОплатаОтПокупателяПлатежнойКартой</Код>
				<Наименование>ОплатаОтПокупателяПлатежнойКартой</Наименование>
				<Порядок>600</Порядок>
				<КодПравилаКонвертации>ОплатаОтПокупателяПлатежнойКартой                 </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ОплатаОтПокупателяПлатежнойКартой</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ОтчетОРозничныхПродажах</Код>
				<Наименование>ОтчетОРозничныхПродажах</Наименование>
				<Порядок>650</Порядок>
				<КодПравилаКонвертации>ОтчетОРозничныхПродажах                           </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ОтчетОРозничныхПродажах</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ОприходованиеТоваров</Код>
				<Наименование>ОприходованиеТоваров</Наименование>
				<Порядок>700</Порядок>
				<КодПравилаКонвертации>ОприходованиеТоваров                              </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ОприходованиеТоваров</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ПриходныйОрдерНаТовары</Код>
				<Наименование>ПриходныйОрдерНаТовары</Наименование>
				<Порядок>800</Порядок>
				<КодПравилаКонвертации>ПриходныйОрдерНаТовары                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПриходныйОрдерНаТовары</ОбъектВыборки>
				<ПослеВыгрузкиОбъекта>ТипДокументаОснования = ТипЗнч(Объект.ДокументОснование); 
Если ТипДокументаОснования = Тип("ДокументСсылка.ВозвратТоваровОтПокупателя") 
 Или ТипДокументаОснования = Тип("ДокументСсылка.ПоступлениеТоваров") Тогда
 
	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	ТоварыКПоступлениюРеализацииОстатки.Номенклатура,
	|	ТоварыКПоступлениюРеализацииОстатки.КоличествоОстаток
	|ИЗ
	|	РегистрНакопления.ТоварыКПоступлениюРеализации.Остатки КАК ТоварыКПоступлениюРеализацииОстатки
	|ГДЕ
	|	ТоварыКПоступлениюРеализацииОстатки.ДокументОснование = &amp;ДокументОснование";
	
	Запрос.УстановитьПараметр("ДокументОснование", Объект.ДокументОснование);
	
	РезультатЗапроса = Запрос.Выполнить();
	
	//документ нужно выгружать только тогда, когда уже готов полный ПО, т.е. РезультатЗапроса - пустой
	Если РезультатЗапроса.Пустой() Тогда
		
		Если ТипДокументаОснования = Тип("ДокументСсылка.ВозвратТоваровОтПокупателя") Тогда
			ВыгрузитьПоПравилу(Объект.ДокументОснование, ,,,"ВозвратТоваровОтПокупателя");
		ИначеЕсли ТипДокументаОснования = Тип("ДокументСсылка.ПоступлениеТоваров") Тогда
			ВыгрузитьПоПравилу(Объект.ДокументОснование, ,,,"ПоступлениеТоваровУслуг");
		КонецЕсли;
		
	КонецЕсли;
		
	
КонецЕсли;</ПослеВыгрузкиОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>РасходныйОрдерНаТовары</Код>
				<Наименование>РасходныйОрдерНаТовары</Наименование>
				<Порядок>850</Порядок>
				<КодПравилаКонвертации>РасходныйОрдерНаТовары                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.РасходныйОрдерНаТовары</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ПриходныйКассовыйОрдер</Код>
				<Наименование>ПриходныйКассовыйОрдер</Наименование>
				<Порядок>900</Порядок>
				<КодПравилаКонвертации>ПриходныйКассовыйОрдер                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПриходныйКассовыйОрдер</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ИнвентаризацияТоваров</Код>
				<Наименование>ИнвентаризацияТоваров</Наименование>
				<Порядок>950</Порядок>
				<КодПравилаКонвертации>ИнвентаризацияТоваровНаСкладе                     </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ИнвентаризацияТоваров</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ПоступлениеТоваров</Код>
				<Наименование>ПоступлениеТоваров</Наименование>
				<Порядок>1000</Порядок>
				<КодПравилаКонвертации>ПоступлениеТоваровУслуг                           </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПоступлениеТоваров</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>РеализацияТоваров</Код>
				<Наименование>РеализацияТоваров</Наименование>
				<Порядок>1050</Порядок>
				<КодПравилаКонвертации>РеализацияТоваровУслуг                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.РеализацияТоваров</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>УстановкаЦенНоменклатурыВМагазине</Код>
				<Наименование>УстановкаЦенНоменклатурыВМагазине</Наименование>
				<Порядок>1100</Порядок>
				<КодПравилаКонвертации>УстановкаЦенНоменклатурыВМагазине                 </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.УстановкаЦенНоменклатурыВМагазине</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВозвратТоваровПоставщику</Код>
				<Наименование>ВозвратТоваровПоставщику</Наименование>
				<Порядок>1150</Порядок>
				<КодПравилаКонвертации>ВозвратТоваровПоставщику                          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ВозвратТоваровПоставщику</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВнутреннийЗаказ</Код>
				<Наименование>ВнутреннийЗаказ</Наименование>
				<Порядок>1200</Порядок>
				<КодПравилаКонвертации>ВнутреннийЗаказ                                   </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ВнутреннийЗаказ</ОбъектВыборки>
			</Правило>
		</Группа>
		<Группа Отключить="false">
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>100</Порядок>
			<Правило Отключить="false">
				<Код>ТипыЦенНоменклатуры</Код>
				<Наименование>ТипыЦенНоменклатуры</Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>ТипыЦенНоменклатуры                               </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ТипыЦенНоменклатуры</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ДолжностиОрганизаций</Код>
				<Наименование>ДолжностиОрганизаций</Наименование>
				<Порядок>300</Порядок>
				<КодПравилаКонвертации>ДолжностиОрганизаций                              </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ДолжностиОрганизаций</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>КатегорииОбъектов</Код>
				<Наименование>КатегорииОбъектов</Наименование>
				<Порядок>400</Порядок>
				<КодПравилаКонвертации>КатегорииОбъектов                                 </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.КатегорииОбъектов</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ЗначенияСвойствОбъектов</Код>
				<Наименование>ЗначенияСвойствОбъектов</Наименование>
				<Порядок>450</Порядок>
				<КодПравилаКонвертации>ЗначенияСвойствОбъектов                           </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ЗначенияСвойствОбъектов</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ДокументыУдостоверяющиеЛичность</Код>
				<Наименование>ДокументыУдостоверяющиеЛичность</Наименование>
				<Порядок>550</Порядок>
				<КодПравилаКонвертации>ДокументыУдостоверяющиеЛичность                   </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ДокументыУдостоверяющиеЛичность</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Кассы</Код>
				<Наименование>Кассы</Наименование>
				<Порядок>650</Порядок>
				<КодПравилаКонвертации>Кассы                                             </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Кассы</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Пользователи</Код>
				<Наименование>Пользователи</Наименование>
				<Порядок>700</Порядок>
				<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Пользователи</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ФизическиеЛица</Код>
				<Наименование>ФизическиеЛица</Наименование>
				<Порядок>750</Порядок>
				<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ФизическиеЛица</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ИнформационныеКарты</Код>
				<Наименование>ИнформационныеКарты</Наименование>
				<Порядок>800</Порядок>
				<КодПравилаКонвертации>ИнформационныеКарты                               </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ИнформационныеКарты</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВидыДисконтныхКарт</Код>
				<Наименование>ВидыДисконтныхКарт</Наименование>
				<Порядок>850</Порядок>
				<КодПравилаКонвертации>ВидыДисконтныхКарт                                </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ВидыДисконтныхКарт</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Контрагенты</Код>
				<Наименование>Контрагенты</Наименование>
				<Порядок>900</Порядок>
				<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Контрагенты</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Номенклатура</Код>
				<Наименование>Номенклатура</Наименование>
				<Порядок>950</Порядок>
				<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Номенклатура</ОбъектВыборки>
				<ПослеВыгрузкиОбъекта>Если (НЕ Объект.ЭтоГруппа) И Объект.ВидНоменклатуры.ИспользованиеХарактеристик=Перечисления.ВариантыВеденияДополнительныхДанныхПоНоменклатуре.ИспользоватьОбщиеДляВидаНоменклатуры Тогда
	
	Выборка = Справочники.ХарактеристикиНоменклатуры.Выбрать(, Объект.ВидНоменклатуры);
	
	Пока Выборка.Следующий() Цикл
		
		// Создадим новый объект элемента характеристики
		ХарактеристикаНоменклатурыОбъект = Справочники.ХарактеристикиНоменклатуры.СоздатьЭлемент();
		ХарактеристикаНоменклатурыОбъект.Владелец        = Объект.Ссылка;
		ХарактеристикаНоменклатурыОбъект.Наименование    = Выборка.Наименование;
		ХарактеристикаНоменклатурыОбъект.ПометкаУдаления = Выборка.ПометкаУдаления;
		
		// Выгружаем новый объект элемента характеристики
		ВыгрузитьПоПравилу(ХарактеристикаНоменклатурыОбъект,,,, "ХарактеристикиНоменклатуры");
		
	КонецЦикла;
	
КонецЕсли;</ПослеВыгрузкиОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>КлассификаторЕдиницИзмерения</Код>
				<Наименование>КлассификаторЕдиницИзмерения</Наименование>
				<Порядок>1000</Порядок>
				<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.КлассификаторЕдиницИзмерения</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВидыНоменклатуры</Код>
				<Наименование>ВидыНоменклатуры</Наименование>
				<Порядок>1050</Порядок>
				<КодПравилаКонвертации>ВидыНоменклатуры                                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ВидыНоменклатуры</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ЕдиницыИзмерения</Код>
				<Наименование>ЕдиницыИзмерения</Наименование>
				<Порядок>1100</Порядок>
				<КодПравилаКонвертации>ЕдиницыИзмерения                                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ЕдиницыИзмерения</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ХранилищеДополнительнойИнформации</Код>
				<Наименование>ХранилищеДополнительнойИнформации</Наименование>
				<Порядок>1200</Порядок>
				<КодПравилаКонвертации>ХранилищеДополнительнойИнформации                 </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ХранилищеДополнительнойИнформации</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Склады</Код>
				<Наименование>Склады</Наименование>
				<Порядок>1250</Порядок>
				<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Склады</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Организации</Код>
				<Наименование>Организации</Наименование>
				<Порядок>1300</Порядок>
				<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Организации</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>КлассификаторСтранМира</Код>
				<Наименование>КлассификаторСтранМира</Наименование>
				<Порядок>1350</Порядок>
				<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.КлассификаторСтранМира</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВидыОплатЧекаККМ</Код>
				<Наименование>ВидыОплатЧекаККМ</Наименование>
				<Порядок>1400</Порядок>
				<КодПравилаКонвертации>ВидыОплатЧекаККМ                                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ВидыОплатЧекаККМ</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ДоговорыЭквайринга</Код>
				<Наименование>ДоговорыЭквайринга</Наименование>
				<Порядок>1450</Порядок>
				<КодПравилаКонвертации>ДоговорыЭквайринга                                </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ДоговорыЭквайринга</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>НоменклатурныеГруппы</Код>
				<Наименование>НоменклатурныеГруппы</Наименование>
				<Порядок>1550</Порядок>
				<КодПравилаКонвертации>НоменклатурныеГруппы                              </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.НоменклатурныеГруппы</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ГруппыПользователей</Код>
				<Наименование>ГруппыПользователей</Наименование>
				<Порядок>1600</Порядок>
				<КодПравилаКонвертации>ГруппыПользователей                               </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ГруппыПользователей</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВидыКонтактнойИнформации</Код>
				<Наименование>ВидыКонтактнойИнформации</Наименование>
				<Порядок>1650</Порядок>
				<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ВидыКонтактнойИнформации</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ХарактеристикиНоменклатуры</Код>
				<Наименование>Номенклатура</Наименование>
				<Порядок>1700</Порядок>
				<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ХарактеристикиНоменклатуры</ОбъектВыборки>
			</Правило>
		</Группа>
		<Группа Отключить="false">
			<Код>ПланыВидовХарактеристик</Код>
			<Наименование>ПланыВидовХарактеристик</Наименование>
			<Порядок>150</Порядок>
			<Правило Отключить="false">
				<Код>НазначенияСвойствКатегорийОбъектов</Код>
				<Наименование>НазначенияСвойствКатегорийОбъектов</Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>НазначенияСвойствКатегорийОбъектов                </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ПланВидовХарактеристикСсылка.НазначенияСвойствКатегорийОбъектов</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>СвойстваОбъектов</Код>
				<Наименование>СвойстваОбъектов</Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>СвойстваОбъектов                                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ПланВидовХарактеристикСсылка.СвойстваОбъектов</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ТипыШтрихкодов</Код>
				<Наименование>ТипыШтрихкодов</Наименование>
				<Порядок>250</Порядок>
				<КодПравилаКонвертации>ТипыШтрихкодов                                    </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ПланВидовХарактеристикСсылка.ТипыШтрихкодов</ОбъектВыборки>
			</Правило>
		</Группа>
		<Группа Отключить="false">
			<Код>РегистрыСведений</Код>
			<Наименование>РегистрыСведений</Наименование>
			<Порядок>200</Порядок>
			<Правило Отключить="false">
				<Код>ЗначенияСвойствОбъектовРегистрСведений</Код>
				<Наименование>ЗначенияСвойствОбъектов</Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>ЗначенияСвойствОбъектовРегистрСведений            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.ЗначенияСвойствОбъектов</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ОтветственныеЛицаОрганизаций</Код>
				<Наименование>ОтветственныеЛицаОрганизаций</Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>ОтветственныеЛицаОрганизации                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.ОтветственныеЛицаОрганизаций</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ПаспортныеДанныеФизЛиц</Код>
				<Наименование>ПаспортныеДанныеФизЛиц</Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>ПаспортныеДанныеФизЛиц                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.ПаспортныеДанныеФизЛиц</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ФИОФизЛиц</Код>
				<Наименование>ФИОФизЛиц</Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>ФИОФизЛиц                                         </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.ФИОФизЛиц</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Штрихкоды</Код>
				<Наименование>Штрихкоды</Наименование>
				<Порядок>250</Порядок>
				<КодПравилаКонвертации>Штрихкоды                                         </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.Штрихкоды</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>КатегорииОбъектовРегистрСведений</Код>
				<Наименование>КатегорииОбъектов</Наименование>
				<Порядок>300</Порядок>
				<КодПравилаКонвертации>КатегорииОбъектовРегистрСведений                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.КатегорииОбъектов</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>КомплектующиеНоменклатуры</Код>
				<Наименование>КомплектующиеНоменклатуры</Наименование>
				<Порядок>350</Порядок>
				<КодПравилаКонвертации>КомплектующиеНоменклатуры                         </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.КомплектующиеНоменклатуры</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>НазначенияСвойствОбъектов</Код>
				<Наименование>НазначенияСвойствОбъектов</Наименование>
				<Порядок>450</Порядок>
				<КодПравилаКонвертации>НазначенияСвойствОбъектов                         </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.НазначенияСвойствОбъектов</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>Отказ = (Объект.Отбор.Свойство.Значение.НазначениеСвойства = ПланыВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Справочник_ХарактеристикиНоменклатуры);</ПередВыгрузкойОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>КонтактнаяИнформация</Код>
				<Наименование>Контактная информация</Наименование>
				<Порядок>500</Порядок>
				<КодПравилаКонвертации>КонтактнаяИнформация                              </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.КонтактнаяИнформация</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>Если Объект.Отбор.Объект.Значение = Неопределено Тогда
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
		</Группа>
	</ПравилаВыгрузкиДанных>
	<ПравилаОчисткиДанных/>
	<Алгоритмы>
		<Алгоритм Имя="ВыгрузитьЕдиницыИзмеренияТабЧасти" ИспользуетсяПриЗагрузке="false">
			<Текст>Для Каждого СтрокаТЧ Из Источник[ИмяТабЧасти] Цикл
	ВыгрузитьПоПравилу(СтрокаТЧ.ЕдиницаИзмерения, ,,,"ЕдиницыИзмерения");
КонецЦикла;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ВыгрузитьКИ" ИспользуетсяПриЗагрузке="false">
			<Текст>Если Не Источник.ЭтоГруппа Тогда

	НаборЗаписей = РегистрыСведений.КонтактнаяИнформация.СоздатьНаборЗаписей();
	
	НаборЗаписей.Отбор.Объект.Установить(Источник.Ссылка);

	Запрос = Новый Запрос;
	Запрос.Текст = "
		|ВЫБРАТЬ
		|	КонтактнаяИнформация.Тип,
		|	КонтактнаяИнформация.Вид
		|ИЗ
		|	РегистрСведений.КонтактнаяИнформация КАК КонтактнаяИнформация
		|ГДЕ
		|	КонтактнаяИнформация.Объект = &amp;Объект";
		
	Запрос.УстановитьПараметр("Объект", Источник.Ссылка);
		
	Выборка = Запрос.Выполнить().Выбрать();

	Пока Выборка.Следующий() Цикл
		
		НаборЗаписей.Отбор.Тип.Установить(Выборка.Тип);
		НаборЗаписей.Отбор.Вид.Установить(Выборка.Вид);
		
		ВыгрузитьПоПравилу(Выборка.Вид);
		
		НаборЗаписей.Прочитать();
		
		ВыгрузитьРегистр(НаборЗаписей,,,,"КонтактнаяИнформация");
		
	КонецЦикла;
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ОбработкаТабличнойЧасти" ИспользуетсяПриЗагрузке="true">
			<Текст>Если Объект[ИмяТабличнойЧасти].Количество() &gt; 0 Тогда
	
	// получим таблицу параметров табличной части
	Если ОбщегоНазначения.ЕстьРеквизитТабЧастиДокумента("ХарактеристикаНоменклатуры", МетаданныеДокумента, ИмяТабличнойЧасти) Тогда
		
		ПараметрыТаблицы = ПараметрыОбъекта[ИмяТабличнойЧасти + "ТабличнаяЧасть"];
		ПровестиЗаписьНеЗаписанныхОбъектов();
		
	КонецЕсли;
	
	Для Каждого СтрокаТабЧасти Из Объект[ИмяТабличнойЧасти] Цикл
		
		//характеристика номенклатуры
		Если ОбщегоНазначения.ЕстьРеквизитТабЧастиДокумента("ХарактеристикаНоменклатуры", МетаданныеДокумента, ИмяТабличнойЧасти) И (СтрокаТабЧасти.НомерСтроки &lt;= ПараметрыТаблицы.Количество()) Тогда
			
			// Получим наименование характеристики товара
			НаименованиеХарактеристикиНоменклатуры = ПараметрыТаблицы[СтрокаТабЧасти.НомерСтроки - 1].НаименованиеХарактеристикиНоменклатуры;
			
			// Производим поиск характеристики товара
			Если НЕ(ЗначениеЗаполнено(СтрокаТабЧасти.ХарактеристикаНоменклатуры) ИЛИ ПустаяСтрока(НаименованиеХарактеристикиНоменклатуры)) Тогда
				
				//не назначенные характеристики не переносим и не ищем.
			Если НРег(СокрЛП(НаименованиеХарактеристикиНоменклатуры)) &lt;&gt; "не назначена" Тогда
				СтрокаТабЧасти.ХарактеристикаНоменклатуры = Справочники.ХарактеристикиНоменклатуры.НайтиПоНаименованию(НаименованиеХарактеристикиНоменклатуры, Истина,, СтрокаТабЧасти.Номенклатура);
				
				// Если не удалось найти - создаем новый элемент
				Если НЕ ЗначениеЗаполнено(СтрокаТабЧасти.ХарактеристикаНоменклатуры) И ЗначениеЗаполнено(СтрокаТабЧасти.Номенклатура) Тогда
					
					ХарактеристикаНоменклатурыОбъект = Справочники.ХарактеристикиНоменклатуры.СоздатьЭлемент();
					ХарактеристикаНоменклатурыОбъект.Владелец     = СтрокаТабЧасти.Номенклатура;
					ХарактеристикаНоменклатурыОбъект.Наименование = НаименованиеХарактеристикиНоменклатуры;
					ХарактеристикаНоменклатурыОбъект.ОбменДанными.Загрузка = Истина;
					ХарактеристикаНоменклатурыОбъект.Записать();
					СтрокаТабЧасти.ХарактеристикаНоменклатуры = ХарактеристикаНоменклатурыОбъект.Ссылка;
					
				КонецЕсли;
				
			КонецЕсли;
			
		КонецЕсли;
			
		КонецЕсли;
		
		//качество
		Если ОбщегоНазначения.ЕстьРеквизитТабЧастиДокумента("Качество", МетаданныеДокумента, ИмяТабличнойЧасти) Тогда
			
			СтрокаТабЧасти.Качество = Справочники.Качество.Новый;
			
		КонецЕсли;
	
		//статус партии
		Если ОбщегоНазначения.ЕстьРеквизитТабЧастиДокумента("СтатусПартии", МетаданныеДокумента, ИмяТабличнойЧасти) Тогда
			
			СтрокаТабЧасти.СтатусПартии = Перечисления.СтатусыПартийТоваров.Купленный;
			
		КонецЕсли;
		
		//Условие автоматической скидки
		Если ОбщегоНазначения.ЕстьРеквизитТабЧастиДокумента("УсловиеАвтоматическойСкидки", МетаданныеДокумента, ИмяТабличнойЧасти) 
			И ОбщегоНазначения.ЕстьРеквизитТабЧастиДокумента("ПроцентАвтоматическихСкидок", МетаданныеДокумента, ИмяТабличнойЧасти) 
			И НЕ СтрокаТабЧасти.ПроцентАвтоматическихСкидок = 0 Тогда
			
			СтрокаТабЧасти.УсловиеАвтоматическойСкидки = Перечисления.УсловияСкидкиНаценки.БезУсловий;
			СтрокаТабЧасти.ЗначениеУсловияАвтоматическойСкидки = 0;
		КонецЕсли;
	КонецЦикла; 
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ОбработкаШапки" ИспользуетсяПриЗагрузке="true">
			<Текст>//признак проведения в управленческом учете
Если ОбщегоНазначения.ЕстьРеквизитДокумента("ОтражатьВУправленческомУчете", МетаданныеДокумента) Тогда
	Объект.ОтражатьВУправленческомУчете = Истина;
КонецЕсли;      


Если ОбщегоНазначения.ЕстьРеквизитДокумента("Подразделение", МетаданныеДокумента) 
	И Не ИскомоеПодразделение.Пустая() И Не ЗначениеЗаполнено(Объект.Подразделение) Тогда
	Объект.Подразделение = ИскомоеПодразделение;
КонецЕсли;


Если ОбщегоНазначения.ЕстьРеквизитДокумента("Организация", МетаданныеДокумента) 
   И Не Объект.Организация.Пустая() И ОбщегоНазначения.ЕстьРеквизитДокумента("ОтражатьВБухгалтерскомУчете", МетаданныеДокумента) Тогда
	
	Если ОбщегоНазначения.ЕстьРеквизитДокумента("ОтражатьВНалоговомУчете", МетаданныеДокумента) Тогда		
		ОтражатьВНУ = "ОтражатьВНалоговомУчете";
	Иначе
		ОтражатьВНУ = "";
	КонецЕсли;
	
	ОбщегоНазначения.ОбработатьПризнакОтраженияВреглУчете(Объект, , ОтражатьВНУ, , Истина);
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ОпределитьВозможностьРедактированияВПриемникеПоТЧ" ИспользуетсяПриЗагрузке="false">
			<Текст>Если ВозможностьРедактированияВПриемнике Тогда

	Для Каждого ТабличнаяЧасть Из ТаблицаДляПроверкиТабличныхЧастей Цикл
	
		Для Каждого СтрокаТЧ Из Источник[ТабличнаяЧасть.ИмяТабличнойЧасти] Цикл
			
			Для Каждого ИмяРеквизита Из ТабличнаяЧасть.МассивРеквизитов Цикл
				
				Если ИмяРеквизита = "Качество" Тогда
					
					Если СтрокаТЧ.Качество &lt;&gt; Справочники.Качество.Новый Тогда
						ВозможностьРедактированияВПриемнике = Ложь;
						Прервать;
					КонецЕсли;
					
				Иначе
					
					Если ЗначениеЗаполнено(СтрокаТЧ[ИмяРеквизита]) Тогда
						ВозможностьРедактированияВПриемнике = Ложь;
						Прервать;
					КонецЕсли;

				КонецЕсли;
				
			КонецЦикла;
			
			//если уже определили, что нельзя редактировать - дальше можно не смотреть
			Если Не ВозможностьРедактированияВПриемнике Тогда
				Прервать;
			КонецЕсли;
			
		КонецЦикла;
		
		//если уже определили, что нельзя редактировать - дальше можно не смотреть
		Если Не ВозможностьРедактированияВПриемнике Тогда
			Прервать;
		КонецЕсли;
		
	КонецЦикла;
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ОпределитьПараметрыМагазина" ИспользуетсяПриЗагрузке="true">
			<Текст>Если ПараметрыОбъекта &lt;&gt; Неопределено И НЕ ПустаяСтрока(ПараметрыОбъекта[ИмяПараметра]) Тогда 
	
	КодМагазина = ПараметрыОбъекта[ИмяПараметра];
	
	Запрос = Новый Запрос(
	"ВЫБРАТЬ
	|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.СкладМагазина,
	|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КассаМагазина,
	|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КассаККММагазина,
	|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.СкладМагазина.Подразделение КАК Подразделение,
	|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.Организация
	|ИЗ
	|	ПланОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.СоответствияМагазиновИСкладов КАК ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов
	|ГДЕ
	|	ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.КодМагазина = &amp;КодМагазина
	|	И ОбменУправлениеТорговлейРозничнаяТорговляСоответствияМагазиновИСкладов.Ссылка = &amp;ЭтотУзел");
	
	Запрос.УстановитьПараметр("КодМагазина", КодМагазина);
	
	Запрос.УстановитьПараметр("ЭтотУзел", УзелОбменаЗагрузкаДанных);
	
	Выборка = Запрос.Выполнить().Выбрать();
	Если Выборка.Следующий() Тогда
		
		ИскомыйСклад         = Выборка.СкладМагазина;
		ИскомаяКасса         = Выборка.КассаМагазина;
		ИскомаяКассаККМ      = Выборка.КассаККММагазина;
		ИскомоеПодразделение = Выборка.Подразделение;
		ИскомаяОрганизация   = Выборка.Организация;
		
	Иначе
		
		#Если Клиент Тогда
			
		Сообщить("Не смог определить склад и кассы магазина " + КодМагазина + ". Проверьте табличную часть ""Соответствия магазинов и складов"" узла плана обмена ""Управление Торговлей Розничная Торговля""!");
		
		#КонецЕсли
		
	КонецЕсли;
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ПолучитьКодМагазинаПоСкладу" ИспользуетсяПриЗагрузке="false">
			<Текст>КодМагазинаИзАлгоритма = "";

Запрос = Новый Запрос(
"ВЫБРАТЬ ПЕРВЫЕ 1
|	ЧистыйСофтПоПравиламКонвертацииСоответствияМагазиновИСкладов.КодМагазина
|ИЗ
|	ПланОбмена.ОбменУправлениеТорговлейРозничнаяТорговля.СоответствияМагазиновИСкладов КАК ЧистыйСофтПоПравиламКонвертацииСоответствияМагазиновИСкладов
|ГДЕ
|	ЧистыйСофтПоПравиламКонвертацииСоответствияМагазиновИСкладов.СкладМагазина = &amp;Склад
|	И ЧистыйСофтПоПравиламКонвертацииСоответствияМагазиновИСкладов.Ссылка = &amp;УзелДляОбмена");

Запрос.УстановитьПараметр("Склад", СкладДляЗапроса);
Запрос.УстановитьПараметр("УзелДляОбмена", УзелОбменаЗагрузкаДанных);

РезультатЗапроса = Запрос.Выполнить();
Если Не РезультатЗапроса.Пустой() Тогда
	
	Выборка = РезультатЗапроса.Выбрать();
	Выборка.Следующий();
	
	КодМагазинаИзАлгоритма = Выборка.КодМагазина;
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="УстановитьВозможностьРедактированияОбъекта" ИспользуетсяПриЗагрузке="true">
			<Текст>//проверим возможность редактирования в базе приемнике
Если Объект.ЭтоНовый() Тогда
	
	СсылкаНаОбъект = Объект.ПолучитьСсылкуНового();
	
Иначе
	
	СсылкаНаОбъект = Объект.Ссылка;
	
КонецЕсли;

Если Булево(ПараметрыОбъекта["ВозможностьРедактированияВПриемнике"]) Тогда
	
	НоваяСтрока        = Параметры.ТаблицаОбъектовРазрешенныхДляРедактирования.Добавить();
	НоваяСтрока.Ссылка = СсылкаНаОбъект;
	
Иначе
	
	НоваяСтрока        = Параметры.ТаблицаОбъектовЗапрещенныхДляРедактирования.Добавить();
	НоваяСтрока.Ссылка = СсылкаНаОбъект;
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="УстановитьДоговорПоКонтрагенту" ИспользуетсяПриЗагрузке="true">
			<Текст>Если ЗначениеЗаполнено(КонтрагентПараметр) 
   И (Не ЗначениеЗаполнено(ДокументОбъект.ДоговорКонтрагента) Или КонтрагентПараметр &lt;&gt; ДокументОбъект.ДоговорКонтрагента.Владелец) Тогда

	СписокВидовДоговоров = Новый СписокЗначений;
	СписокВидовДоговоров.Добавить(ВидДоговора);

	СтруктураПараметров = Новый Структура("ВалютаВзаиморасчетовДоговора, СписокДопустимыхВидовДоговоров");
	СтруктураПараметров.Вставить("ВалютаВзаиморасчетовДоговора"  , ВалютаРегламентированногоУчета);
	СтруктураПараметров.Вставить("СписокДопустимыхВидовДоговоров", СписокВидовДоговоров);
	
	ДоговорКонтрагента = ЗаполнениеДокументов.ПолучитьДоговорПоОрганизацииИКонтрагенту(ОрганизацияПараметр, КонтрагентПараметр, СтруктураПараметров);

	Если ДоговорКонтрагента = Неопределено Тогда
		
		НовыйДоговор                       = Справочники.ДоговорыКонтрагентов.СоздатьЭлемент();
		НовыйДоговор.ОбменДанными.Загрузка = Истина;
		НовыйДоговор.ВалютаВзаиморасчетов  = Параметры.ВалютаРегламентированногоУчета;
		НовыйДоговор.Владелец              = КонтрагентПараметр;
		НовыйДоговор.ВидДоговора           = ВидДоговора;
		НовыйДоговор.Наименование          = "Договор создан из ""1С:Розница 8""";
		НовыйДоговор.ВедениеВзаиморасчетов = Перечисления.ВедениеВзаиморасчетовПоДоговорам.ПоДоговоруВЦелом;
		
		Если ОбщегоНазначения.ЕстьРеквизитДокумента("Организация", МетаданныеДокумента) И ЗначениеЗаполнено(Объект.Организация) Тогда
			НовыйДоговор.Организация = Объект.Организация;
		Иначе
			НовыйДоговор.Организация = Параметры.РазрешеннаяОрганизация;
		КонецЕсли;
		
		Если ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.СПоставщиком Тогда
			
			
				КонтрагентОбъект = КонтрагентПараметр.ПолучитьОбъект();
				Если КонтрагентОбъект&lt;&gt;Неопределено И  НЕ КонтрагентПараметр.Поставщик Тогда   
				КонтрагентОбъект.ОбменДанными.Загрузка = Истина;
				КонтрагентОбъект.Поставщик = Истина;
				КонтрагентОбъект.Записать();
				КонецЕсли;
			
			
		ИначеЕсли ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.СПокупателем Тогда
			
				КонтрагентОбъект = КонтрагентПараметр.ПолучитьОбъект();
			Если КонтрагентОбъект&lt;&gt;Неопределено И  НЕ КонтрагентПараметр.Покупатель Тогда 
                КонтрагентОбъект.ОбменДанными.Загрузка = Истина;
				КонтрагентОбъект.Покупатель = Истина;
				КонтрагентОбъект.Записать();
			КонецЕсли;
			
		КонецЕсли;
		
		НовыйДоговор.Записать();
		
		ДоговорКонтрагента = НовыйДоговор.Ссылка;

	КонецЕсли;
	
	ДокументОбъект.ДоговорКонтрагента = ДоговорКонтрагента;
	
	Если Не ДоговорВТабличнойЧасти Тогда
			
		СтруктураКурсаДокумента = МодульВалютногоУчета.ПолучитьКурсВалюты(ДоговорКонтрагента.ВалютаВзаиморасчетов, ДокументОбъект.Дата);
		
		Если ОбщегоНазначения.ЕстьРеквизитДокумента("ВалютаДокумента", МетаданныеДокумента) Тогда
			ДокументОбъект.ВалютаДокумента = ДоговорКонтрагента.ВалютаВзаиморасчетов;
		КонецЕсли;

		Если ЗначениеЗаполнено(ДоговорКонтрагента.ОсновнойПроект) Тогда
			ДокументОбъект.Проект = ДоговорКонтрагента.ОсновнойПроект;
		КонецЕсли;
		
		// В некоторых документах курс и кратность документа отсутствуют.
		Если ОбщегоНазначения.ЕстьРеквизитДокумента("КурсДокумента", МетаданныеДокумента) Тогда
			ДокументОбъект.КурсДокумента           = СтруктураКурсаДокумента.Курс;
		КонецЕсли;
		
		Если ОбщегоНазначения.ЕстьРеквизитДокумента("КратностьДокумента", МетаданныеДокумента) Тогда
			ДокументОбъект.КратностьДокумента      = СтруктураКурсаДокумента.Кратность;
		КонецЕсли;
		
		Если ОбщегоНазначения.ЕстьРеквизитДокумента("КурсВзаиморасчетов", МетаданныеДокумента) Тогда
			ДокументОбъект.КурсВзаиморасчетов      = СтруктураКурсаДокумента.Курс;
		КонецЕсли;
		
		Если ОбщегоНазначения.ЕстьРеквизитДокумента("КратностьВзаиморасчетов", МетаданныеДокумента) Тогда
			ДокументОбъект.КратностьВзаиморасчетов = СтруктураКурсаДокумента.Кратность;
		КонецЕсли;
		
	Иначе
		
		СтруктураКурсаДокумента = МодульВалютногоУчета.ПолучитьКурсВалюты(ДоговорКонтрагента.ВалютаВзаиморасчетов, ДатаПараметр);
		
		Если ОбщегоНазначения.ЕстьРеквизитТабЧастиДокумента("КурсВзаиморасчетов", МетаданныеДокумента, ИмяТабличнойЧасти) Тогда
			ДокументОбъект.КурсВзаиморасчетов      = СтруктураКурсаДокумента.Курс;
		КонецЕсли;
		
		Если ОбщегоНазначения.ЕстьРеквизитТабЧастиДокумента("КратностьВзаиморасчетов", МетаданныеДокумента, ИмяТабличнойЧасти) Тогда
			ДокументОбъект.КратностьВзаиморасчетов = СтруктураКурсаДокумента.Кратность;
		КонецЕсли;
		
	КонецЕсли;
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="УстановитьЕдиницуИзмеренияТабличнойЧасти" ИспользуетсяПриЗагрузке="true">
			<Текст>ТаблицаКодовЕИ = ПараметрыОбъекта[ИмяТабличнойЧасти + "ТабличнаяЧасть"];

Для Каждого СтрокаТовары Из Объект[ИмяТабличнойЧасти] Цикл
	
	// так как могут передаться единицы измерения номенклатур-характеристик (что не нужно),
	//выгружаем только коды единиц измерения, а потом по ним находим нужную единицу
	НужнаяЕдиницаИзмерения = Справочники.ЕдиницыИзмерения.НайтиПоКоду(ТаблицаКодовЕИ[СтрокаТовары.НомерСтроки - 1].КодЕдиницыИзмерения
																					 ,,, СтрокаТовары.Номенклатура);
	СтрокаТовары.ЕдиницаИзмерения = НужнаяЕдиницаИзмерения;
КонецЦикла;</Текст>
		</Алгоритм>
	</Алгоритмы>
	<Запросы>
		<Запрос Имя="НаличиеОбъектаВЗапрещенныхКРедактированию" ИспользуетсяПриЗагрузке="false">
			<Текст>ВЫБРАТЬ ПЕРВЫЕ 1
	ЗапрещенныеДляРедактирования.Ссылка
ИЗ
	РегистрСведений.ОбъектыЗапрещенныеДляРедактирования КАК ЗапрещенныеДляРедактирования
ГДЕ
	ЗапрещенныеДляРедактирования.Ссылка = &amp;Ссылка</Текст>
		</Запрос>
	</Запросы>
</ПравилаОбмена>